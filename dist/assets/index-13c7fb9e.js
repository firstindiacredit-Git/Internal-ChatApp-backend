function rg(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function sg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pf={exports:{}},Zi={},Lf={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),og=Symbol.for("react.portal"),ig=Symbol.for("react.fragment"),lg=Symbol.for("react.strict_mode"),ag=Symbol.for("react.profiler"),cg=Symbol.for("react.provider"),ug=Symbol.for("react.context"),dg=Symbol.for("react.forward_ref"),fg=Symbol.for("react.suspense"),mg=Symbol.for("react.memo"),hg=Symbol.for("react.lazy"),Vu=Symbol.iterator;function pg(e){return e===null||typeof e!="object"?null:(e=Vu&&e[Vu]||e["@@iterator"],typeof e=="function"?e:null)}var Of={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uf=Object.assign,Ff={};function fs(e,t,n){this.props=e,this.context=t,this.refs=Ff,this.updater=n||Of}fs.prototype.isReactComponent={};fs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $f(){}$f.prototype=fs.prototype;function Tc(e,t,n){this.props=e,this.context=t,this.refs=Ff,this.updater=n||Of}var Ic=Tc.prototype=new $f;Ic.constructor=Tc;Uf(Ic,fs.prototype);Ic.isPureReactComponent=!0;var Gu=Array.isArray,Df=Object.prototype.hasOwnProperty,_c={current:null},zf={key:!0,ref:!0,__self:!0,__source:!0};function Bf(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Df.call(t,r)&&!zf.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:yo,type:e,key:i,ref:l,props:s,_owner:_c.current}}function gg(e,t){return{$$typeof:yo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rc(e){return typeof e=="object"&&e!==null&&e.$$typeof===yo}function xg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Hu=/\/+/g;function Pl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xg(""+e.key):t.toString(36)}function Zo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case yo:case og:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+Pl(l,0):r,Gu(s)?(n="",e!=null&&(n=e.replace(Hu,"$&/")+"/"),Zo(s,t,n,"",function(u){return u})):s!=null&&(Rc(s)&&(s=gg(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Hu,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",Gu(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Pl(i,a);l+=Zo(i,t,n,c,s)}else if(c=pg(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Pl(i,a++),l+=Zo(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Mo(e,t,n){if(e==null)return e;var r=[],s=0;return Zo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function yg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nt={current:null},ei={transition:null},vg={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:ei,ReactCurrentOwner:_c};function Vf(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Mo,forEach:function(e,t,n){Mo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Mo(e,function(){t++}),t},toArray:function(e){return Mo(e,function(t){return t})||[]},only:function(e){if(!Rc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=fs;be.Fragment=ig;be.Profiler=ag;be.PureComponent=Tc;be.StrictMode=lg;be.Suspense=fg;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vg;be.act=Vf;be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Uf({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=_c.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Df.call(t,c)&&!zf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:yo,type:e.type,key:s,ref:i,props:r,_owner:l}};be.createContext=function(e){return e={$$typeof:ug,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cg,_context:e},e.Consumer=e};be.createElement=Bf;be.createFactory=function(e){var t=Bf.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:dg,render:e}};be.isValidElement=Rc;be.lazy=function(e){return{$$typeof:hg,_payload:{_status:-1,_result:e},_init:yg}};be.memo=function(e,t){return{$$typeof:mg,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=ei.transition;ei.transition={};try{e()}finally{ei.transition=t}};be.unstable_act=Vf;be.useCallback=function(e,t){return Nt.current.useCallback(e,t)};be.useContext=function(e){return Nt.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return Nt.current.useDeferredValue(e)};be.useEffect=function(e,t){return Nt.current.useEffect(e,t)};be.useId=function(){return Nt.current.useId()};be.useImperativeHandle=function(e,t,n){return Nt.current.useImperativeHandle(e,t,n)};be.useInsertionEffect=function(e,t){return Nt.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return Nt.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return Nt.current.useMemo(e,t)};be.useReducer=function(e,t,n){return Nt.current.useReducer(e,t,n)};be.useRef=function(e){return Nt.current.useRef(e)};be.useState=function(e){return Nt.current.useState(e)};be.useSyncExternalStore=function(e,t,n){return Nt.current.useSyncExternalStore(e,t,n)};be.useTransition=function(){return Nt.current.useTransition()};be.version="18.3.1";Lf.exports=be;var y=Lf.exports;const el=sg(y),wg=rg({__proto__:null,default:el},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg=y,Ng=Symbol.for("react.element"),bg=Symbol.for("react.fragment"),kg=Object.prototype.hasOwnProperty,Sg=jg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Cg={key:!0,ref:!0,__self:!0,__source:!0};function Gf(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)kg.call(t,r)&&!Cg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Ng,type:e,key:i,ref:l,props:s,_owner:Sg.current}}Zi.Fragment=bg;Zi.jsx=Gf;Zi.jsxs=Gf;Pf.exports=Zi;var o=Pf.exports,ha={},Hf={exports:{}},Dt={},Wf={exports:{}},qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,T){var U=z.length;z.push(T);e:for(;0<U;){var L=U-1>>>1,B=z[L];if(0<s(B,T))z[L]=T,z[U]=B,U=L;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var T=z[0],U=z.pop();if(U!==T){z[0]=U;e:for(var L=0,B=z.length,ue=B>>>1;L<ue;){var xe=2*(L+1)-1,ke=z[xe],pe=xe+1,Ie=z[pe];if(0>s(ke,U))pe<B&&0>s(Ie,ke)?(z[L]=Ie,z[pe]=U,L=pe):(z[L]=ke,z[xe]=U,L=xe);else if(pe<B&&0>s(Ie,U))z[L]=Ie,z[pe]=U,L=pe;else break e}}return T}function s(z,T){var U=z.sortIndex-T.sortIndex;return U!==0?U:z.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var c=[],u=[],m=1,f=null,j=3,I=!1,h=!1,v=!1,S=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(z){for(var T=n(u);T!==null;){if(T.callback===null)r(u);else if(T.startTime<=z)r(u),T.sortIndex=T.expirationTime,t(c,T);else break;T=n(u)}}function _(z){if(v=!1,g(z),!h)if(n(c)!==null)h=!0,le(R);else{var T=n(u);T!==null&&fe(_,T.startTime-z)}}function R(z,T){h=!1,v&&(v=!1,w(G),G=-1),I=!0;var U=j;try{for(g(T),f=n(c);f!==null&&(!(f.expirationTime>T)||z&&!K());){var L=f.callback;if(typeof L=="function"){f.callback=null,j=f.priorityLevel;var B=L(f.expirationTime<=T);T=e.unstable_now(),typeof B=="function"?f.callback=B:f===n(c)&&r(c),g(T)}else r(c);f=n(c)}if(f!==null)var ue=!0;else{var xe=n(u);xe!==null&&fe(_,xe.startTime-T),ue=!1}return ue}finally{f=null,j=U,I=!1}}var A=!1,P=null,G=-1,Q=5,X=-1;function K(){return!(e.unstable_now()-X<Q)}function ne(){if(P!==null){var z=e.unstable_now();X=z;var T=!0;try{T=P(!0,z)}finally{T?$():(A=!1,P=null)}}else A=!1}var $;if(typeof x=="function")$=function(){x(ne)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ee=Y.port2;Y.port1.onmessage=ne,$=function(){ee.postMessage(null)}}else $=function(){S(ne,0)};function le(z){P=z,A||(A=!0,$())}function fe(z,T){G=S(function(){z(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){h||I||(h=!0,le(R))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(z){switch(j){case 1:case 2:case 3:var T=3;break;default:T=j}var U=j;j=T;try{return z()}finally{j=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,T){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var U=j;j=z;try{return T()}finally{j=U}},e.unstable_scheduleCallback=function(z,T,U){var L=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?L+U:L):U=L,z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=U+B,z={id:m++,callback:T,priorityLevel:z,startTime:U,expirationTime:B,sortIndex:-1},U>L?(z.sortIndex=U,t(u,z),n(c)===null&&z===n(u)&&(v?(w(G),G=-1):v=!0,fe(_,U-L))):(z.sortIndex=B,t(c,z),h||I||(h=!0,le(R))),z},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(z){var T=j;return function(){var U=j;j=T;try{return z.apply(this,arguments)}finally{j=U}}}})(qf);Wf.exports=qf;var Eg=Wf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tg=y,$t=Eg;function W(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kf=new Set,Js={};function Ir(e,t){ss(e,t),ss(e+"Capture",t)}function ss(e,t){for(Js[e]=t,e=0;e<t.length;e++)Kf.add(t[e])}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pa=Object.prototype.hasOwnProperty,Ig=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wu={},qu={};function _g(e){return pa.call(qu,e)?!0:pa.call(Wu,e)?!1:Ig.test(e)?qu[e]=!0:(Wu[e]=!0,!1)}function Rg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Mg(e,t,n,r){if(t===null||typeof t>"u"||Rg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mc=/[\-:]([a-z])/g;function Ac(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mc,Ac);ut[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mc,Ac);ut[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mc,Ac);ut[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pc(e,t,n,r){var s=ut.hasOwnProperty(t)?ut[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Mg(t,n,s,r)&&(n=null),r||s===null?_g(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ln=Tg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ao=Symbol.for("react.element"),Ur=Symbol.for("react.portal"),Fr=Symbol.for("react.fragment"),Lc=Symbol.for("react.strict_mode"),ga=Symbol.for("react.profiler"),Yf=Symbol.for("react.provider"),Qf=Symbol.for("react.context"),Oc=Symbol.for("react.forward_ref"),xa=Symbol.for("react.suspense"),ya=Symbol.for("react.suspense_list"),Uc=Symbol.for("react.memo"),Dn=Symbol.for("react.lazy"),Jf=Symbol.for("react.offscreen"),Ku=Symbol.iterator;function ks(e){return e===null||typeof e!="object"?null:(e=Ku&&e[Ku]||e["@@iterator"],typeof e=="function"?e:null)}var We=Object.assign,Ll;function Ps(e){if(Ll===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ll=t&&t[1]||""}return`
`+Ll+e}var Ol=!1;function Ul(e,t){if(!e||Ol)return"";Ol=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,a=i.length-1;1<=l&&0<=a&&s[l]!==i[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==i[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==i[a]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=a);break}}}finally{Ol=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ps(e):""}function Ag(e){switch(e.tag){case 5:return Ps(e.type);case 16:return Ps("Lazy");case 13:return Ps("Suspense");case 19:return Ps("SuspenseList");case 0:case 2:case 15:return e=Ul(e.type,!1),e;case 11:return e=Ul(e.type.render,!1),e;case 1:return e=Ul(e.type,!0),e;default:return""}}function va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fr:return"Fragment";case Ur:return"Portal";case ga:return"Profiler";case Lc:return"StrictMode";case xa:return"Suspense";case ya:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Qf:return(e.displayName||"Context")+".Consumer";case Yf:return(e._context.displayName||"Context")+".Provider";case Oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uc:return t=e.displayName||null,t!==null?t:va(e.type)||"Memo";case Dn:t=e._payload,e=e._init;try{return va(e(t))}catch{}}return null}function Pg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return va(t);case 8:return t===Lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Lg(e){var t=Xf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Po(e){e._valueTracker||(e._valueTracker=Lg(e))}function Zf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function vi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wa(e,t){var n=t.checked;return We({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Yu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sr(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function em(e,t){t=t.checked,t!=null&&Pc(e,"checked",t,!1)}function ja(e,t){em(e,t);var n=sr(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Na(e,t.type,n):t.hasOwnProperty("defaultValue")&&Na(e,t.type,sr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Qu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Na(e,t,n){(t!=="number"||vi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ls=Array.isArray;function Yr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sr(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ba(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(W(91));return We({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ju(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(W(92));if(Ls(n)){if(1<n.length)throw Error(W(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sr(n)}}function tm(e,t){var n=sr(t.value),r=sr(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function nm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ka(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?nm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Lo,rm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Lo=Lo||document.createElement("div"),Lo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Lo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Og=["Webkit","ms","Moz","O"];Object.keys($s).forEach(function(e){Og.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$s[t]=$s[e]})});function sm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$s.hasOwnProperty(e)&&$s[e]?(""+t).trim():t+"px"}function om(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Ug=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sa(e,t){if(t){if(Ug[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(W(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(W(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(W(61))}if(t.style!=null&&typeof t.style!="object")throw Error(W(62))}}function Ca(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ea=null;function Fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ta=null,Qr=null,Jr=null;function Zu(e){if(e=jo(e)){if(typeof Ta!="function")throw Error(W(280));var t=e.stateNode;t&&(t=ol(t),Ta(e.stateNode,e.type,t))}}function im(e){Qr?Jr?Jr.push(e):Jr=[e]:Qr=e}function lm(){if(Qr){var e=Qr,t=Jr;if(Jr=Qr=null,Zu(e),t)for(e=0;e<t.length;e++)Zu(t[e])}}function am(e,t){return e(t)}function cm(){}var Fl=!1;function um(e,t,n){if(Fl)return e(t,n);Fl=!0;try{return am(e,t,n)}finally{Fl=!1,(Qr!==null||Jr!==null)&&(cm(),lm())}}function Zs(e,t){var n=e.stateNode;if(n===null)return null;var r=ol(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(W(231,t,typeof n));return n}var Ia=!1;if(_n)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){Ia=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{Ia=!1}function Fg(e,t,n,r,s,i,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(m){this.onError(m)}}var Ds=!1,wi=null,ji=!1,_a=null,$g={onError:function(e){Ds=!0,wi=e}};function Dg(e,t,n,r,s,i,l,a,c){Ds=!1,wi=null,Fg.apply($g,arguments)}function zg(e,t,n,r,s,i,l,a,c){if(Dg.apply(this,arguments),Ds){if(Ds){var u=wi;Ds=!1,wi=null}else throw Error(W(198));ji||(ji=!0,_a=u)}}function _r(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ed(e){if(_r(e)!==e)throw Error(W(188))}function Bg(e){var t=e.alternate;if(!t){if(t=_r(e),t===null)throw Error(W(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ed(s),e;if(i===r)return ed(s),t;i=i.sibling}throw Error(W(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,r=i;break}if(a===r){l=!0,r=s,n=i;break}a=a.sibling}if(!l){for(a=i.child;a;){if(a===n){l=!0,n=i,r=s;break}if(a===r){l=!0,r=i,n=s;break}a=a.sibling}if(!l)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?e:t}function fm(e){return e=Bg(e),e!==null?mm(e):null}function mm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mm(e);if(t!==null)return t;e=e.sibling}return null}var hm=$t.unstable_scheduleCallback,td=$t.unstable_cancelCallback,Vg=$t.unstable_shouldYield,Gg=$t.unstable_requestPaint,Ye=$t.unstable_now,Hg=$t.unstable_getCurrentPriorityLevel,$c=$t.unstable_ImmediatePriority,pm=$t.unstable_UserBlockingPriority,Ni=$t.unstable_NormalPriority,Wg=$t.unstable_LowPriority,gm=$t.unstable_IdlePriority,tl=null,xn=null;function qg(e){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(tl,e,void 0,(e.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:Qg,Kg=Math.log,Yg=Math.LN2;function Qg(e){return e>>>=0,e===0?32:31-(Kg(e)/Yg|0)|0}var Oo=64,Uo=4194304;function Os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?r=Os(a):(i&=l,i!==0&&(r=Os(i)))}else l=n&~s,l!==0?r=Os(l):i!==0&&(r=Os(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-sn(t),s=1<<n,r|=e[n],t&=~s;return r}function Jg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-sn(i),a=1<<l,c=s[l];c===-1?(!(a&n)||a&r)&&(s[l]=Jg(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Ra(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xm(){var e=Oo;return Oo<<=1,!(Oo&4194240)&&(Oo=64),e}function $l(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sn(t),e[t]=n}function Zg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Dc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-sn(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ae=0;function ym(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vm,zc,wm,jm,Nm,Ma=!1,Fo=[],Kn=null,Yn=null,Qn=null,eo=new Map,to=new Map,Bn=[],e0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nd(e,t){switch(e){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":eo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(t.pointerId)}}function Cs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=jo(t),t!==null&&zc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function t0(e,t,n,r,s){switch(t){case"focusin":return Kn=Cs(Kn,e,t,n,r,s),!0;case"dragenter":return Yn=Cs(Yn,e,t,n,r,s),!0;case"mouseover":return Qn=Cs(Qn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return eo.set(i,Cs(eo.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,to.set(i,Cs(to.get(i)||null,e,t,n,r,s)),!0}return!1}function bm(e){var t=pr(e.target);if(t!==null){var n=_r(t);if(n!==null){if(t=n.tag,t===13){if(t=dm(n),t!==null){e.blockedOn=t,Nm(e.priority,function(){wm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ti(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Aa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ea=r,n.target.dispatchEvent(r),Ea=null}else return t=jo(n),t!==null&&zc(t),e.blockedOn=n,!1;t.shift()}return!0}function rd(e,t,n){ti(e)&&n.delete(t)}function n0(){Ma=!1,Kn!==null&&ti(Kn)&&(Kn=null),Yn!==null&&ti(Yn)&&(Yn=null),Qn!==null&&ti(Qn)&&(Qn=null),eo.forEach(rd),to.forEach(rd)}function Es(e,t){e.blockedOn===t&&(e.blockedOn=null,Ma||(Ma=!0,$t.unstable_scheduleCallback($t.unstable_NormalPriority,n0)))}function no(e){function t(s){return Es(s,e)}if(0<Fo.length){Es(Fo[0],e);for(var n=1;n<Fo.length;n++){var r=Fo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Kn!==null&&Es(Kn,e),Yn!==null&&Es(Yn,e),Qn!==null&&Es(Qn,e),eo.forEach(t),to.forEach(t),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)bm(n),n.blockedOn===null&&Bn.shift()}var Xr=Ln.ReactCurrentBatchConfig,ki=!0;function r0(e,t,n,r){var s=Ae,i=Xr.transition;Xr.transition=null;try{Ae=1,Bc(e,t,n,r)}finally{Ae=s,Xr.transition=i}}function s0(e,t,n,r){var s=Ae,i=Xr.transition;Xr.transition=null;try{Ae=4,Bc(e,t,n,r)}finally{Ae=s,Xr.transition=i}}function Bc(e,t,n,r){if(ki){var s=Aa(e,t,n,r);if(s===null)Yl(e,t,r,Si,n),nd(e,r);else if(t0(s,e,t,n,r))r.stopPropagation();else if(nd(e,r),t&4&&-1<e0.indexOf(e)){for(;s!==null;){var i=jo(s);if(i!==null&&vm(i),i=Aa(e,t,n,r),i===null&&Yl(e,t,r,Si,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yl(e,t,r,null,n)}}var Si=null;function Aa(e,t,n,r){if(Si=null,e=Fc(r),e=pr(e),e!==null)if(t=_r(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dm(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Si=e,null}function km(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hg()){case $c:return 1;case pm:return 4;case Ni:case Wg:return 16;case gm:return 536870912;default:return 16}default:return 16}}var Hn=null,Vc=null,ni=null;function Sm(){if(ni)return ni;var e,t=Vc,n=t.length,r,s="value"in Hn?Hn.value:Hn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return ni=s.slice(e,1<r?1-r:void 0)}function ri(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $o(){return!0}function sd(){return!1}function zt(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$o:sd,this.isPropagationStopped=sd,this}return We(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),t}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gc=zt(ms),wo=We({},ms,{view:0,detail:0}),o0=zt(wo),Dl,zl,Ts,nl=We({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ts&&(Ts&&e.type==="mousemove"?(Dl=e.screenX-Ts.screenX,zl=e.screenY-Ts.screenY):zl=Dl=0,Ts=e),Dl)},movementY:function(e){return"movementY"in e?e.movementY:zl}}),od=zt(nl),i0=We({},nl,{dataTransfer:0}),l0=zt(i0),a0=We({},wo,{relatedTarget:0}),Bl=zt(a0),c0=We({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),u0=zt(c0),d0=We({},ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),f0=zt(d0),m0=We({},ms,{data:0}),id=zt(m0),h0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},p0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=g0[e])?!!t[e]:!1}function Hc(){return x0}var y0=We({},wo,{key:function(e){if(e.key){var t=h0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ri(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?p0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hc,charCode:function(e){return e.type==="keypress"?ri(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ri(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),v0=zt(y0),w0=We({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ld=zt(w0),j0=We({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hc}),N0=zt(j0),b0=We({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),k0=zt(b0),S0=We({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),C0=zt(S0),E0=[9,13,27,32],Wc=_n&&"CompositionEvent"in window,zs=null;_n&&"documentMode"in document&&(zs=document.documentMode);var T0=_n&&"TextEvent"in window&&!zs,Cm=_n&&(!Wc||zs&&8<zs&&11>=zs),ad=String.fromCharCode(32),cd=!1;function Em(e,t){switch(e){case"keyup":return E0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function I0(e,t){switch(e){case"compositionend":return Tm(t);case"keypress":return t.which!==32?null:(cd=!0,ad);case"textInput":return e=t.data,e===ad&&cd?null:e;default:return null}}function _0(e,t){if($r)return e==="compositionend"||!Wc&&Em(e,t)?(e=Sm(),ni=Vc=Hn=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cm&&t.locale!=="ko"?null:t.data;default:return null}}var R0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ud(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!R0[e.type]:t==="textarea"}function Im(e,t,n,r){im(r),t=Ci(t,"onChange"),0<t.length&&(n=new Gc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bs=null,ro=null;function M0(e){Dm(e,0)}function rl(e){var t=Br(e);if(Zf(t))return e}function A0(e,t){if(e==="change")return t}var _m=!1;if(_n){var Vl;if(_n){var Gl="oninput"in document;if(!Gl){var dd=document.createElement("div");dd.setAttribute("oninput","return;"),Gl=typeof dd.oninput=="function"}Vl=Gl}else Vl=!1;_m=Vl&&(!document.documentMode||9<document.documentMode)}function fd(){Bs&&(Bs.detachEvent("onpropertychange",Rm),ro=Bs=null)}function Rm(e){if(e.propertyName==="value"&&rl(ro)){var t=[];Im(t,ro,e,Fc(e)),um(M0,t)}}function P0(e,t,n){e==="focusin"?(fd(),Bs=t,ro=n,Bs.attachEvent("onpropertychange",Rm)):e==="focusout"&&fd()}function L0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rl(ro)}function O0(e,t){if(e==="click")return rl(t)}function U0(e,t){if(e==="input"||e==="change")return rl(t)}function F0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:F0;function so(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!pa.call(t,s)||!cn(e[s],t[s]))return!1}return!0}function md(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hd(e,t){var n=md(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=md(n)}}function Mm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Am(){for(var e=window,t=vi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=vi(e.document)}return t}function qc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $0(e){var t=Am(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Mm(n.ownerDocument.documentElement,n)){if(r!==null&&qc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=hd(n,i);var l=hd(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var D0=_n&&"documentMode"in document&&11>=document.documentMode,Dr=null,Pa=null,Vs=null,La=!1;function pd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;La||Dr==null||Dr!==vi(r)||(r=Dr,"selectionStart"in r&&qc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vs&&so(Vs,r)||(Vs=r,r=Ci(Pa,"onSelect"),0<r.length&&(t=new Gc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Dr)))}function Do(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var zr={animationend:Do("Animation","AnimationEnd"),animationiteration:Do("Animation","AnimationIteration"),animationstart:Do("Animation","AnimationStart"),transitionend:Do("Transition","TransitionEnd")},Hl={},Pm={};_n&&(Pm=document.createElement("div").style,"AnimationEvent"in window||(delete zr.animationend.animation,delete zr.animationiteration.animation,delete zr.animationstart.animation),"TransitionEvent"in window||delete zr.transitionend.transition);function sl(e){if(Hl[e])return Hl[e];if(!zr[e])return e;var t=zr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pm)return Hl[e]=t[n];return e}var Lm=sl("animationend"),Om=sl("animationiteration"),Um=sl("animationstart"),Fm=sl("transitionend"),$m=new Map,gd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(e,t){$m.set(e,t),Ir(t,[e])}for(var Wl=0;Wl<gd.length;Wl++){var ql=gd[Wl],z0=ql.toLowerCase(),B0=ql[0].toUpperCase()+ql.slice(1);ir(z0,"on"+B0)}ir(Lm,"onAnimationEnd");ir(Om,"onAnimationIteration");ir(Um,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(Fm,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function xd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zg(r,t,void 0,e),e.currentTarget=null}function Dm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;xd(s,a,u),i=c}else for(l=0;l<r.length;l++){if(a=r[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;xd(s,a,u),i=c}}}if(ji)throw e=_a,ji=!1,_a=null,e}function $e(e,t){var n=t[Da];n===void 0&&(n=t[Da]=new Set);var r=e+"__bubble";n.has(r)||(zm(t,e,2,!1),n.add(r))}function Kl(e,t,n){var r=0;t&&(r|=4),zm(n,e,r,t)}var zo="_reactListening"+Math.random().toString(36).slice(2);function oo(e){if(!e[zo]){e[zo]=!0,Kf.forEach(function(n){n!=="selectionchange"&&(V0.has(n)||Kl(n,!1,e),Kl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zo]||(t[zo]=!0,Kl("selectionchange",!1,t))}}function zm(e,t,n,r){switch(km(t)){case 1:var s=r0;break;case 4:s=s0;break;default:s=Bc}n=s.bind(null,t,n,e),s=void 0,!Ia||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Yl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;a!==null;){if(l=pr(a),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}a=a.parentNode}}r=r.return}um(function(){var u=i,m=Fc(n),f=[];e:{var j=$m.get(e);if(j!==void 0){var I=Gc,h=e;switch(e){case"keypress":if(ri(n)===0)break e;case"keydown":case"keyup":I=v0;break;case"focusin":h="focus",I=Bl;break;case"focusout":h="blur",I=Bl;break;case"beforeblur":case"afterblur":I=Bl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=l0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=N0;break;case Lm:case Om:case Um:I=u0;break;case Fm:I=k0;break;case"scroll":I=o0;break;case"wheel":I=C0;break;case"copy":case"cut":case"paste":I=f0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=ld}var v=(t&4)!==0,S=!v&&e==="scroll",w=v?j!==null?j+"Capture":null:j;v=[];for(var x=u,g;x!==null;){g=x;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,w!==null&&(_=Zs(x,w),_!=null&&v.push(io(x,_,g)))),S)break;x=x.return}0<v.length&&(j=new I(j,h,null,n,m),f.push({event:j,listeners:v}))}}if(!(t&7)){e:{if(j=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",j&&n!==Ea&&(h=n.relatedTarget||n.fromElement)&&(pr(h)||h[Rn]))break e;if((I||j)&&(j=m.window===m?m:(j=m.ownerDocument)?j.defaultView||j.parentWindow:window,I?(h=n.relatedTarget||n.toElement,I=u,h=h?pr(h):null,h!==null&&(S=_r(h),h!==S||h.tag!==5&&h.tag!==6)&&(h=null)):(I=null,h=u),I!==h)){if(v=od,_="onMouseLeave",w="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=ld,_="onPointerLeave",w="onPointerEnter",x="pointer"),S=I==null?j:Br(I),g=h==null?j:Br(h),j=new v(_,x+"leave",I,n,m),j.target=S,j.relatedTarget=g,_=null,pr(m)===u&&(v=new v(w,x+"enter",h,n,m),v.target=g,v.relatedTarget=S,_=v),S=_,I&&h)t:{for(v=I,w=h,x=0,g=v;g;g=Or(g))x++;for(g=0,_=w;_;_=Or(_))g++;for(;0<x-g;)v=Or(v),x--;for(;0<g-x;)w=Or(w),g--;for(;x--;){if(v===w||w!==null&&v===w.alternate)break t;v=Or(v),w=Or(w)}v=null}else v=null;I!==null&&yd(f,j,I,v,!1),h!==null&&S!==null&&yd(f,S,h,v,!0)}}e:{if(j=u?Br(u):window,I=j.nodeName&&j.nodeName.toLowerCase(),I==="select"||I==="input"&&j.type==="file")var R=A0;else if(ud(j))if(_m)R=U0;else{R=L0;var A=P0}else(I=j.nodeName)&&I.toLowerCase()==="input"&&(j.type==="checkbox"||j.type==="radio")&&(R=O0);if(R&&(R=R(e,u))){Im(f,R,n,m);break e}A&&A(e,j,u),e==="focusout"&&(A=j._wrapperState)&&A.controlled&&j.type==="number"&&Na(j,"number",j.value)}switch(A=u?Br(u):window,e){case"focusin":(ud(A)||A.contentEditable==="true")&&(Dr=A,Pa=u,Vs=null);break;case"focusout":Vs=Pa=Dr=null;break;case"mousedown":La=!0;break;case"contextmenu":case"mouseup":case"dragend":La=!1,pd(f,n,m);break;case"selectionchange":if(D0)break;case"keydown":case"keyup":pd(f,n,m)}var P;if(Wc)e:{switch(e){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else $r?Em(e,n)&&(G="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(Cm&&n.locale!=="ko"&&($r||G!=="onCompositionStart"?G==="onCompositionEnd"&&$r&&(P=Sm()):(Hn=m,Vc="value"in Hn?Hn.value:Hn.textContent,$r=!0)),A=Ci(u,G),0<A.length&&(G=new id(G,e,null,n,m),f.push({event:G,listeners:A}),P?G.data=P:(P=Tm(n),P!==null&&(G.data=P)))),(P=T0?I0(e,n):_0(e,n))&&(u=Ci(u,"onBeforeInput"),0<u.length&&(m=new id("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:u}),m.data=P))}Dm(f,t)})}function io(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ci(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Zs(e,n),i!=null&&r.unshift(io(e,i,s)),i=Zs(e,t),i!=null&&r.push(io(e,i,s))),e=e.return}return r}function Or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function yd(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Zs(n,i),c!=null&&l.unshift(io(n,c,a))):s||(c=Zs(n,i),c!=null&&l.push(io(n,c,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var G0=/\r\n?/g,H0=/\u0000|\uFFFD/g;function vd(e){return(typeof e=="string"?e:""+e).replace(G0,`
`).replace(H0,"")}function Bo(e,t,n){if(t=vd(t),vd(e)!==t&&n)throw Error(W(425))}function Ei(){}var Oa=null,Ua=null;function Fa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $a=typeof setTimeout=="function"?setTimeout:void 0,W0=typeof clearTimeout=="function"?clearTimeout:void 0,wd=typeof Promise=="function"?Promise:void 0,q0=typeof queueMicrotask=="function"?queueMicrotask:typeof wd<"u"?function(e){return wd.resolve(null).then(e).catch(K0)}:$a;function K0(e){setTimeout(function(){throw e})}function Ql(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),no(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);no(t)}function Jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),pn="__reactFiber$"+hs,lo="__reactProps$"+hs,Rn="__reactContainer$"+hs,Da="__reactEvents$"+hs,Y0="__reactListeners$"+hs,Q0="__reactHandles$"+hs;function pr(e){var t=e[pn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[pn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jd(e);e!==null;){if(n=e[pn])return n;e=jd(e)}return t}e=n,n=e.parentNode}return null}function jo(e){return e=e[pn]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Br(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(W(33))}function ol(e){return e[lo]||null}var za=[],Vr=-1;function lr(e){return{current:e}}function De(e){0>Vr||(e.current=za[Vr],za[Vr]=null,Vr--)}function Ue(e,t){Vr++,za[Vr]=e.current,e.current=t}var or={},pt=lr(or),_t=lr(!1),br=or;function os(e,t){var n=e.type.contextTypes;if(!n)return or;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(e){return e=e.childContextTypes,e!=null}function Ti(){De(_t),De(pt)}function Nd(e,t,n){if(pt.current!==or)throw Error(W(168));Ue(pt,t),Ue(_t,n)}function Bm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(W(108,Pg(e)||"Unknown",s));return We({},n,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||or,br=pt.current,Ue(pt,e),Ue(_t,_t.current),!0}function bd(e,t,n){var r=e.stateNode;if(!r)throw Error(W(169));n?(e=Bm(e,t,br),r.__reactInternalMemoizedMergedChildContext=e,De(_t),De(pt),Ue(pt,e)):De(_t),Ue(_t,n)}var Cn=null,il=!1,Jl=!1;function Vm(e){Cn===null?Cn=[e]:Cn.push(e)}function J0(e){il=!0,Vm(e)}function ar(){if(!Jl&&Cn!==null){Jl=!0;var e=0,t=Ae;try{var n=Cn;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Cn=null,il=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(e+1)),hm($c,ar),s}finally{Ae=t,Jl=!1}}return null}var Gr=[],Hr=0,_i=null,Ri=0,Gt=[],Ht=0,kr=null,En=1,Tn="";function mr(e,t){Gr[Hr++]=Ri,Gr[Hr++]=_i,_i=e,Ri=t}function Gm(e,t,n){Gt[Ht++]=En,Gt[Ht++]=Tn,Gt[Ht++]=kr,kr=e;var r=En;e=Tn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,En=1<<32-sn(t)+s|n<<s|r,Tn=i+e}else En=1<<i|n<<s|r,Tn=e}function Kc(e){e.return!==null&&(mr(e,1),Gm(e,1,0))}function Yc(e){for(;e===_i;)_i=Gr[--Hr],Gr[Hr]=null,Ri=Gr[--Hr],Gr[Hr]=null;for(;e===kr;)kr=Gt[--Ht],Gt[Ht]=null,Tn=Gt[--Ht],Gt[Ht]=null,En=Gt[--Ht],Gt[Ht]=null}var Ft=null,Ut=null,ze=!1,nn=null;function Hm(e,t){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function kd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,Ut=Jn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,Ut=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=kr!==null?{id:En,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ft=e,Ut=null,!0):!1;default:return!1}}function Ba(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Va(e){if(ze){var t=Ut;if(t){var n=t;if(!kd(e,t)){if(Ba(e))throw Error(W(418));t=Jn(n.nextSibling);var r=Ft;t&&kd(e,t)?Hm(r,n):(e.flags=e.flags&-4097|2,ze=!1,Ft=e)}}else{if(Ba(e))throw Error(W(418));e.flags=e.flags&-4097|2,ze=!1,Ft=e}}}function Sd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Vo(e){if(e!==Ft)return!1;if(!ze)return Sd(e),ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Fa(e.type,e.memoizedProps)),t&&(t=Ut)){if(Ba(e))throw Wm(),Error(W(418));for(;t;)Hm(e,t),t=Jn(t.nextSibling)}if(Sd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(W(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ut=Jn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ut=null}}else Ut=Ft?Jn(e.stateNode.nextSibling):null;return!0}function Wm(){for(var e=Ut;e;)e=Jn(e.nextSibling)}function is(){Ut=Ft=null,ze=!1}function Qc(e){nn===null?nn=[e]:nn.push(e)}var X0=Ln.ReactCurrentBatchConfig;function Is(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var a=s.refs;l===null?delete a[i]:a[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,e))}return e}function Go(e,t){throw e=Object.prototype.toString.call(t),Error(W(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cd(e){var t=e._init;return t(e._payload)}function qm(e){function t(w,x){if(e){var g=w.deletions;g===null?(w.deletions=[x],w.flags|=16):g.push(x)}}function n(w,x){if(!e)return null;for(;x!==null;)t(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=tr(w,x),w.index=0,w.sibling=null,w}function i(w,x,g){return w.index=g,e?(g=w.alternate,g!==null?(g=g.index,g<x?(w.flags|=2,x):g):(w.flags|=2,x)):(w.flags|=1048576,x)}function l(w){return e&&w.alternate===null&&(w.flags|=2),w}function a(w,x,g,_){return x===null||x.tag!==6?(x=sa(g,w.mode,_),x.return=w,x):(x=s(x,g),x.return=w,x)}function c(w,x,g,_){var R=g.type;return R===Fr?m(w,x,g.props.children,_,g.key):x!==null&&(x.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Dn&&Cd(R)===x.type)?(_=s(x,g.props),_.ref=Is(w,x,g),_.return=w,_):(_=ui(g.type,g.key,g.props,null,w.mode,_),_.ref=Is(w,x,g),_.return=w,_)}function u(w,x,g,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==g.containerInfo||x.stateNode.implementation!==g.implementation?(x=oa(g,w.mode,_),x.return=w,x):(x=s(x,g.children||[]),x.return=w,x)}function m(w,x,g,_,R){return x===null||x.tag!==7?(x=jr(g,w.mode,_,R),x.return=w,x):(x=s(x,g),x.return=w,x)}function f(w,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return x=sa(""+x,w.mode,g),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ao:return g=ui(x.type,x.key,x.props,null,w.mode,g),g.ref=Is(w,null,x),g.return=w,g;case Ur:return x=oa(x,w.mode,g),x.return=w,x;case Dn:var _=x._init;return f(w,_(x._payload),g)}if(Ls(x)||ks(x))return x=jr(x,w.mode,g,null),x.return=w,x;Go(w,x)}return null}function j(w,x,g,_){var R=x!==null?x.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return R!==null?null:a(w,x,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ao:return g.key===R?c(w,x,g,_):null;case Ur:return g.key===R?u(w,x,g,_):null;case Dn:return R=g._init,j(w,x,R(g._payload),_)}if(Ls(g)||ks(g))return R!==null?null:m(w,x,g,_,null);Go(w,g)}return null}function I(w,x,g,_,R){if(typeof _=="string"&&_!==""||typeof _=="number")return w=w.get(g)||null,a(x,w,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ao:return w=w.get(_.key===null?g:_.key)||null,c(x,w,_,R);case Ur:return w=w.get(_.key===null?g:_.key)||null,u(x,w,_,R);case Dn:var A=_._init;return I(w,x,g,A(_._payload),R)}if(Ls(_)||ks(_))return w=w.get(g)||null,m(x,w,_,R,null);Go(x,_)}return null}function h(w,x,g,_){for(var R=null,A=null,P=x,G=x=0,Q=null;P!==null&&G<g.length;G++){P.index>G?(Q=P,P=null):Q=P.sibling;var X=j(w,P,g[G],_);if(X===null){P===null&&(P=Q);break}e&&P&&X.alternate===null&&t(w,P),x=i(X,x,G),A===null?R=X:A.sibling=X,A=X,P=Q}if(G===g.length)return n(w,P),ze&&mr(w,G),R;if(P===null){for(;G<g.length;G++)P=f(w,g[G],_),P!==null&&(x=i(P,x,G),A===null?R=P:A.sibling=P,A=P);return ze&&mr(w,G),R}for(P=r(w,P);G<g.length;G++)Q=I(P,w,G,g[G],_),Q!==null&&(e&&Q.alternate!==null&&P.delete(Q.key===null?G:Q.key),x=i(Q,x,G),A===null?R=Q:A.sibling=Q,A=Q);return e&&P.forEach(function(K){return t(w,K)}),ze&&mr(w,G),R}function v(w,x,g,_){var R=ks(g);if(typeof R!="function")throw Error(W(150));if(g=R.call(g),g==null)throw Error(W(151));for(var A=R=null,P=x,G=x=0,Q=null,X=g.next();P!==null&&!X.done;G++,X=g.next()){P.index>G?(Q=P,P=null):Q=P.sibling;var K=j(w,P,X.value,_);if(K===null){P===null&&(P=Q);break}e&&P&&K.alternate===null&&t(w,P),x=i(K,x,G),A===null?R=K:A.sibling=K,A=K,P=Q}if(X.done)return n(w,P),ze&&mr(w,G),R;if(P===null){for(;!X.done;G++,X=g.next())X=f(w,X.value,_),X!==null&&(x=i(X,x,G),A===null?R=X:A.sibling=X,A=X);return ze&&mr(w,G),R}for(P=r(w,P);!X.done;G++,X=g.next())X=I(P,w,G,X.value,_),X!==null&&(e&&X.alternate!==null&&P.delete(X.key===null?G:X.key),x=i(X,x,G),A===null?R=X:A.sibling=X,A=X);return e&&P.forEach(function(ne){return t(w,ne)}),ze&&mr(w,G),R}function S(w,x,g,_){if(typeof g=="object"&&g!==null&&g.type===Fr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ao:e:{for(var R=g.key,A=x;A!==null;){if(A.key===R){if(R=g.type,R===Fr){if(A.tag===7){n(w,A.sibling),x=s(A,g.props.children),x.return=w,w=x;break e}}else if(A.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Dn&&Cd(R)===A.type){n(w,A.sibling),x=s(A,g.props),x.ref=Is(w,A,g),x.return=w,w=x;break e}n(w,A);break}else t(w,A);A=A.sibling}g.type===Fr?(x=jr(g.props.children,w.mode,_,g.key),x.return=w,w=x):(_=ui(g.type,g.key,g.props,null,w.mode,_),_.ref=Is(w,x,g),_.return=w,w=_)}return l(w);case Ur:e:{for(A=g.key;x!==null;){if(x.key===A)if(x.tag===4&&x.stateNode.containerInfo===g.containerInfo&&x.stateNode.implementation===g.implementation){n(w,x.sibling),x=s(x,g.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else t(w,x);x=x.sibling}x=oa(g,w.mode,_),x.return=w,w=x}return l(w);case Dn:return A=g._init,S(w,x,A(g._payload),_)}if(Ls(g))return h(w,x,g,_);if(ks(g))return v(w,x,g,_);Go(w,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,g),x.return=w,w=x):(n(w,x),x=sa(g,w.mode,_),x.return=w,w=x),l(w)):n(w,x)}return S}var ls=qm(!0),Km=qm(!1),Mi=lr(null),Ai=null,Wr=null,Jc=null;function Xc(){Jc=Wr=Ai=null}function Zc(e){var t=Mi.current;De(Mi),e._currentValue=t}function Ga(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Zr(e,t){Ai=e,Jc=Wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(It=!0),e.firstContext=null)}function Qt(e){var t=e._currentValue;if(Jc!==e)if(e={context:e,memoizedValue:t,next:null},Wr===null){if(Ai===null)throw Error(W(308));Wr=e,Ai.dependencies={lanes:0,firstContext:e}}else Wr=Wr.next=e;return t}var gr=null;function eu(e){gr===null?gr=[e]:gr.push(e)}function Ym(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,eu(t)):(n.next=s.next,s.next=n),t.interleaved=n,Mn(e,r)}function Mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zn=!1;function tu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function In(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Mn(e,n)}return s=r.interleaved,s===null?(t.next=t,eu(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mn(e,n)}function si(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dc(e,n)}}function Ed(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pi(e,t,n,r){var s=e.updateQueue;zn=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var m=e.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==l&&(a===null?m.firstBaseUpdate=u:a.next=u,m.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;l=0,m=u=c=null,a=i;do{var j=a.lane,I=a.eventTime;if((r&j)===j){m!==null&&(m=m.next={eventTime:I,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,v=a;switch(j=t,I=n,v.tag){case 1:if(h=v.payload,typeof h=="function"){f=h.call(I,f,j);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=v.payload,j=typeof h=="function"?h.call(I,f,j):h,j==null)break e;f=We({},f,j);break e;case 2:zn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,j=s.effects,j===null?s.effects=[a]:j.push(a))}else I={eventTime:I,lane:j,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(u=m=I,c=f):m=m.next=I,l|=j;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;j=a,a=j.next,j.next=null,s.lastBaseUpdate=j,s.shared.pending=null}}while(1);if(m===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Cr|=l,e.lanes=l,e.memoizedState=f}}function Td(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(W(191,s));s.call(r)}}}var No={},yn=lr(No),ao=lr(No),co=lr(No);function xr(e){if(e===No)throw Error(W(174));return e}function nu(e,t){switch(Ue(co,t),Ue(ao,e),Ue(yn,No),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ka(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ka(t,e)}De(yn),Ue(yn,t)}function as(){De(yn),De(ao),De(co)}function Jm(e){xr(co.current);var t=xr(yn.current),n=ka(t,e.type);t!==n&&(Ue(ao,e),Ue(yn,n))}function ru(e){ao.current===e&&(De(yn),De(ao))}var Ge=lr(0);function Li(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xl=[];function su(){for(var e=0;e<Xl.length;e++)Xl[e]._workInProgressVersionPrimary=null;Xl.length=0}var oi=Ln.ReactCurrentDispatcher,Zl=Ln.ReactCurrentBatchConfig,Sr=0,He=null,tt=null,st=null,Oi=!1,Gs=!1,uo=0,Z0=0;function dt(){throw Error(W(321))}function ou(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cn(e[n],t[n]))return!1;return!0}function iu(e,t,n,r,s,i){if(Sr=i,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=e===null||e.memoizedState===null?rx:sx,e=n(r,s),Gs){i=0;do{if(Gs=!1,uo=0,25<=i)throw Error(W(301));i+=1,st=tt=null,t.updateQueue=null,oi.current=ox,e=n(r,s)}while(Gs)}if(oi.current=Ui,t=tt!==null&&tt.next!==null,Sr=0,st=tt=He=null,Oi=!1,t)throw Error(W(300));return e}function lu(){var e=uo!==0;return uo=0,e}function hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?He.memoizedState=st=e:st=st.next=e,st}function Jt(){if(tt===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=tt.next;var t=st===null?He.memoizedState:st.next;if(t!==null)st=t,tt=e;else{if(e===null)throw Error(W(310));tt=e,e={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},st===null?He.memoizedState=st=e:st=st.next=e}return st}function fo(e,t){return typeof t=="function"?t(e):t}function ea(e){var t=Jt(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=tt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=l=null,c=null,u=i;do{var m=u.lane;if((Sr&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,l=r):c=c.next=f,He.lanes|=m,Cr|=m}u=u.next}while(u!==null&&u!==i);c===null?l=r:c.next=a,cn(r,t.memoizedState)||(It=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,He.lanes|=i,Cr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ta(e){var t=Jt(),n=t.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);cn(i,t.memoizedState)||(It=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Xm(){}function Zm(e,t){var n=He,r=Jt(),s=t(),i=!cn(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,au(nh.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,mo(9,th.bind(null,n,r,s,t),void 0,null),ot===null)throw Error(W(349));Sr&30||eh(n,t,s)}return s}function eh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function th(e,t,n,r){t.value=n,t.getSnapshot=r,rh(t)&&sh(e)}function nh(e,t,n){return n(function(){rh(t)&&sh(e)})}function rh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cn(e,n)}catch{return!0}}function sh(e){var t=Mn(e,1);t!==null&&on(t,e,1,-1)}function Id(e){var t=hn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},t.queue=e,e=e.dispatch=nx.bind(null,He,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function oh(){return Jt().memoizedState}function ii(e,t,n,r){var s=hn();He.flags|=e,s.memoizedState=mo(1|t,n,void 0,r===void 0?null:r)}function ll(e,t,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(tt!==null){var l=tt.memoizedState;if(i=l.destroy,r!==null&&ou(r,l.deps)){s.memoizedState=mo(t,n,i,r);return}}He.flags|=e,s.memoizedState=mo(1|t,n,i,r)}function _d(e,t){return ii(8390656,8,e,t)}function au(e,t){return ll(2048,8,e,t)}function ih(e,t){return ll(4,2,e,t)}function lh(e,t){return ll(4,4,e,t)}function ah(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ch(e,t,n){return n=n!=null?n.concat([e]):null,ll(4,4,ah.bind(null,t,e),n)}function cu(){}function uh(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dh(e,t){var n=Jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ou(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fh(e,t,n){return Sr&21?(cn(n,t)||(n=xm(),He.lanes|=n,Cr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,It=!0),e.memoizedState=n)}function ex(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=Zl.transition;Zl.transition={};try{e(!1),t()}finally{Ae=n,Zl.transition=r}}function mh(){return Jt().memoizedState}function tx(e,t,n){var r=er(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hh(e))ph(t,n);else if(n=Ym(e,t,n,r),n!==null){var s=jt();on(n,e,r,s),gh(n,t,r)}}function nx(e,t,n){var r=er(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hh(e))ph(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,a=i(l,n);if(s.hasEagerState=!0,s.eagerState=a,cn(a,l)){var c=t.interleaved;c===null?(s.next=s,eu(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Ym(e,t,s,r),n!==null&&(s=jt(),on(n,e,r,s),gh(n,t,r))}}function hh(e){var t=e.alternate;return e===He||t!==null&&t===He}function ph(e,t){Gs=Oi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function gh(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Dc(e,n)}}var Ui={readContext:Qt,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useInsertionEffect:dt,useLayoutEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useMutableSource:dt,useSyncExternalStore:dt,useId:dt,unstable_isNewReconciler:!1},rx={readContext:Qt,useCallback:function(e,t){return hn().memoizedState=[e,t===void 0?null:t],e},useContext:Qt,useEffect:_d,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ii(4194308,4,ah.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return ii(4,2,e,t)},useMemo:function(e,t){var n=hn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tx.bind(null,He,e),[r.memoizedState,e]},useRef:function(e){var t=hn();return e={current:e},t.memoizedState=e},useState:Id,useDebugValue:cu,useDeferredValue:function(e){return hn().memoizedState=e},useTransition:function(){var e=Id(!1),t=e[0];return e=ex.bind(null,e[1]),hn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=He,s=hn();if(ze){if(n===void 0)throw Error(W(407));n=n()}else{if(n=t(),ot===null)throw Error(W(349));Sr&30||eh(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,_d(nh.bind(null,r,i,e),[e]),r.flags|=2048,mo(9,th.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=hn(),t=ot.identifierPrefix;if(ze){var n=Tn,r=En;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=uo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Z0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sx={readContext:Qt,useCallback:uh,useContext:Qt,useEffect:au,useImperativeHandle:ch,useInsertionEffect:ih,useLayoutEffect:lh,useMemo:dh,useReducer:ea,useRef:oh,useState:function(){return ea(fo)},useDebugValue:cu,useDeferredValue:function(e){var t=Jt();return fh(t,tt.memoizedState,e)},useTransition:function(){var e=ea(fo)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:mh,unstable_isNewReconciler:!1},ox={readContext:Qt,useCallback:uh,useContext:Qt,useEffect:au,useImperativeHandle:ch,useInsertionEffect:ih,useLayoutEffect:lh,useMemo:dh,useReducer:ta,useRef:oh,useState:function(){return ta(fo)},useDebugValue:cu,useDeferredValue:function(e){var t=Jt();return tt===null?t.memoizedState=e:fh(t,tt.memoizedState,e)},useTransition:function(){var e=ta(fo)[0],t=Jt().memoizedState;return[e,t]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:mh,unstable_isNewReconciler:!1};function Zt(e,t){if(e&&e.defaultProps){t=We({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ha(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:We({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var al={isMounted:function(e){return(e=e._reactInternals)?_r(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jt(),s=er(e),i=In(r,s);i.payload=t,n!=null&&(i.callback=n),t=Xn(e,i,s),t!==null&&(on(t,e,s,r),si(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jt(),s=er(e),i=In(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Xn(e,i,s),t!==null&&(on(t,e,s,r),si(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jt(),r=er(e),s=In(n,r);s.tag=2,t!=null&&(s.callback=t),t=Xn(e,s,r),t!==null&&(on(t,e,r,n),si(t,e,r))}};function Rd(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!so(n,r)||!so(s,i):!0}function xh(e,t,n){var r=!1,s=or,i=t.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=Rt(t)?br:pt.current,r=t.contextTypes,i=(r=r!=null)?os(e,s):or),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=al,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Md(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&al.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},tu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=Rt(t)?br:pt.current,s.context=os(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ha(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&al.enqueueReplaceState(s,s.state,null),Pi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do n+=Ag(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function na(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function qa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ix=typeof WeakMap=="function"?WeakMap:Map;function yh(e,t,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$i||($i=!0,rc=r),qa(e,t)},n}function vh(e,t,n){n=In(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){qa(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qa(e,t),typeof r!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Ad(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ix;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=wx.bind(null,e,t,n),t.then(e,e))}function Pd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ld(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=In(-1,1),t.tag=2,Xn(n,t,1))),n.lanes|=1),e)}var lx=Ln.ReactCurrentOwner,It=!1;function wt(e,t,n,r){t.child=e===null?Km(t,null,n,r):ls(t,e.child,n,r)}function Od(e,t,n,r,s){n=n.render;var i=t.ref;return Zr(t,s),r=iu(e,t,n,r,i,s),n=lu(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,An(e,t,s)):(ze&&n&&Kc(t),t.flags|=1,wt(e,t,r,s),t.child)}function Ud(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!xu(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,wh(e,t,i,r,s)):(e=ui(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:so,n(l,r)&&e.ref===t.ref)return An(e,t,s)}return t.flags|=1,e=tr(i,r),e.ref=t.ref,e.return=t,t.child=e}function wh(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(so(i,r)&&e.ref===t.ref)if(It=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(It=!0);else return t.lanes=e.lanes,An(e,t,s)}return Ka(e,t,n,r,s)}function jh(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(Kr,Ot),Ot|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(Kr,Ot),Ot|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ue(Kr,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ue(Kr,Ot),Ot|=r;return wt(e,t,s,n),t.child}function Nh(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ka(e,t,n,r,s){var i=Rt(n)?br:pt.current;return i=os(t,i),Zr(t,s),n=iu(e,t,n,r,i,s),r=lu(),e!==null&&!It?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,An(e,t,s)):(ze&&r&&Kc(t),t.flags|=1,wt(e,t,n,s),t.child)}function Fd(e,t,n,r,s){if(Rt(n)){var i=!0;Ii(t)}else i=!1;if(Zr(t,s),t.stateNode===null)li(e,t),xh(t,n,r),Wa(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qt(u):(u=Rt(n)?br:pt.current,u=os(t,u));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";f||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Md(t,l,r,u),zn=!1;var j=t.memoizedState;l.state=j,Pi(t,r,l,s),c=t.memoizedState,a!==r||j!==c||_t.current||zn?(typeof m=="function"&&(Ha(t,n,m,r),c=t.memoizedState),(a=zn||Rd(t,n,a,r,j,c,u))?(f||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=u,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Qm(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Zt(t.type,a),l.props=u,f=t.pendingProps,j=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=Rt(n)?br:pt.current,c=os(t,c));var I=n.getDerivedStateFromProps;(m=typeof I=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==f||j!==c)&&Md(t,l,r,c),zn=!1,j=t.memoizedState,l.state=j,Pi(t,r,l,s);var h=t.memoizedState;a!==f||j!==h||_t.current||zn?(typeof I=="function"&&(Ha(t,n,I,r),h=t.memoizedState),(u=zn||Rd(t,n,u,r,j,h,c)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,h,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,h,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),l.props=r,l.state=h,l.context=c,r=u):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),r=!1)}return Ya(e,t,n,r,i,s)}function Ya(e,t,n,r,s,i){Nh(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&bd(t,n,!1),An(e,t,i);r=t.stateNode,lx.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ls(t,e.child,null,i),t.child=ls(t,null,a,i)):wt(e,t,a,i),t.memoizedState=r.state,s&&bd(t,n,!0),t.child}function bh(e){var t=e.stateNode;t.pendingContext?Nd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nd(e,t.context,!1),nu(e,t.containerInfo)}function $d(e,t,n,r,s){return is(),Qc(s),t.flags|=256,wt(e,t,n,r),t.child}var Qa={dehydrated:null,treeContext:null,retryLane:0};function Ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function kh(e,t,n){var r=t.pendingProps,s=Ge.current,i=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ue(Ge,s&1),e===null)return Va(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=dl(l,r,0,null),e=jr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ja(n),t.memoizedState=Qa,e):uu(t,l));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return ax(e,t,l,r,a,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=tr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=tr(a,i):(i=jr(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Qa,r}return i=e.child,e=i.sibling,r=tr(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uu(e,t){return t=dl({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ho(e,t,n,r){return r!==null&&Qc(r),ls(t,e.child,null,n),e=uu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ax(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=na(Error(W(422))),Ho(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=dl({mode:"visible",children:r.children},s,0,null),i=jr(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ls(t,e.child,null,l),t.child.memoizedState=Ja(l),t.memoizedState=Qa,i);if(!(t.mode&1))return Ho(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(W(419)),r=na(i,r,void 0),Ho(e,t,l,r)}if(a=(l&e.childLanes)!==0,It||a){if(r=ot,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mn(e,s),on(r,e,s,-1))}return gu(),r=na(Error(W(421))),Ho(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=jx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ut=Jn(s.nextSibling),Ft=t,ze=!0,nn=null,e!==null&&(Gt[Ht++]=En,Gt[Ht++]=Tn,Gt[Ht++]=kr,En=e.id,Tn=e.overflow,kr=t),t=uu(t,r.children),t.flags|=4096,t)}function Dd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ga(e.return,t,n)}function ra(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Sh(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(wt(e,t,r.children,n),r=Ge.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dd(e,n,t);else if(e.tag===19)Dd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ue(Ge,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Li(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ra(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Li(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ra(t,!0,n,null,i);break;case"together":ra(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function li(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function An(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(W(153));if(t.child!==null){for(e=t.child,n=tr(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=tr(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cx(e,t,n){switch(t.tag){case 3:bh(t),is();break;case 5:Jm(t);break;case 1:Rt(t.type)&&Ii(t);break;case 4:nu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ue(Mi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ue(Ge,Ge.current&1),t.flags|=128,null):n&t.child.childLanes?kh(e,t,n):(Ue(Ge,Ge.current&1),e=An(e,t,n),e!==null?e.sibling:null);Ue(Ge,Ge.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Sh(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ue(Ge,Ge.current),r)break;return null;case 22:case 23:return t.lanes=0,jh(e,t,n)}return An(e,t,n)}var Ch,Xa,Eh,Th;Ch=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xa=function(){};Eh=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,xr(yn.current);var i=null;switch(n){case"input":s=wa(e,s),r=wa(e,r),i=[];break;case"select":s=We({},s,{value:void 0}),r=We({},r,{value:void 0}),i=[];break;case"textarea":s=ba(e,s),r=ba(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ei)}Sa(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Js.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Js.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&$e("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Th=function(e,t,n,r){n!==r&&(t.flags|=4)};function _s(e,t){if(!ze)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ux(e,t,n){var r=t.pendingProps;switch(Yc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return Rt(t.type)&&Ti(),ft(t),null;case 3:return r=t.stateNode,as(),De(_t),De(pt),su(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(ic(nn),nn=null))),Xa(e,t),ft(t),null;case 5:ru(t);var s=xr(co.current);if(n=t.type,e!==null&&t.stateNode!=null)Eh(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(W(166));return ft(t),null}if(e=xr(yn.current),Vo(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[pn]=t,r[lo]=i,e=(t.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(s=0;s<Us.length;s++)$e(Us[s],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Yu(r,i),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$e("invalid",r);break;case"textarea":Ju(r,i),$e("invalid",r)}Sa(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var a=i[l];l==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bo(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bo(r.textContent,a,e),s=["children",""+a]):Js.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&$e("scroll",r)}switch(n){case"input":Po(r),Qu(r,i,!0);break;case"textarea":Po(r),Xu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ei)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=nm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pn]=t,e[lo]=r,Ch(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ca(n,r),n){case"dialog":$e("cancel",e),$e("close",e),s=r;break;case"iframe":case"object":case"embed":$e("load",e),s=r;break;case"video":case"audio":for(s=0;s<Us.length;s++)$e(Us[s],e);s=r;break;case"source":$e("error",e),s=r;break;case"img":case"image":case"link":$e("error",e),$e("load",e),s=r;break;case"details":$e("toggle",e),s=r;break;case"input":Yu(e,r),s=wa(e,r),$e("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=We({},r,{value:void 0}),$e("invalid",e);break;case"textarea":Ju(e,r),s=ba(e,r),$e("invalid",e);break;default:s=r}Sa(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?om(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rm(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xs(e,c):typeof c=="number"&&Xs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Js.hasOwnProperty(i)?c!=null&&i==="onScroll"&&$e("scroll",e):c!=null&&Pc(e,i,c,l))}switch(n){case"input":Po(e),Qu(e,r,!1);break;case"textarea":Po(e),Xu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sr(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Yr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Yr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)Th(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(W(166));if(n=xr(co.current),xr(yn.current),Vo(t)){if(r=t.stateNode,n=t.memoizedProps,r[pn]=t,(i=r.nodeValue!==n)&&(e=Ft,e!==null))switch(e.tag){case 3:Bo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bo(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=t,t.stateNode=r}return ft(t),null;case 13:if(De(Ge),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ze&&Ut!==null&&t.mode&1&&!(t.flags&128))Wm(),is(),t.flags|=98560,i=!1;else if(i=Vo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(W(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[pn]=t}else is(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),i=!1}else nn!==null&&(ic(nn),nn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ge.current&1?nt===0&&(nt=3):gu())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return as(),Xa(e,t),e===null&&oo(t.stateNode.containerInfo),ft(t),null;case 10:return Zc(t.type._context),ft(t),null;case 17:return Rt(t.type)&&Ti(),ft(t),null;case 19:if(De(Ge),i=t.memoizedState,i===null)return ft(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)_s(i,!1);else{if(nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Li(e),l!==null){for(t.flags|=128,_s(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ue(Ge,Ge.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ye()>us&&(t.flags|=128,r=!0,_s(i,!1),t.lanes=4194304)}else{if(!r)if(e=Li(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),_s(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ze)return ft(t),null}else 2*Ye()-i.renderingStartTime>us&&n!==1073741824&&(t.flags|=128,r=!0,_s(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=Ge.current,Ue(Ge,r?n&1|2:n&1),t):(ft(t),null);case 22:case 23:return pu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ot&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(W(156,t.tag))}function dx(e,t){switch(Yc(t),t.tag){case 1:return Rt(t.type)&&Ti(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return as(),De(_t),De(pt),su(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ru(t),null;case 13:if(De(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(W(340));is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return De(Ge),null;case 4:return as(),null;case 10:return Zc(t.type._context),null;case 22:case 23:return pu(),null;case 24:return null;default:return null}}var Wo=!1,mt=!1,fx=typeof WeakSet=="function"?WeakSet:Set,Z=null;function qr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(e,t,r)}else n.current=null}function Za(e,t,n){try{n()}catch(r){Ke(e,t,r)}}var zd=!1;function mx(e,t){if(Oa=ki,e=Am(),qc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,u=0,m=0,f=e,j=null;t:for(;;){for(var I;f!==n||s!==0&&f.nodeType!==3||(a=l+s),f!==i||r!==0&&f.nodeType!==3||(c=l+r),f.nodeType===3&&(l+=f.nodeValue.length),(I=f.firstChild)!==null;)j=f,f=I;for(;;){if(f===e)break t;if(j===n&&++u===s&&(a=l),j===i&&++m===r&&(c=l),(I=f.nextSibling)!==null)break;f=j,j=f.parentNode}f=I}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ua={focusedElem:e,selectionRange:n},ki=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var v=h.memoizedProps,S=h.memoizedState,w=t.stateNode,x=w.getSnapshotBeforeUpdate(t.elementType===t.type?v:Zt(t.type,v),S);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(_){Ke(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return h=zd,zd=!1,h}function Hs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Za(t,n,i)}s=s.next}while(s!==r)}}function cl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ec(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Ih(e){var t=e.alternate;t!==null&&(e.alternate=null,Ih(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[lo],delete t[Da],delete t[Y0],delete t[Q0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _h(e){return e.tag===5||e.tag===3||e.tag===4}function Bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_h(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ei));else if(r!==4&&(e=e.child,e!==null))for(tc(e,t,n),e=e.sibling;e!==null;)tc(e,t,n),e=e.sibling}function nc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(nc(e,t,n),e=e.sibling;e!==null;)nc(e,t,n),e=e.sibling}var at=null,en=!1;function Fn(e,t,n){for(n=n.child;n!==null;)Rh(e,t,n),n=n.sibling}function Rh(e,t,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(tl,n)}catch{}switch(n.tag){case 5:mt||qr(n,t);case 6:var r=at,s=en;at=null,Fn(e,t,n),at=r,en=s,at!==null&&(en?(e=at,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):at.removeChild(n.stateNode));break;case 18:at!==null&&(en?(e=at,n=n.stateNode,e.nodeType===8?Ql(e.parentNode,n):e.nodeType===1&&Ql(e,n),no(e)):Ql(at,n.stateNode));break;case 4:r=at,s=en,at=n.stateNode.containerInfo,en=!0,Fn(e,t,n),at=r,en=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Za(n,t,l),s=s.next}while(s!==r)}Fn(e,t,n);break;case 1:if(!mt&&(qr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,t,a)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,Fn(e,t,n),mt=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Vd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new fx),t.forEach(function(r){var s=Nx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:at=a.stateNode,en=!1;break e;case 3:at=a.stateNode.containerInfo,en=!0;break e;case 4:at=a.stateNode.containerInfo,en=!0;break e}a=a.return}if(at===null)throw Error(W(160));Rh(i,l,s),at=null,en=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ke(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mh(t,e),t=t.sibling}function Mh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),fn(e),r&4){try{Hs(3,e,e.return),cl(3,e)}catch(v){Ke(e,e.return,v)}try{Hs(5,e,e.return)}catch(v){Ke(e,e.return,v)}}break;case 1:Xt(t,e),fn(e),r&512&&n!==null&&qr(n,n.return);break;case 5:if(Xt(t,e),fn(e),r&512&&n!==null&&qr(n,n.return),e.flags&32){var s=e.stateNode;try{Xs(s,"")}catch(v){Ke(e,e.return,v)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&em(s,i),Ca(a,l);var u=Ca(a,i);for(l=0;l<c.length;l+=2){var m=c[l],f=c[l+1];m==="style"?om(s,f):m==="dangerouslySetInnerHTML"?rm(s,f):m==="children"?Xs(s,f):Pc(s,m,f,u)}switch(a){case"input":ja(s,i);break;case"textarea":tm(s,i);break;case"select":var j=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var I=i.value;I!=null?Yr(s,!!i.multiple,I,!1):j!==!!i.multiple&&(i.defaultValue!=null?Yr(s,!!i.multiple,i.defaultValue,!0):Yr(s,!!i.multiple,i.multiple?[]:"",!1))}s[lo]=i}catch(v){Ke(e,e.return,v)}}break;case 6:if(Xt(t,e),fn(e),r&4){if(e.stateNode===null)throw Error(W(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Ke(e,e.return,v)}}break;case 3:if(Xt(t,e),fn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{no(t.containerInfo)}catch(v){Ke(e,e.return,v)}break;case 4:Xt(t,e),fn(e);break;case 13:Xt(t,e),fn(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(mu=Ye())),r&4&&Vd(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(mt=(u=mt)||m,Xt(t,e),mt=u):Xt(t,e),fn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(Z=e,m=e.child;m!==null;){for(f=Z=m;Z!==null;){switch(j=Z,I=j.child,j.tag){case 0:case 11:case 14:case 15:Hs(4,j,j.return);break;case 1:qr(j,j.return);var h=j.stateNode;if(typeof h.componentWillUnmount=="function"){r=j,n=j.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(v){Ke(r,n,v)}}break;case 5:qr(j,j.return);break;case 22:if(j.memoizedState!==null){Hd(f);continue}}I!==null?(I.return=j,Z=I):Hd(f)}m=m.sibling}e:for(m=null,f=e;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,c=f.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=sm("display",l))}catch(v){Ke(e,e.return,v)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Ke(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xt(t,e),fn(e),r&4&&Vd(e);break;case 21:break;default:Xt(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_h(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Xs(s,""),r.flags&=-33);var i=Bd(e);nc(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,a=Bd(e);tc(e,a,l);break;default:throw Error(W(161))}}catch(c){Ke(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hx(e,t,n){Z=e,Ah(e)}function Ah(e,t,n){for(var r=(e.mode&1)!==0;Z!==null;){var s=Z,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Wo;if(!l){var a=s.alternate,c=a!==null&&a.memoizedState!==null||mt;a=Wo;var u=mt;if(Wo=l,(mt=c)&&!u)for(Z=s;Z!==null;)l=Z,c=l.child,l.tag===22&&l.memoizedState!==null?Wd(s):c!==null?(c.return=l,Z=c):Wd(s);for(;i!==null;)Z=i,Ah(i),i=i.sibling;Z=s,Wo=a,mt=u}Gd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Z=i):Gd(e)}}function Gd(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mt||cl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Zt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Td(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Td(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&no(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}mt||t.flags&512&&ec(t)}catch(j){Ke(t,t.return,j)}}if(t===e){Z=null;break}if(n=t.sibling,n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Hd(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Z=n;break}Z=t.return}}function Wd(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{cl(4,t)}catch(c){Ke(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ke(t,s,c)}}var i=t.return;try{ec(t)}catch(c){Ke(t,i,c)}break;case 5:var l=t.return;try{ec(t)}catch(c){Ke(t,l,c)}}}catch(c){Ke(t,t.return,c)}if(t===e){Z=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Z=a;break}Z=t.return}}var px=Math.ceil,Fi=Ln.ReactCurrentDispatcher,du=Ln.ReactCurrentOwner,Kt=Ln.ReactCurrentBatchConfig,Te=0,ot=null,Je=null,ct=0,Ot=0,Kr=lr(0),nt=0,ho=null,Cr=0,ul=0,fu=0,Ws=null,Et=null,mu=0,us=1/0,Sn=null,$i=!1,rc=null,Zn=null,qo=!1,Wn=null,Di=0,qs=0,sc=null,ai=-1,ci=0;function jt(){return Te&6?Ye():ai!==-1?ai:ai=Ye()}function er(e){return e.mode&1?Te&2&&ct!==0?ct&-ct:X0.transition!==null?(ci===0&&(ci=xm()),ci):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:km(e.type)),e):1}function on(e,t,n,r){if(50<qs)throw qs=0,sc=null,Error(W(185));vo(e,n,r),(!(Te&2)||e!==ot)&&(e===ot&&(!(Te&2)&&(ul|=n),nt===4&&Vn(e,ct)),Mt(e,r),n===1&&Te===0&&!(t.mode&1)&&(us=Ye()+500,il&&ar()))}function Mt(e,t){var n=e.callbackNode;Xg(e,t);var r=bi(e,e===ot?ct:0);if(r===0)n!==null&&td(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&td(n),t===1)e.tag===0?J0(qd.bind(null,e)):Vm(qd.bind(null,e)),q0(function(){!(Te&6)&&ar()}),n=null;else{switch(ym(r)){case 1:n=$c;break;case 4:n=pm;break;case 16:n=Ni;break;case 536870912:n=gm;break;default:n=Ni}n=zh(n,Ph.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ph(e,t){if(ai=-1,ci=0,Te&6)throw Error(W(327));var n=e.callbackNode;if(es()&&e.callbackNode!==n)return null;var r=bi(e,e===ot?ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=zi(e,r);else{t=r;var s=Te;Te|=2;var i=Oh();(ot!==e||ct!==t)&&(Sn=null,us=Ye()+500,wr(e,t));do try{yx();break}catch(a){Lh(e,a)}while(1);Xc(),Fi.current=i,Te=s,Je!==null?t=0:(ot=null,ct=0,t=nt)}if(t!==0){if(t===2&&(s=Ra(e),s!==0&&(r=s,t=oc(e,s))),t===1)throw n=ho,wr(e,0),Vn(e,r),Mt(e,Ye()),n;if(t===6)Vn(e,r);else{if(s=e.current.alternate,!(r&30)&&!gx(s)&&(t=zi(e,r),t===2&&(i=Ra(e),i!==0&&(r=i,t=oc(e,i))),t===1))throw n=ho,wr(e,0),Vn(e,r),Mt(e,Ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(W(345));case 2:hr(e,Et,Sn);break;case 3:if(Vn(e,r),(r&130023424)===r&&(t=mu+500-Ye(),10<t)){if(bi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){jt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=$a(hr.bind(null,e,Et,Sn),t);break}hr(e,Et,Sn);break;case 4:if(Vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-sn(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=Ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*px(r/1960))-r,10<r){e.timeoutHandle=$a(hr.bind(null,e,Et,Sn),r);break}hr(e,Et,Sn);break;case 5:hr(e,Et,Sn);break;default:throw Error(W(329))}}}return Mt(e,Ye()),e.callbackNode===n?Ph.bind(null,e):null}function oc(e,t){var n=Ws;return e.current.memoizedState.isDehydrated&&(wr(e,t).flags|=256),e=zi(e,t),e!==2&&(t=Et,Et=n,t!==null&&ic(t)),e}function ic(e){Et===null?Et=e:Et.push.apply(Et,e)}function gx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cn(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~fu,t&=~ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-sn(t),r=1<<n;e[n]=-1,t&=~r}}function qd(e){if(Te&6)throw Error(W(327));es();var t=bi(e,0);if(!(t&1))return Mt(e,Ye()),null;var n=zi(e,t);if(e.tag!==0&&n===2){var r=Ra(e);r!==0&&(t=r,n=oc(e,r))}if(n===1)throw n=ho,wr(e,0),Vn(e,t),Mt(e,Ye()),n;if(n===6)throw Error(W(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,hr(e,Et,Sn),Mt(e,Ye()),null}function hu(e,t){var n=Te;Te|=1;try{return e(t)}finally{Te=n,Te===0&&(us=Ye()+500,il&&ar())}}function Er(e){Wn!==null&&Wn.tag===0&&!(Te&6)&&es();var t=Te;Te|=1;var n=Kt.transition,r=Ae;try{if(Kt.transition=null,Ae=1,e)return e()}finally{Ae=r,Kt.transition=n,Te=t,!(Te&6)&&ar()}}function pu(){Ot=Kr.current,De(Kr)}function wr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,W0(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(Yc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ti();break;case 3:as(),De(_t),De(pt),su();break;case 5:ru(r);break;case 4:as();break;case 13:De(Ge);break;case 19:De(Ge);break;case 10:Zc(r.type._context);break;case 22:case 23:pu()}n=n.return}if(ot=e,Je=e=tr(e.current,null),ct=Ot=t,nt=0,ho=null,fu=ul=Cr=0,Et=Ws=null,gr!==null){for(t=0;t<gr.length;t++)if(n=gr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}gr=null}return e}function Lh(e,t){do{var n=Je;try{if(Xc(),oi.current=Ui,Oi){for(var r=He.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oi=!1}if(Sr=0,st=tt=He=null,Gs=!1,uo=0,du.current=null,n===null||n.return===null){nt=1,ho=t,Je=null;break}e:{var i=e,l=n.return,a=n,c=t;if(t=ct,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=a,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var j=m.alternate;j?(m.updateQueue=j.updateQueue,m.memoizedState=j.memoizedState,m.lanes=j.lanes):(m.updateQueue=null,m.memoizedState=null)}var I=Pd(l);if(I!==null){I.flags&=-257,Ld(I,l,a,i,t),I.mode&1&&Ad(i,u,t),t=I,c=u;var h=t.updateQueue;if(h===null){var v=new Set;v.add(c),t.updateQueue=v}else h.add(c);break e}else{if(!(t&1)){Ad(i,u,t),gu();break e}c=Error(W(426))}}else if(ze&&a.mode&1){var S=Pd(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Ld(S,l,a,i,t),Qc(cs(c,a));break e}}i=c=cs(c,a),nt!==4&&(nt=2),Ws===null?Ws=[i]:Ws.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=yh(i,c,t);Ed(i,w);break e;case 1:a=c;var x=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Zn===null||!Zn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=vh(i,a,t);Ed(i,_);break e}}i=i.return}while(i!==null)}Fh(n)}catch(R){t=R,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(1)}function Oh(){var e=Fi.current;return Fi.current=Ui,e===null?Ui:e}function gu(){(nt===0||nt===3||nt===2)&&(nt=4),ot===null||!(Cr&268435455)&&!(ul&268435455)||Vn(ot,ct)}function zi(e,t){var n=Te;Te|=2;var r=Oh();(ot!==e||ct!==t)&&(Sn=null,wr(e,t));do try{xx();break}catch(s){Lh(e,s)}while(1);if(Xc(),Te=n,Fi.current=r,Je!==null)throw Error(W(261));return ot=null,ct=0,nt}function xx(){for(;Je!==null;)Uh(Je)}function yx(){for(;Je!==null&&!Vg();)Uh(Je)}function Uh(e){var t=Dh(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?Fh(e):Je=t,du.current=null}function Fh(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dx(n,t),n!==null){n.flags&=32767,Je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{nt=6,Je=null;return}}else if(n=ux(n,t,Ot),n!==null){Je=n;return}if(t=t.sibling,t!==null){Je=t;return}Je=t=e}while(t!==null);nt===0&&(nt=5)}function hr(e,t,n){var r=Ae,s=Kt.transition;try{Kt.transition=null,Ae=1,vx(e,t,n,r)}finally{Kt.transition=s,Ae=r}return null}function vx(e,t,n,r){do es();while(Wn!==null);if(Te&6)throw Error(W(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(W(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Zg(e,i),e===ot&&(Je=ot=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qo||(qo=!0,zh(Ni,function(){return es(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var l=Ae;Ae=1;var a=Te;Te|=4,du.current=null,mx(e,n),Mh(n,e),$0(Ua),ki=!!Oa,Ua=Oa=null,e.current=n,hx(n),Gg(),Te=a,Ae=l,Kt.transition=i}else e.current=n;if(qo&&(qo=!1,Wn=e,Di=s),i=e.pendingLanes,i===0&&(Zn=null),qg(n.stateNode),Mt(e,Ye()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($i)throw $i=!1,e=rc,rc=null,e;return Di&1&&e.tag!==0&&es(),i=e.pendingLanes,i&1?e===sc?qs++:(qs=0,sc=e):qs=0,ar(),null}function es(){if(Wn!==null){var e=ym(Di),t=Kt.transition,n=Ae;try{if(Kt.transition=null,Ae=16>e?16:e,Wn===null)var r=!1;else{if(e=Wn,Wn=null,Di=0,Te&6)throw Error(W(331));var s=Te;for(Te|=4,Z=e.current;Z!==null;){var i=Z,l=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Z=u;Z!==null;){var m=Z;switch(m.tag){case 0:case 11:case 15:Hs(8,m,i)}var f=m.child;if(f!==null)f.return=m,Z=f;else for(;Z!==null;){m=Z;var j=m.sibling,I=m.return;if(Ih(m),m===u){Z=null;break}if(j!==null){j.return=I,Z=j;break}Z=I}}}var h=i.alternate;if(h!==null){var v=h.child;if(v!==null){h.child=null;do{var S=v.sibling;v.sibling=null,v=S}while(v!==null)}}Z=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,Z=l;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hs(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,Z=w;break e}Z=i.return}}var x=e.current;for(Z=x;Z!==null;){l=Z;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,Z=g;else e:for(l=x;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:cl(9,a)}}catch(R){Ke(a,a.return,R)}if(a===l){Z=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Z=_;break e}Z=a.return}}if(Te=s,ar(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(tl,e)}catch{}r=!0}return r}finally{Ae=n,Kt.transition=t}}return!1}function Kd(e,t,n){t=cs(n,t),t=yh(e,t,1),e=Xn(e,t,1),t=jt(),e!==null&&(vo(e,1,t),Mt(e,t))}function Ke(e,t,n){if(e.tag===3)Kd(e,e,n);else for(;t!==null;){if(t.tag===3){Kd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zn===null||!Zn.has(r))){e=cs(n,e),e=vh(t,e,1),t=Xn(t,e,1),e=jt(),t!==null&&(vo(t,1,e),Mt(t,e));break}}t=t.return}}function wx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jt(),e.pingedLanes|=e.suspendedLanes&n,ot===e&&(ct&n)===n&&(nt===4||nt===3&&(ct&130023424)===ct&&500>Ye()-mu?wr(e,0):fu|=n),Mt(e,t)}function $h(e,t){t===0&&(e.mode&1?(t=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):t=1);var n=jt();e=Mn(e,t),e!==null&&(vo(e,t,n),Mt(e,n))}function jx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),$h(e,n)}function Nx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(t),$h(e,n)}var Dh;Dh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_t.current)It=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return It=!1,cx(e,t,n);It=!!(e.flags&131072)}else It=!1,ze&&t.flags&1048576&&Gm(t,Ri,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;li(e,t),e=t.pendingProps;var s=os(t,pt.current);Zr(t,n),s=iu(null,t,r,e,s,n);var i=lu();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rt(r)?(i=!0,Ii(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tu(t),s.updater=al,t.stateNode=s,s._reactInternals=t,Wa(t,r,e,n),t=Ya(null,t,r,!0,i,n)):(t.tag=0,ze&&i&&Kc(t),wt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(li(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=kx(r),e=Zt(r,e),s){case 0:t=Ka(null,t,r,e,n);break e;case 1:t=Fd(null,t,r,e,n);break e;case 11:t=Od(null,t,r,e,n);break e;case 14:t=Ud(null,t,r,Zt(r.type,e),n);break e}throw Error(W(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Ka(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Fd(e,t,r,s,n);case 3:e:{if(bh(t),e===null)throw Error(W(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Qm(e,t),Pi(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=cs(Error(W(423)),t),t=$d(e,t,r,n,s);break e}else if(r!==s){s=cs(Error(W(424)),t),t=$d(e,t,r,n,s);break e}else for(Ut=Jn(t.stateNode.containerInfo.firstChild),Ft=t,ze=!0,nn=null,n=Km(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(is(),r===s){t=An(e,t,n);break e}wt(e,t,r,n)}t=t.child}return t;case 5:return Jm(t),e===null&&Va(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,Fa(r,s)?l=null:i!==null&&Fa(r,i)&&(t.flags|=32),Nh(e,t),wt(e,t,l,n),t.child;case 6:return e===null&&Va(t),null;case 13:return kh(e,t,n);case 4:return nu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ls(t,null,r,n):wt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),Od(e,t,r,s,n);case 7:return wt(e,t,t.pendingProps,n),t.child;case 8:return wt(e,t,t.pendingProps.children,n),t.child;case 12:return wt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,Ue(Mi,r._currentValue),r._currentValue=l,i!==null)if(cn(i.value,l)){if(i.children===s.children&&!_t.current){t=An(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){l=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=In(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ga(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(W(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),Ga(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}wt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Zr(t,n),s=Qt(s),r=r(s),t.flags|=1,wt(e,t,r,n),t.child;case 14:return r=t.type,s=Zt(r,t.pendingProps),s=Zt(r.type,s),Ud(e,t,r,s,n);case 15:return wh(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Zt(r,s),li(e,t),t.tag=1,Rt(r)?(e=!0,Ii(t)):e=!1,Zr(t,n),xh(t,r,s),Wa(t,r,s,n),Ya(null,t,r,!0,e,n);case 19:return Sh(e,t,n);case 22:return jh(e,t,n)}throw Error(W(156,t.tag))};function zh(e,t){return hm(e,t)}function bx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(e,t,n,r){return new bx(e,t,n,r)}function xu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function kx(e){if(typeof e=="function")return xu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Oc)return 11;if(e===Uc)return 14}return 2}function tr(e,t){var n=e.alternate;return n===null?(n=qt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ui(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")xu(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Fr:return jr(n.children,s,i,t);case Lc:l=8,s|=8;break;case ga:return e=qt(12,n,t,s|2),e.elementType=ga,e.lanes=i,e;case xa:return e=qt(13,n,t,s),e.elementType=xa,e.lanes=i,e;case ya:return e=qt(19,n,t,s),e.elementType=ya,e.lanes=i,e;case Jf:return dl(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yf:l=10;break e;case Qf:l=9;break e;case Oc:l=11;break e;case Uc:l=14;break e;case Dn:l=16,r=null;break e}throw Error(W(130,e==null?e:typeof e,""))}return t=qt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function jr(e,t,n,r){return e=qt(7,e,r,t),e.lanes=n,e}function dl(e,t,n,r){return e=qt(22,e,r,t),e.elementType=Jf,e.lanes=n,e.stateNode={isHidden:!1},e}function sa(e,t,n){return e=qt(6,e,null,t),e.lanes=n,e}function oa(e,t,n){return t=qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$l(0),this.expirationTimes=$l(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$l(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yu(e,t,n,r,s,i,l,a,c){return e=new Sx(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=qt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tu(i),e}function Cx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ur,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bh(e){if(!e)return or;e=e._reactInternals;e:{if(_r(e)!==e||e.tag!==1)throw Error(W(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(W(171))}if(e.tag===1){var n=e.type;if(Rt(n))return Bm(e,n,t)}return t}function Vh(e,t,n,r,s,i,l,a,c){return e=yu(n,r,!0,e,s,i,l,a,c),e.context=Bh(null),n=e.current,r=jt(),s=er(n),i=In(r,s),i.callback=t??null,Xn(n,i,s),e.current.lanes=s,vo(e,s,r),Mt(e,r),e}function fl(e,t,n,r){var s=t.current,i=jt(),l=er(s);return n=Bh(n),t.context===null?t.context=n:t.pendingContext=n,t=In(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Xn(s,t,l),e!==null&&(on(e,s,l,i),si(e,s,l)),l}function Bi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Yd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vu(e,t){Yd(e,t),(e=e.alternate)&&Yd(e,t)}function Ex(){return null}var Gh=typeof reportError=="function"?reportError:function(e){console.error(e)};function wu(e){this._internalRoot=e}ml.prototype.render=wu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(W(409));fl(e,t,null,null)};ml.prototype.unmount=wu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Er(function(){fl(null,e,null,null)}),t[Rn]=null}};function ml(e){this._internalRoot=e}ml.prototype.unstable_scheduleHydration=function(e){if(e){var t=jm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bn.length&&t!==0&&t<Bn[n].priority;n++);Bn.splice(n,0,e),n===0&&bm(e)}};function ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function hl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Qd(){}function Tx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Bi(l);i.call(u)}}var l=Vh(t,r,e,0,null,!1,!1,"",Qd);return e._reactRootContainer=l,e[Rn]=l.current,oo(e.nodeType===8?e.parentNode:e),Er(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Bi(c);a.call(u)}}var c=yu(e,0,!1,null,null,!1,!1,"",Qd);return e._reactRootContainer=c,e[Rn]=c.current,oo(e.nodeType===8?e.parentNode:e),Er(function(){fl(t,c,n,r)}),c}function pl(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var a=s;s=function(){var c=Bi(l);a.call(c)}}fl(t,l,e,s)}else l=Tx(n,t,e,s,r);return Bi(l)}vm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Os(t.pendingLanes);n!==0&&(Dc(t,n|1),Mt(t,Ye()),!(Te&6)&&(us=Ye()+500,ar()))}break;case 13:Er(function(){var r=Mn(e,1);if(r!==null){var s=jt();on(r,e,1,s)}}),vu(e,1)}};zc=function(e){if(e.tag===13){var t=Mn(e,134217728);if(t!==null){var n=jt();on(t,e,134217728,n)}vu(e,134217728)}};wm=function(e){if(e.tag===13){var t=er(e),n=Mn(e,t);if(n!==null){var r=jt();on(n,e,t,r)}vu(e,t)}};jm=function(){return Ae};Nm=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};Ta=function(e,t,n){switch(t){case"input":if(ja(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ol(r);if(!s)throw Error(W(90));Zf(r),ja(r,s)}}}break;case"textarea":tm(e,n);break;case"select":t=n.value,t!=null&&Yr(e,!!n.multiple,t,!1)}};am=hu;cm=Er;var Ix={usingClientEntryPoint:!1,Events:[jo,Br,ol,im,lm,hu]},Rs={findFiberByHostInstance:pr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_x={bundleType:Rs.bundleType,version:Rs.version,rendererPackageName:Rs.rendererPackageName,rendererConfig:Rs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fm(e),e===null?null:e.stateNode},findFiberByHostInstance:Rs.findFiberByHostInstance||Ex,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{tl=Ko.inject(_x),xn=Ko}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ix;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ju(t))throw Error(W(200));return Cx(e,t,null,n)};Dt.createRoot=function(e,t){if(!ju(e))throw Error(W(299));var n=!1,r="",s=Gh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yu(e,1,!1,null,null,n,!1,r,s),e[Rn]=t.current,oo(e.nodeType===8?e.parentNode:e),new wu(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(W(188)):(e=Object.keys(e).join(","),Error(W(268,e)));return e=fm(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Er(e)};Dt.hydrate=function(e,t,n){if(!hl(t))throw Error(W(200));return pl(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!ju(e))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=Gh;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Vh(t,null,e,1,n??null,s,!1,i,l),e[Rn]=t.current,oo(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ml(t)};Dt.render=function(e,t,n){if(!hl(t))throw Error(W(200));return pl(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!hl(e))throw Error(W(40));return e._reactRootContainer?(Er(function(){pl(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};Dt.unstable_batchedUpdates=hu;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!hl(n))throw Error(W(200));if(e==null||e._reactInternals===void 0)throw Error(W(38));return pl(e,t,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function Hh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hh)}catch(e){console.error(e)}}Hh(),Hf.exports=Dt;var Rx=Hf.exports,Jd=Rx;ha.createRoot=Jd.createRoot,ha.hydrateRoot=Jd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},po.apply(this,arguments)}var qn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(qn||(qn={}));const Xd="popstate";function Mx(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:l,hash:a}=r.location;return lc("",{pathname:i,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Vi(s)}return Px(t,n,null,e)}function Qe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Wh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ax(){return Math.random().toString(36).substr(2,8)}function Zd(e,t){return{usr:e.state,key:e.key,idx:t}}function lc(e,t,n,r){return n===void 0&&(n=null),po({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ps(t):t,{state:n,key:t&&t.key||r||Ax()})}function Vi(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ps(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Px(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,l=s.history,a=qn.Pop,c=null,u=m();u==null&&(u=0,l.replaceState(po({},l.state,{idx:u}),""));function m(){return(l.state||{idx:null}).idx}function f(){a=qn.Pop;let S=m(),w=S==null?null:S-u;u=S,c&&c({action:a,location:v.location,delta:w})}function j(S,w){a=qn.Push;let x=lc(v.location,S,w);n&&n(x,S),u=m()+1;let g=Zd(x,u),_=v.createHref(x);try{l.pushState(g,"",_)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(_)}i&&c&&c({action:a,location:v.location,delta:1})}function I(S,w){a=qn.Replace;let x=lc(v.location,S,w);n&&n(x,S),u=m();let g=Zd(x,u),_=v.createHref(x);l.replaceState(g,"",_),i&&c&&c({action:a,location:v.location,delta:0})}function h(S){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof S=="string"?S:Vi(S);return x=x.replace(/ $/,"%20"),Qe(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let v={get action(){return a},get location(){return e(s,l)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Xd,f),c=S,()=>{s.removeEventListener(Xd,f),c=null}},createHref(S){return t(s,S)},createURL:h,encodeLocation(S){let w=h(S);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:j,replace:I,go(S){return l.go(S)}};return v}var ef;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ef||(ef={}));function Lx(e,t,n){return n===void 0&&(n="/"),Ox(e,t,n,!1)}function Ox(e,t,n,r){let s=typeof t=="string"?ps(t):t,i=Nu(s.pathname||"/",n);if(i==null)return null;let l=qh(e);Ux(l);let a=null;for(let c=0;a==null&&c<l.length;++c){let u=Kx(i);a=Wx(l[c],u,r)}return a}function qh(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,l,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Qe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=nr([r,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(Qe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),qh(i.children,t,m,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Gx(u,i.index),routesMeta:m})};return e.forEach((i,l)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,l);else for(let c of Kh(i.path))s(i,l,c)}),t}function Kh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let l=Kh(r.join("/")),a=[];return a.push(...l.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...l),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ux(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Hx(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fx=/^:[\w-]+$/,$x=3,Dx=2,zx=1,Bx=10,Vx=-2,tf=e=>e==="*";function Gx(e,t){let n=e.split("/"),r=n.length;return n.some(tf)&&(r+=Vx),t&&(r+=Dx),n.filter(s=>!tf(s)).reduce((s,i)=>s+(Fx.test(i)?$x:i===""?zx:Bx),r)}function Hx(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Wx(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},i="/",l=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,m=i==="/"?t:t.slice(i.length)||"/",f=nf({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),j=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=nf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!f)return null;Object.assign(s,f.params),l.push({params:s,pathname:nr([i,f.pathname]),pathnameBase:Xx(nr([i,f.pathnameBase])),route:j}),f.pathnameBase!=="/"&&(i=nr([i,f.pathnameBase]))}return l}function nf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=qx(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,m,f)=>{let{paramName:j,isOptional:I}=m;if(j==="*"){let v=a[f]||"";l=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const h=a[f];return I&&!h?u[j]=void 0:u[j]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:e}}function qx(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Wh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Kx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wh(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nu(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Yx(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ps(e):e;return{pathname:n?n.startsWith("/")?n:Qx(n,t):t,search:Zx(r),hash:ey(s)}}function Qx(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ia(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Jx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function bu(e,t){let n=Jx(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ku(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ps(e):(s=po({},e),Qe(!s.pathname||!s.pathname.includes("?"),ia("?","pathname","search",s)),Qe(!s.pathname||!s.pathname.includes("#"),ia("#","pathname","hash",s)),Qe(!s.search||!s.search.includes("#"),ia("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,a;if(l==null)a=n;else{let f=t.length-1;if(!r&&l.startsWith("..")){let j=l.split("/");for(;j[0]==="..";)j.shift(),f-=1;s.pathname=j.join("/")}a=f>=0?t[f]:"/"}let c=Yx(s,a),u=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const nr=e=>e.join("/").replace(/\/\/+/g,"/"),Xx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ey=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ty(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Yh=["post","put","patch","delete"];new Set(Yh);const ny=["get",...Yh];new Set(ny);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},go.apply(this,arguments)}const Su=y.createContext(null),ry=y.createContext(null),cr=y.createContext(null),gl=y.createContext(null),On=y.createContext({outlet:null,matches:[],isDataRoute:!1}),Qh=y.createContext(null);function sy(e,t){let{relative:n}=t===void 0?{}:t;gs()||Qe(!1);let{basename:r,navigator:s}=y.useContext(cr),{hash:i,pathname:l,search:a}=Xh(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:nr([r,l])),s.createHref({pathname:c,search:a,hash:i})}function gs(){return y.useContext(gl)!=null}function bo(){return gs()||Qe(!1),y.useContext(gl).location}function Jh(e){y.useContext(cr).static||y.useLayoutEffect(e)}function xl(){let{isDataRoute:e}=y.useContext(On);return e?yy():oy()}function oy(){gs()||Qe(!1);let e=y.useContext(Su),{basename:t,future:n,navigator:r}=y.useContext(cr),{matches:s}=y.useContext(On),{pathname:i}=bo(),l=JSON.stringify(bu(s,n.v7_relativeSplatPath)),a=y.useRef(!1);return Jh(()=>{a.current=!0}),y.useCallback(function(u,m){if(m===void 0&&(m={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let f=ku(u,JSON.parse(l),i,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:nr([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,l,i,e])}function iy(){let{matches:e}=y.useContext(On),t=e[e.length-1];return t?t.params:{}}function Xh(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=y.useContext(cr),{matches:s}=y.useContext(On),{pathname:i}=bo(),l=JSON.stringify(bu(s,r.v7_relativeSplatPath));return y.useMemo(()=>ku(e,JSON.parse(l),i,n==="path"),[e,l,i,n])}function ly(e,t){return ay(e,t)}function ay(e,t,n,r){gs()||Qe(!1);let{navigator:s}=y.useContext(cr),{matches:i}=y.useContext(On),l=i[i.length-1],a=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=bo(),m;if(t){var f;let S=typeof t=="string"?ps(t):t;c==="/"||(f=S.pathname)!=null&&f.startsWith(c)||Qe(!1),m=S}else m=u;let j=m.pathname||"/",I=j;if(c!=="/"){let S=c.replace(/^\//,"").split("/");I="/"+j.replace(/^\//,"").split("/").slice(S.length).join("/")}let h=Lx(e,{pathname:I}),v=my(h&&h.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:nr([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:nr([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return t&&v?y.createElement(gl.Provider,{value:{location:go({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:qn.Pop}},v):v}function cy(){let e=xy(),t=ty(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),n?y.createElement("pre",{style:s},n):null,i)}const uy=y.createElement(cy,null);class dy extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?y.createElement(On.Provider,{value:this.props.routeContext},y.createElement(Qh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fy(e){let{routeContext:t,match:n,children:r}=e,s=y.useContext(Su);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),y.createElement(On.Provider,{value:t},r)}function my(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let m=l.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);m>=0||Qe(!1),l=l.slice(0,Math.min(l.length,m+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let f=l[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=m),f.route.id){let{loaderData:j,errors:I}=n,h=f.route.loader&&j[f.route.id]===void 0&&(!I||I[f.route.id]===void 0);if(f.route.lazy||h){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((m,f,j)=>{let I,h=!1,v=null,S=null;n&&(I=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||uy,c&&(u<0&&j===0?(vy("route-fallback",!1),h=!0,S=null):u===j&&(h=!0,S=f.route.hydrateFallbackElement||null)));let w=t.concat(l.slice(0,j+1)),x=()=>{let g;return I?g=v:h?g=S:f.route.Component?g=y.createElement(f.route.Component,null):f.route.element?g=f.route.element:g=m,y.createElement(fy,{match:f,routeContext:{outlet:m,matches:w,isDataRoute:n!=null},children:g})};return n&&(f.route.ErrorBoundary||f.route.errorElement||j===0)?y.createElement(dy,{location:n.location,revalidation:n.revalidation,component:v,error:I,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var Zh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Zh||{}),Gi=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Gi||{});function hy(e){let t=y.useContext(Su);return t||Qe(!1),t}function py(e){let t=y.useContext(ry);return t||Qe(!1),t}function gy(e){let t=y.useContext(On);return t||Qe(!1),t}function ep(e){let t=gy(),n=t.matches[t.matches.length-1];return n.route.id||Qe(!1),n.route.id}function xy(){var e;let t=y.useContext(Qh),n=py(Gi.UseRouteError),r=ep(Gi.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function yy(){let{router:e}=hy(Zh.UseNavigateStable),t=ep(Gi.UseNavigateStable),n=y.useRef(!1);return Jh(()=>{n.current=!0}),y.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,go({fromRouteId:t},i)))},[e,t])}const rf={};function vy(e,t,n){!t&&!rf[e]&&(rf[e]=!0)}function wy(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Ks(e){let{to:t,replace:n,state:r,relative:s}=e;gs()||Qe(!1);let{future:i,static:l}=y.useContext(cr),{matches:a}=y.useContext(On),{pathname:c}=bo(),u=xl(),m=ku(t,bu(a,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(m);return y.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Lt(e){Qe(!1)}function jy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=qn.Pop,navigator:i,static:l=!1,future:a}=e;gs()&&Qe(!1);let c=t.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:c,navigator:i,static:l,future:go({v7_relativeSplatPath:!1},a)}),[c,a,i,l]);typeof r=="string"&&(r=ps(r));let{pathname:m="/",search:f="",hash:j="",state:I=null,key:h="default"}=r,v=y.useMemo(()=>{let S=Nu(m,c);return S==null?null:{location:{pathname:S,search:f,hash:j,state:I,key:h},navigationType:s}},[c,m,f,j,I,h,s]);return v==null?null:y.createElement(cr.Provider,{value:u},y.createElement(gl.Provider,{children:n,value:v}))}function sf(e){let{children:t,location:n}=e;return ly(ac(t),n)}new Promise(()=>{});function ac(e,t){t===void 0&&(t=[]);let n=[];return y.Children.forEach(e,(r,s)=>{if(!y.isValidElement(r))return;let i=[...t,s];if(r.type===y.Fragment){n.push.apply(n,ac(r.props.children,i));return}r.type!==Lt&&Qe(!1),!r.props.index||!r.props.children||Qe(!1);let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=ac(r.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cc(){return cc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cc.apply(this,arguments)}function Ny(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function by(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ky(e,t){return e.button===0&&(!t||t==="_self")&&!by(e)}const Sy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Cy="6";try{window.__reactRouterVersion=Cy}catch{}const Ey="startTransition",of=wg[Ey];function Ty(e){let{basename:t,children:n,future:r,window:s}=e,i=y.useRef();i.current==null&&(i.current=Mx({window:s,v5Compat:!0}));let l=i.current,[a,c]=y.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},m=y.useCallback(f=>{u&&of?of(()=>c(f)):c(f)},[c,u]);return y.useLayoutEffect(()=>l.listen(m),[l,m]),y.useEffect(()=>wy(r),[r]),y.createElement(jy,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:l,future:r})}const Iy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_y=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hi=y.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:l,state:a,target:c,to:u,preventScrollReset:m,viewTransition:f}=t,j=Ny(t,Sy),{basename:I}=y.useContext(cr),h,v=!1;if(typeof u=="string"&&_y.test(u)&&(h=u,Iy))try{let g=new URL(window.location.href),_=u.startsWith("//")?new URL(g.protocol+u):new URL(u),R=Nu(_.pathname,I);_.origin===g.origin&&R!=null?u=R+_.search+_.hash:v=!0}catch{}let S=sy(u,{relative:s}),w=Ry(u,{replace:l,state:a,target:c,preventScrollReset:m,relative:s,viewTransition:f});function x(g){r&&r(g),g.defaultPrevented||w(g)}return y.createElement("a",cc({},j,{href:h||S,onClick:v||i?r:x,ref:n,target:c}))});var lf;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lf||(lf={}));var af;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(af||(af={}));function Ry(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:l,viewTransition:a}=t===void 0?{}:t,c=xl(),u=bo(),m=Xh(e,{relative:l});return y.useCallback(f=>{if(ky(f,n)){f.preventDefault();let j=r!==void 0?r:Vi(u)===Vi(m);c(e,{replace:j,state:s,preventScrollReset:i,relative:l,viewTransition:a})}},[u,c,m,r,s,n,e,i,l,a])}let My={data:""},Ay=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||My,Py=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ly=/\/\*[^]*?\*\/|  +/g,cf=/\n+/g,Gn=(e,t)=>{let n="",r="",s="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+l+";":r+=i[1]=="f"?Gn(l,i):i+"{"+Gn(l,i[1]=="k"?"":t)+"}":typeof l=="object"?r+=Gn(l,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Gn.p?Gn.p(i,l):i+":"+l+";")}return n+(t&&s?t+"{"+s+"}":s)+r},kn={},tp=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+tp(e[n]);return t}return e},Oy=(e,t,n,r,s)=>{let i=tp(e),l=kn[i]||(kn[i]=(c=>{let u=0,m=11;for(;u<c.length;)m=101*m+c.charCodeAt(u++)>>>0;return"go"+m})(i));if(!kn[l]){let c=i!==e?e:(u=>{let m,f,j=[{}];for(;m=Py.exec(u.replace(Ly,""));)m[4]?j.shift():m[3]?(f=m[3].replace(cf," ").trim(),j.unshift(j[0][f]=j[0][f]||{})):j[0][m[1]]=m[2].replace(cf," ").trim();return j[0]})(e);kn[l]=Gn(s?{["@keyframes "+l]:c}:c,n?"":"."+l)}let a=n&&kn.g?kn.g:null;return n&&(kn.g=kn[l]),((c,u,m,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=m?c+u.data:u.data+c)})(kn[l],t,r,a),l},Uy=(e,t,n)=>e.reduce((r,s,i)=>{let l=t[i];if(l&&l.call){let a=l(n),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;l=c?"."+c:a&&typeof a=="object"?a.props?"":Gn(a,""):a===!1?"":a}return r+s+(l??"")},"");function yl(e){let t=this||{},n=e.call?e(t.p):e;return Oy(n.unshift?n.raw?Uy(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,Ay(t.target),t.g,t.o,t.k)}let np,uc,dc;yl.bind({g:1});let Pn=yl.bind({k:1});function Fy(e,t,n,r){Gn.p=t,np=e,uc=n,dc=r}function ur(e,t){let n=this||{};return function(){let r=arguments;function s(i,l){let a=Object.assign({},i),c=a.className||s.className;n.p=Object.assign({theme:uc&&uc()},a),n.o=/ *go\d+/.test(c),a.className=yl.apply(n,r)+(c?" "+c:""),t&&(a.ref=l);let u=e;return e[0]&&(u=a.as||e,delete a.as),dc&&u[0]&&dc(a),np(u,a)}return t?t(s):s}}var $y=e=>typeof e=="function",Wi=(e,t)=>$y(e)?e(t):e,Dy=(()=>{let e=0;return()=>(++e).toString()})(),rp=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),zy=20,Cu="default",sp=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:r}=t;return sp(e,{type:e.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},di=[],op={toasts:[],pausedAt:void 0,settings:{toastLimit:zy}},gn={},ip=(e,t=Cu)=>{gn[t]=sp(gn[t]||op,e),di.forEach(([n,r])=>{n===t&&r(gn[t])})},lp=e=>Object.keys(gn).forEach(t=>ip(e,t)),By=e=>Object.keys(gn).find(t=>gn[t].toasts.some(n=>n.id===e)),vl=(e=Cu)=>t=>{ip(t,e)},Vy={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Gy=(e={},t=Cu)=>{let[n,r]=y.useState(gn[t]||op),s=y.useRef(gn[t]);y.useEffect(()=>(s.current!==gn[t]&&r(gn[t]),di.push([t,r]),()=>{let l=di.findIndex(([a])=>a===t);l>-1&&di.splice(l,1)}),[t]);let i=n.toasts.map(l=>{var a,c,u;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((a=e[l.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||Vy[l.type],style:{...e.style,...(u=e[l.type])==null?void 0:u.style,...l.style}}});return{...n,toasts:i}},Hy=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Dy()}),ko=e=>(t,n)=>{let r=Hy(t,e,n);return vl(r.toasterId||By(r.id))({type:2,toast:r}),r.id},q=(e,t)=>ko("blank")(e,t);q.error=ko("error");q.success=ko("success");q.loading=ko("loading");q.custom=ko("custom");q.dismiss=(e,t)=>{let n={type:3,toastId:e};t?vl(t)(n):lp(n)};q.dismissAll=e=>q.dismiss(void 0,e);q.remove=(e,t)=>{let n={type:4,toastId:e};t?vl(t)(n):lp(n)};q.removeAll=e=>q.remove(void 0,e);q.promise=(e,t,n)=>{let r=q.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?Wi(t.success,s):void 0;return i?q.success(i,{id:r,...n,...n==null?void 0:n.success}):q.dismiss(r),s}).catch(s=>{let i=t.error?Wi(t.error,s):void 0;i?q.error(i,{id:r,...n,...n==null?void 0:n.error}):q.dismiss(r)}),e};var Wy=1e3,qy=(e,t="default")=>{let{toasts:n,pausedAt:r}=Gy(e,t),s=y.useRef(new Map).current,i=y.useCallback((f,j=Wy)=>{if(s.has(f))return;let I=setTimeout(()=>{s.delete(f),l({type:4,toastId:f})},j);s.set(f,I)},[]);y.useEffect(()=>{if(r)return;let f=Date.now(),j=n.map(I=>{if(I.duration===1/0)return;let h=(I.duration||0)+I.pauseDuration-(f-I.createdAt);if(h<0){I.visible&&q.dismiss(I.id);return}return setTimeout(()=>q.dismiss(I.id,t),h)});return()=>{j.forEach(I=>I&&clearTimeout(I))}},[n,r,t]);let l=y.useCallback(vl(t),[t]),a=y.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=y.useCallback((f,j)=>{l({type:1,toast:{id:f,height:j}})},[l]),u=y.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),m=y.useCallback((f,j)=>{let{reverseOrder:I=!1,gutter:h=8,defaultPosition:v}=j||{},S=n.filter(g=>(g.position||v)===(f.position||v)&&g.height),w=S.findIndex(g=>g.id===f.id),x=S.filter((g,_)=>_<w&&g.visible).length;return S.filter(g=>g.visible).slice(...I?[x+1]:[0,x]).reduce((g,_)=>g+(_.height||0)+h,0)},[n]);return y.useEffect(()=>{n.forEach(f=>{if(f.dismissed)i(f.id,f.removeDelay);else{let j=s.get(f.id);j&&(clearTimeout(j),s.delete(f.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:a,endPause:u,calculateOffset:m}}},Ky=Pn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Yy=Pn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Qy=Pn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Jy=ur("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ky} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Yy} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Qy} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Xy=Pn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Zy=ur("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Xy} 1s linear infinite;
`,ev=Pn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,tv=Pn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,nv=ur("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ev} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${tv} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,rv=ur("div")`
  position: absolute;
`,sv=ur("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ov=Pn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,iv=ur("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ov} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,lv=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?y.createElement(iv,null,t):t:n==="blank"?null:y.createElement(sv,null,y.createElement(Zy,{...r}),n!=="loading"&&y.createElement(rv,null,n==="error"?y.createElement(Jy,{...r}):y.createElement(nv,{...r})))},av=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,cv=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,uv="0%{opacity:0;} 100%{opacity:1;}",dv="0%{opacity:1;} 100%{opacity:0;}",fv=ur("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,mv=ur("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hv=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=rp()?[uv,dv]:[av(n),cv(n)];return{animation:t?`${Pn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Pn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},pv=y.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?hv(e.position||t||"top-center",e.visible):{opacity:0},i=y.createElement(lv,{toast:e}),l=y.createElement(mv,{...e.ariaProps},Wi(e.message,e));return y.createElement(fv,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:l}):y.createElement(y.Fragment,null,i,l))});Fy(y.createElement);var gv=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=y.useCallback(l=>{if(l){let a=()=>{let c=l.getBoundingClientRect().height;r(e,c)};a(),new MutationObserver(a).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return y.createElement("div",{ref:i,className:t,style:n},s)},xv=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:rp()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},yv=yl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Yo=16,vv=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:l,containerClassName:a})=>{let{toasts:c,handlers:u}=qy(n,i);return y.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Yo,left:Yo,right:Yo,bottom:Yo,pointerEvents:"none",...l},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(m=>{let f=m.position||t,j=u.calculateOffset(m,{reverseOrder:e,gutter:r,defaultPosition:t}),I=xv(f,j);return y.createElement(gv,{id:m.id,key:m.id,onHeightUpdate:u.updateHeight,className:m.visible?yv:"",style:I},m.type==="custom"?Wi(m.message,m):s?s(m):y.createElement(pv,{toast:m,position:f}))}))};function ap(e,t){return function(){return e.apply(t,arguments)}}const{toString:wv}=Object.prototype,{getPrototypeOf:Eu}=Object,{iterator:wl,toStringTag:cp}=Symbol,jl=(e=>t=>{const n=wv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),un=e=>(e=e.toLowerCase(),t=>jl(t)===e),Nl=e=>t=>typeof t===e,{isArray:xs}=Array,ds=Nl("undefined");function So(e){return e!==null&&!ds(e)&&e.constructor!==null&&!ds(e.constructor)&&At(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const up=un("ArrayBuffer");function jv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&up(e.buffer),t}const Nv=Nl("string"),At=Nl("function"),dp=Nl("number"),Co=e=>e!==null&&typeof e=="object",bv=e=>e===!0||e===!1,fi=e=>{if(jl(e)!=="object")return!1;const t=Eu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(cp in e)&&!(wl in e)},kv=e=>{if(!Co(e)||So(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Sv=un("Date"),Cv=un("File"),Ev=un("Blob"),Tv=un("FileList"),Iv=e=>Co(e)&&At(e.pipe),_v=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||At(e.append)&&((t=jl(e))==="formdata"||t==="object"&&At(e.toString)&&e.toString()==="[object FormData]"))},Rv=un("URLSearchParams"),[Mv,Av,Pv,Lv]=["ReadableStream","Request","Response","Headers"].map(un),Ov=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eo(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),xs(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(So(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let a;for(r=0;r<l;r++)a=i[r],t.call(null,e[a],a,e)}}function fp(e,t){if(So(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const yr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),mp=e=>!ds(e)&&e!==yr;function fc(){const{caseless:e,skipUndefined:t}=mp(this)&&this||{},n={},r=(s,i)=>{const l=e&&fp(n,i)||i;fi(n[l])&&fi(s)?n[l]=fc(n[l],s):fi(s)?n[l]=fc({},s):xs(s)?n[l]=s.slice():(!t||!ds(s))&&(n[l]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Eo(arguments[s],r);return n}const Uv=(e,t,n,{allOwnKeys:r}={})=>(Eo(t,(s,i)=>{n&&At(s)?e[i]=ap(s,n):e[i]=s},{allOwnKeys:r}),e),Fv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),$v=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Dv=(e,t,n,r)=>{let s,i,l;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)l=s[i],(!r||r(l,e,t))&&!a[l]&&(t[l]=e[l],a[l]=!0);e=n!==!1&&Eu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},zv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Bv=e=>{if(!e)return null;if(xs(e))return e;let t=e.length;if(!dp(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Vv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Eu(Uint8Array)),Gv=(e,t)=>{const r=(e&&e[wl]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Hv=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Wv=un("HTMLFormElement"),qv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),uf=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Kv=un("RegExp"),hp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Eo(n,(s,i)=>{let l;(l=t(s,i,e))!==!1&&(r[i]=l||s)}),Object.defineProperties(e,r)},Yv=e=>{hp(e,(t,n)=>{if(At(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(At(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Qv=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return xs(e)?r(e):r(String(e).split(t)),n},Jv=()=>{},Xv=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Zv(e){return!!(e&&At(e.append)&&e[cp]==="FormData"&&e[wl])}const e1=e=>{const t=new Array(10),n=(r,s)=>{if(Co(r)){if(t.indexOf(r)>=0)return;if(So(r))return r;if(!("toJSON"in r)){t[s]=r;const i=xs(r)?[]:{};return Eo(r,(l,a)=>{const c=n(l,s+1);!ds(c)&&(i[a]=c)}),t[s]=void 0,i}}return r};return n(e,0)},t1=un("AsyncFunction"),n1=e=>e&&(Co(e)||At(e))&&At(e.then)&&At(e.catch),pp=((e,t)=>e?setImmediate:t?((n,r)=>(yr.addEventListener("message",({source:s,data:i})=>{s===yr&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),yr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",At(yr.postMessage)),r1=typeof queueMicrotask<"u"?queueMicrotask.bind(yr):typeof process<"u"&&process.nextTick||pp,s1=e=>e!=null&&At(e[wl]),O={isArray:xs,isArrayBuffer:up,isBuffer:So,isFormData:_v,isArrayBufferView:jv,isString:Nv,isNumber:dp,isBoolean:bv,isObject:Co,isPlainObject:fi,isEmptyObject:kv,isReadableStream:Mv,isRequest:Av,isResponse:Pv,isHeaders:Lv,isUndefined:ds,isDate:Sv,isFile:Cv,isBlob:Ev,isRegExp:Kv,isFunction:At,isStream:Iv,isURLSearchParams:Rv,isTypedArray:Vv,isFileList:Tv,forEach:Eo,merge:fc,extend:Uv,trim:Ov,stripBOM:Fv,inherits:$v,toFlatObject:Dv,kindOf:jl,kindOfTest:un,endsWith:zv,toArray:Bv,forEachEntry:Gv,matchAll:Hv,isHTMLForm:Wv,hasOwnProperty:uf,hasOwnProp:uf,reduceDescriptors:hp,freezeMethods:Yv,toObjectSet:Qv,toCamelCase:qv,noop:Jv,toFiniteNumber:Xv,findKey:fp,global:yr,isContextDefined:mp,isSpecCompliantForm:Zv,toJSONObject:e1,isAsyncFn:t1,isThenable:n1,setImmediate:pp,asap:r1,isIterable:s1};function ve(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}O.inherits(ve,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}});const gp=ve.prototype,xp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xp[e]={value:e}});Object.defineProperties(ve,xp);Object.defineProperty(gp,"isAxiosError",{value:!0});ve.from=(e,t,n,r,s,i)=>{const l=Object.create(gp);O.toFlatObject(e,l,function(m){return m!==Error.prototype},u=>u!=="isAxiosError");const a=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return ve.call(l,a,c,n,r,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const o1=null;function mc(e){return O.isPlainObject(e)||O.isArray(e)}function yp(e){return O.endsWith(e,"[]")?e.slice(0,-2):e}function df(e,t,n){return e?e.concat(t).map(function(s,i){return s=yp(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function i1(e){return O.isArray(e)&&!e.some(mc)}const l1=O.toFlatObject(O,{},null,function(t){return/^is[A-Z]/.test(t)});function bl(e,t,n){if(!O.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=O.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,S){return!O.isUndefined(S[v])});const r=n.metaTokens,s=n.visitor||m,i=n.dots,l=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(t);if(!O.isFunction(s))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(O.isDate(h))return h.toISOString();if(O.isBoolean(h))return h.toString();if(!c&&O.isBlob(h))throw new ve("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(h)||O.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function m(h,v,S){let w=h;if(h&&!S&&typeof h=="object"){if(O.endsWith(v,"{}"))v=r?v:v.slice(0,-2),h=JSON.stringify(h);else if(O.isArray(h)&&i1(h)||(O.isFileList(h)||O.endsWith(v,"[]"))&&(w=O.toArray(h)))return v=yp(v),w.forEach(function(g,_){!(O.isUndefined(g)||g===null)&&t.append(l===!0?df([v],_,i):l===null?v:v+"[]",u(g))}),!1}return mc(h)?!0:(t.append(df(S,v,i),u(h)),!1)}const f=[],j=Object.assign(l1,{defaultVisitor:m,convertValue:u,isVisitable:mc});function I(h,v){if(!O.isUndefined(h)){if(f.indexOf(h)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(h),O.forEach(h,function(w,x){(!(O.isUndefined(w)||w===null)&&s.call(t,w,O.isString(x)?x.trim():x,v,j))===!0&&I(w,v?v.concat(x):[x])}),f.pop()}}if(!O.isObject(e))throw new TypeError("data must be an object");return I(e),t}function ff(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Tu(e,t){this._pairs=[],e&&bl(e,this,t)}const vp=Tu.prototype;vp.append=function(t,n){this._pairs.push([t,n])};vp.toString=function(t){const n=t?function(r){return t.call(this,r,ff)}:ff;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function a1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wp(e,t,n){if(!t)return e;const r=n&&n.encode||a1;O.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=O.isURLSearchParams(t)?t.toString():new Tu(t,n).toString(r),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class c1{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){O.forEach(this.handlers,function(r){r!==null&&t(r)})}}const mf=c1,jp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},u1=typeof URLSearchParams<"u"?URLSearchParams:Tu,d1=typeof FormData<"u"?FormData:null,f1=typeof Blob<"u"?Blob:null,m1={isBrowser:!0,classes:{URLSearchParams:u1,FormData:d1,Blob:f1},protocols:["http","https","file","blob","url","data"]},Iu=typeof window<"u"&&typeof document<"u",hc=typeof navigator=="object"&&navigator||void 0,h1=Iu&&(!hc||["ReactNative","NativeScript","NS"].indexOf(hc.product)<0),p1=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),g1=Iu&&window.location.href||"http://localhost",x1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Iu,hasStandardBrowserEnv:h1,hasStandardBrowserWebWorkerEnv:p1,navigator:hc,origin:g1},Symbol.toStringTag,{value:"Module"})),ht={...x1,...m1};function y1(e,t){return bl(e,new ht.classes.URLSearchParams,{visitor:function(n,r,s,i){return ht.isNode&&O.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function v1(e){return O.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function w1(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function Np(e){function t(n,r,s,i){let l=n[i++];if(l==="__proto__")return!0;const a=Number.isFinite(+l),c=i>=n.length;return l=!l&&O.isArray(s)?s.length:l,c?(O.hasOwnProp(s,l)?s[l]=[s[l],r]:s[l]=r,!a):((!s[l]||!O.isObject(s[l]))&&(s[l]=[]),t(n,r,s[l],i)&&O.isArray(s[l])&&(s[l]=w1(s[l])),!a)}if(O.isFormData(e)&&O.isFunction(e.entries)){const n={};return O.forEachEntry(e,(r,s)=>{t(v1(r),s,n,0)}),n}return null}function j1(e,t,n){if(O.isString(e))try{return(t||JSON.parse)(e),O.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const _u={transitional:jp,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=O.isObject(t);if(i&&O.isHTMLForm(t)&&(t=new FormData(t)),O.isFormData(t))return s?JSON.stringify(Np(t)):t;if(O.isArrayBuffer(t)||O.isBuffer(t)||O.isStream(t)||O.isFile(t)||O.isBlob(t)||O.isReadableStream(t))return t;if(O.isArrayBufferView(t))return t.buffer;if(O.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return y1(t,this.formSerializer).toString();if((a=O.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return bl(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),j1(t)):t}],transformResponse:[function(t){const n=this.transitional||_u.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(O.isResponse(t)||O.isReadableStream(t))return t;if(t&&O.isString(t)&&(r&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(l)throw a.name==="SyntaxError"?ve.from(a,ve.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ht.classes.FormData,Blob:ht.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],e=>{_u.headers[e]={}});const Ru=_u,N1=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),b1=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),r=l.substring(s+1).trim(),!(!n||t[n]&&N1[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},hf=Symbol("internals");function Ms(e){return e&&String(e).trim().toLowerCase()}function mi(e){return e===!1||e==null?e:O.isArray(e)?e.map(mi):String(e)}function k1(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const S1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function la(e,t,n,r,s){if(O.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!O.isString(t)){if(O.isString(r))return t.indexOf(r)!==-1;if(O.isRegExp(r))return r.test(t)}}function C1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function E1(e,t){const n=O.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,l){return this[r].call(this,t,s,i,l)},configurable:!0})})}class kl{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(a,c,u){const m=Ms(c);if(!m)throw new Error("header name must be a non-empty string");const f=O.findKey(s,m);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=mi(a))}const l=(a,c)=>O.forEach(a,(u,m)=>i(u,m,c));if(O.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(O.isString(t)&&(t=t.trim())&&!S1(t))l(b1(t),n);else if(O.isObject(t)&&O.isIterable(t)){let a={},c,u;for(const m of t){if(!O.isArray(m))throw TypeError("Object iterator must return a key-value pair");a[u=m[0]]=(c=a[u])?O.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}l(a,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=Ms(t),t){const r=O.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return k1(s);if(O.isFunction(n))return n.call(this,s,r);if(O.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Ms(t),t){const r=O.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||la(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(l){if(l=Ms(l),l){const a=O.findKey(r,l);a&&(!n||la(r,r[a],a,n))&&(delete r[a],s=!0)}}return O.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||la(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return O.forEach(this,(s,i)=>{const l=O.findKey(r,i);if(l){n[l]=mi(s),delete n[i];return}const a=t?C1(i):String(i).trim();a!==i&&delete n[i],n[a]=mi(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return O.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&O.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[hf]=this[hf]={accessors:{}}).accessors,s=this.prototype;function i(l){const a=Ms(l);r[a]||(E1(s,l),r[a]=!0)}return O.isArray(t)?t.forEach(i):i(t),this}}kl.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(kl.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});O.freezeMethods(kl);const ln=kl;function aa(e,t){const n=this||Ru,r=t||n,s=ln.from(r.headers);let i=r.data;return O.forEach(e,function(a){i=a.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function bp(e){return!!(e&&e.__CANCEL__)}function ys(e,t,n){ve.call(this,e??"canceled",ve.ERR_CANCELED,t,n),this.name="CanceledError"}O.inherits(ys,ve,{__CANCEL__:!0});function kp(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ve("Request failed with status code "+n.status,[ve.ERR_BAD_REQUEST,ve.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function T1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function I1(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),m=r[i];l||(l=u),n[s]=c,r[s]=u;let f=i,j=0;for(;f!==s;)j+=n[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-l<t)return;const I=m&&u-m;return I?Math.round(j*1e3/I):void 0}}function _1(e,t){let n=0,r=1e3/t,s,i;const l=(u,m=Date.now())=>{n=m,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const m=Date.now(),f=m-n;f>=r?l(u,m):(s=u,i||(i=setTimeout(()=>{i=null,l(s)},r-f)))},()=>s&&l(s)]}const qi=(e,t,n=3)=>{let r=0;const s=I1(50,250);return _1(i=>{const l=i.loaded,a=i.lengthComputable?i.total:void 0,c=l-r,u=s(c),m=l<=a;r=l;const f={loaded:l,total:a,progress:a?l/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&m?(a-l)/u:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(f)},n)},pf=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},gf=e=>(...t)=>O.asap(()=>e(...t)),R1=ht.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,ht.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(ht.origin),ht.navigator&&/(msie|trident)/i.test(ht.navigator.userAgent)):()=>!0,M1=ht.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const l=[e+"="+encodeURIComponent(t)];O.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),O.isString(r)&&l.push("path="+r),O.isString(s)&&l.push("domain="+s),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function A1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function P1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Sp(e,t,n){let r=!A1(t);return e&&(r||n==!1)?P1(e,t):t}const xf=e=>e instanceof ln?{...e}:e;function Tr(e,t){t=t||{};const n={};function r(u,m,f,j){return O.isPlainObject(u)&&O.isPlainObject(m)?O.merge.call({caseless:j},u,m):O.isPlainObject(m)?O.merge({},m):O.isArray(m)?m.slice():m}function s(u,m,f,j){if(O.isUndefined(m)){if(!O.isUndefined(u))return r(void 0,u,f,j)}else return r(u,m,f,j)}function i(u,m){if(!O.isUndefined(m))return r(void 0,m)}function l(u,m){if(O.isUndefined(m)){if(!O.isUndefined(u))return r(void 0,u)}else return r(void 0,m)}function a(u,m,f){if(f in t)return r(u,m);if(f in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:a,headers:(u,m,f)=>s(xf(u),xf(m),f,!0)};return O.forEach(Object.keys({...e,...t}),function(m){const f=c[m]||s,j=f(e[m],t[m],m);O.isUndefined(j)&&f!==a||(n[m]=j)}),n}const Cp=e=>{const t=Tr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:l,auth:a}=t;if(t.headers=l=ln.from(l),t.url=wp(Sp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&l.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),O.isFormData(n)){if(ht.hasStandardBrowserEnv||ht.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(O.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([m,f])=>{u.includes(m.toLowerCase())&&l.set(m,f)})}}if(ht.hasStandardBrowserEnv&&(r&&O.isFunction(r)&&(r=r(t)),r||r!==!1&&R1(t.url))){const c=s&&i&&M1.read(i);c&&l.set(s,c)}return t},L1=typeof XMLHttpRequest<"u",O1=L1&&function(e){return new Promise(function(n,r){const s=Cp(e);let i=s.data;const l=ln.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,m,f,j,I,h;function v(){I&&I(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function w(){if(!S)return;const g=ln.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:g,config:e,request:S};kp(function(P){n(P),v()},function(P){r(P),v()},R),S=null}"onloadend"in S?S.onloadend=w:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(w)},S.onabort=function(){S&&(r(new ve("Request aborted",ve.ECONNABORTED,e,S)),S=null)},S.onerror=function(_){const R=_&&_.message?_.message:"Network Error",A=new ve(R,ve.ERR_NETWORK,e,S);A.event=_||null,r(A),S=null},S.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||jp;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),r(new ve(_,R.clarifyTimeoutError?ve.ETIMEDOUT:ve.ECONNABORTED,e,S)),S=null},i===void 0&&l.setContentType(null),"setRequestHeader"in S&&O.forEach(l.toJSON(),function(_,R){S.setRequestHeader(R,_)}),O.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),a&&a!=="json"&&(S.responseType=s.responseType),u&&([j,h]=qi(u,!0),S.addEventListener("progress",j)),c&&S.upload&&([f,I]=qi(c),S.upload.addEventListener("progress",f),S.upload.addEventListener("loadend",I)),(s.cancelToken||s.signal)&&(m=g=>{S&&(r(!g||g.type?new ys(null,e,S):g),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const x=T1(s.url);if(x&&ht.protocols.indexOf(x)===-1){r(new ve("Unsupported protocol "+x+":",ve.ERR_BAD_REQUEST,e));return}S.send(i||null)})},U1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,a();const m=u instanceof Error?u:this.reason;r.abort(m instanceof ve?m:new ys(m instanceof Error?m.message:m))}};let l=t&&setTimeout(()=>{l=null,i(new ve(`timeout ${t} of ms exceeded`,ve.ETIMEDOUT))},t);const a=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>O.asap(a),c}},F1=U1,$1=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},D1=async function*(e,t){for await(const n of z1(e))yield*$1(n,t)},z1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},yf=(e,t,n,r)=>{const s=D1(e,t);let i=0,l,a=c=>{l||(l=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:m}=await s.next();if(u){a(),c.close();return}let f=m.byteLength;if(n){let j=i+=f;n(j)}c.enqueue(new Uint8Array(m))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},vf=64*1024,{isFunction:Qo}=O,B1=(({Request:e,Response:t})=>({Request:e,Response:t}))(O.global),{ReadableStream:wf,TextEncoder:jf}=O.global,Nf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},V1=e=>{e=O.merge.call({skipUndefined:!0},B1,e);const{fetch:t,Request:n,Response:r}=e,s=t?Qo(t):typeof fetch=="function",i=Qo(n),l=Qo(r);if(!s)return!1;const a=s&&Qo(wf),c=s&&(typeof jf=="function"?(h=>v=>h.encode(v))(new jf):async h=>new Uint8Array(await new n(h).arrayBuffer())),u=i&&a&&Nf(()=>{let h=!1;const v=new n(ht.origin,{body:new wf,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!v}),m=l&&a&&Nf(()=>O.isReadableStream(new r("").body)),f={stream:m&&(h=>h.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!f[h]&&(f[h]=(v,S)=>{let w=v&&v[h];if(w)return w.call(v);throw new ve(`Response type '${h}' is not supported`,ve.ERR_NOT_SUPPORT,S)})});const j=async h=>{if(h==null)return 0;if(O.isBlob(h))return h.size;if(O.isSpecCompliantForm(h))return(await new n(ht.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(O.isArrayBufferView(h)||O.isArrayBuffer(h))return h.byteLength;if(O.isURLSearchParams(h)&&(h=h+""),O.isString(h))return(await c(h)).byteLength},I=async(h,v)=>{const S=O.toFiniteNumber(h.getContentLength());return S??j(v)};return async h=>{let{url:v,method:S,data:w,signal:x,cancelToken:g,timeout:_,onDownloadProgress:R,onUploadProgress:A,responseType:P,headers:G,withCredentials:Q="same-origin",fetchOptions:X}=Cp(h),K=t||fetch;P=P?(P+"").toLowerCase():"text";let ne=F1([x,g&&g.toAbortSignal()],_),$=null;const Y=ne&&ne.unsubscribe&&(()=>{ne.unsubscribe()});let ee;try{if(A&&u&&S!=="get"&&S!=="head"&&(ee=await I(G,w))!==0){let L=new n(v,{method:"POST",body:w,duplex:"half"}),B;if(O.isFormData(w)&&(B=L.headers.get("content-type"))&&G.setContentType(B),L.body){const[ue,xe]=pf(ee,qi(gf(A)));w=yf(L.body,vf,ue,xe)}}O.isString(Q)||(Q=Q?"include":"omit");const le=i&&"credentials"in n.prototype,fe={...X,signal:ne,method:S.toUpperCase(),headers:G.normalize().toJSON(),body:w,duplex:"half",credentials:le?Q:void 0};$=i&&new n(v,fe);let z=await(i?K($,X):K(v,fe));const T=m&&(P==="stream"||P==="response");if(m&&(R||T&&Y)){const L={};["status","statusText","headers"].forEach(ke=>{L[ke]=z[ke]});const B=O.toFiniteNumber(z.headers.get("content-length")),[ue,xe]=R&&pf(B,qi(gf(R),!0))||[];z=new r(yf(z.body,vf,ue,()=>{xe&&xe(),Y&&Y()}),L)}P=P||"text";let U=await f[O.findKey(f,P)||"text"](z,h);return!T&&Y&&Y(),await new Promise((L,B)=>{kp(L,B,{data:U,headers:ln.from(z.headers),status:z.status,statusText:z.statusText,config:h,request:$})})}catch(le){throw Y&&Y(),le&&le.name==="TypeError"&&/Load failed|fetch/i.test(le.message)?Object.assign(new ve("Network Error",ve.ERR_NETWORK,h,$),{cause:le.cause||le}):ve.from(le,le&&le.code,h,$)}}},G1=new Map,Ep=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let l=i.length,a=l,c,u,m=G1;for(;a--;)c=i[a],u=m.get(c),u===void 0&&m.set(c,u=a?new Map:V1(t)),m=u;return u};Ep();const pc={http:o1,xhr:O1,fetch:{get:Ep}};O.forEach(pc,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const bf=e=>`- ${e}`,H1=e=>O.isFunction(e)||e===null||e===!1,Tp={getAdapter:(e,t)=>{e=O.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let l=0;l<n;l++){r=e[l];let a;if(s=r,!H1(r)&&(s=pc[(a=String(r)).toLowerCase()],s===void 0))throw new ve(`Unknown adapter '${a}'`);if(s&&(O.isFunction(s)||(s=s.get(t))))break;i[a||"#"+l]=s}if(!s){const l=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?l.length>1?`since :
`+l.map(bf).join(`
`):" "+bf(l[0]):"as no adapter specified";throw new ve("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:pc};function ca(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ys(null,e)}function kf(e){return ca(e),e.headers=ln.from(e.headers),e.data=aa.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Tp.getAdapter(e.adapter||Ru.adapter,e)(e).then(function(r){return ca(e),r.data=aa.call(e,e.transformResponse,r),r.headers=ln.from(r.headers),r},function(r){return bp(r)||(ca(e),r&&r.response&&(r.response.data=aa.call(e,e.transformResponse,r.response),r.response.headers=ln.from(r.response.headers))),Promise.reject(r)})}const Ip="1.12.2",Sl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Sl[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Sf={};Sl.transitional=function(t,n,r){function s(i,l){return"[Axios v"+Ip+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,a)=>{if(t===!1)throw new ve(s(l," has been removed"+(n?" in "+n:"")),ve.ERR_DEPRECATED);return n&&!Sf[l]&&(Sf[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,l,a):!0}};Sl.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function W1(e,t,n){if(typeof e!="object")throw new ve("options must be an object",ve.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],l=t[i];if(l){const a=e[i],c=a===void 0||l(a,i,e);if(c!==!0)throw new ve("option "+i+" must be "+c,ve.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ve("Unknown option "+i,ve.ERR_BAD_OPTION)}}const hi={assertOptions:W1,validators:Sl},mn=hi.validators;class Ki{constructor(t){this.defaults=t||{},this.interceptors={request:new mf,response:new mf}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Tr(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&hi.assertOptions(r,{silentJSONParsing:mn.transitional(mn.boolean),forcedJSONParsing:mn.transitional(mn.boolean),clarifyTimeoutError:mn.transitional(mn.boolean)},!1),s!=null&&(O.isFunction(s)?n.paramsSerializer={serialize:s}:hi.assertOptions(s,{encode:mn.function,serialize:mn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),hi.assertOptions(n,{baseUrl:mn.spelling("baseURL"),withXsrfToken:mn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&O.merge(i.common,i[n.method]);i&&O.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=ln.concat(l,i);const a=[];let c=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(c=c&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let m,f=0,j;if(!c){const h=[kf.bind(this),void 0];for(h.unshift(...a),h.push(...u),j=h.length,m=Promise.resolve(n);f<j;)m=m.then(h[f++],h[f++]);return m}j=a.length;let I=n;for(;f<j;){const h=a[f++],v=a[f++];try{I=h(I)}catch(S){v.call(this,S);break}}try{m=kf.call(this,I)}catch(h){return Promise.reject(h)}for(f=0,j=u.length;f<j;)m=m.then(u[f++],u[f++]);return m}getUri(t){t=Tr(this.defaults,t);const n=Sp(t.baseURL,t.url,t.allowAbsoluteUrls);return wp(n,t.params,t.paramsSerializer)}}O.forEach(["delete","get","head","options"],function(t){Ki.prototype[t]=function(n,r){return this.request(Tr(r||{},{method:t,url:n,data:(r||{}).data}))}});O.forEach(["post","put","patch"],function(t){function n(r){return function(i,l,a){return this.request(Tr(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Ki.prototype[t]=n(),Ki.prototype[t+"Form"]=n(!0)});const pi=Ki;class Mu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const l=new Promise(a=>{r.subscribe(a),i=a}).then(s);return l.cancel=function(){r.unsubscribe(i)},l},t(function(i,l,a){r.reason||(r.reason=new ys(i,l,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Mu(function(s){t=s}),cancel:t}}}const q1=Mu;function K1(e){return function(n){return e.apply(null,n)}}function Y1(e){return O.isObject(e)&&e.isAxiosError===!0}const gc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(gc).forEach(([e,t])=>{gc[t]=e});const Q1=gc;function _p(e){const t=new pi(e),n=ap(pi.prototype.request,t);return O.extend(n,pi.prototype,t,{allOwnKeys:!0}),O.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return _p(Tr(e,s))},n}const Ze=_p(Ru);Ze.Axios=pi;Ze.CanceledError=ys;Ze.CancelToken=q1;Ze.isCancel=bp;Ze.VERSION=Ip;Ze.toFormData=bl;Ze.AxiosError=ve;Ze.Cancel=Ze.CanceledError;Ze.all=function(t){return Promise.all(t)};Ze.spread=K1;Ze.isAxiosError=Y1;Ze.mergeConfig=Tr;Ze.AxiosHeaders=ln;Ze.formToJSON=e=>Np(O.isHTMLForm(e)?new FormData(e):e);Ze.getAdapter=Tp.getAdapter;Ze.HttpStatusCode=Q1;Ze.default=Ze;const J1=Ze,Rp="https://internalchat.pizeonfly.com/api",Me=Rp.replace(/\/?api\/?$/,""),oe=J1.create({baseURL:Rp,headers:{"Content-Type":"application/json"}});oe.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));oe.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const Ys={login:(e,t)=>oe.post("/auth/login",{email:e,password:t}),registerSuperAdmin:(e,t,n)=>oe.post("/auth/register-superadmin",{name:e,email:t,password:n}),getCurrentUser:()=>oe.get("/auth/me"),checkSuperAdmin:()=>oe.get("/auth/check-superadmin")},Tt={getUsers:()=>oe.get("/users"),getActiveUsers:()=>oe.get("/users/active"),createUser:e=>oe.post("/users",e),updateUser:(e,t)=>oe.put(`/users/${e}`,t),deleteUser:e=>oe.delete(`/users/${e}`),toggleUserStatus:e=>oe.put(`/users/${e}/toggle-status`),updateProfile:e=>{const t=e instanceof FormData?e:(()=>{const n=new FormData;return Object.entries(e||{}).forEach(([r,s])=>{s!=null&&n.append(r,s)}),n})();return oe.put("/users/profile",t,{headers:{"Content-Type":"multipart/form-data"}})}},rn={getGroups:()=>oe.get("/groups"),getMyGroups:()=>oe.get("/groups/my-groups"),createGroup:e=>oe.post("/groups",e),addMembers:(e,t)=>oe.post(`/groups/${e}/members`,{members:t}),removeMember:(e,t)=>oe.delete(`/groups/${e}/members/${t}`),updateGroup:(e,t)=>oe.put(`/groups/${e}`,t),deleteGroup:e=>oe.delete(`/groups/${e}`),uploadGroupAvatar:(e,t)=>oe.post(`/groups/${e}/avatar`,t,{headers:{"Content-Type":"multipart/form-data"}})},qe={getPersonalMessages:e=>oe.get(`/messages/personal/${e}`),getGroupMessages:e=>oe.get(`/messages/group/${e}`),sendPersonalMessage:e=>e instanceof FormData?oe.post("/messages/personal",e,{headers:{"Content-Type":"multipart/form-data"}}):oe.post("/messages/personal",e),sendGroupMessage:e=>e instanceof FormData?oe.post("/messages/group",e,{headers:{"Content-Type":"multipart/form-data"}}):oe.post("/messages/group",e),markAsRead:e=>oe.put(`/messages/${e}/read`),getUnreadCount:()=>oe.get("/messages/unread/count"),getChatState:()=>oe.get("/messages/chat-state"),updateChatState:e=>oe.post("/messages/chat-state",e),forwardMessage:e=>oe.post("/messages/forward",e),editMessage:(e,t)=>oe.put(`/messages/${e}`,{message:t})},xo={getHistory:(e={})=>oe.get("/calls/history",{params:e}),initiate:(e,t="voice",n=null)=>oe.post("/calls/initiate",{receiverId:e,callType:t,offer:n}),answer:(e,t)=>oe.put(`/calls/${e}/answer`,{answer:t}),decline:e=>oe.put(`/calls/${e}/decline`),end:e=>oe.put(`/calls/${e}/end`),addIceCandidate:(e,t,n,r)=>oe.post(`/calls/${e}/ice-candidate`,{candidate:t,sdpMLineIndex:n,sdpMid:r}),getDetails:e=>oe.get(`/calls/${e}`),updateNotes:(e,t)=>oe.put(`/calls/${e}/notes`,{notes:t}),delete:e=>oe.delete(`/calls/${e}`)},vr={test:()=>oe.get("/group-calls/test"),initiate:(e,t="voice")=>oe.post("/group-calls/initiate",{groupId:e,callType:t}),join:e=>oe.post(`/group-calls/${e}/join`),leave:e=>oe.post(`/group-calls/${e}/leave`),end:e=>oe.post(`/group-calls/${e}/end`),updateParticipantStatus:(e,t,n)=>oe.put(`/group-calls/${e}/participant/${t}/status`,n),removeParticipant:(e,t)=>oe.delete(`/group-calls/${e}/participant/${t}`),getDetails:e=>oe.get(`/group-calls/${e}`),getActiveCalls:e=>oe.get(`/group-calls/group/${e}/active`),getHistory:(e,t={})=>oe.get(`/group-calls/group/${e}/history`,{params:t}),endAllActive:()=>oe.post("/group-calls/debug/end-all-active")},X1=Object.freeze(Object.defineProperty({__proto__:null,API_ORIGIN:Me,authAPI:Ys,callsAPI:xo,default:oe,groupCallsAPI:vr,groupsAPI:rn,messagesAPI:qe,usersAPI:Tt},Symbol.toStringTag,{value:"Module"})),Mp=y.createContext(),jn=()=>{const e=y.useContext(Mp);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Z1=({children:e})=>{const[t,n]=y.useState(null),[r,s]=y.useState(!0);y.useEffect(()=>{localStorage.getItem("token")?Ys.getCurrentUser().then(m=>{n(m.data.user)}).catch(m=>{console.error("Auth check failed:",m),localStorage.removeItem("token")}).finally(()=>{s(!1)}):s(!1)},[]);const c={user:t,setUser:n,login:async(u,m)=>{var f,j,I,h;try{const v=await Ys.login(u,m),{token:S,user:w}=v.data;return localStorage.setItem("token",S),n(w),{success:!0,data:v.data}}catch(v){return(j=(f=v.response)==null?void 0:f.data)!=null&&j.disabled?{success:!1,error:"Your account has been disabled by administrator",disabled:!0}:{success:!1,error:((h=(I=v.response)==null?void 0:I.data)==null?void 0:h.message)||"Login failed"}}},registerSuperAdmin:async(u,m,f)=>{var j,I;try{const h=await Ys.registerSuperAdmin(u,m,f),{token:v,user:S}=h.data;return localStorage.setItem("token",v),n(S),{success:!0,data:h.data}}catch(h){return{success:!1,error:((I=(j=h.response)==null?void 0:j.data)==null?void 0:I.message)||"Registration failed"}}},logout:()=>{localStorage.removeItem("token"),n(null)},loading:r};return o.jsx(Mp.Provider,{value:c,children:e})},ew="modulepreload",tw=function(e){return"/"+e},Cf={},nw=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=tw(i),i in Cf)return;Cf[i]=!0;const l=i.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!r)for(let m=s.length-1;m>=0;m--){const f=s[m];if(f.href===i&&(!l||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":ew,l||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),l)return new Promise((m,f)=>{u.addEventListener("load",m),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i})},wn=Object.create(null);wn.open="0";wn.close="1";wn.ping="2";wn.pong="3";wn.message="4";wn.upgrade="5";wn.noop="6";const gi=Object.create(null);Object.keys(wn).forEach(e=>{gi[wn[e]]=e});const xc={type:"error",data:"parser error"},Ap=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Pp=typeof ArrayBuffer=="function",Lp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Au=({type:e,data:t},n,r)=>Ap&&t instanceof Blob?n?r(t):Ef(t,r):Pp&&(t instanceof ArrayBuffer||Lp(t))?n?r(t):Ef(new Blob([t]),r):r(wn[e]+(t||"")),Ef=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function Tf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let ua;function rw(e,t){if(Ap&&e.data instanceof Blob)return e.data.arrayBuffer().then(Tf).then(t);if(Pp&&(e.data instanceof ArrayBuffer||Lp(e.data)))return t(Tf(e.data));Au(e,!1,n=>{ua||(ua=new TextEncoder),t(ua.encode(n))})}const If="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<If.length;e++)Fs[If.charCodeAt(e)]=e;const sw=e=>{let t=e.length*.75,n=e.length,r,s=0,i,l,a,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),m=new Uint8Array(u);for(r=0;r<n;r+=4)i=Fs[e.charCodeAt(r)],l=Fs[e.charCodeAt(r+1)],a=Fs[e.charCodeAt(r+2)],c=Fs[e.charCodeAt(r+3)],m[s++]=i<<2|l>>4,m[s++]=(l&15)<<4|a>>2,m[s++]=(a&3)<<6|c&63;return u},ow=typeof ArrayBuffer=="function",Pu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Op(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:iw(e.substring(1),t)}:gi[n]?e.length>1?{type:gi[n],data:e.substring(1)}:{type:gi[n]}:xc},iw=(e,t)=>{if(ow){const n=sw(e);return Op(n,t)}else return{base64:!0,data:e}},Op=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Up=String.fromCharCode(30),lw=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((i,l)=>{Au(i,!1,a=>{r[l]=a,++s===n&&t(r.join(Up))})})},aw=(e,t)=>{const n=e.split(Up),r=[];for(let s=0;s<n.length;s++){const i=Pu(n[s],t);if(r.push(i),i.type==="error")break}return r};function cw(){return new TransformStream({transform(e,t){rw(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let da;function Jo(e){return e.reduce((t,n)=>t+n.length,0)}function Xo(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function uw(e,t){da||(da=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(l,a){for(n.push(l);;){if(r===0){if(Jo(n)<1)break;const c=Xo(n,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Jo(n)<2)break;const c=Xo(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Jo(n)<8)break;const c=Xo(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),m=u.getUint32(0);if(m>Math.pow(2,53-32)-1){a.enqueue(xc);break}s=m*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Jo(n)<s)break;const c=Xo(n,s);a.enqueue(Pu(i?c:da.decode(c),t)),r=0}if(s===0||s>e){a.enqueue(xc);break}}}})}const Fp=4;function Xe(e){if(e)return dw(e)}function dw(e){for(var t in Xe.prototype)e[t]=Xe.prototype[t];return e}Xe.prototype.on=Xe.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Xe.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Xe.prototype.off=Xe.prototype.removeListener=Xe.prototype.removeAllListeners=Xe.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Xe.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};Xe.prototype.emitReserved=Xe.prototype.emit;Xe.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Xe.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Cl=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),Wt=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),fw="arraybuffer";function $p(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const mw=Wt.setTimeout,hw=Wt.clearTimeout;function El(e,t){t.useNativeTimers?(e.setTimeoutFn=mw.bind(Wt),e.clearTimeoutFn=hw.bind(Wt)):(e.setTimeoutFn=Wt.setTimeout.bind(Wt),e.clearTimeoutFn=Wt.clearTimeout.bind(Wt))}const pw=1.33;function gw(e){return typeof e=="string"?xw(e):Math.ceil((e.byteLength||e.size)*pw)}function xw(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Dp(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function yw(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function vw(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class ww extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class Lu extends Xe{constructor(t){super(),this.writable=!1,El(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new ww(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=Pu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=yw(t);return n.length?"?"+n:""}}class jw extends Lu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};aw(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,lw(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Dp()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let zp=!1;try{zp=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Nw=zp;function bw(){}class kw extends jw{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class vn extends Xe{constructor(t,n,r){super(),this.createRequest=t,El(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=$p(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=vn.requestsCount++,vn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=bw,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete vn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}vn.requestsCount=0;vn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",_f);else if(typeof addEventListener=="function"){const e="onpagehide"in Wt?"pagehide":"unload";addEventListener(e,_f,!1)}}function _f(){for(let e in vn.requests)vn.requests.hasOwnProperty(e)&&vn.requests[e].abort()}const Sw=function(){const e=Bp({xdomain:!1});return e&&e.responseType!==null}();class Cw extends kw{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=Sw&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new vn(Bp,this.uri(),t)}}function Bp(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Nw))return new XMLHttpRequest}catch{}if(!t)try{return new Wt[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Vp=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ew extends Lu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Vp?{}:$p(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;Au(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Cl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Dp()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const fa=Wt.WebSocket||Wt.MozWebSocket;class Tw extends Ew{createSocket(t,n,r){return Vp?new fa(t,n,r):n?new fa(t,n):new fa(t)}doWrite(t,n){this.ws.send(n)}}class Iw extends Lu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=uw(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=cw();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),i())}).catch(a=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&Cl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const _w={websocket:Tw,webtransport:Iw,polling:Cw},Rw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Mw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function yc(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=Rw.exec(e||""),i={},l=14;for(;l--;)i[Mw[l]]=s[l]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Aw(i,i.path),i.queryKey=Pw(i,i.query),i}function Aw(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Pw(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const vc=typeof addEventListener=="function"&&typeof removeEventListener=="function",xi=[];vc&&addEventListener("offline",()=>{xi.forEach(e=>e())},!1);class rr extends Xe{constructor(t,n){if(super(),this.binaryType=fw,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=yc(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=yc(n.host).host);El(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=vw(this.opts.query)),vc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},xi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Fp,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&rr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",rr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=gw(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Cl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(rr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),vc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=xi.indexOf(this._offlineEventListener);r!==-1&&xi.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}rr.protocol=Fp;class Lw extends rr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;rr.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;rr.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(m(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const j=new Error("probe error");j.transport=n.name,this.emitReserved("upgradeError",j)}}))};function i(){r||(r=!0,m(),n.close(),n=null)}const l=f=>{const j=new Error("probe error: "+f);j.transport=n.name,i(),this.emitReserved("upgradeError",j)};function a(){l("transport closed")}function c(){l("socket closed")}function u(f){n&&f.name!==n.name&&i()}const m=()=>{n.removeListener("open",s),n.removeListener("error",l),n.removeListener("close",a),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",l),n.once("close",a),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let Ow=class extends Lw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>_w[s]).filter(s=>!!s)),super(t,r)}};function Uw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=yc(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Fw=typeof ArrayBuffer=="function",$w=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Gp=Object.prototype.toString,Dw=typeof Blob=="function"||typeof Blob<"u"&&Gp.call(Blob)==="[object BlobConstructor]",zw=typeof File=="function"||typeof File<"u"&&Gp.call(File)==="[object FileConstructor]";function Ou(e){return Fw&&(e instanceof ArrayBuffer||$w(e))||Dw&&e instanceof Blob||zw&&e instanceof File}function yi(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(yi(e[n]))return!0;return!1}if(Ou(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return yi(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&yi(e[n]))return!0;return!1}function Bw(e){const t=[],n=e.data,r=e;return r.data=wc(n,t),r.attachments=t.length,{packet:r,buffers:t}}function wc(e,t){if(!e)return e;if(Ou(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=wc(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=wc(e[r],t));return n}return e}function Vw(e,t){return e.data=jc(e.data,t),delete e.attachments,e}function jc(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=jc(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=jc(e[n],t));return e}const Gw=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Hw=5;var Ce;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Ce||(Ce={}));class Ww{constructor(t){this.replacer=t}encode(t){return(t.type===Ce.EVENT||t.type===Ce.ACK)&&yi(t)?this.encodeAsBinary({type:t.type===Ce.EVENT?Ce.BINARY_EVENT:Ce.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Ce.BINARY_EVENT||t.type===Ce.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Bw(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function Rf(e){return Object.prototype.toString.call(e)==="[object Object]"}class Uu extends Xe{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===Ce.BINARY_EVENT;r||n.type===Ce.BINARY_ACK?(n.type=r?Ce.EVENT:Ce.ACK,this.reconstructor=new qw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ou(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(Ce[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ce.BINARY_EVENT||r.type===Ce.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(i,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(Uu.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Ce.CONNECT:return Rf(n);case Ce.DISCONNECT:return n===void 0;case Ce.CONNECT_ERROR:return typeof n=="string"||Rf(n);case Ce.EVENT:case Ce.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Gw.indexOf(n[0])===-1);case Ce.ACK:case Ce.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class qw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Vw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Kw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Uu,Encoder:Ww,get PacketType(){return Ce},protocol:Hw},Symbol.toStringTag,{value:"Module"}));function tn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Yw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Hp extends Xe{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[tn(t,"open",this.onopen.bind(this)),tn(t,"packet",this.onpacket.bind(this)),tn(t,"error",this.onerror.bind(this)),tn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,i;if(Yw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:Ce.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const m=this.ids++,f=n.pop();this._registerAckCallback(m,f),l.id=m}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),l=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,s)=>{const i=(l,a)=>l?s(l):r(a);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Ce.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ce.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ce.EVENT:case Ce.BINARY_EVENT:this.onevent(t);break;case Ce.ACK:case Ce.BINARY_ACK:this.onack(t);break;case Ce.DISCONNECT:this.ondisconnect();break;case Ce.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:Ce.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ce.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function vs(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}vs.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};vs.prototype.reset=function(){this.attempts=0};vs.prototype.setMin=function(e){this.ms=e};vs.prototype.setMax=function(e){this.max=e};vs.prototype.setJitter=function(e){this.jitter=e};class Nc extends Xe{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,El(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new vs({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||Kw;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Ow(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=tn(n,"open",function(){r.onopen(),t&&t()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},l=tn(n,"error",i);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(tn(t,"ping",this.onping.bind(this)),tn(t,"data",this.ondata.bind(this)),tn(t,"error",this.onerror.bind(this)),tn(t,"close",this.onclose.bind(this)),tn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Cl(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Hp(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const As={};function Qs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Uw(e,t.path||"/socket.io"),r=n.source,s=n.id,i=n.path,l=As[s]&&i in As[s].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return a?c=new Nc(r,t):(As[s]||(As[s]=new Nc(r,t)),c=As[s]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Qs,{Manager:Nc,Socket:Hp,io:Qs,connect:Qs});const Wp=y.createContext(),Un=()=>{const e=y.useContext(Wp);if(!e)throw new Error("useSocket must be used within a SocketProvider");return e},Qw=({children:e,user:t})=>{const[n,r]=y.useState(null),[s,i]=y.useState(!1),[l,a]=y.useState([]),[c,u]=y.useState(0),[m,f]=y.useState(Date.now()),[j,I]=y.useState([]),h=U=>{if(t&&(t.role==="admin"||t.role==="superadmin")){const B=`🚨 DISABLED USER LOGIN ATTEMPT

${U.userName} (${U.userEmail}) is trying to access the system`;q.error(B,{duration:8e3,position:"top-center",style:{background:"#fef2f2",color:"#dc2626",border:"2px solid #ef4444",fontSize:"14px",fontWeight:"bold",padding:"16px",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",whiteSpace:"pre-line"},icon:"🚨",className:"toast-admin-alert"});const ue=Date.now()+Math.random();I(xe=>[...xe,{...U,id:ue}])}},v=async U=>{try{const{usersAPI:L}=await nw(()=>Promise.resolve().then(()=>X1),void 0);await L.toggleUserStatus(U);const B=j.find(ue=>ue.userId===U);I(ue=>ue.filter(xe=>xe.userId!==U)),B&&q.success(`✅ User ${B.userName} has been activated successfully!`,{duration:4e3,position:"top-right"})}catch(L){console.error("Error activating user:",L),q.error("Failed to activate user. Please try again.")}},S=U=>{I(L=>L.filter(B=>B.id!==U))},w={autoConnect:!0,transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:2e4,forceNew:!0,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,maxReconnectionAttempts:1/0};y.useEffect(()=>{if(t&&t.id){console.log("🔌 Initializing socket connection for user:",t.name),console.log("🔗 Socket URL:","https://internalchat.pizeonfly.com"),n&&(console.log("🧹 Closing existing socket connection"),n.close(),r(null));const U=localStorage.getItem("token"),L=Qs("https://internalchat.pizeonfly.com",{...w,auth:{token:U}});return L.on("connect",()=>{u(0),f(Date.now()),i(!0),console.log("✅ Socket connected - ID:",L.id),console.log("👤 Connected as user:",t.name),console.log("🔗 Connection URL:",L.io.uri),L.emit("join",t.id),console.log(`🏠 User ${t.id} joined personal room`),R(L),P(L)}),L.on("disconnect",B=>{i(!1),console.log("❌ Socket disconnected - Reason:",B),console.log("👤 Disconnected user:",t.name),A(),G(),x(L)}),L.on("connect_error",B=>{console.error("❌ Socket connection error:",B),i(!1),B.message&&B.message.includes("WebSocket")&&(console.log("🔄 WebSocket connection failed, trying polling transport"),L.io.opts.transports=["polling"],setTimeout(()=>L.connect(),1e3)),x(L)}),L.on("reconnect",B=>{u(0),console.log("🔄 Socket reconnected after",B,"attempts"),console.log("🔌 New Socket ID:",L.id),i(!0),L.emit("join",t.id)}),L.on("reconnect_error",B=>{console.error("❌ Socket reconnection error:",B)}),L.on("reconnect_failed",()=>{console.error("❌ Socket reconnection failed"),i(!1)}),L.on("ping",B=>{f(Date.now()),console.log(" Ping received - Connection alive, timestamp:",new Date(Date.now()).toLocaleTimeString())}),L.on("pong",B=>{f(Date.now()),console.log("💗 Pong received - Connection confirmed, timestamp:",new Date(Date.now()).toLocaleTimeString())}),L.on("connect_timeout",()=>{console.log("⏰ Socket connection timed out")}),L.on("reconnect_error",B=>{console.error("🔄 Reconnection error:",B.message)}),L.on("reconnect_failed",()=>{console.error("💥 Reconnection failed permanently - forcing reconnect"),u(1/0)}),L.on("force-logout",B=>{console.log("🚪 Force logout received:",B),localStorage.removeItem("token"),window.location.href="/login"}),L.on("admin_notification",B=>{h(B)}),L.on("user-online",B=>{var ue;console.log("🟢 User came online:",(ue=B.user)==null?void 0:ue.name),a(xe=>xe.find(pe=>pe.userId===B.userId)?xe.map(pe=>pe.userId===B.userId?{...pe,isOnline:!0,lastSeen:new Date}:pe):[...xe,{...B,isOnline:!0,lastSeen:new Date}])}),L.on("user-offline",B=>{var ue;console.log("🔴 User went offline:",(ue=B.user)==null?void 0:ue.name),a(xe=>xe.find(pe=>pe.userId===B.userId)?xe.map(pe=>pe.userId===B.userId?{...pe,isOnline:!1,lastSeen:new Date}:pe):xe)}),L.on("online-users",B=>{console.log("👥 Initial online users:",B.map(ue=>{var xe;return((xe=ue.user)==null?void 0:xe.name)||ue.name})),a(B.map(ue=>({...ue,isOnline:!0,lastSeen:new Date})))}),r(L),()=>{console.log("🧹 Cleaning up socket connection"),A(),G(),L.close(),r(null),i(!1),a([])}}else n&&(console.log("🔌 Disconnecting socket - no user"),n.close(),r(null),i(!1),a([]))},[t==null?void 0:t.id]);const x=U=>{if(console.log("🔄 Starting reconnection logic"),c<5){const L=1e3*Math.pow(2,c);console.log(`🔄 Reconnecting in ${L}ms...`),setTimeout(()=>{u(B=>B+1),U.connect()},L)}else console.log("💥 Max reconnections reached, manual reconnection forced"),U.connect()};let g,_;const R=U=>{g&&clearInterval(g),g=setInterval(()=>{const L=Date.now()-m;console.log(`Time since last ping: ${L}ms`),U&&s&&L>45e3&&(console.log("➡️ Proactive ping sent to prevent timeout"),U.emit("ping",{timestamp:Date.now()}),f(Date.now())),L>18e4?(console.log("⚠️ Extended timeout reached - checking connection"),U&&U.connected&&s?(console.log("🔧 Connection verified, resetting last ping"),f(Date.now())):(console.log("🔄 Disconnection confirmed, reconnecting..."),U.connect())):console.log(`✅ Socket maintained: ${L}ms since last ping`)},25e3)},A=()=>{g&&(clearInterval(g),g=null)},P=U=>{_&&clearInterval(_),_=setInterval(()=>{U&&U.connected&&U.emit("client-heartbeat",{t:Date.now()})},2e3)},G=()=>{_&&(clearInterval(_),_=null)},T={socket:n,isConnected:s,onlineUsers:l,notifications:j,sendMessage:(U,L,B="text",ue=!1,xe=null)=>{if(console.log("📤 sendMessage called with:",{receiverId:U,content:L,messageType:B,isGroupChat:ue,attachment:xe,socketStatus:{socket:!!n,isConnected:s,socketId:n==null?void 0:n.id}}),n&&s){console.log("📤 Emitting send-message event...");let ke;return ue?(ke={sender:t.id,groupId:U,message:L,messageType:B,timestamp:new Date().toISOString()},n.emit("send-group-message",ke)):(ke={sender:t.id,receiver:U,message:L,messageType:B,timestamp:new Date().toISOString()},n.emit("send-message",ke)),console.log("✅ Message sent successfully:",ke),!0}else throw console.error("❌ Cannot send message: Socket not connected"),new Error("Socket not connected. Please check your connection.")},markMessageRead:(U,L)=>{n&&s&&(n.emit("mark-message-read",{messageId:U,senderId:L}),console.log("📥 Message read marked for:",{messageId:U,senderId:L}))},startTyping:U=>{n&&s&&n.emit("typing",{sender:t.id,receiver:U,isTyping:!0})},stopTyping:U=>{n&&s&&n.emit("typing",{sender:t.id,receiver:U,isTyping:!1})},isUserOnline:U=>{const L=l.find(B=>B.userId===U);return L?L.isOnline:!1},joinGroup:U=>{n&&s&&(n.emit("join-group",U),console.log("🏠 Joined group room:",U))},leaveGroup:U=>{n&&s&&(n.emit("leave-group",U),console.log("🚪 Left group room:",U))},onReceiveMessage:U=>{n&&(n.off("receive-message"),n.on("receive-message",L=>{console.log("🔔 Received message:",L),U(L)}))},onReceiveGroupMessage:U=>{n&&(n.off("receive-group-message"),n.on("receive-group-message",L=>{console.log("🔔 Received group message:",L),U(L)}))},onMessageSent:U=>{n&&(n.off("message-sent"),n.on("message-sent",L=>{console.log("🔔 Message sent confirmation:",L),U(L)}))},handleActivateUser:v,handleCloseNotification:S,getConnectionStatus:()=>({isConnected:s,reconnectAttempts:c,lastPing:new Date(m).toLocaleString(),socketId:n==null?void 0:n.id})};return o.jsx(Wp.Provider,{value:T,children:e})};var Jw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Xw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),je=(e,t)=>{const n=y.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,children:a,...c},u)=>y.createElement("svg",{ref:u,...Jw,width:s,height:s,stroke:r,strokeWidth:l?Number(i)*24/Number(s):i,className:`lucide lucide-${Xw(e)}`,...c},[...t.map(([m,f])=>y.createElement(m,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${e}`,n},Tl=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ma=je("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Zw=je("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),e2=je("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),t2=je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),bc=je("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),n2=je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Yi=je("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),ts=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),kc=je("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Sc=je("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ns=je("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Fu=je("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),r2=je("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),s2=je("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),qp=je("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Kp=je("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Nr=je("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Cc=je("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Yp=je("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Qi=je("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Mf=je("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),Ji=je("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Qp=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),o2=je("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),i2=je("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Il=je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Jp=je("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),$u=je("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),_l=je("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),l2=je("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),a2=je("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),Ec=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),c2=je("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Du=je("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),an=je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Yt=je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),rs=je("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),u2=je("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Xi=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),d2=()=>{const[e,t]=y.useState({name:"",email:"",password:"",confirmPassword:""}),[n,r]=y.useState("user"),[s,i]=y.useState(!1),[l,a]=y.useState(!1),[c,u]=y.useState(!1),[m,f]=y.useState(!0),[j,I]=y.useState(!1),[h,v]=y.useState(!1),{login:S,registerSuperAdmin:w}=jn();y.useEffect(()=>{(async()=>{try{const P=await Ys.checkSuperAdmin();u(P.data.exists)}catch(P){console.error("Error checking super admin:",P)}finally{f(!1)}})()},[]);const x=[{value:"user",label:"User",icon:an,description:"Chat with other users"},{value:"admin",label:"Admin",icon:_l,description:"Manage users and groups"},{value:"superadmin",label:"Super Admin",icon:Yi,description:"Full system access"}],g=A=>{t({...e,[A.target.name]:A.target.value})},_=async A=>{A.preventDefault(),a(!0);try{if(s&&n==="superadmin"){if(e.password!==e.confirmPassword){q.error("Passwords do not match");return}const P=await w(e.name,e.email,e.password);P.success?q.success("Super Admin registered successfully!"):q.error(P.error)}else{const P=await S(e.email,e.password);P.success?q.success("Login successful!"):P.disabled?q.error("Your account has been disabled by administrator"):q.error(P.error)}}catch{q.error("An error occurred. Please try again.")}finally{a(!1)}},R=()=>{if(!s&&c){q.error("Super admin already exists. Please login instead.");return}i(!s),t({name:"",email:"",password:"",confirmPassword:""})};return m?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-md w-full space-y-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Internal Chat App"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Checking system status..."}),o.jsx("div",{className:"flex justify-center mt-4",children:o.jsx("div",{className:"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Internal Chat App"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s?"Register as Super Admin":"Sign in to your account"})]}),o.jsxs("div",{className:"card p-8",children:[!s&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Role"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:x.map(A=>{const P=A.icon;return o.jsx("button",{type:"button",onClick:()=>r(A.value),className:`p-3 rounded-lg border-2 transition-all ${n===A.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(P,{className:"w-5 h-5 text-gray-600"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium text-gray-900",children:A.label}),o.jsx("div",{className:"text-sm text-gray-500",children:A.description})]})]})},A.value)})})]}),o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),o.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:e.name,onChange:g,className:"input-field mt-1",placeholder:"Enter your full name"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e.email,onChange:g,className:"input-field mt-1",placeholder:"Enter your email"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("input",{id:"password",name:"password",type:j?"text":"password",required:!0,value:e.password,onChange:g,className:"input-field pr-10",placeholder:"Enter your password"}),o.jsx("button",{type:"button","aria-label":j?"Hide password":"Show password",onClick:()=>I(!j),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",children:j?o.jsx(kc,{className:"w-5 h-5"}):o.jsx(Sc,{className:"w-5 h-5"})})]})]}),s&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),o.jsxs("div",{className:"relative mt-1",children:[o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",required:!0,value:e.confirmPassword,onChange:g,className:"input-field pr-10",placeholder:"Confirm your password"}),o.jsx("button",{type:"button","aria-label":h?"Hide password":"Show password",onClick:()=>v(!h),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",children:h?o.jsx(kc,{className:"w-5 h-5"}):o.jsx(Sc,{className:"w-5 h-5"})})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:l,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),s?"Registering...":"Signing in..."]}):s?"Register Super Admin":"Sign In"})}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:R,disabled:m,className:"text-sm text-primary-600 hover:text-primary-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Checking system status...":s?"Already have an account? Sign in":c?"Super admin already exists. Please login instead.":"Need to register Super Admin? Click here"})})]})]})]})})},f2=()=>{const{user:e,logout:t}=jn(),{notifications:n,handleActivateUser:r,handleCloseNotification:s}=Un(),[i,l]=y.useState({totalUsers:0,totalGroups:0,activeUsers:0,disabledUsers:0}),[a,c]=y.useState(!0),[u,m]=y.useState(!1),[f,j]=y.useState(!1);y.useEffect(()=>{I()},[]),y.useEffect(()=>{const S=w=>{if(u){const x=document.querySelector(".notification-panel");x&&!x.contains(w.target)&&m(!1)}};return u&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[u]),y.useEffect(()=>{const S=w=>{if(f){const x=document.querySelector(".account-menu-container");x&&!x.contains(w.target)&&j(!1)}};return f&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[f]);const I=async()=>{try{c(!0);const[S,w]=await Promise.all([e.role==="user"?Tt.getActiveUsers():Tt.getUsers(),rn.getMyGroups()]),x=Array.isArray(S.data)?S.data:[],g=x.filter(R=>(R.isActive??!0)===!0).length,_=x.filter(R=>(R.isActive??!0)===!1).length;l({totalUsers:x.length,totalGroups:w.data.length,activeUsers:g,disabledUsers:_})}catch{q.error("Failed to load dashboard data")}finally{c(!1)}},h=S=>{switch(S){case"superadmin":return o.jsx(Yi,{className:"w-5 h-5 text-yellow-600"});case"admin":return o.jsx(_l,{className:"w-5 h-5 text-blue-600"});default:return o.jsx(an,{className:"w-5 h-5 text-gray-600"})}},v=S=>{switch(S){case"superadmin":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return a?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs(Hi,{to:"/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?o.jsx("img",{src:`${Me}${e.profileImage}`,alt:"Profile",className:"w-12 h-12 rounded-full object-cover"}):o.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-primary-600 font-medium text-lg",children:e.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),o.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",e.name,"!"]})]})]})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[(e.role==="admin"||e.role==="superadmin")&&o.jsx("div",{className:"relative",children:o.jsxs("button",{onClick:()=>m(!u),className:"relative p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-full transition-colors",children:[o.jsx(ma,{className:"w-6 h-6"}),n.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n.length})]})}),o.jsxs("div",{className:"relative account-menu-container",children:[o.jsx("button",{onClick:()=>j(S=>!S),className:`px-3 py-1 rounded-full text-sm font-medium hover:opacity-90 transition ${v(e.role)}`,children:o.jsxs("div",{className:"flex items-center space-x-1",children:[h(e.role),o.jsx("span",{className:"capitalize",children:e.role})]})}),f&&o.jsx("div",{className:"absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-md shadow-lg z-20",children:o.jsxs("button",{onClick:()=>{j(!1),t(),q.success("Logged out successfully")},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[o.jsx(qp,{className:"w-4 h-4"}),o.jsx("span",{children:"Logout"})]})})]})]})]})})}),u&&(e.role==="admin"||e.role==="superadmin")&&o.jsx("div",{className:"notification-panel bg-white border-b shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ma,{className:"w-5 h-5 text-primary-600"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n.length>0&&o.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n.length})]}),o.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:o.jsx(Xi,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"space-y-3",children:n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(ma,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),o.jsx("p",{children:"No notifications yet"})]}):n.map(S=>o.jsx("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:o.jsx(an,{className:"w-4 h-4 text-orange-600"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-sm font-bold text-orange-700 flex items-center gap-2",children:[o.jsx("span",{children:"⚠️"}),"Disabled User Login Attempt"]}),o.jsxs("div",{className:"mt-1 text-sm",children:[o.jsx("div",{className:"font-semibold text-gray-900",children:S.userName}),o.jsx("div",{className:"text-gray-600",children:S.userEmail}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Time: ",new Date(S.timestamp).toLocaleTimeString()]})]})]}),o.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[o.jsxs("button",{onClick:()=>r(S.userId),className:"flex items-center space-x-1 bg-green-600 text-white px-3 py-1.5 rounded-md text-xs font-medium hover:bg-green-700 transition-colors",children:[o.jsx(bc,{className:"w-3 h-3"}),o.jsx("span",{children:"Activate"})]}),o.jsxs("button",{onClick:()=>s(S.id),className:"flex items-center space-x-1 bg-gray-100 text-gray-700 px-3 py-1.5 rounded-md text-xs font-medium hover:bg-gray-200 transition-colors",children:[o.jsx(Xi,{className:"w-3 h-3"}),o.jsx("span",{children:"Close"})]})]})]})},S.id))})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:o.jsx(Yt,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalUsers})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-green-100",children:o.jsx(Nr,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Groups"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalGroups})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-green-100",children:o.jsx(Yt,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activeUsers})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-red-100",children:o.jsx(Yt,{className:"w-6 h-6 text-red-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disabled Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.disabledUsers})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Chat"}),o.jsx(Nr,{className:"w-5 h-5 text-gray-400"})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Start chatting with other users or join group conversations."}),o.jsxs("a",{href:"/chat",className:"btn-primary inline-flex items-center",children:[o.jsx(Nr,{className:"w-4 h-4 mr-2"}),"Open Chat"]})]}),e.role!=="user"&&o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Management"}),o.jsx($u,{className:"w-5 h-5 text-gray-400"})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:e.role==="superadmin"?"Manage admins and view all users in the system.":"Manage users and create groups for team communication."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("a",{href:"/users",className:"btn-secondary w-full inline-flex items-center justify-center",children:[o.jsx(Du,{className:"w-4 h-4 mr-2"}),e.role==="superadmin"?"Manage Admins":"Manage Users"]}),e.role==="admin"&&o.jsxs("a",{href:"/groups",className:"btn-primary w-full inline-flex items-center justify-center",children:[o.jsx(Qp,{className:"w-4 h-4 mr-2"}),"Manage Groups"]})]})]}),o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Info"}),o.jsx(an,{className:"w-5 h-5 text-gray-400"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:e.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:e.email})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Role:"}),o.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${v(e.role)}`,children:e.role})]})]})]}),e.role==="superadmin"&&o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Overview"}),o.jsx(Yi,{className:"w-5 h-5 text-yellow-600"})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:"You have full access to manage the entire system including admins and all users."}),o.jsxs("div",{className:"text-sm text-gray-500",children:[o.jsx("p",{children:"• Create and manage admin accounts"}),o.jsx("p",{children:"• View all system users"}),o.jsx("p",{children:"• Monitor system activity"})]})]})]})]})]})};class m2{constructor(){this.socket=null,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.reconnectDelay=1e3,this.pingInterval=null,this.lastPingTime=Date.now(),this.currentUserId=null,this.listeners=new Map,this.isConnecting=!1}connect(){if(this.isConnecting)return this.socket;if(this.socket&&this.socket.connected)return this.socket;console.log("🔌 Creating new socket connection..."),this.isConnecting=!0,this.socket&&(this.socket.disconnect(),this.socket=null);const t=localStorage.getItem("token");return this.socket=Qs("https://internalchat.pizeonfly.com",{autoConnect:!0,reconnection:!0,reconnectionDelay:this.reconnectDelay,reconnectionAttempts:this.maxReconnectAttempts,maxReconnectionAttempts:this.maxReconnectAttempts,timeout:2e4,forceNew:!0,multiplex:!1,transports:["websocket","polling"],auth:{token:t}}),this.setupEventHandlers(),this.isConnecting=!1,this.socket}setupEventHandlers(){this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.lastPingTime=Date.now(),console.log("🎉 ===== SOCKET CONNECTED ===== 🎉"),console.log("🔌 Socket ID:",this.socket.id),console.log("🌐 Connection URL:",this.socket.io.uri),console.log("📡 Transport:",this.socket.io.engine.transport.name),console.log("👤 Current User ID:",this.currentUserId),console.log("🔗 Active listeners:",this.listeners.size),console.log("========================================"),this.currentUserId&&this.joinUserRoom(this.currentUserId),this.startPingMonitoring(),this.setupMessageListeners(),this.socket.emit("ping",{timestamp:Date.now()}),console.log("🔧 Enhanced connection alive detection initiated")}),this.socket.on("disconnect",t=>{this.isConnected=!1,console.log("⚠️ ===== SOCKET DISCONNECTED ===== ⚠️"),console.log("❌ Reason:",t),console.log("🔄 Attempting reconnection..."),console.log("========================================"),this.stopPingMonitoring(),this.attemptReconnection()}),this.socket.on("connect_error",t=>{console.error("🚨 ===== CONNECTION ERROR ===== 🚨"),console.error("❌ Error:",t.message),console.error("🌐 URL:",t.type),console.error("🔢 Status:",t.description),console.error("========================================="),this.attemptReconnection()}),this.socket.on("reconnect",t=>{console.log("✅ ===== RECONNECTION SUCCESSFUL ===== ✅"),console.log("🔄 Attempts tried:",t),console.log("🔌 New Socket ID:",this.socket.id),console.log("==============================================")}),this.socket.on("ping",t=>{this.lastPingTime=Date.now(),console.log(" Ping received - Connection alive, timestamp:",new Date(this.lastPingTime).toLocaleTimeString())}),this.socket.on("pong",t=>{this.lastPingTime=Date.now(),console.log("💗 Pong received - Connection confirmed, timestamp:",new Date(this.lastPingTime).toLocaleTimeString())}),this.socket.on("connect_timeout",()=>{console.log("⏰ ===== CONNECTION TIMEOUT ===== ⏰"),console.log("🔌 Socket connection timed out"),console.log("======================================")}),this.socket.on("reconnect_error",t=>{console.error("🔄❌ ===== RECONNECTION ERROR ===== ❌🔄"),console.error("Error:",t.message),console.error("========================================")}),this.socket.on("reconnect_failed",()=>{console.error("💥 ===== FAILED RECONNECTION ===== 💥"),console.error("🔌 Socket reconnection permanently failed"),console.error("🔄 Attempting force reconnect..."),console.error("===========================================")})}setupMessageListeners(){console.log("🔧 ===== SETTING UP MESSAGE LISTENERS ===== 🔧"),console.log("📝 Total listeners to register:",this.listeners.size);for(const[t,n]of this.listeners)this.socket&&(this.socket.removeAllListeners(t),this.socket.on(t,n),console.log(`✅ Re-registered listener: ${t}`));console.log("🔗 ===== ALL LISTENERS ACTIVE ===== "),console.log("📡 Socket ready for real-time messaging"),console.log("========================================")}maintainConnection(){console.log("🔧 ===== MAINTAINING PERSISTENT CONNECTION ===== 🔧"),!this.isConnected||!this.socket?(console.log("⚠️ Socket disconnected, reconnecting..."),this.connect()):(console.log("✅ Socket is connected, maintaining listeners"),this.setupMessageListeners(),this.socket&&this.isConnected&&(this.socket.emit("ping",{timestamp:Date.now()}),this.lastPingTime=Date.now(),console.log("Keep-alive ping sent - Connection maintained"),setTimeout(()=>{this.socket&&this.isConnected&&this.socket.emit("pong",{timestamp:Date.now()})},100))),console.log("==============================================")}forceChatroomReception(){console.log("🔔 FORCING CHATROOM MESSAGE RECEPTION"),this.socket&&this.isConnected?(this.setupMessageListeners(),console.log("✅ Chatroom reception listeners reinforced")):(console.log("⚠️ Socket not available for chatroom reinforcement"),this.connect()),console.log("=====")}startPingMonitoring(){this.pingInterval&&clearInterval(this.pingInterval),this.pingInterval=setInterval(()=>{const t=Date.now()-this.lastPingTime;if(console.log(` Health check: Time since last ping: ${t}ms`),this.socket&&this.isConnected&&t>45e3&&(console.log("➡️ Proactive ping sent to prevent timeout"),this.socket.emit("ping",{timestamp:Date.now()}),this.lastPingTime=Date.now()),t>18e4){if(console.log("⚠️ Extended timeout reached - checking real disconnection"),this.socket&&this.socket.connected&&this.isConnected){console.log("🔧 Socket connection verified alive, resetting timer"),this.lastPingTime=Date.now();return}console.log("🔄 Real disconnection confirmed, force reconnecting..."),this.forceReconnect()}else console.log(`✅ Socket health maintained: ${t}ms response time`)},25e3)}stopPingMonitoring(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}attemptReconnection(){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log("🔄 ===== ATTEMPTING RECONNECTION ===== 🔄"),console.log(`📊 Attempt: ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),console.log(`⏰ Delay: ${this.reconnectDelay*this.reconnectAttempts}ms`),console.log("===================="),setTimeout(()=>{console.log("🚀 Executing reconnection..."),this.connect()},this.reconnectDelay*this.reconnectAttempts)):(console.log("💥 ===== MAX ATTEMPTS REACHED ===== 💥"),console.log("🔥 Forcing socket reset..."),setTimeout(()=>{this.forceReconnect()},this.reconnectDelay*5),console.log("====================================="))}forceReconnect(){console.log("🔄 Force reconnecting socket..."),this.stopPingMonitoring(),this.reconnectAttempts=0,this.socket&&(this.socket.disconnect(),this.socket=null),setTimeout(()=>{this.connect()},2e3)}disconnect(){this.stopPingMonitoring(),this.listeners.clear(),this.socket&&(this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.currentUserId=null}joinUserRoom(t){this.currentUserId=t,this.socket&&this.isConnected?(this.socket.emit("join",t),console.log("🏠 Joined user room:",t)):console.log("🔄 Waiting to join user room after connection...")}joinGroupRoom(t){this.socket&&this.socket.emit("join-group",t)}leaveGroupRoom(t){this.socket&&this.socket.emit("leave-group",t)}sendPersonalMessage(t){var n;if(console.log("📤 ===== SENDING PERSONAL MESSAGE ===== 📤"),console.log("📊 Data:",t),console.log("🔌 Socket available:",!!this.socket),console.log("📡 Socket connected:",this.isConnected),console.log("🆔 Socket ID:",(n=this.socket)==null?void 0:n.id),!this.socket||!this.isConnected){console.log("⚠️ Socket not connected, connecting first..."),this.connect(),setTimeout(()=>{this.socket&&this.isConnected?(console.log("🔄 Retrying message send after connection"),this.socket.emit("send-message",t),console.log("✅ Personal message retry sent successfully")):console.error("❌ Still not connected after retry")},2e3);return}this.ensureConnected(),this.socket&&this.isConnected?(this.socket.emit("send-message",t),console.log("✅ Personal message sent successfully"),setTimeout(()=>{this.socket&&this.isConnected&&this.socket.emit("ping",{timestamp:Date.now()})},100)):console.error("❌ Socket lost connection before sending message"),console.log("=============================================")}sendGroupMessage(t){var n;if(console.log("📤 ===== SENDING GROUP MESSAGE ===== 📤"),console.log("📊 Data:",t),console.log("🔌 Socket available:",!!this.socket),console.log("📡 Socket connected:",this.isConnected),console.log("🆔 Socket ID:",(n=this.socket)==null?void 0:n.id),!this.socket||!this.isConnected){console.log("⚠️ Socket not connected, connecting first..."),this.connect(),setTimeout(()=>{this.socket&&this.isConnected?(console.log("🔄 Retrying group message send after connection"),this.socket.emit("send-group-message",t),console.log("✅ Group message retry sent successfully")):console.error("❌ Still not connected after retry")},2e3);return}this.socket.emit("send-group-message",t),console.log("✅ Group message sent successfully"),console.log("============================================")}onReceiveMessage(t){console.log("🔔 Registering onReceiveMessage listener"),this.registerListener("receive-message",n=>{console.log("🔔 Received message:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)}),setTimeout(()=>{this.socket&&this.isConnected&&(this.socket.off("receive-message"),this.socket.on("receive-message",n=>{console.log("🔄 Maintained receive-message listener:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)}),console.log("✅ Listener re-registered for chatroom persistence"))},1e3)}onReceiveGroupMessage(t){console.log("🔔 Registering onReceiveGroupMessage listener"),this.registerListener("receive-group-message",n=>{console.log("🔔 Received group message:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)})}onMessageSent(t){console.log("🔔 Registering onMessageSent listener"),this.registerListener("message-sent",n=>{console.log("🔔 Message sent confirmation:",n);const r={...n,_isOurMessage:!0,_isConfirmation:!0,_timestamp:new Date().toISOString()};t(r)})}registerListener(t,n){this.listeners.set(t,n),console.log(`📝 Stored listener for event: ${t}`),this.socket&&this.isConnected?(this.socket.off(t),this.socket.on(t,n),console.log(`✅ Listener immediately registered for event: ${t}`)):console.log(`🔄 Listener queued for event: ${t} (waiting for connection)`)}onGroupMessageSent(t){this.registerListener("group-message-sent",t)}onTyping(t){this.registerListener("user-typing",t)}sendTyping(t){this.socket&&this.isConnected&&this.socket.emit("typing",t)}onError(t){this.registerListener("error",t)}onAvatarUpdate(t){this.registerListener("avatar-updated",t)}onUserProfileUpdate(t){this.registerListener("user-profile-updated",t)}removeAllListeners(){this.listeners.clear(),this.socket&&(this.socket.removeAllListeners(),this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.lastPingTime=Date.now(),this.currentUserId&&this.joinUserRoom(this.currentUserId),this.startPingMonitoring(),this.setupMessageListeners()}))}ensureConnected(){return!this.socket||!this.isConnected?(console.log("🔄 Ensuring socket connection..."),this.connect()):!0}getConnectionStatus(){var t;return{isConnected:this.isConnected,socketId:(t=this.socket)==null?void 0:t.id,lastPing:new Date(this.lastPingTime).toLocaleString(),listenersCount:this.listeners.size}}logConnectionStatus(){var t,n,r,s,i,l,a;console.log("🔍 ===== SOCKET STATUS REPORT ===== 🔍"),console.log("📡 Is Connected:",this.isConnected?"✅ YES":"❌ NO"),console.log("🆔 Socket ID:",((t=this.socket)==null?void 0:t.id)||"N/A"),console.log("🌐 Connection URL:",((r=(n=this.socket)==null?void 0:n.io)==null?void 0:r.uri)||"N/A"),console.log("📊 Transport:",((a=(l=(i=(s=this.socket)==null?void 0:s.io)==null?void 0:i.engine)==null?void 0:l.transport)==null?void 0:a.name)||"N/A"),console.log("👤 Current User ID:",this.currentUserId||"Not set"),console.log("🔗 Active Listeners:",this.listeners.size),console.log("📡 Reconnect Attempts:",this.reconnectAttempts),console.log(" Last Ping:",new Date(this.lastPingTime).toLocaleTimeString()),console.log("🔄 Listeners registered:",Array.from(this.listeners.keys()).join(", ")||"None"),console.log("========================================")}testConnection(){console.log("🧪 ===== TESTING SOCKET CONNECTION ===== 🧪"),this.logConnectionStatus(),this.socket&&(console.log("🔄 Emitting test ping..."),this.socket.emit("ping")),console.log("============================================")}forceConnectionTest(){console.log("🛠️ ===== MANUAL CONNECTION FORCE TEST ===== 🛠️"),this.connect(),setTimeout(()=>{this.testConnection()},3e3),console.log("=============================================")}reset(){console.log("🔄 Resetting socket service..."),this.disconnect(),this.currentUserId=null,this.listeners.clear(),this.reconnectAttempts=0,this.isConnecting=!1,clearTimeout(this.reconnectTimeout)}}const rt=new m2,Xp=({user:e,callData:t,isIncoming:n=!1,onCallEnd:r,onCallAnswer:s,onCallDecline:i})=>{var B,ue,xe,ke,pe,Ie,Be,E,V,H,Le,ge,gt,xt,kt;const{socket:l}=Un(),[a,c]=y.useState(n?"incoming":"outgoing"),[u,m]=y.useState(!1),[f,j]=y.useState(0),[I,h]=y.useState(null),[v,S]=y.useState({x:window.innerWidth-350,y:20}),[w,x]=y.useState(!1),[g,_]=y.useState({x:0,y:0}),R=y.useRef(null),A=y.useRef(null),P=y.useRef(null),G=y.useRef(null),Q=y.useRef(null),X={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},K=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return console.error("WebRTC not supported in this browser or requires HTTPS"),h("Audio calls require HTTPS connection or are not supported in this browser. Please use HTTPS or try a different browser."),!1;if(typeof RTCPeerConnection>"u")return console.error("RTCPeerConnection not supported"),h("WebRTC is not supported in this browser. Please use a modern browser like Chrome, Firefox, or Safari."),!1;P.current=new RTCPeerConnection(X),P.current.onicecandidate=me=>{if(me.candidate&&l)try{l.emit("ice-candidate",{callId:t.callId,candidate:me.candidate.candidate,sdpMLineIndex:me.candidate.sdpMLineIndex,sdpMid:me.candidate.sdpMid})}catch(Ve){console.error("Error sending ICE candidate:",Ve)}},P.current.ontrack=me=>{if(console.log("🎵 Remote audio track received:",me),console.log("🎵 Track details:",{kind:me.track.kind,label:me.track.label,enabled:me.track.enabled,readyState:me.track.readyState,streamsCount:me.streams.length}),me.streams&&me.streams[0]){const Ve=me.streams[0];console.log("🎵 Setting remote audio stream:",Ve),console.log("🎵 Stream tracks:",Ve.getTracks()),A.current&&(A.current.srcObject=Ve,Ve.getAudioTracks().forEach(it=>{it.enabled=a==="connected",console.log("🎵 Remote audio track enabled:",it.enabled,"callStatus:",a)}),A.current.volume!==void 0&&(A.current.volume=1),a==="connected"?(A.current.muted=!1,A.current.play().catch(it=>{it.name!=="AbortError"&&console.error("🎵 Error playing remote audio:",it)}),console.log("🎵 Remote audio playing after call connected")):(A.current.muted=!0,console.log("🎵 Remote audio muted until call is accepted")))}},P.current.onconnectionstatechange=()=>{const me=P.current.connectionState;me==="connected"?(c("connected"),ne()):(me==="disconnected"||me==="failed")&&U()};const ie=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});return G.current=ie,R.current&&(R.current.srcObject=ie),ie.getAudioTracks().forEach(me=>{P.current.addTrack(me,ie)}),!0}catch(ie){return console.error("Error initializing WebRTC:",ie),ie.name==="NotAllowedError"||ie.name==="PermissionDeniedError"?h("Microphone access denied. Please allow microphone permissions in your browser settings."):ie.name==="NotFoundError"||ie.name==="DevicesNotFoundError"?h("No microphone found. Please connect a microphone and try again."):ie.name==="NotReadableError"||ie.name==="TrackStartError"?h("Microphone is being used by another application. Please close other apps and try again."):ie.name==="OverconstrainedError"?h("Could not access microphone with the required settings."):ie.name==="SecurityError"?h("Audio calls require HTTPS connection. Please access the site via HTTPS."):h(`Failed to access microphone: ${ie.message||"Unknown error"}`),!1}},ne=()=>{Q.current=setInterval(()=>{j(ie=>ie+1)},1e3)},$=()=>{Q.current&&(clearInterval(Q.current),Q.current=null)},Y=ie=>{const me=Math.floor(ie/60),Ve=ie%60;return`${me.toString().padStart(2,"0")}:${Ve.toString().padStart(2,"0")}`},ee=ie=>{x(!0);const me=ie.currentTarget.getBoundingClientRect();_({x:ie.clientX-me.left,y:ie.clientY-me.top})},le=ie=>{if(!w)return;const me=ie.clientX-g.x,Ve=ie.clientY-g.y,it=window.innerWidth-320,St=window.innerHeight-200;S({x:Math.max(0,Math.min(me,it)),y:Math.max(0,Math.min(Ve,St))})},fe=()=>{x(!1)};y.useEffect(()=>{if(w)return document.addEventListener("mousemove",le),document.addEventListener("mouseup",fe),()=>{document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",fe)}},[w,g]);const z=async()=>{await K()&&(c("connecting"),s&&s(),l&&l.emit("call-answer",{callId:t.callId}))},T=()=>{c("declined"),i&&i(),l&&l.emit("call-decline",{callId:t.callId})},U=()=>{$(),P.current&&(P.current.close(),P.current=null),G.current&&(G.current.getTracks().forEach(ie=>ie.stop()),G.current=null),c("ended"),r&&r(),l&&l.emit("call-end",{callId:t.callId})},L=()=>{if(G.current){const ie=G.current.getAudioTracks()[0];ie&&(ie.enabled=!ie.enabled,m(!ie.enabled))}};return y.useEffect(()=>{if(!l)return;const ie=async Fe=>{if(Fe.callId===t.callId){c("connecting");try{const Ee=await P.current.createOffer();await P.current.setLocalDescription(Ee),l.emit("call-offer",{callId:t.callId,offer:Ee})}catch{h("Failed to establish connection")}}},me=async Fe=>{if(Fe.callId===t.callId)try{const Ee=P.current.signalingState;if(console.log("📞 Processing offer, current state:",Ee),Ee==="stable"){await P.current.setRemoteDescription(Fe.offer);const ae=await P.current.createAnswer();await P.current.setLocalDescription(ae),l.emit("call-answer-webrtc",{callId:t.callId,answer:ae})}else console.warn("⚠️ Cannot process offer in state:",Ee),h("Call connection not ready")}catch(Ee){console.error("❌ Failed to handle call offer:",Ee),h("Failed to establish connection")}},Ve=async Fe=>{if(Fe.callId===t.callId)try{const Ee=P.current.signalingState;console.log("📞 Processing answer, current state:",Ee),Ee==="have-local-offer"||Ee==="have-local-pranswer"?(await P.current.setRemoteDescription(Fe.answer),console.log("✅ Answer processed successfully")):Ee==="stable"?console.log("🔄 Connection already established, skipping answer"):(console.warn("⚠️ Cannot process answer in state:",Ee),h("Call connection not ready"))}catch(Ee){console.error("❌ Failed to handle call answer:",Ee),h("Failed to establish connection")}},it=async Fe=>{if(Fe.callId===t.callId&&P.current)try{const Ee=new RTCIceCandidate({candidate:Fe.candidate,sdpMLineIndex:Fe.sdpMLineIndex,sdpMid:Fe.sdpMid});await P.current.addIceCandidate(Ee)}catch{}},St=Fe=>{Fe.callId===t.callId&&(c("declined"),U())},Pt=Fe=>{Fe.callId===t.callId&&U()};return l.on("call-answered",ie),l.on("call-offer",me),l.on("call-answer-webrtc",Ve),l.on("ice-candidate",it),l.on("call-declined",St),l.on("call-ended",Pt),()=>{l.off("call-answered",ie),l.off("call-offer",me),l.off("call-answer-webrtc",Ve),l.off("ice-candidate",it),l.off("call-declined",St),l.off("call-ended",Pt)}},[l,t.callId]),y.useEffect(()=>{!n&&a==="outgoing"&&K()},[n,a]),y.useEffect(()=>{a==="connected"&&A.current&&(A.current.muted=!1,A.current.volume=1,A.current.play().catch(ie=>{ie.name!=="AbortError"&&console.error("🎵 Error playing remote audio after call connected:",ie)}),console.log("🎵 Remote audio unmuted after call connected"))},[a]),y.useEffect(()=>()=>{$(),P.current&&P.current.close(),G.current&&G.current.getTracks().forEach(ie=>ie.stop())},[]),n&&a==="incoming"?o.jsx("div",{className:"fixed z-50",style:{left:v.x,top:v.y},children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 w-80 text-center shadow-2xl border border-gray-700 relative",children:[o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx("button",{onMouseDown:ee,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors cursor-move",title:"Drag to move call window",children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16M8 4v16M16 4v16"})})})}),o.jsx("div",{className:"mb-4",children:(B=t==null?void 0:t.caller)!=null&&B.avatar?o.jsx("img",{src:t.caller.avatar,alt:t.caller.name,className:"w-16 h-16 rounded-full mx-auto object-cover border-2 border-white"}):o.jsx("div",{className:"w-16 h-16 rounded-full mx-auto bg-green-500 text-white flex items-center justify-center text-lg font-bold border-2 border-white",children:((xe=(ue=t==null?void 0:t.caller)==null?void 0:ue.name)==null?void 0:xe.charAt(0))||"U"})}),o.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:((ke=t==null?void 0:t.caller)==null?void 0:ke.name)||"Unknown"}),o.jsx("p",{className:"text-gray-300 mb-6 text-sm",children:"📞 Incoming voice call..."}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:T,className:"w-12 h-12 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("button",{onClick:z,className:"w-12 h-12 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]})]})}):I?o.jsx("div",{className:"fixed z-50",style:{left:v.x,top:v.y},children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl p-6 w-80 text-center shadow-2xl border border-gray-700 relative",children:[o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx("button",{onMouseDown:ee,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors cursor-move",title:"Drag to move call window",children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16M8 4v16M16 4v16"})})})}),o.jsx("div",{className:"text-4xl mb-3",children:"❌"}),o.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Call Error"}),o.jsx("p",{className:"text-gray-300 mb-4 text-sm",children:I}),o.jsx("button",{onClick:U,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors text-sm",children:"Close"})]})}):o.jsx("div",{className:"fixed z-50",style:{left:v.x,top:v.y},children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700 p-6 w-80 text-center text-white relative",children:[o.jsx("div",{className:"absolute top-2 right-2",children:o.jsx("button",{onMouseDown:ee,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors cursor-move",title:"Drag to move call window",children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16M8 4v16M16 4v16"})})})}),o.jsx("audio",{ref:R,muted:!0,autoPlay:!0}),o.jsx("audio",{ref:A,autoPlay:!0}),o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h2",{className:"text-sm text-gray-300 mb-2",children:a==="connecting"?"Connecting...":a==="connected"?"Voice Call":a==="outgoing"?"Calling...":"Call"}),o.jsx("h1",{className:"text-lg font-semibold",children:((pe=t==null?void 0:t.otherUser)==null?void 0:pe.name)||((Ie=t==null?void 0:t.caller)==null?void 0:Ie.name)||"Unknown"}),a==="connected"&&o.jsx("p",{className:"text-gray-300 mt-1 text-sm",children:Y(f)})]}),o.jsx("div",{className:"mb-6",children:(Be=t==null?void 0:t.otherUser)!=null&&Be.avatar||(E=t==null?void 0:t.caller)!=null&&E.avatar?o.jsx("img",{src:((V=t==null?void 0:t.otherUser)==null?void 0:V.avatar)||((H=t==null?void 0:t.caller)==null?void 0:H.avatar),alt:((Le=t==null?void 0:t.otherUser)==null?void 0:Le.name)||((ge=t==null?void 0:t.caller)==null?void 0:ge.name),className:"w-20 h-20 rounded-full object-cover shadow-2xl border-2 border-white mx-auto"}):o.jsx("div",{className:"w-20 h-20 rounded-full bg-green-500 flex items-center justify-center text-2xl font-bold shadow-2xl border-2 border-white mx-auto",children:((kt=((gt=t==null?void 0:t.otherUser)==null?void 0:gt.name)||((xt=t==null?void 0:t.caller)==null?void 0:xt.name))==null?void 0:kt.charAt(0))||"U"})}),o.jsxs("div",{className:"mb-4 text-center",children:[a==="outgoing"&&o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),o.jsx("span",{className:"text-gray-300 text-sm",children:"Calling..."})]}),a==="connecting"&&o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),o.jsx("span",{className:"text-gray-300 text-sm",children:"Connecting..."})]}),a==="connected"&&o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),o.jsx("span",{className:"text-gray-300 text-sm",children:"Connected"})]})]}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[a==="connected"&&o.jsx("button",{onClick:L,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl ${u?"bg-red-500 hover:bg-red-600":"bg-white bg-opacity-20 hover:bg-opacity-30"}`,title:u?"Unmute":"Mute",children:u?o.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),o.jsx("button",{onClick:U,className:"w-12 h-12 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",title:"End Call",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a==="connected"&&o.jsxs("div",{className:"mt-4 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx("div",{className:"w-1 h-2 bg-green-400 rounded"}),o.jsx("div",{className:"w-1 h-3 bg-green-400 rounded"}),o.jsx("div",{className:"w-1 h-4 bg-green-400 rounded"}),o.jsx("div",{className:"w-1 h-3 bg-green-400 rounded"}),o.jsx("div",{className:"w-1 h-2 bg-green-400 rounded"})]}),o.jsx("span",{className:"text-xs text-gray-300 mt-1 block",children:"Good quality"})]})]})})},Zp=({user:e,callData:t,isIncoming:n=!1,onCallEnd:r,onCallAnswer:s,onCallDecline:i})=>{var pe,Ie,Be,E,V,H,Le,ge,gt,xt,kt,ie,me,Ve,it,St,Pt,Fe,Ee,ae,we,Bt;const{socket:l,isConnected:a}=Un(),[c,u]=y.useState(n?"incoming":"outgoing"),[m,f]=y.useState(!1),[j,I]=y.useState((t==null?void 0:t.callType)==="video"),[h,v]=y.useState(0),[S,w]=y.useState(null),x=y.useRef(null),g=y.useRef(null),_=y.useRef(null),R=y.useRef(null),A=y.useRef(null),P=y.useRef(null),G=y.useRef(!1),Q=y.useRef(null),X=y.useRef(!1),K=y.useRef(!1),ne=y.useRef([]),$=y.useRef(!1),Y={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};y.useEffect(()=>(console.log("WebRTCCall useEffect - callData:",t,"isIncoming:",n),t&&t.callId&&a&&!$.current&&ee(),()=>{xe()}),[t==null?void 0:t.callId,a]),y.useEffect(()=>(c==="connected"&&A.current?P.current=setInterval(()=>{const J=Math.floor((Date.now()-A.current)/1e3);v(J)},1e3):P.current&&(clearInterval(P.current),P.current=null),()=>{P.current&&clearInterval(P.current)}),[c]),y.useEffect(()=>{window.remoteStream&&g.current&&j&&(console.log("🎥 Restoring remote video stream after remount"),g.current.srcObject=window.remoteStream,g.current.play().catch(J=>{J.name!=="AbortError"&&console.error("🎥 Error playing restored remote video:",J)}))},[j,g.current]),y.useEffect(()=>{window.remoteStream&&g.current&&!g.current.srcObject&&(console.log("🎥 Video ref available, attaching stored remote stream"),g.current.srcObject=window.remoteStream,g.current.play().catch(J=>{J.name!=="AbortError"&&console.error("🎥 Error playing stored remote video:",J)}))},[g.current]);const ee=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("WebRTC not supported in this browser or requires HTTPS"),w("Video calls require HTTPS connection or are not supported in this browser. Please use HTTPS or try a different browser.");return}if(typeof RTCPeerConnection>"u"){console.error("RTCPeerConnection not supported"),w("WebRTC is not supported in this browser. Please use a modern browser like Chrome, Firefox, or Safari.");return}G.current=!1,Q.current=null,X.current=!1,K.current=!1,ne.current=[],$.current=!1;const J={audio:!0,video:j?{width:640,height:480}:!1};try{_.current=await navigator.mediaDevices.getUserMedia(J)}catch(re){re.name==="NotAllowedError"||re.name==="PermissionDeniedError"?w("Camera/microphone access denied. Please allow access and try again."):re.name==="NotFoundError"||re.name==="DevicesNotFoundError"?w("Camera/microphone not found. Please check your devices."):re.name==="NotReadableError"||re.name==="TrackStartError"?w("Camera/microphone is being used by another application."):re.name==="SecurityError"?w("Video calls require HTTPS connection. Please access the site via HTTPS."):w(`Media access failed: ${re.message}`);return}_.current.getAudioTracks().forEach(re=>{re.enabled=!0}),_.current.getVideoTracks().forEach(re=>{re.enabled=!0}),x.current&&(x.current.srcObject=_.current,x.current.play().catch(()=>{}));try{R.current=new RTCPeerConnection(Y)}catch(re){w(`Failed to create peer connection: ${re.message}`);return}try{_.current.getTracks().forEach(re=>{R.current.addTrack(re,_.current)})}catch(re){w(`Failed to add tracks to peer connection: ${re.message}`);return}R.current.ontrack=re=>{if(console.log("🎥 Remote track received:",re),console.log("🎥 Event streams:",re.streams),console.log("🎥 Remote video ref:",g.current),console.log("🎥 isVideoEnabled:",j),re.streams&&re.streams[0]){const Pe=re.streams[0];if(console.log("🎥 Setting remote video stream:",Pe),console.log("🎥 Stream tracks:",Pe.getTracks()),window.remoteStream||(window.remoteStream=Pe),g.current)lt(Pe);else{console.log("🎥 Remote video ref not available, waiting...");const Re=()=>{g.current?(console.log("🎥 Remote video ref now available, setting stream"),lt(Pe)):setTimeout(Re,100)};Re()}}else console.error("🎥 No remote video ref or stream available")};const lt=re=>{if(!g.current){console.error("🎥 Cannot attach stream: remote video ref not available");return}console.log("🎥 Attaching remote stream to video element"),(async()=>{try{g.current&&(g.current.srcObject=re,console.log("🎥 Set srcObject on remote video element"),g.current.readyState>=2?(await g.current.play(),console.log("🎥 Remote video playing successfully")):g.current.addEventListener("loadeddata",async()=>{try{g.current&&(await g.current.play(),console.log("🎥 Remote video playing after load"))}catch(Re){Re.name!=="AbortError"&&console.error("🎥 Error playing remote video after load:",Re)}},{once:!0}))}catch(Re){Re.name!=="AbortError"&&console.error("🎥 Error playing remote video:",Re)}})(),re.getAudioTracks().forEach(Re=>{Re.enabled=!0,console.log("🎥 Remote audio track enabled:",Re)}),re.getVideoTracks().forEach(Re=>{Re.enabled=!0,console.log("🎥 Remote video track enabled:",Re)}),g.current&&g.current.volume!==void 0&&(g.current.volume=1),I(!0)};R.current.onicecandidate=re=>{re.candidate&&l&&l.emit("ice-candidate",{callId:t.callId,candidate:re.candidate.candidate,sdpMLineIndex:re.candidate.sdpMLineIndex,sdpMid:re.candidate.sdpMid})},R.current.onconnectionstatechange=()=>{const re=R.current.connectionState;console.log("🔗 Connection state changed:",re),re==="connected"?(console.log("✅ WebRTC connection established"),u("connected"),A.current=Date.now()):(re==="disconnected"||re==="failed")&&(console.log("❌ WebRTC connection failed:",re),L())},le(),$.current=!0,n||await z()}catch{$.current=!1,w("Failed to access camera/microphone. Please check permissions.")}},le=()=>{if(l){if(console.log("Setting up socket listeners for call:",t.callId,"isIncoming:",n),$.current){console.log("Socket listeners already set up, skipping...");return}l.off("call-answered"),l.off("call-declined"),l.off("call-ended"),l.off("call-error"),l.off("call-offer"),l.off("ice-candidate"),l.on("call-answered",async J=>{if(console.log("📞 Call answered received:",J),J.callId===t.callId){if(Q.current===J.callId)return;try{if(J.answer&&R.current){const ye=typeof J.answer=="string"?JSON.parse(J.answer):J.answer,_e=R.current.signalingState;console.log("📞 Processing answer, current state:",_e),_e==="have-local-offer"&&!G.current&&(await R.current.setRemoteDescription(ye),console.log("📞 Set remote description, new state:",R.current.signalingState),G.current=!0,Q.current=J.callId,setTimeout(()=>{fe()},100))}u("connected"),A.current=Date.now()}catch(ye){console.error("📞 Failed to handle call answer:",ye),w("Failed to handle call answer")}}}),l.on("call-declined",J=>{J.callId===t.callId&&(u("declined"),setTimeout(()=>{r&&r()},2e3))}),l.on("call-ended",J=>{J.callId===t.callId&&L()}),l.on("ice-candidate",async J=>{if(console.log("🧊 ICE candidate received:",J),J.callId===t.callId&&R.current)try{const ye=R.current.signalingState,_e=R.current.remoteDescription;console.log("🧊 Current signaling state:",ye),console.log("🧊 Remote description:",_e?"set":"null"),_e&&(ye==="stable"||ye==="have-local-offer"||ye==="have-remote-offer")?(await R.current.addIceCandidate({candidate:J.candidate,sdpMLineIndex:J.sdpMLineIndex,sdpMid:J.sdpMid}),console.log("🧊 ICE candidate added successfully")):(console.log("🧊 Queuing ICE candidate for later (remote description not set)"),ne.current.push({candidate:J.candidate,sdpMLineIndex:J.sdpMLineIndex,sdpMid:J.sdpMid}))}catch(ye){console.error("🧊 Failed to add ICE candidate:",ye),console.log("🧊 Queuing failed ICE candidate for later"),ne.current.push({candidate:J.candidate,sdpMLineIndex:J.sdpMLineIndex,sdpMid:J.sdpMid})}}),l.on("call-error",J=>{w(J.error)}),l.on("call-offer",async J=>{if(console.log("Received call-offer event:",J),J.callId===t.callId&&n)try{const ye=typeof J.offer=="string"?JSON.parse(J.offer):J.offer;if(console.log("Parsed offer:",ye),!R.current&&!$.current&&(console.log("Peer connection not ready, initializing WebRTC..."),await ee()),R.current){const _e=R.current.signalingState;console.log("Received offer, current state:",_e),_e==="stable"?(await R.current.setRemoteDescription(ye),console.log("Set remote description, new state:",R.current.signalingState),setTimeout(()=>{fe()},100)):console.log("Cannot set remote description in state:",_e)}else console.error("Peer connection not available when handling offer")}catch(ye){console.error("Failed to handle call offer:",ye),w("Failed to handle call offer")}})}},fe=async()=>{if(ne.current.length>0&&R.current)if(console.log("🧊 Processing queued ICE candidates:",ne.current.length),R.current.remoteDescription){for(const ye of ne.current)try{await R.current.addIceCandidate(ye),console.log("🧊 Queued ICE candidate added successfully")}catch(_e){console.error("🧊 Failed to add queued ICE candidate:",_e)}ne.current=[],console.log("🧊 All queued ICE candidates processed")}else console.log("🧊 Cannot process queued ICE candidates: remote description not set")},z=async()=>{try{if(!$.current){w("WebRTC not initialized yet");return}if(!R.current){w("Peer connection not available");return}if(!l||!l.connected){w("Socket connection not available");return}if(!t||!t.callId){w("Call data not available");return}if(K.current)return;const J=R.current.signalingState;if(J!=="stable"){w(`Cannot create offer in state: ${J}`);return}const ye=await R.current.createOffer();await R.current.setLocalDescription(ye),K.current=!0,console.log("Sending call-offer with offer:",ye),l.emit("call-offer",{callId:t.callId,offer:ye}),console.log("Call-offer sent for call:",t.callId),u("ringing")}catch(J){w(`Failed to create call offer: ${J.message}`)}},T=async()=>{try{if(R.current){const J=R.current.signalingState;if(console.log("Answering call, current state:",J),J==="have-remote-offer"){const ye=await R.current.createAnswer();await R.current.setLocalDescription(ye),l.emit("call-answer",{callId:t.callId,answer:ye}),u("connected"),A.current=Date.now(),s&&s()}else J==="stable"?(console.log("Offer not set yet, this indicates a timing issue"),w("Call offer not processed yet. Please wait a moment and try again.")):(console.error("Cannot answer call in state:",J),w(`Cannot answer call in current state: ${J}`))}else w("Call connection not ready")}catch(J){console.error("Failed to answer call:",J),w("Failed to answer call")}},U=()=>{l&&l.emit("call-decline",{callId:t.callId}),u("declined"),i&&i(),setTimeout(()=>{r&&r()},1e3)},L=()=>{X.current||(X.current=!0,l&&l.emit("call-end",{callId:t.callId}),u("ended"),r&&r())},B=()=>{_.current&&(_.current.getAudioTracks().forEach(ye=>{ye.enabled=m}),f(!m))},ue=()=>{if(_.current){const J=_.current.getVideoTracks(),ye=!j;if(J.forEach(_e=>{_e.enabled=ye}),I(ye),ye&&g.current){console.log("Video enabled, ensuring remote video is visible");const _e=window.remoteStream||g.current.srcObject;_e&&(g.current.srcObject=null,setTimeout(()=>{g.current&&(g.current.srcObject=_e,g.current.play().catch(lt=>{lt.name!=="AbortError"&&console.error("Error playing remote video after toggle:",lt)}))},100))}}},xe=()=>{window.remoteStream&&(window.remoteStream=null),_.current&&_.current.getTracks().forEach(J=>J.stop()),R.current&&R.current.close(),P.current&&clearInterval(P.current)},ke=J=>{const ye=Math.floor(J/60),_e=J%60;return`${ye}:${_e.toString().padStart(2,"0")}`};return S?o.jsx("div",{className:"call-error-container",children:o.jsxs("div",{className:"call-error",children:[o.jsx("div",{className:"error-icon",children:"❌"}),o.jsx("h3",{children:"Call Error"}),o.jsx("p",{children:S}),o.jsx("button",{className:"btn btn-primary",onClick:r,children:"Close"})]})}):o.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden w-96",children:[o.jsx("div",{className:"bg-black bg-opacity-20 px-6 py-4 flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200",children:(pe=t==null?void 0:t.otherUser)!=null&&pe.avatar||(Ie=t==null?void 0:t.receiver)!=null&&Ie.avatar||(Be=t==null?void 0:t.caller)!=null&&Be.avatar?o.jsx("img",{src:((E=t.otherUser)==null?void 0:E.avatar)||((V=t.receiver)==null?void 0:V.avatar)||((H=t.caller)==null?void 0:H.avatar),alt:((Le=t.otherUser)==null?void 0:Le.name)||((ge=t.receiver)==null?void 0:ge.name)||((gt=t.caller)==null?void 0:gt.name),className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-lg",children:((Ve=(me=((xt=t==null?void 0:t.otherUser)==null?void 0:xt.name)||((kt=t==null?void 0:t.receiver)==null?void 0:kt.name)||((ie=t==null?void 0:t.caller)==null?void 0:ie.name))==null?void 0:me.charAt(0))==null?void 0:Ve.toUpperCase())||"U"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-white text-lg",children:((it=t==null?void 0:t.otherUser)==null?void 0:it.name)||((St=t==null?void 0:t.receiver)==null?void 0:St.name)||((Pt=t==null?void 0:t.caller)==null?void 0:Pt.name)||"Unknown"}),o.jsxs("p",{className:"text-sm text-gray-300",children:[c==="incoming"&&"Incoming call...",c==="outgoing"&&"Calling...",c==="ringing"&&"Ringing...",c==="connected"&&`Connected - ${ke(h)}`,c==="declined"&&"Call declined",c==="ended"&&"Call ended"]})]})]})}),o.jsx("div",{className:"relative h-80 bg-black",children:j?o.jsxs(o.Fragment,{children:[o.jsx("video",{ref:g,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute bottom-3 right-3 w-24 h-20 bg-gray-800 rounded-lg overflow-hidden border-2 border-white",children:o.jsx("video",{ref:x,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})})]}):o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-700 flex items-center justify-center mb-4",children:o.jsx("span",{className:"text-3xl text-white",children:((Bt=(we=((Fe=t==null?void 0:t.otherUser)==null?void 0:Fe.name)||((Ee=t==null?void 0:t.receiver)==null?void 0:Ee.name)||((ae=t==null?void 0:t.caller)==null?void 0:ae.name))==null?void 0:we.charAt(0))==null?void 0:Bt.toUpperCase())||"U"})}),o.jsx("p",{className:"text-white text-sm",children:"Audio Only Call"})]})})}),o.jsx("div",{className:"bg-black bg-opacity-20 p-6",children:o.jsxs("div",{className:"flex justify-center space-x-4",children:[c==="incoming"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:U,title:"Decline",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("button",{className:"w-16 h-16 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:T,title:"Answer",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]}),c==="connected"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl ${m?"bg-red-500 hover:bg-red-600 text-white":"bg-white bg-opacity-20 hover:bg-opacity-30 text-white"}`,onClick:B,title:m?"Unmute":"Mute",children:m?o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),(t==null?void 0:t.callType)==="video"&&o.jsx("button",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl ${j?"bg-white bg-opacity-20 hover:bg-opacity-30 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,onClick:ue,title:j?"Disable Video":"Enable Video",children:j?o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}):o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]})}),o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:L,title:"End Call",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(c==="outgoing"||c==="ringing")&&o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:L,title:"Cancel Call",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})})},eg=({group:e,callData:t,isIncoming:n=!1,onCallEnd:r,onCallAnswer:s,onCallDecline:i})=>{var ke,pe,Ie,Be;const{socket:l,isConnected:a}=Un(),[c,u]=y.useState(n?"incoming":"outgoing"),[m,f]=y.useState(!1),[j,I]=y.useState((t==null?void 0:t.callType)==="video"),[h,v]=y.useState(0),[S,w]=y.useState([]),[x,g]=y.useState(null),_=y.useRef(null),R=y.useRef({}),A=y.useRef(null),P=y.useRef({}),G=y.useRef(null),Q=y.useRef(null),X=y.useRef(!1),K={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};y.useEffect(()=>(console.log("GroupCallUI useEffect - callData:",t,"isIncoming:",n),t&&t.callId&&a&&!X.current&&ne(),()=>{ue()}),[t==null?void 0:t.callId,a]),y.useEffect(()=>(c==="connected"&&G.current?Q.current=setInterval(()=>{const E=Math.floor((Date.now()-G.current)/1e3);v(E)},1e3):Q.current&&(clearInterval(Q.current),Q.current=null),()=>{Q.current&&clearInterval(Q.current)}),[c]);const ne=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("WebRTC not supported in this browser or requires HTTPS"),g("Group calls require HTTPS connection or are not supported in this browser. Please use HTTPS or try a different browser.");return}if(typeof RTCPeerConnection>"u"){console.error("RTCPeerConnection not supported"),g("WebRTC is not supported in this browser. Please use a modern browser like Chrome, Firefox, or Safari.");return}const E={audio:!0,video:j?{width:640,height:480}:!1};try{A.current=await navigator.mediaDevices.getUserMedia(E)}catch(V){V.name==="NotAllowedError"||V.name==="PermissionDeniedError"?g("Camera/microphone access denied. Please allow access and try again."):V.name==="NotFoundError"||V.name==="DevicesNotFoundError"?g("Camera/microphone not found. Please check your devices."):V.name==="NotReadableError"||V.name==="TrackStartError"?g("Camera/microphone is being used by another application."):V.name==="SecurityError"?g("Group calls require HTTPS connection. Please access the site via HTTPS."):g(`Media access failed: ${V.message}`);return}_.current&&(_.current.srcObject=A.current,_.current.play().catch(()=>{})),$(),X.current=!0,n||l.emit("group-call-join",{callId:t.callId,groupId:t.groupId})}catch{X.current=!1,g("Failed to access camera/microphone. Please check permissions.")}},$=()=>{l&&(console.log("Setting up group call socket listeners for call:",t.callId),l.off("group-call-joined"),l.off("group-call-left"),l.off("group-call-ended"),l.off("group-call-participant-joined"),l.off("group-call-participant-left"),l.off("group-call-offer"),l.off("group-call-answer"),l.off("group-call-ice-candidate"),l.off("group-call-error"),l.on("group-call-joined",E=>{console.log("📞 Group call joined:",E),E.callId===t.callId&&(u("connected"),G.current=Date.now(),w(V=>[...V,E.participant]))}),l.on("group-call-participant-joined",E=>{console.log("📞 Participant joined:",E),E.callId===t.callId&&w(V=>[...V,E.newParticipant])}),l.on("group-call-participant-left",E=>{console.log("📞 Participant left:",E),E.callId===t.callId&&w(V=>V.filter(H=>H.id!==E.leftParticipant._id))}),l.on("group-call-ended",E=>{console.log("📞 Group call ended:",E),E.callId===t.callId&&U()}),l.on("group-call-offer",async E=>{console.log("📞 Group call offer received:",E),E.callId===t.callId&&E.from&&await ee(E.from._id,E.offer)}),l.on("group-call-answer",async E=>{console.log("📞 Group call answer received:",E),E.callId===t.callId&&E.from&&await le(E.from._id,E.answer)}),l.on("group-call-ice-candidate",async E=>{console.log("📞 Group call ICE candidate received:",E),E.callId===t.callId&&E.from&&await fe(E.from._id,E.candidate,E.sdpMLineIndex,E.sdpMid)}),l.on("group-call-error",E=>{console.error("📞 Group call error:",E),g(E.error)}))},Y=async E=>{try{const V=new RTCPeerConnection(K);return A.current&&A.current.getTracks().forEach(H=>{V.addTrack(H,A.current)}),V.ontrack=H=>{if(console.log("🎵 Remote track received from user:",E,"Track kind:",H.track.kind),H.streams&&H.streams[0]){const Le=H.streams[0];if(H.track.kind==="audio"){console.log("🎵 Audio track received, creating audio element");const ge=document.createElement("audio");ge.srcObject=Le,ge.autoplay=!0,ge.volume=1,ge.style.display="none",document.body.appendChild(ge),R.current[`${E}_audio`]||(R.current[`${E}_audio`]=ge)}H.track.kind==="video"&&R.current[E]&&(R.current[E].srcObject=Le,R.current[E].play().catch(ge=>{ge.name!=="AbortError"&&console.error("🎥 Error playing remote video:",ge)}))}},V.onicecandidate=H=>{H.candidate&&l&&l.emit("group-call-ice-candidate",{callId:t.callId,groupId:t.groupId,targetUserId:E,candidate:H.candidate.candidate,sdpMLineIndex:H.candidate.sdpMLineIndex,sdpMid:H.candidate.sdpMid})},V.onconnectionstatechange=()=>{const H=V.connectionState;console.log("🔗 Connection state changed for user",E,":",H),H==="connected"?console.log("✅ WebRTC connection established with user:",E):(H==="disconnected"||H==="failed")&&console.log("❌ WebRTC connection failed with user:",E,":",H)},P.current[E]=V,V}catch(V){throw console.error("Failed to create peer connection for user",E,":",V),V}},ee=async(E,V)=>{try{let H=P.current[E];H||(H=await Y(E)),await H.setRemoteDescription(V);const Le=await H.createAnswer();await H.setLocalDescription(Le),l.emit("group-call-answer",{callId:t.callId,groupId:t.groupId,targetUserId:E,answer:Le})}catch(H){console.error("Failed to handle incoming offer from user",E,":",H)}},le=async(E,V)=>{try{const H=P.current[E];H&&await H.setRemoteDescription(V)}catch(H){console.error("Failed to handle incoming answer from user",E,":",H)}},fe=async(E,V,H,Le)=>{try{const ge=P.current[E];ge&&await ge.addIceCandidate({candidate:V,sdpMLineIndex:H,sdpMid:Le})}catch(ge){console.error("Failed to handle ICE candidate from user",E,":",ge)}},z=async()=>{try{u("connecting"),s&&s(),l.emit("group-call-join",{callId:t.callId,groupId:t.groupId})}catch(E){console.error("Failed to answer group call:",E),g("Failed to answer group call")}},T=()=>{u("declined"),i&&i(),setTimeout(()=>{r&&r()},1e3)},U=()=>{l&&l.emit("group-call-leave",{callId:t.callId,groupId:t.groupId}),u("ended"),r&&r()},L=()=>{A.current&&(A.current.getAudioTracks().forEach(V=>{V.enabled=m}),f(!m))},B=()=>{if(A.current){const E=A.current.getVideoTracks(),V=!j;E.forEach(H=>{H.enabled=V}),I(V)}},ue=()=>{A.current&&A.current.getTracks().forEach(E=>E.stop()),Object.values(P.current).forEach(E=>{E&&E.close()}),P.current={},Object.values(R.current).forEach(E=>{E&&E.remove&&E.remove()}),R.current={},Q.current&&clearInterval(Q.current)},xe=E=>{const V=Math.floor(E/60),H=E%60;return`${V}:${H.toString().padStart(2,"0")}`};return x?o.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700 p-6 w-96 text-center",children:[o.jsx("div",{className:"text-4xl mb-3",children:"❌"}),o.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Group Call Error"}),o.jsx("p",{className:"text-gray-300 mb-4 text-sm",children:x}),o.jsx("button",{className:"btn btn-primary",onClick:r,children:"Close"})]})}):o.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden w-full max-w-6xl h-5/6",children:[o.jsxs("div",{className:"bg-black bg-opacity-20 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200",children:e!=null&&e.avatar?o.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-blue-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-lg",children:((pe=(ke=e==null?void 0:e.name)==null?void 0:ke.charAt(0))==null?void 0:pe.toUpperCase())||"G"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-white text-lg",children:(e==null?void 0:e.name)||"Group Call"}),o.jsxs("p",{className:"text-sm text-gray-300",children:[c==="incoming"&&"Incoming group call...",c==="outgoing"&&"Starting group call...",c==="connecting"&&"Connecting...",c==="connected"&&`Connected - ${xe(h)}`,c==="declined"&&"Call declined",c==="ended"&&"Call ended"]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"text-sm text-gray-300",children:[S.length," participant",S.length!==1?"s":""]})})]}),o.jsx("div",{className:"relative h-96 bg-black p-4",children:j?o.jsxs("div",{className:"grid grid-cols-2 gap-4 h-full",children:[o.jsxs("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[o.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:"You"})]}),S.map((E,V)=>o.jsxs("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[o.jsx("video",{ref:H=>R.current[E.id]=H,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:E.name}),E.isMuted&&o.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-1 py-1 rounded",children:"🔇"})]},E.id||E._id||V))]}):o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-700 flex items-center justify-center mb-4 mx-auto",children:o.jsx("span",{className:"text-3xl text-white",children:((Be=(Ie=e==null?void 0:e.name)==null?void 0:Ie.charAt(0))==null?void 0:Be.toUpperCase())||"G"})}),o.jsx("p",{className:"text-white text-sm",children:"Audio Only Group Call"})]})})}),o.jsx("div",{className:"bg-black bg-opacity-20 p-6",children:o.jsxs("div",{className:"flex justify-center space-x-4",children:[c==="incoming"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:T,title:"Decline",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("button",{className:"w-16 h-16 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:z,title:"Answer",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]}),c==="connected"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl ${m?"bg-red-500 hover:bg-red-600 text-white":"bg-white bg-opacity-20 hover:bg-opacity-30 text-white"}`,onClick:L,title:m?"Unmute":"Mute",children:m?o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),(t==null?void 0:t.callType)==="video"&&o.jsx("button",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl ${j?"bg-white bg-opacity-20 hover:bg-opacity-30 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,onClick:B,title:j?"Disable Video":"Enable Video",children:j?o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}):o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]})}),o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:U,title:"End Call",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(c==="outgoing"||c==="connecting")&&o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:U,title:"Cancel Call",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})})},Af=()=>{const{user:e,logout:t}=jn(),{socket:n,isConnected:r,sendMessage:s,joinGroup:i,leaveGroup:l,onReceiveMessage:a,onReceiveGroupMessage:c,onMessageSent:u,getConnectionStatus:m}=Un(),[f,j]=y.useState([]),[I,h]=y.useState([]),[v,S]=y.useState(null),[w,x]=y.useState([]),[g,_]=y.useState(""),[R,A]=y.useState(""),[P,G]=y.useState(!0),[Q,X]=y.useState({}),[K,ne]=y.useState({}),[$,Y]=y.useState("all"),[ee,le]=y.useState(null),[fe,z]=y.useState(null),[T,U]=y.useState(!1),[L,B]=y.useState({}),[ue,xe]=y.useState(()=>{try{const d=sessionStorage.getItem("downloadedMessages");return d?JSON.parse(d):{}}catch{return{}}}),[ke,pe]=y.useState(!1),[Ie,Be]=y.useState(null),[E,V]=y.useState(!1),[H,Le]=y.useState(null),[ge,gt]=y.useState(!1),[xt,kt]=y.useState(null),[ie,me]=y.useState(!1),Ve=d=>d&&(/^https?:\/\//i.test(d)?d:`${Me}${d}`),it=d=>{if(!d)return"";const p=new Date(d),C=new Date,k=new Date(C.getFullYear(),C.getMonth(),C.getDate()),M=new Date(k);M.setDate(M.getDate()-1);const F=new Date(p.getFullYear(),p.getMonth(),p.getDate());return F.getTime()===k.getTime()?p.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):F.getTime()===M.getTime()?"Yesterday":Math.floor((k-F)/(1e3*60*60*24))<7?p.toLocaleDateString([],{weekday:"short"}):p.toLocaleDateString([],{day:"numeric",month:"numeric",year:p.getFullYear()!==C.getFullYear()?"numeric":void 0})},St=d=>{if(!d)return"";const p=new Date(d),C=new Date,k=new Date(C.getFullYear(),C.getMonth(),C.getDate()),M=new Date(k);M.setDate(M.getDate()-1);const F=new Date(p.getFullYear(),p.getMonth(),p.getDate());return F.getTime()===k.getTime()?"Today":F.getTime()===M.getTime()?"Yesterday":Math.floor((k-F)/(1e3*60*60*24))<7?p.toLocaleDateString([],{weekday:"long",month:"short",day:"numeric"}):p.toLocaleDateString([],{weekday:"long",month:"short",day:"numeric",year:p.getFullYear()!==C.getFullYear()?"numeric":void 0})},[Pt,Fe]=y.useState(null),[Ee,ae]=y.useState(!1),[we,Bt]=y.useState(null),[J,ye]=y.useState(null),[_e,lt]=y.useState(""),re=d=>((d==null?void 0:d.id)||(d==null?void 0:d._id)||(d==null?void 0:d.messageId)||"").toString(),Pe=d=>{Pt&&clearTimeout(Pt);const p=setTimeout(()=>{Bt(d),ae(!0)},700);Fe(p)},Re=()=>{Pt&&(clearTimeout(Pt),Fe(null))},Rl=async()=>{try{const d=(we==null?void 0:we.messageType)==="text"?(we==null?void 0:we.message)||"":Ve(we==null?void 0:we.fileUrl)||(we==null?void 0:we.fileName)||"";d&&await navigator.clipboard.writeText(d)}catch{}ae(!1)},Ml=()=>{if(we){try{sessionStorage.setItem("forwardMessage",JSON.stringify({id:we.id||we._id,message:we.message,messageType:we.messageType,fileUrl:we.fileUrl,fileName:we.fileName,fileSize:we.fileSize,fileType:we.fileType}))}catch{}window.location.href="/forward"}ae(!1)},To=()=>{var d,p,C,k;if(we&&we.messageType==="text"){const M=((d=we.sender)==null?void 0:d.id)||((p=we.sender)==null?void 0:p._id)||we.sender;M===e.id||M===e._id||M===((C=e.id)==null?void 0:C.toString())||M===((k=e._id)==null?void 0:k.toString())?(ye(we),lt(we.message||"")):q.error("You can only edit your own messages")}ae(!1)},ws=async()=>{if(!(!J||!_e.trim()))try{x(d=>d.map(p=>re(p)===re(J)?{...p,message:_e.trim(),isEdited:!0,editedAt:new Date().toISOString()}:p)),await qe.editMessage(J.id||J._id,_e.trim()),ye(null),lt("")}catch(d){console.error("Failed to edit message:",d),q.error("Failed to edit message")}},js=()=>{ye(null),lt("")},dr=y.useRef(null);y.useEffect(()=>((async()=>{try{console.log("🔄 Loading chat state from database for UserDashboard...");const p=await qe.getChatState(),{personalChats:C,groupChats:k}=p.data,M={},F={};C.forEach(D=>{var ce,de,Se;D.unreadCount>0&&(M[D.chatId]=D.unreadCount),D.lastMessage&&D.lastMessage.message&&(F[D.chatId]={id:D.lastMessage._id||D.lastMessage.id,message:D.lastMessage.message,senderName:D.lastMessage.senderName||((ce=D.lastMessage.sender)==null?void 0:ce.name)||"User",senderId:D.lastMessage.senderId||((de=D.lastMessage.sender)==null?void 0:de._id)||((Se=D.lastMessage.sender)==null?void 0:Se.id),timestamp:D.lastMessage.createdAt||D.lastMessage.timestamp})}),k.forEach(D=>{var ce,de,Se;D.unreadCount>0&&(M[D.chatId]=D.unreadCount),D.lastMessage&&D.lastMessage.message&&(F[D.chatId]={id:D.lastMessage._id||D.lastMessage.id,message:D.lastMessage.message,senderName:D.lastMessage.senderName||((ce=D.lastMessage.sender)==null?void 0:ce.name)||"User",senderId:D.lastMessage.senderId||((de=D.lastMessage.sender)==null?void 0:de._id)||((Se=D.lastMessage.sender)==null?void 0:Se.id),timestamp:D.lastMessage.createdAt||D.lastMessage.timestamp})}),X(M),ne(F),console.log("✅ UserDashboard chat state loaded from database:",{unreadCounts:M,lastMessages:Object.keys(F).length})}catch(p){console.error("Error loading chat state from database:",p)}})(),Io(),_o(),()=>{}),[]),y.useEffect(()=>(v&&(Ns(),_o(),v.type==="group"&&(i(v.id),console.log("🏠 UserDashboard joined group room for:",v.name))),()=>{rt.removeAllListeners(),v&&v.type==="group"&&(l(v.id),console.log("🚪 UserDashboard left group room for:",v.name)),rt.healthCheckInterval&&(clearInterval(rt.healthCheckInterval),delete rt.healthCheckInterval)}),[v]),y.useEffect(()=>{Pr()},[w]);const Rr=async()=>{try{console.log("🔄 Refreshing UserDashboard chat state from database...");const d=await qe.getChatState(),{personalChats:p,groupChats:C}=d.data,k={},M={};p.forEach(F=>{var D,ce,de;F.unreadCount>0&&(k[F.chatId]=F.unreadCount),F.lastMessage&&F.lastMessage.message&&(M[F.chatId]={id:F.lastMessage._id||F.lastMessage.id,message:F.lastMessage.message,senderName:F.lastMessage.senderName||((D=F.lastMessage.sender)==null?void 0:D.name)||"User",senderId:F.lastMessage.senderId||((ce=F.lastMessage.sender)==null?void 0:ce._id)||((de=F.lastMessage.sender)==null?void 0:de.id),timestamp:F.lastMessage.createdAt||F.lastMessage.timestamp})}),C.forEach(F=>{var D,ce,de;F.unreadCount>0&&(k[F.chatId]=F.unreadCount),F.lastMessage&&F.lastMessage.message&&(M[F.chatId]={id:F.lastMessage._id||F.lastMessage.id,message:F.lastMessage.message,senderName:F.lastMessage.senderName||((D=F.lastMessage.sender)==null?void 0:D.name)||"User",senderId:F.lastMessage.senderId||((ce=F.lastMessage.sender)==null?void 0:ce._id)||((de=F.lastMessage.sender)==null?void 0:de.id),timestamp:F.lastMessage.createdAt||F.lastMessage.timestamp})}),X(k),ne(M),console.log("✅ UserDashboard chat state refreshed from database")}catch(d){console.error("Error refreshing UserDashboard chat state:",d)}};y.useEffect(()=>{window.testSocketDashboard=()=>{rt.testConnection()},window.checkSocketDashboard=()=>{rt.logConnectionStatus()},window.forceSocketConnectDashboard=()=>{rt.forceConnectionTest()},console.log("🔧 UserDashboard Socket debugging methods available:"),console.log(" - testSocketDashboard() - Test socket connection status"),console.log(" - checkSocketDashboard() - Show current socket status"),console.log(" - forceSocketConnectDashboard() - Force reconnection")},[]);const Io=async()=>{try{G(!0);const[d,p]=await Promise.all([Tt.getActiveUsers(),rn.getMyGroups()]);console.log("📊 UserDashboard Data Loaded:"),console.log("👥 Users:",d.data.length),console.log("🏠 Groups:",p.data.length),console.log("📋 Group Details:",p.data.map(C=>{var k;return{id:C.id,name:C.name,members:((k=C.members)==null?void 0:k.length)||0,avatar:C.avatar?"Has Avatar":"No Avatar"}})),j(d.data.filter(C=>C.id!==e.id)),h(p.data)}catch(d){console.error("Error fetching dashboard data:",d),q.error("Failed to load dashboard data")}finally{G(!1)}},_o=()=>{console.log("🔧 Setting up enhanced UserDashboard socket listeners with Context API...");const d=m();console.log("🔗 Current socket status:",d),a(p=>{var de,Se;console.log("🔔 USERDASHBOARD CONTEXT - received message:",p);const C=typeof p.sender=="object"?p.sender.id||p.sender._id:p.sender,k=typeof p.receiver=="object"?p.receiver.id||p.receiver._id:p.receiver,M=p.id||p._id||p.messageId,F=p.message||p.content,D=C===e.id||C===e._id||C===((de=e.id)==null?void 0:de.toString())||C===((Se=e._id)==null?void 0:Se.toString());if(p._isConfirmation||p.isConfirmMessage||p.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const ce=Ro(p,v,e);if(console.log("📨 ENHANCED USERDASHBOARD MESSAGE FILTERING:",{senderId:C,receiverId:k,messageId:M,messageText:F,selectedChatId:v==null?void 0:v.id,selectedChatType:v==null?void 0:v.type,currentUserId:e.id,isCurrentUserSender:D,isForCurrentChat:ce,messageData:p}),ce&&v)console.log("📨 Processing message for current active dashboard chat"),D?console.log("📨 Message from current user - handled by optimistic updates"):(console.log("📨 Adding external message to current dashboard chat immediately"),x(he=>{if(he.some(te=>{var Vt,dn;const et=te.id||te._id||te.messageId,Oe=te.message||te.content,Ct=((Vt=te.sender)==null?void 0:Vt.id)||((dn=te.sender)==null?void 0:dn._id)||te.sender,yt=te.createdAt||te.timestamp,vt=p.createdAt||p.timestamp;return!!(et===M&&M||Oe===F&&String(Ct)===String(C)&&vt&&yt&&Math.abs(new Date(vt)-new Date(yt))<5e3||te.isOptimistic&&Oe===F&&String(Ct)===String(C)&&vt&&yt&&Math.abs(new Date(vt)-new Date(yt))<1e4)}))return console.log("🔄 UserDashboard enhanced detection: Message already exists - confirmed duplicate",{messageId:M,messageText:F==null?void 0:F.substring(0,20),senderId:C,isDuplicate:!0}),he;console.log("✅ REAL-TIME USERDASHBOARD: NEW message confirmed - Adding to active chat",{messageId:M,messageText:F==null?void 0:F.substring(0,20),senderId:C,isDuplicate:!1});const Ne=Nn(p,C);return bn(v.id,p,C),setTimeout(()=>{Rr()},100),[...he,Ne]}));else if(F&&!D){const he=C||p.sender;he&&he!==e.id&&(console.log("📬 Incrementing unread count for dashboard chat:",he),X(se=>({...se,[he]:(se[he]||0)+1})),bn(he,p,C),setTimeout(()=>{Rr()},100))}}),u(p=>{console.log("🔄 Dashboard message sent confirmation received:",p),p&&p.id&&x(C=>{const k=C.filter(F=>!F.isOptimistic),M={id:p.id,message:p.message,messageType:p.messageType||"text",fileUrl:p.fileUrl,fileName:p.fileName,fileSize:p.fileSize,fileType:p.fileType,sender:p.sender,createdAt:p.createdAt||p.timestamp,timestamp:p.timestamp,isOptimistic:!1};return[...k,M]})}),c(p=>{var de,Se,he,se;console.log("🔔 USERDASHBOARD GROUP MESSAGE CONTEXT - received message:",p);const C=typeof p.sender=="object"?p.sender.id||p.sender._id:p.sender,k=p.groupId||((de=p.group)==null?void 0:de.id)||((Se=p.group)==null?void 0:Se._id),M=p.id||p._id||p.messageId,F=p.message||p.content,D=C===e.id||C===e._id||C===((he=e.id)==null?void 0:he.toString())||C===((se=e._id)==null?void 0:se.toString());if(p._isConfirmation||p.isConfirmMessage||p.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const ce=v&&v.type==="group"&&(k===v.id||String(k)===String(v.id));if(console.log("📨 USERDASHBOARD GROUP MESSAGE FILTERING:",{senderId:C,groupId:k,messageId:M,messageText:F,selectedChatId:v==null?void 0:v.id,selectedChatType:v==null?void 0:v.type,currentUserId:e.id,isCurrentUserSender:D,isForCurrentGroup:ce,messageData:p}),ce&&v)console.log("📨 Processing group message for current UserDashboard group"),D?console.log("📨 Group message from current user - handled by optimistic updates"):(console.log("📨 Adding external group message to current dashboard chat immediately"),x(Ne=>{if(Ne.some(Oe=>{var Lr,Bu;const Ct=Oe.id||Oe._id||Oe.messageId,yt=Oe.message||Oe.content,vt=((Lr=Oe.sender)==null?void 0:Lr.id)||((Bu=Oe.sender)==null?void 0:Bu._id)||Oe.sender,Vt=Oe.createdAt||Oe.timestamp,dn=p.createdAt||p.timestamp;return!!(Ct===M&&M||yt===F&&String(vt)===String(C)&&dn&&Vt&&Math.abs(new Date(dn)-new Date(Vt))<5e3||Oe.isOptimistic&&yt===F&&String(vt)===String(C)&&dn&&Vt&&Math.abs(new Date(dn)-new Date(Vt))<1e4)}))return console.log("🔄 USERDASHBOARD GROUP duplicate detection: Message already exists",{messageId:M,messageText:F==null?void 0:F.substring(0,20),senderId:C==null?void 0:C.toString(),isDuplicate:!0}),Ne;console.log("✅ USERDASHBOARD GROUP REAL-TIME: NEW message confirmed - Adding to active group",{messageId:M,messageText:F==null?void 0:F.substring(0,20),senderId:C,groupId:k});const et=Nn(p,C);return bn(v.id,p,C),setTimeout(()=>{Rr()},100),[...Ne,et]}));else if(F&&!D){const Ne=k||p.groupId;Ne&&(!v||v.type!=="group"||String(Ne)!==String(v.id))&&(console.log("📬 UserDashboard incrementing unread count for group:",Ne),X(et=>({...et,[Ne]:(et[Ne]||0)+1})),bn(Ne,p,C),setTimeout(()=>{Rr()},100))}}),n&&(n.off("incoming-call"),n.on("incoming-call",p=>{var C;console.log("📞 Incoming call received:",p),q.success(`Incoming ${p.callType} call from ${((C=p.caller)==null?void 0:C.name)||"Unknown"}`,{duration:5e3,icon:"📞"}),V(!0),Be({callId:p.callId,callType:p.callType,caller:p.caller}),pe(!0)}),n.off("call-initiated"),n.on("call-initiated",p=>{console.log("📤 Call initiated:",p),V(!1),Be({callId:p.callId,callType:p.callType,otherUser:p.receiver}),pe(!0)}),n.off("call-error"),n.on("call-error",p=>{console.error("❌ Call error:",p),q.error(p.error||"Call failed",{duration:4e3})}),n.off("messages-seen"),n.on("messages-seen",p=>{console.log("👁️ Messages seen by user:",p.readBy),v&&v.type==="personal"&&p.chatId===v.id&&x(C=>C.map(k=>{var F,D;return(((F=k.sender)==null?void 0:F.id)||((D=k.sender)==null?void 0:D._id)||k.sender)===e.id?{...k,isRead:!0,readBy:[{user:p.readBy,readAt:p.timestamp}]}:k}))}),n.off("incoming-group-call"),n.on("incoming-group-call",p=>{var C;console.log("📞 Incoming group call received:",p),q.success(`Incoming group ${p.callType} call from ${((C=p.initiator)==null?void 0:C.name)||"Unknown"}`,{duration:5e3,icon:"📞"}),me(!0),kt({callId:p.callId,callType:p.callType,groupId:p.groupId,group:p.group,initiator:p.initiator}),gt(!0)}),n.off("group-call-initiated"),n.on("group-call-initiated",p=>{console.log("📤 Group call initiated:",p),me(!1),kt({callId:p.callId,callType:p.callType,groupId:p.groupId,group:p.group}),gt(!0)}),n.off("group-call-error"),n.on("group-call-error",p=>{console.error("❌ Group call error:",p),q.error(p.error||"Group call failed",{duration:4e3})}))},Ro=(d,p,C)=>{var D,ce,de,Se;if(!p)return!1;const k=((D=d.sender)==null?void 0:D.id)||((ce=d.sender)==null?void 0:ce._id)||d.sender,M=((de=d.receiver)==null?void 0:de.id)||((Se=d.receiver)==null?void 0:Se._id)||d.receiver,F=d.chatId||d.chatRoom;return p.type==="personal"&&p.id&&(k===p.id&&M===C.id||k===C.id&&M===p.id||String(k)===String(p.id)||String(M)===String(p.id))?!0:p.type==="group"?F===p.id||d.groupId===p.id:!1},Nn=(d,p)=>{var C,k;return{id:d.id||d._id||d.messageId,message:d.message||d.content,messageType:d.messageType||"text",fileUrl:d.fileUrl,fileName:d.fileName,fileSize:d.fileSize,fileType:d.fileType,sender:typeof d.sender=="object"?d.sender:{id:p,name:d.senderName||((C=d.sender)==null?void 0:C.name)||"User",profileImage:d.senderProfileImage||((k=d.sender)==null?void 0:k.profileImage)},createdAt:d.createdAt||d.timestamp||new Date().toISOString(),timestamp:d.timestamp||d.createdAt,isFromOtherUser:!(p===e.id||p===e._id)}},bn=(d,p,C)=>{const k=C===e.id||C===e._id;ne(M=>{var F;return{...M,[d]:{id:p.id||p._id||p.messageId,message:p.message||p.content,senderName:k?"You":p.senderName||((F=p.sender)==null?void 0:F.name)||"User",senderId:C,timestamp:p.createdAt||p.timestamp||new Date().toISOString()}}})},Ns=async()=>{var d;try{let p;if(v.type==="personal"){if(!v.id){console.error("User ID is undefined for personal chat");return}p=await qe.getPersonalMessages(v.id)}else{if(!v.id){console.error("Group ID is undefined for group chat");return}p=await qe.getGroupMessages(v.id)}const C=p.data;if(x(C),C.length>0){const k=C[C.length-1];bn(v.id,k,((d=k.sender)==null?void 0:d.id)||k.sender)}}catch(p){console.error("Error fetching messages:",p),q.error("Failed to load messages")}},Mr=d=>{const p=document.createElement("input");p.type="file",p.style.display="none",d==="image"?p.accept="image/*":d==="video"?p.accept="video/*":d==="document"&&(p.accept=".pdf,.doc,.docx,.txt,.csv,.xls,.xlsx"),p.onchange=C=>{const k=C.target.files[0];if(k){if(le(k),k.type.startsWith("image/")){const M=new FileReader;M.onload=F=>z(F.target.result),M.readAsDataURL(k)}else z(null);U(!1)}},document.body.appendChild(p),p.click(),document.body.removeChild(p)},Ar=()=>{le(null),z(null)},bs=async(d,p,C)=>{try{B(Ne=>({...Ne,[C]:{progress:0,downloading:!0}}));const k=await fetch(Ve(d)),M=k.headers.get("content-length"),F=parseInt(M,10);if(!k.ok)throw new Error("Download failed");const D=k.body.getReader(),ce=[];let de=0;for(;;){const{done:Ne,value:te}=await D.read();if(Ne)break;ce.push(te),de+=te.length;const et=F?Math.round(de/F*100):0;B(Oe=>({...Oe,[C]:{progress:et,downloading:!0}}))}const Se=new Blob(ce),he=window.URL.createObjectURL(Se),se=document.createElement("a");se.href=he,se.download=p,document.body.appendChild(se),se.click(),document.body.removeChild(se),window.URL.revokeObjectURL(he),B(Ne=>({...Ne,[C]:{progress:100,downloading:!1}})),xe(Ne=>{const te={...Ne,[C]:!0};try{sessionStorage.setItem("downloadedMessages",JSON.stringify(te))}catch{}return te}),setTimeout(()=>{B(Ne=>{const te={...Ne};return delete te[C],te})},2e3)}catch(k){console.error("Download failed:",k),B(M=>({...M,[C]:{progress:0,downloading:!1,error:!0}}))}};y.useEffect(()=>{const d=p=>{T&&!p.target.closest(".file-options-container")&&U(!1)};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[T]);const Al=async d=>{if(d.preventDefault(),!g.trim()&&!ee||!v)return;if(v.type==="personal"&&v.isActive===!1){q.error("Cannot send messages to disabled users");return}const p=g.trim();_("");try{let C={sender:e.id,message:p,messageType:"text"};if(v.type==="personal"?C.receiver=v.id:C.group=v.id,ee){const k=new FormData;v.type==="personal"?k.append("receiver",v.id):k.append("group",v.id),k.append("message",p),k.append("file",ee);let M="file";ee.type.startsWith("image/")?M="image":ee.type.startsWith("video/")&&(M="video");const F={id:Date.now(),message:p||ee.name,messageType:M,fileUrl:URL.createObjectURL(ee),fileName:ee.name,fileSize:ee.size,fileType:ee.type,sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};x(D=>[...D,F]),bn(v.id,{id:F.id,message:F.message,createdAt:F.createdAt},e.id),v.type==="personal"?await qe.sendPersonalMessage(k):await qe.sendGroupMessage(k),Ar()}else{const k={id:Date.now(),message:p,messageType:"text",sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};if(x(M=>[...M,k]),bn(v.id,{id:k.id,message:k.message,createdAt:k.createdAt},e.id),v.type==="personal")try{await s(v.id,p,"text",!1),console.log("✅ Dashboard message sent via context socket")}catch(M){console.warn("Context socket failed, trying API:",M),await qe.sendPersonalMessage(C)}else try{await s(v.id,p,"text",!0),console.log("✅ Dashboard group message sent via context socket")}catch(M){console.warn("Context socket failed, trying API:",M),await qe.sendGroupMessage({sender:e.id,group:v.id,message:p,timestamp:new Date().toISOString()})}}console.log("✅ Dashboard message sent successfully")}catch(C){console.error("❌ Failed to send dashboard message:",C),q.error("Failed to send message"),x(k=>k.filter(M=>!M.isOptimistic))}},Pr=()=>{var d;(d=dr.current)==null||d.scrollIntoView({behavior:"smooth"})},zu=()=>{t(),q.success("Logged out successfully")},fr=[...f.map(d=>({id:d.id,name:d.name,email:d.email,type:"personal",avatar:d.name.charAt(0).toUpperCase(),profileImage:d.profileImage,lastMessage:K[d.id]||null,isActive:d.isActive})),...I.map(d=>{var p;return{id:d.id,name:d.name,email:`${((p=d.members)==null?void 0:p.length)||0} members`,type:"group",avatar:d.avatar?`${Me}${d.avatar}`:"G",profileImage:d.avatar,lastMessage:K[d.id]||null}})].sort((d,p)=>{var M,F;const C=(M=d.lastMessage)!=null&&M.timestamp?new Date(d.lastMessage.timestamp).getTime():0;return((F=p.lastMessage)!=null&&F.timestamp?new Date(p.lastMessage.timestamp).getTime():0)-C}),b=(()=>{let d=fr;switch($){case"unread":d=fr.filter(p=>Q[p.id]>0);break;case"groups":d=fr.filter(p=>p.type==="group");break;case"all":default:d=fr;break}return d.filter(p=>p.name.toLowerCase().includes(R.toLowerCase())||p.email.toLowerCase().includes(R.toLowerCase()))})();return P?o.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsxs("div",{className:"h-screen bg-gray-50 flex",children:[o.jsxs("div",{className:"w-full h-screen flex bg-white shadow-lg",children:[o.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"User Dashboard"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hi,{to:"/profile",className:"text-gray-500 hover:text-gray-700",children:o.jsx($u,{className:"w-5 h-5"})}),o.jsx("button",{onClick:zu,className:"p-1 text-gray-500 hover:text-gray-700",title:"Logout",children:o.jsx(qp,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-center space-x-3 mb-3",children:o.jsxs(Hi,{to:"/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?o.jsx("img",{src:`${Me}${e.profileImage}`,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium",children:e.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),o.jsx("p",{className:"text-xs text-green-600",children:"Online"})]})]})}),o.jsxs("div",{className:"relative mb-3",children:[o.jsx(Il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search or start new chat",value:R,onChange:d=>A(d.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})]}),o.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>Y("all"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${$==="all"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"All"}),o.jsxs("button",{onClick:()=>Y("unread"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${$==="unread"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:["Unread",Object.values(Q).reduce((d,p)=>d+p,0)>0&&o.jsx("span",{className:"ml-1 bg-green-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Object.values(Q).reduce((d,p)=>d+p,0)})]}),o.jsx("button",{onClick:()=>Y("groups"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${$==="groups"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Groups"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[b.map(d=>{var p;return o.jsx("div",{onClick:()=>{console.log("Selecting chat:",d),S({type:d.type,id:d.id,name:d.name,profileImage:d.profileImage,isActive:d.isActive!==!1}),Q[d.id]&&(X(C=>{const k={...C};return delete k[d.id],k}),qe.updateChatState({chatId:d.id,chatType:d.type,action:"clear_unread"}).catch(C=>{console.error("Error clearing unread count:",C)}))},className:`p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 ${(v==null?void 0:v.id)===d.id&&(v==null?void 0:v.type)===d.type?"bg-green-50":""} ${d.type==="personal"&&d.isActive===!1?"opacity-60 bg-red-50 border-l-4 border-red-300":""}`,title:d.type==="personal"&&d.isActive===!1?"Disabled User":"",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:`w-12 h-12 rounded-full overflow-hidden cursor-pointer hover:ring-2 hover:ring-green-400 transition-all ${d.type==="personal"&&d.isActive===!1?"bg-gray-300":"bg-gray-200"}`,onClick:C=>{C.stopPropagation(),d.profileImage&&Le({image:d.type==="personal"?`${Me}${d.profileImage}`:d.avatar,name:d.name})},children:d.type==="personal"?d.profileImage?o.jsx("img",{src:`${Me}${d.profileImage}`,alt:d.name,className:`w-full h-full object-cover ${d.isActive===!1?"grayscale opacity-70":""}`}):o.jsx("div",{className:`w-full h-full ${d.isActive===!1?"bg-gray-400":"bg-green-500"} flex items-center justify-center`,children:o.jsx("span",{className:"text-white font-semibold text-lg",children:d.avatar})}):d.profileImage?o.jsx("img",{src:d.avatar,alt:d.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Yt,{className:"w-6 h-6 text-white"})})}),d.type==="personal"&&d.isActive!==!1&&o.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"}),d.type==="personal"&&d.isActive===!1&&o.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-white flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"×"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("h3",{className:`truncate ${d.type==="personal"&&d.isActive===!1?"font-medium text-red-700 line-through":"font-medium text-gray-900"}`,children:[d.name,d.type==="personal"&&d.isActive===!1&&o.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Disabled)"})]}),d.type==="group"&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Group"}),Ee&&we&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/30",onClick:()=>ae(!1),children:o.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-xl w-full sm:w-80 p-4 shadow-xl",onClick:C=>C.stopPropagation(),children:[o.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{className:"w-full btn-secondary",onClick:Rl,children:"Copy"}),we.messageType==="text"&&(()=>{var M,F,D,ce;const C=((M=we.sender)==null?void 0:M.id)||((F=we.sender)==null?void 0:F._id)||we.sender;return C===e.id||C===e._id||C===((D=e.id)==null?void 0:D.toString())||C===((ce=e._id)==null?void 0:ce.toString())?o.jsx("button",{className:"w-full btn-primary",onClick:To,children:"Edit"}):null})(),o.jsx("button",{className:"w-full btn-primary",onClick:Ml,children:"Forward"}),o.jsx("button",{className:"w-full btn-secondary",onClick:()=>ae(!1),children:"Cancel"})]})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:(p=d.lastMessage)!=null&&p.timestamp?it(d.lastMessage.timestamp):""}),Q[d.id]&&Q[d.id]>0&&o.jsx("div",{className:"bg-green-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:Q[d.id]>99?"99+":Q[d.id]})]})]}),o.jsx("p",{className:`text-sm truncate ${d.type==="personal"&&d.isActive===!1?"text-red-400":"text-gray-500"}`,children:d.type==="personal"&&d.isActive===!1?"User is disabled - cannot send new messages":d.lastMessage&&d.lastMessage.message?`${d.lastMessage.senderName||"You"}: ${d.lastMessage.message}`:"No messages yet"})]})]})},`${d.type}-${d.id}`)}),b.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Nr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 text-sm",children:R?"No chats found.":"No chats available."})]})]})]}),H&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>Le(null),children:o.jsxs("div",{className:"relative max-w-2xl max-h-[90vh] p-4",children:[o.jsx("button",{onClick:()=>Le(null),className:"absolute top-6 right-6 z-10 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 transition-colors",title:"Close",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4",children:o.jsx("h3",{className:"text-white text-xl font-semibold text-center",children:H.name})}),o.jsx("img",{src:H.image,alt:H.name,className:"w-full h-auto max-h-[70vh] object-contain",onClick:d=>d.stopPropagation()})]})]})}),o.jsx("div",{className:"flex-1 flex flex-col",children:v?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:v.type==="personal"?v.profileImage?o.jsx("img",{src:`${Me}${v.profileImage}`,alt:v.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold",children:v.name.charAt(0).toUpperCase()})}):v.profileImage?o.jsx("img",{src:`${Me}${v.profileImage}`,alt:v.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Yt,{className:"w-5 h-5 text-white"})})}),o.jsxs("div",{className:`${v.type==="group"?"cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors":""}`,onClick:()=>{v.type==="group"&&(window.location.href=`/group/${v.id}`)},title:v.type==="group"?"Click to view group info":"",children:[o.jsxs("h3",{className:`font-semibold ${v.type==="personal"&&v.isActive===!1?"text-red-700":"text-gray-900"}`,children:[v.name,v.type==="personal"&&v.isActive===!1&&o.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Disabled)"})]}),o.jsx("p",{className:`text-xs ${v.type==="personal"&&v.isActive===!1?"text-red-400":"text-gray-500"}`,children:v.type==="personal"?v.isActive===!1?"User is disabled - viewing mode only":"last seen today at 10:30 AM":`${v.email}`})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[v.type==="personal"?o.jsxs(o.Fragment,{children:[o.jsx(Mf,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var d,p;if(!(!v||v.type!=="personal"))try{const k=(p=(d=(await xo.initiate(v.id,"voice")).data)==null?void 0:d.data)==null?void 0:p.call;k&&k._id&&(V(!1),Be({callId:k._id,callType:"voice",otherUser:k.otherUser}),pe(!0),n.emit("call-initiate",{receiverId:v.id,callType:"voice",callId:k._id}))}catch(C){console.error("Failed to initiate call",C)}}}),o.jsx(rs,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var d,p;if(!(!v||v.type!=="personal"))try{const k=(p=(d=(await xo.initiate(v.id,"video")).data)==null?void 0:d.data)==null?void 0:p.call;k&&k._id&&(V(!1),Be({callId:k._id,callType:"video",otherUser:k.otherUser}),pe(!0),n.emit("call-initiate",{receiverId:v.id,callType:"video",callId:k._id}))}catch(C){console.error("Failed to initiate video call",C)}}})]}):o.jsxs(o.Fragment,{children:[o.jsx(Mf,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var d,p,C,k,M;if(!(!v||v.type!=="group")){console.log("Initiating group call for:",v.id,v.name);try{const D=(p=(d=(await vr.initiate(v.id,"voice")).data)==null?void 0:d.data)==null?void 0:p.call;D&&D._id&&(me(!1),kt({callId:D._id,callType:"voice",groupId:v.id,group:{name:v.name,avatar:v.profileImage}}),gt(!0),n.emit("group-call-initiate",{groupId:v.id,callType:"voice",callId:D._id}))}catch(F){console.error("Failed to initiate group call",F),console.error("Error response:",(C=F.response)==null?void 0:C.data);const D=((M=(k=F.response)==null?void 0:k.data)==null?void 0:M.message)||"Failed to initiate group call";q.error(D)}}}}),o.jsx(rs,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var d,p,C,k,M;if(!(!v||v.type!=="group")){console.log("Initiating group video call for:",v.id,v.name);try{const D=(p=(d=(await vr.initiate(v.id,"video")).data)==null?void 0:d.data)==null?void 0:p.call;D&&D._id&&(me(!1),kt({callId:D._id,callType:"video",groupId:v.id,group:{name:v.name,avatar:v.profileImage}}),gt(!0),n.emit("group-call-initiate",{groupId:v.id,callType:"video",callId:D._id}))}catch(F){console.error("Failed to initiate group video call",F),console.error("Error response:",(C=F.response)==null?void 0:C.data);const D=((M=(k=F.response)==null?void 0:k.data)==null?void 0:M.message)||"Failed to initiate group video call";q.error(D)}}}})]}),o.jsx(Cc,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 relative",children:o.jsxs("div",{className:"max-w-8xl mx-auto",children:[w.map((d,p)=>{var D,ce,de,Se,he,se,Ne;const C=p===0||(()=>{const te=new Date(d.createdAt||d.timestamp),et=new Date(w[p-1].createdAt||w[p-1].timestamp),Oe=new Date(te.getFullYear(),te.getMonth(),te.getDate()),Ct=new Date(et.getFullYear(),et.getMonth(),et.getDate());return Oe.getTime()!==Ct.getTime()})();let k=!1;if(typeof d.sender=="object"&&d.sender!==null){const te=d.sender._id||d.sender.id;k=te===e.id||te===e._id||te===((D=e.id)==null?void 0:D.toString())||te===((ce=e._id)==null?void 0:ce.toString())}else k=d.sender===e.id||d.sender===e._id||d.sender===((de=e.id)==null?void 0:de.toString())||d.sender===((Se=e._id)==null?void 0:Se.toString());const M=typeof d.sender=="object"?(he=d.sender)==null?void 0:he.name:"User",F=typeof d.sender=="object"?(se=d.sender)==null?void 0:se.profileImage:null;return o.jsxs(el.Fragment,{children:[C&&o.jsx("div",{className:"flex justify-center my-4",children:o.jsx("div",{className:"bg-gray-200 text-gray-600 text-xs px-3 py-1 rounded-full",children:St(d.createdAt||d.timestamp)})}),o.jsx("div",{className:`flex ${k?"justify-end":"justify-start"} mb-4`,children:o.jsxs("div",{className:`flex items-start gap-2 max-w-sm lg:max-w-md ${k?"flex-row-reverse":"flex-row"}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-300 flex-shrink-0",children:k?e.profileImage?o.jsx("img",{src:`${Me}${e.profileImage}`,alt:e.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:e.name.charAt(0).toUpperCase()})}):F?o.jsx("img",{src:`${Me}${F}`,alt:M,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-400 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:String(M).charAt(0).toUpperCase()})})}),o.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg ${k?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"} ${Ee&&we&&re(we)===re(d)?"ring-2 ring-blue-400":""}`,onMouseDown:()=>Pe(d),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Pe(d),onTouchEnd:Re,onContextMenu:te=>{te.preventDefault(),Bt(d),ae(!0)},children:[d.fileUrl&&o.jsx("div",{className:"mb-2",children:d.messageType==="image"?o.jsxs("div",{className:"relative",onMouseDown:()=>Pe(d),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Pe(d),onTouchEnd:Re,children:[o.jsx("img",{src:Ve(d.fileUrl),alt:d.fileName,className:`max-w-xs rounded-lg ${!k&&!ue[d.id||d._id]?"blur-sm cursor-pointer":"cursor-default"} hover:opacity-90`,onClick:()=>{k||bs(d.fileUrl,d.fileName,d.id||d._id)}}),!k&&!ue[d.id||d._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ts,{className:"w-3 h-3"}),((d.fileSize||0)/1024/1024).toFixed(1)," MB"]}),L[d.id||d._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[L[d.id||d._id].progress,"%"]})]})})]}):d.messageType==="video"?o.jsxs("div",{className:"relative",onMouseDown:()=>Pe(d),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Pe(d),onTouchEnd:Re,children:[o.jsx("video",{src:Ve(d.fileUrl),controls:!0,className:`max-w-xs rounded-lg ${!k&&!ue[d.id||d._id]?"blur-sm":""}`,onClick:()=>{k||bs(d.fileUrl,d.fileName,d.id||d._id)}}),!k&&!ue[d.id||d._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ts,{className:"w-3 h-3"}),((d.fileSize||0)/1024/1024).toFixed(1)," MB"]}),L[d.id||d._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[L[d.id||d._id].progress,"%"]})]})})]}):o.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-20 rounded-lg relative",onMouseDown:()=>Pe(d),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Pe(d),onTouchEnd:Re,children:[o.jsx(ns,{className:"w-5 h-5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:d.fileName}),o.jsxs("p",{className:"text-xs opacity-75",children:[(d.fileSize/1024/1024).toFixed(2)," MB"]})]}),!k&&o.jsx("button",{onClick:()=>bs(d.fileUrl,d.fileName,d.id||d._id),className:"p-1 hover:bg-white hover:bg-opacity-20 rounded",disabled:(Ne=L[d.id||d._id])==null?void 0:Ne.downloading,children:o.jsx(ts,{className:"w-4 h-4"})}),L[d.id||d._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg p-2 text-center",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mx-auto mb-1"}),o.jsxs("p",{className:"text-xs text-white",children:[L[d.id||d._id].progress,"%"]})]})})]})}),d.message&&(J&&re(J)===re(d)?o.jsxs("div",{className:"mb-2",children:[o.jsx("input",{type:"text",value:_e,onChange:te=>lt(te.target.value),className:"w-full px-2 py-1 text-sm bg-white bg-opacity-20 rounded border-none focus:outline-none focus:ring-1 focus:ring-white",autoFocus:!0,onKeyDown:te=>{te.key==="Enter"&&ws(),te.key==="Escape"&&js()}}),o.jsxs("div",{className:"flex gap-1 mt-1",children:[o.jsx("button",{onClick:ws,className:"text-xs px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),o.jsx("button",{onClick:js,className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]}):o.jsxs("p",{className:"text-sm mb-1 break-words",children:[d.message,(d.isEdited||d.editedAt)&&o.jsx("span",{className:"text-xs opacity-75 ml-1",children:"(edited)"})]})),o.jsxs("div",{className:`flex items-center gap-1 text-xs self-end ${k?"text-green-100":"text-gray-500"}`,children:[o.jsx("span",{children:new Date(d.createdAt||d.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),k&&o.jsx("span",{className:"ml-1 relative inline-flex items-center",title:d.isRead||d.readBy&&d.readBy.length>0?"Seen":"Delivered",children:d.isRead||d.readBy&&d.readBy.length>0?o.jsx("svg",{className:"w-4 h-4 text-blue-500",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})}):o.jsx("svg",{className:"w-4 h-4 opacity-70",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})})})]})]})]})})]},d.id||d._id||p)}),o.jsx("div",{ref:dr})]})}),o.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:v.type==="personal"&&v.isActive===!1?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-3 w-full text-center",children:o.jsx("p",{className:"text-red-600 text-sm font-medium",children:"This user is disabled. You can view previous messages but cannot send new ones."})})}):o.jsxs("div",{className:"relative",children:[T&&o.jsx("div",{className:"file-options-container absolute bottom-16 left-4 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-50",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:()=>Mr("image"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(Fu,{className:"w-8 h-8 text-green-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Image"})]}),o.jsxs("button",{onClick:()=>Mr("video"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(rs,{className:"w-8 h-8 text-blue-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Video"})]}),o.jsxs("button",{onClick:()=>Mr("document"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(ns,{className:"w-8 h-8 text-purple-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Document"})]})]})}),ee&&o.jsx("div",{className:"mb-3 p-3 bg-gray-100 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[fe?o.jsx("img",{src:fe,alt:"Preview",className:"w-12 h-12 object-cover rounded"}):o.jsx(ns,{className:"w-8 h-8 text-gray-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:ee.name}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(ee.size/1024/1024).toFixed(2)," MB"]})]})]}),o.jsx("button",{onClick:Ar,className:"text-gray-500 hover:text-gray-700",children:"×"})]})}),o.jsxs("form",{onSubmit:Al,className:"flex items-center space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>U(!T),className:"p-2 text-gray-500 hover:text-gray-700",title:"Attach file",children:o.jsx(Yp,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex-1 relative",children:o.jsx("input",{type:"text",value:g,onChange:d=>_(d.target.value),placeholder:"Type a message",className:"w-full py-2 px-4 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})}),o.jsx("button",{type:"submit",disabled:!g.trim()&&!ee,className:"bg-green-500 text-white p-2 rounded-full hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.jsx(Jp,{className:"w-5 h-5"})})]})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Nr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Welcome to WhatsApp Chat"}),o.jsx("p",{className:"text-gray-500 max-w-md",children:"Select a conversation from the sidebar to start messaging. Your conversations will appear on the left side."})]})})})]}),ke&&Ie&&o.jsx(o.Fragment,{children:Ie.callType==="voice"?o.jsx(Xp,{user:e,callData:Ie,isIncoming:E,onCallEnd:()=>{pe(!1),Be(null),V(!1)},onCallAnswer:()=>{V(!1)},onCallDecline:()=>{pe(!1),Be(null),V(!1)}}):o.jsx(Zp,{user:e,callData:Ie,isIncoming:E,onCallEnd:()=>{pe(!1),Be(null),V(!1)},onCallAnswer:()=>{V(!1)},onCallDecline:()=>{pe(!1),Be(null),V(!1)}})}),ge&&xt&&o.jsx(eg,{user:e,callData:xt,isIncoming:ie,onCallEnd:()=>{gt(!1),kt(null),me(!1)},onCallAnswer:()=>{me(!1)},onCallDecline:()=>{gt(!1),kt(null),me(!1)}})]})},h2=()=>{const{user:e}=jn(),{socket:t,isConnected:n,sendMessage:r,joinGroup:s,leaveGroup:i,onReceiveMessage:l,onReceiveGroupMessage:a,onMessageSent:c,getConnectionStatus:u}=Un(),[m,f]=y.useState([]),[j,I]=y.useState([]),[h,v]=y.useState(null),[S,w]=y.useState([]),[x,g]=y.useState(""),[_,R]=y.useState(""),[A,P]=y.useState(!0),[G,Q]=y.useState({}),[X,K]=y.useState({}),[ne,$]=y.useState("all"),[Y,ee]=y.useState(null),[le,fe]=y.useState(null),[z,T]=y.useState(!1),[U,L]=y.useState({}),[B,ue]=y.useState(()=>{try{const N=sessionStorage.getItem("downloadedMessages");return N?JSON.parse(N):{}}catch{return{}}}),[xe,ke]=y.useState(!1),[pe,Ie]=y.useState(null),[Be,E]=y.useState(!1),[V,H]=y.useState(null),[Le,ge]=y.useState(!1),[gt,xt]=y.useState(null),[kt,ie]=y.useState(!1),me=N=>N&&(/^https?:\/\//i.test(N)?N:`${Me}${N}`),Ve=N=>{if(!N)return"";const b=new Date(N),d=new Date,p=new Date(d.getFullYear(),d.getMonth(),d.getDate()),C=new Date(p);C.setDate(C.getDate()-1);const k=new Date(b.getFullYear(),b.getMonth(),b.getDate());return k.getTime()===p.getTime()?b.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):k.getTime()===C.getTime()?"Yesterday":Math.floor((p-k)/(1e3*60*60*24))<7?b.toLocaleDateString([],{weekday:"short"}):b.toLocaleDateString([],{day:"numeric",month:"numeric",year:b.getFullYear()!==d.getFullYear()?"numeric":void 0})},it=N=>{if(!N)return"";const b=new Date(N),d=new Date,p=new Date(d.getFullYear(),d.getMonth(),d.getDate()),C=new Date(p);C.setDate(C.getDate()-1);const k=new Date(b.getFullYear(),b.getMonth(),b.getDate());return k.getTime()===p.getTime()?"Today":k.getTime()===C.getTime()?"Yesterday":Math.floor((p-k)/(1e3*60*60*24))<7?b.toLocaleDateString([],{weekday:"long",month:"short",day:"numeric"}):b.toLocaleDateString([],{weekday:"long",month:"short",day:"numeric",year:b.getFullYear()!==d.getFullYear()?"numeric":void 0})},[St,Pt]=y.useState(null),[Fe,Ee]=y.useState(!1),[ae,we]=y.useState(null),[Bt,J]=y.useState(null),[ye,_e]=y.useState(""),lt=N=>((N==null?void 0:N.id)||(N==null?void 0:N._id)||(N==null?void 0:N.messageId)||"").toString(),re=N=>{St&&clearTimeout(St);const b=setTimeout(()=>{we(N),Ee(!0)},700);Pt(b)},Pe=()=>{St&&(clearTimeout(St),Pt(null))},Re=async()=>{try{const N=(ae==null?void 0:ae.messageType)==="text"?(ae==null?void 0:ae.message)||"":me(ae==null?void 0:ae.fileUrl)||(ae==null?void 0:ae.fileName)||"";N&&await navigator.clipboard.writeText(N)}catch{}Ee(!1)},Rl=()=>{if(ae){try{sessionStorage.setItem("forwardMessage",JSON.stringify({id:ae.id||ae._id,message:ae.message,messageType:ae.messageType,fileUrl:ae.fileUrl,fileName:ae.fileName,fileSize:ae.fileSize,fileType:ae.fileType}))}catch{}window.location.href="/forward"}Ee(!1)},Ml=()=>{var N,b,d,p;if(ae&&ae.messageType==="text"){const C=((N=ae.sender)==null?void 0:N.id)||((b=ae.sender)==null?void 0:b._id)||ae.sender;C===e.id||C===e._id||C===((d=e.id)==null?void 0:d.toString())||C===((p=e._id)==null?void 0:p.toString())?(J(ae),_e(ae.message||"")):q.error("You can only edit your own messages")}Ee(!1)},To=async()=>{if(!(!Bt||!ye.trim()))try{w(N=>N.map(b=>lt(b)===lt(Bt)?{...b,message:ye.trim(),isEdited:!0,editedAt:new Date().toISOString()}:b)),await qe.editMessage(Bt.id||Bt._id,ye.trim()),J(null),_e("")}catch(N){console.error("Failed to edit message:",N),q.error("Failed to edit message")}},ws=()=>{J(null),_e("")},js=y.useRef(null);y.useEffect(()=>((async()=>{try{console.log("🔄 Loading chat state from database...");const b=await qe.getChatState(),{personalChats:d,groupChats:p}=b.data,C={},k={};d.forEach(M=>{var F,D,ce;M.unreadCount>0?C[M.chatId]=M.unreadCount:delete C[M.chatId],M.lastMessage&&M.lastMessage.message&&(k[M.chatId]={id:M.lastMessage._id||M.lastMessage.id,message:M.lastMessage.message,senderName:M.lastMessage.senderName||((F=M.lastMessage.sender)==null?void 0:F.name)||"User",senderId:M.lastMessage.senderId||((D=M.lastMessage.sender)==null?void 0:D._id)||((ce=M.lastMessage.sender)==null?void 0:ce.id),timestamp:M.lastMessage.createdAt||M.lastMessage.timestamp})}),p.forEach(M=>{var F,D,ce;M.unreadCount>0?C[M.chatId]=M.unreadCount:delete C[M.chatId],M.lastMessage&&M.lastMessage.message&&(k[M.chatId]={id:M.lastMessage._id||M.lastMessage.id,message:M.lastMessage.message,senderName:M.lastMessage.senderName||((F=M.lastMessage.sender)==null?void 0:F.name)||"User",senderId:M.lastMessage.senderId||((D=M.lastMessage.sender)==null?void 0:D._id)||((ce=M.lastMessage.sender)==null?void 0:ce.id),timestamp:M.lastMessage.createdAt||M.lastMessage.timestamp})}),Q(C),K(k),console.log("✅ Chat state loaded from database:",{unreadCounts:C,lastMessages:Object.keys(k).length})}catch(b){console.error("Error loading chat state from database:",b)}})(),Rr(),()=>{rt.removeAllListeners(),rt.healthCheckInterval&&(clearInterval(rt.healthCheckInterval),delete rt.healthCheckInterval)}),[]),y.useEffect(()=>(h&&(bn(),Io(),h.type==="group"&&(s(h.id),console.log("🏠 Joined group room for:",h.name))),()=>{rt.removeAllListeners(),h&&h.type==="group"&&(i(h.id),console.log("🚪 Left group room for:",h.name)),rt.healthCheckInterval&&(clearInterval(rt.healthCheckInterval),delete rt.healthCheckInterval)}),[h]),y.useEffect(()=>{Al()},[S]);const dr=async()=>{try{console.log("🔄 Refreshing chat state from database...");const N=await qe.getChatState(),{personalChats:b,groupChats:d}=N.data,p={},C={};b.forEach(k=>{var M,F,D;k.unreadCount>0&&(p[k.chatId]=k.unreadCount),k.lastMessage&&k.lastMessage.message&&(C[k.chatId]={id:k.lastMessage._id||k.lastMessage.id,message:k.lastMessage.message,senderName:k.lastMessage.senderName||((M=k.lastMessage.sender)==null?void 0:M.name)||"User",senderId:k.lastMessage.senderId||((F=k.lastMessage.sender)==null?void 0:F._id)||((D=k.lastMessage.sender)==null?void 0:D.id),timestamp:k.lastMessage.createdAt||k.lastMessage.timestamp})}),d.forEach(k=>{var M,F,D;k.unreadCount>0&&(p[k.chatId]=k.unreadCount),k.lastMessage&&k.lastMessage.message&&(C[k.chatId]={id:k.lastMessage._id||k.lastMessage.id,message:k.lastMessage.message,senderName:k.lastMessage.senderName||((M=k.lastMessage.sender)==null?void 0:M.name)||"User",senderId:k.lastMessage.senderId||((F=k.lastMessage.sender)==null?void 0:F._id)||((D=k.lastMessage.sender)==null?void 0:D.id),timestamp:k.lastMessage.createdAt||k.lastMessage.timestamp})}),Q(p),K(C),console.log("✅ Chat state refreshed from database")}catch(N){console.error("Error refreshing chat state:",N)}};y.useEffect(()=>{window.testSocket=()=>{rt.testConnection()},window.checkSocket=()=>{rt.logConnectionStatus()},window.forceSocketConnect=()=>{rt.forceConnectionTest()},console.log("🔧 Socket debugging methods available:"),console.log(" - testSocket() - Test socket connection status"),console.log(" - checkSocket() - Show current socket status"),console.log(" - forceSocketConnect() - Force reconnection")},[]);const Rr=async()=>{try{P(!0);const[N,b]=await Promise.all([Tt.getActiveUsers(),rn.getMyGroups()]);console.log("📊 Chat Data Loaded:"),console.log("👥 Users:",N.data.length),console.log("🏠 Groups:",b.data.length),console.log("📋 Group Details:",b.data.map(d=>{var p;return{id:d.id,name:d.name,members:((p=d.members)==null?void 0:p.length)||0,avatar:d.avatar?"Has Avatar":"No Avatar"}})),f(N.data.filter(d=>d.id!==e.id)),I(b.data),Io()}catch(N){console.error("Error fetching initial data:",N),q.error("Failed to load chat data")}finally{P(!1)}},Io=()=>{console.log("🔧 Setting up enhanced socket listeners with Context API...");const N=u();console.log("🔗 Current socket status:",N),l(b=>{var D,ce;console.log("🔔 CHATROOM CONTEXT - received message:",b);const d=typeof b.sender=="object"?b.sender.id||b.sender._id:b.sender,p=typeof b.receiver=="object"?b.receiver.id||b.receiver._id:b.receiver,C=b.id||b._id||b.messageId,k=b.message||b.content,M=d===e.id||d===e._id||d===((D=e.id)==null?void 0:D.toString())||d===((ce=e._id)==null?void 0:ce.toString());if(b._isConfirmation||b.isConfirmMessage||b.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const F=_o(b,h,e);if(console.log("📨 ENHANCED MESSAGE FILTERING:",{senderId:d,receiverId:p,messageId:C,messageText:k,selectedChatId:h==null?void 0:h.id,selectedChatType:h==null?void 0:h.type,currentUserId:e.id,isCurrentUserSender:M,isForCurrentChat:F,messageData:b}),F&&h)console.log("📨 Processing message for current active chat"),M?console.log("📨 Message from current user - handled by optimistic updates"):(console.log("📨 Adding external message to current chat immediately"),w(de=>{if(de.some(se=>{var yt,vt;const Ne=se.id||se._id||se.messageId,te=se.message||se.content,et=((yt=se.sender)==null?void 0:yt.id)||((vt=se.sender)==null?void 0:vt._id)||se.sender,Oe=se.createdAt||se.timestamp,Ct=b.createdAt||b.timestamp;return!!(Ne===C&&C||te===k&&String(et)===String(d)&&Ct&&Oe&&Math.abs(new Date(Ct)-new Date(Oe))<5e3||se.isOptimistic&&te===k&&String(et)===String(d)&&Ct&&Oe&&Math.abs(new Date(Ct)-new Date(Oe))<1e4)}))return console.log("🔄 Enhanced detection: Message already exists - confirmed duplicate",{messageId:C,messageText:k==null?void 0:k.substring(0,20),senderId:d,isDuplicate:!0}),de;console.log("✅ REAL-TIME: NEW message confirmed - Adding to active chat",{messageId:C,messageText:k==null?void 0:k.substring(0,20),senderId:d,isDuplicate:!1});const he=Ro(b,d);return Nn(h.id,b,d),setTimeout(()=>{dr()},100),[...de,he]}));else if(k&&!M){const de=d||b.sender;de&&de!==e.id&&(console.log("📬 Incrementing unread count for chat:",de),Q(Se=>({...Se,[de]:(Se[de]||0)+1})),Nn(de,b,d),setTimeout(()=>{dr()},100))}}),c(b=>{console.log("🔄 Message sent confirmation received:",b),b&&b.id&&w(d=>{const p=d.filter(k=>!k.isOptimistic),C={id:b.id,message:b.message,messageType:b.messageType||"text",fileUrl:b.fileUrl,fileName:b.fileName,fileSize:b.fileSize,fileType:b.fileType,sender:b.sender,createdAt:b.createdAt||b.timestamp,timestamp:b.timestamp,isOptimistic:!1};return[...p,C]})}),a(b=>{var D,ce,de,Se;console.log("🔔 GROUP MESSAGE CONTEXT - received message:",b);const d=typeof b.sender=="object"?b.sender.id||b.sender._id:b.sender,p=b.groupId||((D=b.group)==null?void 0:D.id)||((ce=b.group)==null?void 0:ce._id),C=b.id||b._id||b.messageId,k=b.message||b.content,M=d===e.id||d===e._id||d===((de=e.id)==null?void 0:de.toString())||d===((Se=e._id)==null?void 0:Se.toString());if(b._isConfirmation||b.isConfirmMessage||b.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const F=h&&h.type==="group"&&(p===h.id||String(p)===String(h.id));if(console.log("📨 GROUP MESSAGE FILTERING:",{senderId:d,groupId:p,messageId:C,messageText:k,selectedChatId:h==null?void 0:h.id,selectedChatType:h==null?void 0:h.type,currentUserId:e.id,isCurrentUserSender:M,isForCurrentGroup:F,messageData:b}),F&&h)console.log("📨 Processing group message for current group"),M?console.log("📨 Group message from current user - handled by optimistic updates"):(console.log("📨 Adding external group message to current chat immediately"),w(he=>{if(he.some(te=>{var Vt,dn;const et=te.id||te._id||te.messageId,Oe=te.message||te.content,Ct=((Vt=te.sender)==null?void 0:Vt.id)||((dn=te.sender)==null?void 0:dn._id)||te.sender,yt=te.createdAt||te.timestamp,vt=b.createdAt||b.timestamp;return!!(et===C&&C||Oe===k&&String(Ct)===String(d)&&vt&&yt&&Math.abs(new Date(vt)-new Date(yt))<5e3||te.isOptimistic&&Oe===k&&String(Ct)===String(d)&&vt&&yt&&Math.abs(new Date(vt)-new Date(yt))<1e4)}))return console.log("🔄 GROUP duplicate detection: Message already exists",{messageId:C,messageText:k==null?void 0:k.substring(0,20),senderId:d==null?void 0:d.toString(),isDuplicate:!0}),he;console.log("✅ GROUP REAL-TIME: NEW message confirmed - Adding to active group",{messageId:C,messageText:k==null?void 0:k.substring(0,20),senderId:d,groupId:p});const Ne=Ro(b,d);return Nn(h.id,b,d),setTimeout(()=>{dr()},100),[...he,Ne]}));else if(k&&!M){const he=p||b.groupId;he&&(!h||h.type!=="group"||String(he)!==String(h.id))&&(console.log("📬 Incrementing unread count for group:",he),Q(Ne=>({...Ne,[he]:(Ne[he]||0)+1})),Nn(he,b,d),setTimeout(()=>{dr()},100))}}),t&&(t.off("incoming-call"),t.on("incoming-call",b=>{var d;console.log("📞 Incoming call received:",b),q.success(`Incoming ${b.callType} call from ${((d=b.caller)==null?void 0:d.name)||"Unknown"}`,{duration:5e3,icon:"📞"}),E(!0),Ie({callId:b.callId,callType:b.callType,caller:b.caller}),ke(!0)}),t.off("call-initiated"),t.on("call-initiated",b=>{console.log("📤 Call initiated:",b),E(!1),Ie({callId:b.callId,callType:b.callType,otherUser:b.receiver}),ke(!0)}),t.off("call-error"),t.on("call-error",b=>{console.error("❌ Call error:",b),q.error(b.error||"Call failed",{duration:4e3})}),t.off("messages-seen"),t.on("messages-seen",b=>{console.log("👁️ Messages seen by user:",b.readBy),h&&h.type==="personal"&&b.chatId===h.id&&w(d=>d.map(p=>{var k,M;return(((k=p.sender)==null?void 0:k.id)||((M=p.sender)==null?void 0:M._id)||p.sender)===e.id?{...p,isRead:!0,readBy:[{user:b.readBy,readAt:b.timestamp}]}:p}))}),t.off("incoming-group-call"),t.on("incoming-group-call",b=>{var d;console.log("📞 Incoming group call received:",b),q.success(`Incoming group ${b.callType} call from ${((d=b.initiator)==null?void 0:d.name)||"Unknown"} in ${b.groupName}`,{duration:5e3,icon:"📞"}),ie(!0),xt({callId:b.callId,callType:b.callType,groupId:b.groupId,groupName:b.groupName,initiator:b.initiator}),ge(!0)}),t.off("group-call-initiated"),t.on("group-call-initiated",b=>{console.log("📤 Group call initiated:",b),ie(!1),xt({callId:b.callId,callType:b.callType,groupId:b.groupId,initiator:b.initiator}),ge(!0)}),t.off("group-call-error"),t.on("group-call-error",b=>{console.error("❌ Group call error:",b),q.error(b.error||"Group call failed",{duration:4e3})}))},_o=(N,b,d)=>{var M,F,D,ce;if(!b)return!1;const p=((M=N.sender)==null?void 0:M.id)||((F=N.sender)==null?void 0:F._id)||N.sender,C=((D=N.receiver)==null?void 0:D.id)||((ce=N.receiver)==null?void 0:ce._id)||N.receiver,k=N.chatId||N.chatRoom;return b.type==="personal"&&b.id&&(p===b.id&&C===d.id||p===d.id&&C===b.id||String(p)===String(b.id)||String(C)===String(b.id))?!0:b.type==="group"?k===b.id||N.groupId===b.id:!1},Ro=(N,b)=>{var d,p;return{id:N.id||N._id||N.messageId,message:N.message||N.content,messageType:N.messageType||"text",fileUrl:N.fileUrl,fileName:N.fileName,fileSize:N.fileSize,fileType:N.fileType,sender:typeof N.sender=="object"?N.sender:{id:b,name:N.senderName||((d=N.sender)==null?void 0:d.name)||"User",profileImage:N.senderProfileImage||((p=N.sender)==null?void 0:p.profileImage)},createdAt:N.createdAt||N.timestamp||new Date().toISOString(),timestamp:N.timestamp||N.createdAt,isFromOtherUser:!(b===e.id||b===e._id)}},Nn=(N,b,d)=>{var k;const p=d===e.id||d===e._id,C={id:b.id||b._id||b.messageId,message:b.message||b.content,senderName:p?"You":b.senderName||((k=b.sender)==null?void 0:k.name)||"User",senderId:d,timestamp:b.createdAt||b.timestamp||new Date().toISOString()};K(M=>({...M,[N]:C}))},bn=async()=>{var N;try{let b;if(h.type==="personal"){if(!h.id){console.error("User ID is undefined for personal chat");return}b=await qe.getPersonalMessages(h.id)}else{if(!h.id){console.error("Group ID is undefined for group chat");return}b=await qe.getGroupMessages(h.id)}const d=b.data;if(w(d),d.length>0){const p=d[d.length-1];Nn(h.id,p,((N=p.sender)==null?void 0:N.id)||p.sender)}}catch(b){console.error("Error fetching messages:",b),q.error("Failed to load messages")}},Ns=N=>{const b=document.createElement("input");b.type="file",b.style.display="none",N==="image"?b.accept="image/*":N==="video"?b.accept="video/*":N==="document"&&(b.accept=".pdf,.doc,.docx,.txt,.csv,.xls,.xlsx"),b.onchange=d=>{const p=d.target.files[0];if(p){if(ee(p),p.type.startsWith("image/")){const C=new FileReader;C.onload=k=>fe(k.target.result),C.readAsDataURL(p)}else fe(null);T(!1)}},document.body.appendChild(b),b.click(),document.body.removeChild(b)},Mr=()=>{ee(null),fe(null)},Ar=async(N,b,d)=>{try{L(he=>({...he,[d]:{progress:0,downloading:!0}}));const p=await fetch(me(N)),C=p.headers.get("content-length"),k=parseInt(C,10);if(!p.ok)throw new Error("Download failed");const M=p.body.getReader(),F=[];let D=0;for(;;){const{done:he,value:se}=await M.read();if(he)break;F.push(se),D+=se.length;const Ne=k?Math.round(D/k*100):0;L(te=>({...te,[d]:{progress:Ne,downloading:!0}}))}const ce=new Blob(F),de=window.URL.createObjectURL(ce),Se=document.createElement("a");Se.href=de,Se.download=b,document.body.appendChild(Se),Se.click(),document.body.removeChild(Se),window.URL.revokeObjectURL(de),L(he=>({...he,[d]:{progress:100,downloading:!1}})),ue(he=>{const se={...he,[d]:!0};try{sessionStorage.setItem("downloadedMessages",JSON.stringify(se))}catch{}return se}),setTimeout(()=>{L(he=>{const se={...he};return delete se[d],se})},2e3)}catch(p){console.error("Download failed:",p),L(C=>({...C,[d]:{progress:0,downloading:!1,error:!0}}))}};y.useEffect(()=>{const N=b=>{z&&!b.target.closest(".file-options-container")&&T(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[z]);const bs=async N=>{if(N.preventDefault(),!x.trim()&&!Y||!h)return;const b=x.trim();g("");try{let d,p="text";Y&&(Y.type.startsWith("image/")?p="image":Y.type.startsWith("video/")?p="video":p="file");const C={id:Date.now(),message:b||(Y?Y.name:""),messageType:p,fileUrl:Y?URL.createObjectURL(Y):null,fileName:Y?Y.name:null,fileSize:Y?Y.size:null,fileType:Y?Y.type:null,sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};if(w(k=>[...k,C]),Nn(h.id,{id:C.id,message:C.message,createdAt:C.createdAt},e.id),Y){const k=new FormData;k.append("file",Y),k.append("message",b),h.type==="personal"?(k.append("receiver",h.id),d=await qe.sendPersonalMessage(k)):(k.append("group",h.id),d=await qe.sendGroupMessage(k)),Mr()}else if(h.type==="personal")try{await r(h.id,b,"text",!1),console.log("✅ Message sent via context socket")}catch(k){console.warn("Context socket failed, trying API:",k),await qe.sendPersonalMessage({sender:e.id,receiver:h.id,message:b,timestamp:new Date().toISOString()})}else try{await r(h.id,b,"text",!0),console.log("✅ Group message sent via context socket")}catch(k){console.warn("Context group socket failed, trying API:",k),await qe.sendGroupMessage({sender:e.id,group:h.id,message:b,timestamp:new Date().toISOString()})}console.log("✅ Message sent successfully")}catch(d){console.error("❌ Failed to send message:",d),q.error("Failed to send message"),w(p=>p.filter(C=>!C.isOptimistic))}},Al=()=>{var N;(N=js.current)==null||N.scrollIntoView({behavior:"smooth"})},Pr=[...m.map(N=>({id:N.id,name:N.name,email:N.email,type:"personal",avatar:N.name.charAt(0).toUpperCase(),profileImage:N.profileImage,lastMessage:X[N.id]||null})),...j.map(N=>{var b;return{id:N.id,name:N.name,email:`${((b=N.members)==null?void 0:b.length)||0} members`,type:"group",avatar:N.avatar?`${Me}${N.avatar}`:"G",profileImage:N.avatar,lastMessage:X[N.id]||null}})].sort((N,b)=>{var C,k;const d=(C=N.lastMessage)!=null&&C.timestamp?new Date(N.lastMessage.timestamp).getTime():0;return((k=b.lastMessage)!=null&&k.timestamp?new Date(b.lastMessage.timestamp).getTime():0)-d}),fr=(()=>{let N=Pr;switch(ne){case"unread":N=Pr.filter(b=>G[b.id]>0);break;case"groups":N=Pr.filter(b=>b.type==="group");break;case"all":default:N=Pr;break}return N.filter(b=>b.name.toLowerCase().includes(_.toLowerCase())||b.email.toLowerCase().includes(_.toLowerCase()))})();return A?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsx("div",{className:"h-screen bg-gray-50 flex",children:o.jsxs("div",{className:"w-full h-screen flex bg-white shadow-lg",children:[o.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"WhatsApp Chat"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>window.location.href="/profile",className:"text-gray-500 hover:text-gray-700",title:"Profile",children:o.jsx(an,{className:"w-5 h-5"})}),o.jsx(Cc,{className:"w-5 h-5 text-gray-500 cursor-pointer hover:text-gray-700"})]})]}),o.jsx("div",{className:"flex items-center space-x-3 mb-3",children:o.jsxs("button",{onClick:()=>window.location.href="/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?o.jsx("img",{src:`${Me}${e.profileImage}`,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium",children:e.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),o.jsx("p",{className:"text-xs text-green-600",children:"Online"})]})]})})]}),o.jsxs("div",{className:"p-3 bg-white border-b border-gray-200",children:[o.jsxs("div",{className:"relative mb-3",children:[o.jsx(Il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search or start new chat",value:_,onChange:N=>R(N.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})]}),o.jsxs("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>$("all"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${ne==="all"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"All"}),o.jsxs("button",{onClick:()=>$("unread"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${ne==="unread"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:["Unread",Object.values(G).reduce((N,b)=>N+b,0)>0&&o.jsx("span",{className:"ml-1 bg-green-500 text-white text-xs rounded-full px-1.5 py-0.5",children:Object.values(G).reduce((N,b)=>N+b,0)})]}),o.jsx("button",{onClick:()=>$("groups"),className:`flex-1 px-3 py-1.5 text-xs font-medium rounded-md transition-colors ${ne==="groups"?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"Groups"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[fr.map(N=>{var b;return o.jsx("div",{onClick:()=>{console.log("Selecting chat:",N),v({type:N.type,id:N.id,name:N.name,profileImage:N.profileImage}),G[N.id]&&(Q(d=>{const p={...d};return delete p[N.id],p}),qe.updateChatState({chatId:N.id,chatType:N.type,action:"clear_unread"}).catch(d=>{console.error("Error clearing unread count:",d)}))},className:`p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 ${(h==null?void 0:h.id)===N.id&&(h==null?void 0:h.type)===N.type?"bg-green-50":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 cursor-pointer hover:ring-2 hover:ring-green-400 transition-all",onClick:d=>{d.stopPropagation(),N.profileImage&&H({image:N.type==="personal"?`${Me}${N.profileImage}`:N.avatar,name:N.name})},children:N.type==="personal"?N.profileImage?o.jsx("img",{src:`${Me}${N.profileImage}`,alt:N.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold text-lg",children:N.avatar})}):N.profileImage?o.jsx("img",{src:N.avatar,alt:N.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Yt,{className:"w-6 h-6 text-white"})})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h3",{className:"font-medium text-gray-900 truncate",children:N.name}),N.type==="group"&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Group"}),Fe&&ae&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/30",onClick:()=>Ee(!1),children:o.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-xl w-full sm:w-80 p-4 shadow-xl",onClick:d=>d.stopPropagation(),children:[o.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{className:"w-full btn-secondary",onClick:Re,children:"Copy"}),ae.messageType==="text"&&(()=>{var C,k,M,F;const d=((C=ae.sender)==null?void 0:C.id)||((k=ae.sender)==null?void 0:k._id)||ae.sender;return d===e.id||d===e._id||d===((M=e.id)==null?void 0:M.toString())||d===((F=e._id)==null?void 0:F.toString())?o.jsx("button",{className:"w-full btn-primary",onClick:Ml,children:"Edit"}):null})(),o.jsx("button",{className:"w-full btn-primary",onClick:Rl,children:"Forward"}),o.jsx("button",{className:"w-full btn-secondary",onClick:()=>Ee(!1),children:"Cancel"})]})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:(b=N.lastMessage)!=null&&b.timestamp?Ve(N.lastMessage.timestamp):""}),G[N.id]&&G[N.id]>0&&o.jsx("div",{className:"bg-green-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:G[N.id]>99?"99+":G[N.id]})]})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:N.lastMessage&&N.lastMessage.message?`${N.lastMessage.senderName||"You"}: ${N.lastMessage.message}`:"No messages yet"})]})]})},`${N.type}-${N.id}`)}),fr.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Nr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 text-sm",children:_?"No chats found.":"No chats available."})]})]})]}),V&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>H(null),children:o.jsxs("div",{className:"relative max-w-2xl max-h-[90vh] p-4",children:[o.jsx("button",{onClick:()=>H(null),className:"absolute top-6 right-6 z-10 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 transition-colors",title:"Close",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-2xl",children:[o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-4",children:o.jsx("h3",{className:"text-white text-xl font-semibold text-center",children:V.name})}),o.jsx("img",{src:V.image,alt:V.name,className:"w-full h-auto max-h-[70vh] object-contain",onClick:N=>N.stopPropagation()})]})]})}),o.jsx("div",{className:"flex-1 flex flex-col",children:h?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:h.type==="personal"?h.profileImage?o.jsx("img",{src:`${Me}${h.profileImage}`,alt:h.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold",children:h.name.charAt(0).toUpperCase()})}):h.profileImage?o.jsx("img",{src:`${Me}${h.profileImage}`,alt:h.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Yt,{className:"w-5 h-5 text-white"})})}),o.jsxs("div",{className:`cursor-pointer ${h.type==="group"?"hover:bg-gray-50 p-2 rounded-lg transition-colors":""}`,onClick:()=>{h.type==="group"&&(window.location.href=`/group/${h.id}`)},title:h.type==="group"?"Click to view group info":"",children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:h.name}),o.jsx("p",{className:"text-xs text-gray-500",children:h.type==="personal"?"last seen today at 10:30 AM":`${h.email}`})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[h.type==="personal"?o.jsxs(o.Fragment,{children:[o.jsx(Ji,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var N,b;if(!(!h||h.type!=="personal"))try{const p=(b=(N=(await xo.initiate(h.id,"voice")).data)==null?void 0:N.data)==null?void 0:b.call;p&&p._id&&(E(!1),Ie({callId:p._id,callType:"voice",otherUser:p.otherUser}),ke(!0),t.emit("call-initiate",{receiverId:h.id,callType:"voice",callId:p._id}))}catch(d){console.error("Failed to initiate call",d)}}}),o.jsx(rs,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var N,b;if(!(!h||h.type!=="personal"))try{const p=(b=(N=(await xo.initiate(h.id,"video")).data)==null?void 0:N.data)==null?void 0:b.call;p&&p._id&&(E(!1),Ie({callId:p._id,callType:"video",otherUser:p.otherUser}),ke(!0),t.emit("call-initiate",{receiverId:h.id,callType:"video",callId:p._id}))}catch(d){console.error("Failed to initiate video call",d)}}})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ji,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var N,b,d,p,C;if(!(!h||h.type!=="group")){console.log("Initiating group call for:",h.id,h.name);try{const M=(b=(N=(await vr.initiate(h.id,"voice")).data)==null?void 0:N.data)==null?void 0:b.call;M&&M._id&&(ie(!1),xt({callId:M._id,callType:"voice",groupId:h.id,group:{name:h.name,avatar:h.profileImage}}),ge(!0),t.emit("group-call-initiate",{groupId:h.id,callType:"voice",callId:M._id}))}catch(k){console.error("Failed to initiate group call",k),console.error("Error response:",(d=k.response)==null?void 0:d.data);const M=((C=(p=k.response)==null?void 0:p.data)==null?void 0:C.message)||"Failed to initiate group call";q.error(M)}}}}),o.jsx(rs,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var N,b,d,p,C;if(!(!h||h.type!=="group")){console.log("Initiating group video call for:",h.id,h.name);try{const M=(b=(N=(await vr.initiate(h.id,"video")).data)==null?void 0:N.data)==null?void 0:b.call;M&&M._id&&(ie(!1),xt({callId:M._id,callType:"video",groupId:h.id,group:{name:h.name,avatar:h.profileImage}}),ge(!0),t.emit("group-call-initiate",{groupId:h.id,callType:"video",callId:M._id}))}catch(k){console.error("Failed to initiate group video call",k),console.error("Error response:",(d=k.response)==null?void 0:d.data);const M=((C=(p=k.response)==null?void 0:p.data)==null?void 0:C.message)||"Failed to initiate group video call";q.error(M)}}}})]}),(h==null?void 0:h.type)==="group"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"px-2 py-1 text-xs bg-blue-500 text-white rounded hover:bg-blue-600",onClick:async()=>{try{const N=await vr.test();console.log("API test result:",N.data),q.success("API test successful")}catch(N){console.error("API test failed:",N),q.error("API test failed")}},children:"Test API"}),o.jsx("button",{className:"px-2 py-1 text-xs bg-red-500 text-white rounded hover:bg-red-600",onClick:async()=>{try{const N=await vr.endAllActive();console.log("Ended active calls:",N.data),q.success(`Ended ${N.data.data.endedCalls.length} active calls`)}catch(N){console.error("Failed to end active calls:",N),q.error("Failed to end active calls")}},children:"Clear Calls"})]}),o.jsx(Cc,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 relative",children:o.jsxs("div",{className:"max-w-8xl mx-auto",children:[S.map((N,b)=>{var M,F,D,ce,de,Se,he;const d=b===0||(()=>{const se=new Date(N.createdAt||N.timestamp),Ne=new Date(S[b-1].createdAt||S[b-1].timestamp),te=new Date(se.getFullYear(),se.getMonth(),se.getDate()),et=new Date(Ne.getFullYear(),Ne.getMonth(),Ne.getDate());return te.getTime()!==et.getTime()})();let p=!1;if(typeof N.sender=="object"&&N.sender!==null){const se=N.sender._id||N.sender.id;p=se===e.id||se===e._id||se===((M=e.id)==null?void 0:M.toString())||se===((F=e._id)==null?void 0:F.toString())}else p=N.sender===e.id||N.sender===e._id||N.sender===((D=e.id)==null?void 0:D.toString())||N.sender===((ce=e._id)==null?void 0:ce.toString());const C=typeof N.sender=="object"?(de=N.sender)==null?void 0:de.name:"User",k=typeof N.sender=="object"?(Se=N.sender)==null?void 0:Se.profileImage:null;return o.jsxs(el.Fragment,{children:[d&&o.jsx("div",{className:"flex justify-center my-4",children:o.jsx("div",{className:"bg-gray-200 text-gray-600 text-xs px-3 py-1 rounded-full",children:it(N.createdAt||N.timestamp)})}),o.jsx("div",{className:`flex ${p?"justify-end":"justify-start"} mb-4`,children:o.jsxs("div",{className:`flex items-start gap-2 max-w-sm lg:max-w-md ${p?"flex-row-reverse":"flex-row"}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-300 flex-shrink-0",children:p?e.profileImage?o.jsx("img",{src:`${Me}${e.profileImage}`,alt:e.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:e.name.charAt(0).toUpperCase()})}):k?o.jsx("img",{src:`${Me}${k}`,alt:C,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-400 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:String(C).charAt(0).toUpperCase()})})}),o.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg ${p?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"} ${Fe&&ae&&lt(ae)===lt(N)?"ring-2 ring-blue-400":""}`,onMouseDown:()=>re(N),onMouseUp:Pe,onMouseLeave:Pe,onTouchStart:()=>re(N),onTouchEnd:Pe,onContextMenu:se=>{se.preventDefault(),we(N),Ee(!0)},children:[N.fileUrl&&o.jsx("div",{className:"mb-2",children:N.messageType==="image"?o.jsxs("div",{className:"relative",onMouseDown:()=>re(N),onMouseUp:Pe,onMouseLeave:Pe,onTouchStart:()=>re(N),onTouchEnd:Pe,children:[o.jsx("img",{src:me(N.fileUrl),alt:N.fileName,className:`max-w-xs rounded-lg ${!p&&!B[N.id||N._id]?"blur-sm cursor-pointer":"cursor-default"} hover:opacity-90`,onClick:()=>{p||Ar(N.fileUrl,N.fileName,N.id||N._id)}}),!p&&!B[N.id||N._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ts,{className:"w-3 h-3"}),((N.fileSize||0)/1024/1024).toFixed(1)," MB"]}),U[N.id||N._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[U[N.id||N._id].progress,"%"]})]})})]}):N.messageType==="video"?o.jsxs("div",{className:"relative",onMouseDown:()=>re(N),onMouseUp:Pe,onMouseLeave:Pe,onTouchStart:()=>re(N),onTouchEnd:Pe,children:[o.jsx("video",{src:me(N.fileUrl),controls:!0,className:`max-w-xs rounded-lg ${!p&&!B[N.id||N._id]?"blur-sm":""}`,onClick:()=>{p||Ar(N.fileUrl,N.fileName,N.id||N._id)}}),!p&&!B[N.id||N._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(ts,{className:"w-3 h-3"}),((N.fileSize||0)/1024/1024).toFixed(1)," MB"]}),U[N.id||N._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[U[N.id||N._id].progress,"%"]})]})})]}):o.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-20 rounded-lg relative",onMouseDown:()=>re(N),onMouseUp:Pe,onMouseLeave:Pe,onTouchStart:()=>re(N),onTouchEnd:Pe,children:[o.jsx(ns,{className:"w-5 h-5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:N.fileName}),o.jsxs("p",{className:"text-xs opacity-75",children:[(N.fileSize/1024/1024).toFixed(2)," MB"]})]}),!p&&o.jsx("button",{onClick:()=>Ar(N.fileUrl,N.fileName,N.id||N._id),className:"p-1 hover:bg-white hover:bg-opacity-20 rounded",disabled:(he=U[N.id||N._id])==null?void 0:he.downloading,children:o.jsx(ts,{className:"w-4 h-4"})}),U[N.id||N._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-2 py-1 text-center",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-1"}),o.jsxs("p",{className:"text-xs text-white",children:[U[N.id||N._id].progress,"%"]})]})})]})}),N.message&&(Bt&&lt(Bt)===lt(N)?o.jsxs("div",{className:"mb-2",children:[o.jsx("input",{type:"text",value:ye,onChange:se=>_e(se.target.value),className:"w-full px-2 py-1 text-sm bg-white bg-opacity-20 rounded border-none focus:outline-none focus:ring-1 focus:ring-white",autoFocus:!0,onKeyDown:se=>{se.key==="Enter"&&To(),se.key==="Escape"&&ws()}}),o.jsxs("div",{className:"flex gap-1 mt-1",children:[o.jsx("button",{onClick:To,className:"text-xs px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),o.jsx("button",{onClick:ws,className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]}):o.jsxs("p",{className:"text-sm mb-1 break-words",children:[N.message,(N.isEdited||N.editedAt)&&o.jsx("span",{className:"text-xs opacity-75 ml-1",children:"(edited)"})]})),o.jsxs("div",{className:`flex items-center gap-1 text-xs self-end ${p?"text-green-100":"text-gray-500"}`,children:[o.jsx("span",{children:new Date(N.createdAt||N.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),p&&o.jsx("span",{className:"ml-1 relative inline-flex items-center",title:N.isRead||N.readBy&&N.readBy.length>0?"Seen":"Delivered",children:N.isRead||N.readBy&&N.readBy.length>0?o.jsx("svg",{className:"w-4 h-4 text-blue-500",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})}):o.jsx("svg",{className:"w-4 h-4 opacity-70",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})})})]})]})]})})]},N.id||N._id||b)}),o.jsx("div",{ref:js})]})}),xe&&pe&&o.jsx(o.Fragment,{children:pe.callType==="video"?o.jsx(Zp,{user:e,callData:pe,isIncoming:Be,onCallEnd:()=>{ke(!1),Ie(null)},onCallAnswer:()=>{},onCallDecline:()=>{ke(!1),Ie(null)}}):o.jsx(Xp,{user:e,callData:pe,isIncoming:Be,onCallEnd:()=>{ke(!1),Ie(null)},onCallAnswer:()=>{},onCallDecline:()=>{ke(!1),Ie(null)}})}),Le&&gt&&o.jsx(eg,{user:e,callData:gt,isIncoming:kt,onCallEnd:()=>{ge(!1),xt(null)},onCallAnswer:()=>{},onCallDecline:()=>{ge(!1),xt(null)}}),Y&&o.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[le?o.jsx("img",{src:le,alt:"Preview",className:"w-12 h-12 rounded-lg object-cover"}):o.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:o.jsx(ns,{className:"w-6 h-6 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:Y.name}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(Y.size/1024/1024).toFixed(2)," MB"]})]})]}),o.jsx("button",{onClick:Mr,className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),o.jsxs("div",{className:"bg-white border-t border-gray-200 p-4 relative",children:[o.jsxs("form",{onSubmit:bs,className:"flex items-center space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>T(!z),className:"p-2 text-gray-500 hover:text-gray-700",title:"Attach file",children:o.jsx(Yp,{className:"w-6 h-6"})}),o.jsx("div",{className:"flex-1 relative",children:o.jsx("input",{type:"text",value:x,onChange:N=>g(N.target.value),placeholder:"Type a message",className:"w-full py-2 px-4 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})}),o.jsx("button",{type:"submit",disabled:!x.trim()&&!Y,className:"bg-green-500 text-white p-2 rounded-full hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.jsx(Jp,{className:"w-5 h-5"})})]}),z&&o.jsx("div",{className:"file-options-container absolute bottom-16 left-4 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-50",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:()=>Ns("image"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(Fu,{className:"w-8 h-8 text-green-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Image"})]}),o.jsxs("button",{onClick:()=>Ns("video"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(rs,{className:"w-8 h-8 text-blue-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Video"})]}),o.jsxs("button",{onClick:()=>Ns("document"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(ns,{className:"w-8 h-8 text-purple-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Document"})]})]})})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Nr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Welcome to WhatsApp"}),o.jsx("p",{className:"text-gray-500 max-w-md",children:"Select a conversation from the sidebar to start messaging. Your conversations will appear on the left side."})]})})})]})})},p2=()=>{const{user:e}=jn(),[t,n]=y.useState([]),[r,s]=y.useState(!0),[i,l]=y.useState(""),[a,c]=y.useState(!1),[u,m]=y.useState(null),[f,j]=y.useState({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),[I,h]=y.useState(""),[v,S]=y.useState(!1),[w,x]=y.useState("list"),[g,_]=y.useState(new Set),R=T=>g.has(T),A=T=>{_(U=>{const L=new Set(U);return L.has(T)?L.delete(T):L.add(T),L})},P=()=>_(new Set),G=()=>_(new Set(z.map(T=>T.id))),Q=async T=>{if(g.size===0)return;const U=T?"enable":"disable";if(window.confirm(`Are you sure you want to ${U} ${g.size} selected user(s)?`))try{const L=new Map(t.map(B=>[B.id,B]));for(const B of g){const ue=L.get(B);ue&&(ue.isActive??!0)!==T&&await Tt.toggleUserStatus(B)}q.success(`Selected users ${U}d`),P(),X()}catch(L){console.error("Bulk toggle error",L),q.error("Failed bulk update")}};y.useEffect(()=>{X()},[]);const X=async()=>{try{s(!0);const T=await Tt.getUsers();let U=T.data;e.role==="admin"&&(U=T.data.filter(L=>L.role!=="superadmin")),n(U)}catch(T){console.error("Error fetching users:",T),q.error("Failed to load users")}finally{s(!1)}},K=async T=>{var U,L;if(T.preventDefault(),!f.name.trim()){q.error("Name is required");return}if(!f.email.trim()){q.error("Email is required");return}if(!u&&!f.password.trim()){q.error("Password is required");return}try{const B={name:f.name.trim(),email:f.email.trim(),role:f.role,phone:f.phone.trim(),designation:f.designation.trim(),bio:f.bio.trim(),isActive:f.isActive};u?(f.password.trim()&&(B.password=f.password),await Tt.updateUser(u.id,B),q.success("User updated successfully")):(B.password=f.password,await Tt.createUser(B),q.success("User created successfully")),c(!1),m(null),j({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),X()}catch(B){console.error("User operation error:",B),q.error(((L=(U=B.response)==null?void 0:U.data)==null?void 0:L.message)||"Operation failed")}},ne=async T=>{if(window.confirm("Are you sure you want to delete this user?"))try{await Tt.deleteUser(T),q.success("User deleted successfully"),X()}catch{q.error("Failed to delete user")}},$=async(T,U)=>{const L=U?"disable":"enable";if(window.confirm(`Are you sure you want to ${L} this user?`))try{await Tt.toggleUserStatus(T),q.success(`User ${L}d successfully`),X()}catch{q.error(`Failed to ${L} user`)}},Y=T=>{m(T),j({name:T.name||"",email:T.email||"",password:"",role:T.role||"user",phone:T.phone||"",designation:T.designation||"",bio:T.bio||"",isActive:T.isActive!==!1}),h(T.password||""),S(!1),c(!0)},ee=()=>{m(null),j({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),h(""),c(!0)},le=T=>{switch(T){case"superadmin":return o.jsx(Yi,{className:"w-4 h-4 text-yellow-600"});case"admin":return o.jsx(_l,{className:"w-4 h-4 text-blue-600"});default:return o.jsx(an,{className:"w-4 h-4 text-gray-600"})}},fe=T=>{switch(T){case"superadmin":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},z=t.filter(T=>{var U,L;return T.name.toLowerCase().includes(i.toLowerCase())||T.email.toLowerCase().includes(i.toLowerCase())||((U=T.designation)==null?void 0:U.toLowerCase().includes(i.toLowerCase()))||((L=T.phone)==null?void 0:L.includes(i))});return r?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",title:"Go back",children:o.jsx(Tl,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),o.jsx("p",{className:"text-gray-600",children:e.role==="superadmin"?"Manage admins and users in the system":"Manage users in your organization"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center rounded-md border border-gray-300 overflow-hidden",children:[o.jsx("button",{className:`px-3 py-2 text-sm ${w==="grid"?"bg-gray-200 text-gray-900":"bg-white text-gray-600"}`,onClick:()=>x("grid"),title:"Grid view",children:o.jsx(r2,{className:"w-4 h-4"})}),o.jsx("button",{className:`px-3 py-2 text-sm ${w==="list"?"bg-gray-200 text-gray-900":"bg-white text-gray-600"}`,onClick:()=>x("list"),title:"List view",children:o.jsx(s2,{className:"w-4 h-4"})})]}),o.jsxs("button",{onClick:ee,className:"btn-primary inline-flex items-center",children:[o.jsx(Du,{className:"w-4 h-4 mr-2"}),"Add New User"]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"card p-6 mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(Il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search users by name, email, designation, or phone...",value:i,onChange:T=>l(T.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),g.size>0&&o.jsxs("div",{className:"card p-4 mb-4 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-700",children:["Selected ",g.size," user(s)"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:G,className:"btn-secondary",children:"Select all"}),o.jsx("button",{onClick:P,className:"btn-secondary",children:"Clear"}),o.jsx("button",{onClick:()=>Q(!0),className:"btn-primary",children:"Enable selected"}),o.jsx("button",{onClick:()=>Q(!1),className:"btn-secondary text-red-700",children:"Disable selected"})]})]}),w==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(T=>o.jsxs("div",{className:`relative card p-6 transition-all ${T.isActive?"hover:shadow-lg":"bg-gray-50 border-gray-300 opacity-75"}`,children:[o.jsx("label",{className:"absolute top-3 left-3 inline-flex items-center gap-2 bg-white/80 px-2 py-1 rounded shadow",children:o.jsx("input",{type:"checkbox",checked:R(T.id),onChange:()=>A(T.id)})}),o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 ${T.isActive?"bg-primary-100":"bg-gray-100"} rounded-lg flex items-center justify-center overflow-hidden`,children:T.profileImage?o.jsx("img",{src:`${Me}${T.profileImage}`,alt:"Profile",className:`w-12 h-12 rounded-lg object-cover ${T.isActive?"":"grayscale"}`}):o.jsx(an,{className:`w-6 h-6 ${T.isActive?"text-primary-600":"text-gray-400"}`})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-medium ${T.isActive?"text-gray-900":"text-gray-600"}`,children:T.name}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[le(T.role),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fe(T.role)}`,children:T.role})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[T.id!==(e==null?void 0:e.id)&&(T.role!=="superadmin"||(e==null?void 0:e.role)==="superadmin")&&o.jsxs("div",{className:"relative inline-flex bg-gray-200 rounded-full p-1 cursor-pointer",onClick:()=>$(T.id,T.isActive),children:[o.jsx("div",{className:"absolute top-1 bg-white rounded-full shadow-sm transition-transform duration-300",style:{width:"50%",height:"calc(100% - 8px)",left:T.isActive?"4px":"calc(50% + 2px)",transform:"none"}}),o.jsxs("div",{className:`relative z-10 px-4 py-2 text-xs font-medium rounded-full flex items-center space-x-1 transition-colors duration-200 ${T.isActive?"text-primary-600":"text-gray-500"}`,children:[o.jsx(bc,{className:"w-3 h-3"}),o.jsx("span",{children:"Active"})]}),o.jsxs("div",{className:`relative z-10 px-4 py-2 text-xs font-medium rounded-full flex items-center space-x-1 transition-colors duration-200 ${T.isActive?"text-gray-500":"text-primary-600"}`,children:[o.jsx(o2,{className:"w-3 h-3"}),o.jsx("span",{children:"Disabled"})]})]}),o.jsx("button",{onClick:()=>Y(T),className:"text-primary-600 hover:text-primary-900",title:"Edit user",children:o.jsx(Qi,{className:"w-4 h-4"})}),T.role!=="superadmin"&&T.id!==(e==null?void 0:e.id)&&o.jsx("button",{onClick:()=>ne(T.id),className:"text-red-600 hover:text-red-900",title:"Delete user",children:o.jsx(Ec,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Kp,{className:"w-4 h-4 mr-2"}),o.jsx("span",{className:"truncate",children:T.email})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Ji,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:T.phone||"Not provided"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx($u,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:T.designation||"Not provided"})]})]}),o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:T.bio||"No bio provided"})}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[T.isActive?o.jsx(bc,{className:"w-4 h-4 text-green-600"}):o.jsx(u2,{className:"w-4 h-4 text-red-600"}),o.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${T.isActive?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:T.isActive?"Active":"Disabled"})]}),T.lastSeen&&o.jsxs("span",{className:"text-xs text-gray-500",children:["Last seen: ",new Date(T.lastSeen).toLocaleDateString()]})]})]},T.id))}):o.jsx("div",{className:"card p-0 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.jsx("input",{type:"checkbox",onChange:T=>T.target.checked?G():P(),checked:g.size>0&&g.size===z.length})}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-4 py-3"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(T=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsx("input",{type:"checkbox",checked:R(T.id),onChange:()=>A(T.id)})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 overflow-hidden flex items-center justify-center",children:T.profileImage?o.jsx("img",{src:`${Me}${T.profileImage}`,alt:"Profile",className:"w-10 h-10 object-cover"}):o.jsx(an,{className:"w-5 h-5 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("div",{className:`font-medium ${T.isActive?"text-gray-900":"text-gray-600"}`,children:T.name}),o.jsx("div",{className:"text-xs text-gray-500",children:T.designation||"—"})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${fe(T.role)}`,children:T.role})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:T.email}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:T.phone||"—"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${T.isActive?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:T.isActive?"Active":"Disabled"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[T.id!==(e==null?void 0:e.id)&&(T.role!=="superadmin"||(e==null?void 0:e.role)==="superadmin")&&o.jsx("button",{className:"text-gray-600 hover:text-gray-900",title:"Toggle status",onClick:()=>$(T.id,T.isActive),children:T.isActive?o.jsx(a2,{className:"w-5 h-5 text-green-600"}):o.jsx(l2,{className:"w-5 h-5 text-gray-400"})}),o.jsx("button",{className:"text-primary-600 hover:text-primary-900",title:"Edit",onClick:()=>Y(T),children:o.jsx(Qi,{className:"w-4 h-4"})}),T.role!=="superadmin"&&T.id!==(e==null?void 0:e.id)&&o.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete",onClick:()=>ne(T.id),children:o.jsx(Ec,{className:"w-4 h-4"})})]})})]},T.id))})]})})}),z.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Yt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),o.jsx("p",{className:"text-gray-500",children:i?"Try adjusting your search terms.":"No users have been created yet."})]})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u?"Edit User":"Create New User"}),o.jsxs("form",{onSubmit:K,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),o.jsx("input",{type:"text",required:!0,value:f.name,onChange:T=>j({...f,name:T.target.value}),className:"input-field",placeholder:"Enter full name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",required:!0,value:f.email,onChange:T=>j({...f,email:T.target.value}),className:"input-field",placeholder:"Enter email address"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[u?"New Password":"Password",u&&o.jsx("span",{className:"text-gray-500 text-xs ml-1",children:"(leave blank to keep current)"})]}),o.jsx("input",{type:"password",required:!u,value:f.password,onChange:T=>j({...f,password:T.target.value}),className:"input-field",placeholder:u?"Enter new password (optional)":"Enter password"}),u&&o.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Current Password"}),o.jsxs("button",{type:"button",className:"text-xs text-primary-600 hover:text-primary-800 inline-flex items-center gap-1",onClick:()=>S(T=>!T),children:[v?o.jsx(kc,{className:"w-3 h-3"}):o.jsx(Sc,{className:"w-3 h-3"}),v?"Hide":"Show"]})]}),o.jsx("input",{type:v?"text":"password",readOnly:!0,value:I||"[Password not available - please set new password]",className:"w-full input-field font-mono"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),o.jsxs("select",{value:f.role,onChange:T=>j({...f,role:T.target.value}),className:"input-field",children:[o.jsx("option",{value:"user",children:"User"}),e.role==="superadmin"&&o.jsx("option",{value:"admin",children:"Admin"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),o.jsx("input",{type:"tel",value:f.phone,onChange:T=>j({...f,phone:T.target.value}),className:"input-field",placeholder:"Enter phone number"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),o.jsx("input",{type:"text",value:f.designation,onChange:T=>j({...f,designation:T.target.value}),className:"input-field",placeholder:"Enter designation"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),o.jsx("textarea",{value:f.bio,onChange:T=>j({...f,bio:T.target.value}),className:"input-field",rows:"3",placeholder:"Enter bio (optional)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:f.isActive,onChange:T=>j({...f,isActive:T.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"User is active"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary",children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn-primary",children:u?"Update User":"Create User"})]})]})]})})]})},g2=()=>{const{user:e}=jn(),[t,n]=y.useState([]),[r,s]=y.useState([]),[i,l]=y.useState(!0),[a,c]=y.useState(""),[u,m]=y.useState(!1),[f,j]=y.useState(null),[I,h]=y.useState({name:"",description:"",members:[]}),[v,S]=y.useState(null),[w,x]=y.useState(null);y.useEffect(()=>{g()},[]);const g=async()=>{var $,Y;try{l(!0);const[ee,le]=await Promise.all([rn.getGroups(),Tt.getActiveUsers()]);console.log("Groups response:",ee.data),console.log("First group:",ee.data[0]),console.log("First group ID:",($=ee.data[0])==null?void 0:$.id),console.log("First group _ID:",(Y=ee.data[0])==null?void 0:Y._id);const fe=ee.data.map(z=>({...z,id:z.id||z._id}));console.log("Transformed groups:",fe),n(fe),s(le.data.filter(z=>z.id!==e.id))}catch(ee){console.error("Error fetching data:",ee),q.error("Failed to load data")}finally{l(!1)}},_=async $=>{var Y,ee;if($.preventDefault(),!I.name.trim()){q.error("Group name is required");return}if(I.members.length===0){q.error("Please add at least one member to the group");return}try{console.log("Submitting group data:",I),console.log("Editing group:",f),console.log("Editing group ID:",f==null?void 0:f.id);let le;if(f){if(!f.id){console.error("No group ID found for editing:",f),q.error("Invalid group ID for editing");return}await rn.updateGroup(f.id,I),le=f.id,q.success("Group updated successfully")}else{const fe=await rn.createGroup(I);console.log("Group creation result:",fe.data),le=fe.data.group._id||fe.data.group.id,q.success("Group created successfully")}if(v&&le)try{const fe=new FormData;fe.append("avatar",v),await rn.uploadGroupAvatar(le,fe),q.success("Group avatar uploaded successfully")}catch(fe){console.error("Avatar upload error:",fe),q.error("Group created but avatar upload failed")}m(!1),j(null),h({name:"",description:"",members:[]}),S(null),x(null),g()}catch(le){console.error("Group operation error:",le),q.error(((ee=(Y=le.response)==null?void 0:Y.data)==null?void 0:ee.message)||"Operation failed")}},R=async $=>{if(window.confirm("Are you sure you want to delete this group?"))try{await rn.deleteGroup($),q.success("Group deleted successfully"),g()}catch{q.error("Failed to delete group")}},A=$=>{var le;console.log("Editing group:",$),console.log("Group ID:",$.id),console.log("Group _id:",$._id);const Y=$.id||$._id;if(!Y){console.error("No valid group ID found:",$),q.error("Invalid group selected");return}const ee={...$,id:Y};console.log("Group with ID:",ee),j(ee),h({name:$.name,description:$.description||"",members:((le=$.members)==null?void 0:le.map(fe=>({user:fe.user.id||fe.user,role:fe.role})))||[]}),S(null),x(null),m(!0)},P=()=>{j(null),h({name:"",description:"",members:[]}),S(null),x(null),m(!0)},G=$=>{const Y=$.target.files[0];if(Y){S(Y);const ee=new FileReader;ee.onload=le=>x(le.target.result),ee.readAsDataURL(Y)}},Q=$=>{if(console.log("Adding member:",$),console.log("Current members:",I.members),I.members.find(Y=>Y.user===$))console.log("Member already exists");else{const Y={user:$,role:"member"},ee=[...I.members,Y];console.log("Updated members:",ee),h({...I,members:ee})}},X=$=>{h({...I,members:I.members.filter(Y=>Y.user!==$)})},K=t.filter($=>{var Y;return $.name.toLowerCase().includes(a.toLowerCase())||((Y=$.description)==null?void 0:Y.toLowerCase().includes(a.toLowerCase()))}),ne=r.filter($=>!I.members.find(Y=>Y.user===$.id));return i?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",title:"Go back",children:o.jsx(Tl,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Group Management"}),o.jsx("p",{className:"text-gray-600",children:"Create and manage groups for team communication"})]})]}),o.jsxs("button",{onClick:P,className:"btn-primary inline-flex items-center",children:[o.jsx(Qp,{className:"w-4 h-4 mr-2"}),"Create Group"]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"card p-6 mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(Il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search groups...",value:a,onChange:$=>c($.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:K.map($=>{var Y,ee,le;return o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center overflow-hidden",children:$.avatar?o.jsx("img",{src:`${Me}${$.avatar}`,alt:"Group avatar",className:"w-12 h-12 rounded-lg object-cover"}):o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(Yt,{className:"w-6 h-6 text-green-600"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:$.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[((Y=$.members)==null?void 0:Y.length)||0," members"]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>A($),className:"text-primary-600 hover:text-primary-900",children:o.jsx(Qi,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>R($.id),className:"text-red-600 hover:text-red-900",children:o.jsx(Ec,{className:"w-4 h-4"})})]})]}),$.description&&o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:$.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Members:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[(ee=$.members)==null?void 0:ee.slice(0,3).map((fe,z)=>{var T,U,L;return o.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-full px-2 py-1",children:[o.jsx("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-primary-600",children:((U=(T=fe.user)==null?void 0:T.name)==null?void 0:U.charAt(0))||"U"})}),o.jsx("span",{className:"text-xs text-gray-700",children:((L=fe.user)==null?void 0:L.name)||"Unknown"})]},z)}),((le=$.members)==null?void 0:le.length)>3&&o.jsxs("span",{className:"text-xs text-gray-500",children:["+",$.members.length-3," more"]})]})]})]},$.id)})}),K.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Yt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No groups found"}),o.jsx("p",{className:"text-gray-500",children:a?"Try adjusting your search terms.":"Get started by creating your first group."})]})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:f?"Edit Group":"Create Group"}),o.jsxs("form",{onSubmit:_,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Name"}),o.jsx("input",{type:"text",required:!0,value:I.name,onChange:$=>h({...I,name:$.target.value}),className:"input-field",placeholder:"Enter group name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{value:I.description,onChange:$=>h({...I,description:$.target.value}),className:"input-field",rows:"3",placeholder:"Enter group description (optional)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Avatar"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:w?o.jsx("img",{src:w,alt:"Avatar preview",className:"w-16 h-16 rounded-lg object-cover border-2 border-gray-200"}):o.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 border-2 border-gray-200 flex items-center justify-center",children:o.jsx(Fu,{className:"w-6 h-6 text-gray-400"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:G,className:"hidden",id:"avatar-upload"}),o.jsxs("label",{htmlFor:"avatar-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer transition-colors",children:[o.jsx(c2,{className:"w-4 h-4 mr-2"}),v?"Change Avatar":"Upload Avatar"]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),I.members.length>0&&o.jsx("div",{className:"mb-3",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:I.members.map(($,Y)=>{const ee=r.find(le=>le.id===$.user);return o.jsxs("div",{className:"flex items-center space-x-1 bg-primary-100 rounded-full px-3 py-1",children:[o.jsx("span",{className:"text-sm text-primary-700",children:ee==null?void 0:ee.name}),o.jsx("button",{type:"button",onClick:()=>X($.user),className:"text-primary-600 hover:text-primary-800",children:o.jsx(Xi,{className:"w-3 h-3"})})]},Y)})})}),o.jsxs("div",{className:"border border-gray-300 rounded-lg p-3",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Members:"}),o.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:ne.map($=>o.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-primary-600",children:$.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.name}),o.jsx("p",{className:"text-xs text-gray-500",children:$.email})]})]}),o.jsx("button",{type:"button",onClick:()=>Q($.id),className:"text-primary-600 hover:text-primary-800",children:o.jsx(Du,{className:"w-4 h-4"})})]},$.id))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>m(!1),className:"btn-secondary",children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn-primary",children:f?"Update":"Create"})]})]})]})})]})},x2=({group:e,onCallInitiated:t})=>{const{socket:n,isConnected:r}=Un(),[s,i]=y.useState(!1),l=(u="voice")=>{if(!n||!r){console.error("Socket not connected");return}if(!e||!e.id){console.error("Group data not available");return}i(!0);const m=`group-call-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;console.log("Initiating group call:",{groupId:e.id,callType:u,callId:m}),n.emit("group-call-initiate",{groupId:e.id,callType:u,callId:m}),t&&t({callId:m,callType:u,groupId:e.id,groupName:e.name}),setTimeout(()=>{i(!1)},2e3)},a=()=>{l("voice")},c=()=>{l("video")};return o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:a,disabled:s||!r,className:`p-2 rounded-full transition-all duration-200 ${s||!r?"bg-gray-500 text-gray-300 cursor-not-allowed":"bg-green-500 hover:bg-green-600 text-white hover:shadow-lg"}`,title:s?"Starting call...":"Start voice call",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),o.jsx("button",{onClick:c,disabled:s||!r,className:`p-2 rounded-full transition-all duration-200 ${s||!r?"bg-gray-500 text-gray-300 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600 text-white hover:shadow-lg"}`,title:s?"Starting call...":"Start video call",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s&&o.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{children:"Starting call..."})]})]})},y2=()=>{var j,I,h,v,S,w;const{groupId:e}=iy(),t=xl();jn();const[n,r]=y.useState(null),[s,i]=y.useState(!0),[l,a]=y.useState(!1);y.useEffect(()=>{c()},[e]);const c=async()=>{try{i(!0);const g=(await rn.getGroups()).data.find(_=>_.id===e);if(!g){q.error("Group not found"),t("/chat");return}r(g)}catch(x){console.error("Error fetching group details:",x),q.error("Failed to load group details"),t("/chat")}finally{i(!1)}},u=x=>{switch(x){case"admin":return o.jsx(_l,{className:"w-4 h-4 text-blue-600"});default:return o.jsx(an,{className:"w-4 h-4 text-gray-600"})}},m=x=>{switch(x){case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsx("button",{onClick:()=>t("/chat"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 transition-colors",title:"Back to chat",children:o.jsx(Tl,{className:"w-5 h-5"})}),o.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Group Info"})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"card p-8 text-center mb-6",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg",children:n.avatar?o.jsx("img",{src:`${Me}${n.avatar}`,alt:"Group avatar",className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Yt,{className:"w-16 h-16 text-white"})})})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.name}),n.description&&o.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:n.description}),o.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500 mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Yt,{className:"w-4 h-4"}),o.jsxs("span",{children:[((j=n.members)==null?void 0:j.length)||0," members"]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(e2,{className:"w-4 h-4"}),o.jsxs("span",{children:["Created ",f(n.createdAt)]})]})]}),o.jsx("div",{className:"flex justify-center space-x-4",children:o.jsx(x2,{group:n,onCallInitiated:x=>{console.log("Group call initiated:",x)}})})]}),o.jsxs("div",{className:"card p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Members"}),o.jsxs("button",{onClick:()=>a(!l),className:"text-primary-600 hover:text-primary-800 transition-colors",children:[l?"Hide":"Show"," (",((I=n.members)==null?void 0:I.length)||0,")"]})]}),l&&o.jsx("div",{className:"space-y-3",children:(h=n.members)==null?void 0:h.map((x,g)=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:x.user.profileImage?o.jsx("img",{src:`${Me}${x.user.profileImage}`,alt:x.user.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-primary-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold text-sm",children:x.user.name.charAt(0).toUpperCase()})})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:x.user.name}),o.jsxs("div",{className:"flex items-center space-x-1",children:[u(x.role),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(x.role)}`,children:x.role})]})]}),o.jsx("p",{className:"text-sm text-gray-500",children:x.user.email})]}),o.jsx("div",{className:"text-xs text-gray-400",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(n2,{className:"w-3 h-3"}),o.jsxs("span",{children:["Joined ",f(x.joinedAt)]})]})})]},g))})]}),o.jsxs("div",{className:"card p-6 mt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Group Statistics"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600",children:((v=n.members)==null?void 0:v.length)||0}),o.jsx("div",{className:"text-sm text-gray-500",children:"Total Members"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:((S=n.members)==null?void 0:S.filter(x=>x.role==="admin").length)||0}),o.jsx("div",{className:"text-sm text-gray-500",children:"Admins"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.ceil((((w=n.members)==null?void 0:w.length)||0)/2)}),o.jsx("div",{className:"text-sm text-gray-500",children:"Active Conversations"})]})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Group not found"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"The group you're looking for doesn't exist."}),o.jsx("button",{onClick:()=>t("/chat"),className:"btn-primary",children:"Back to Chat"})]})})},v2=()=>{const{user:e,setUser:t}=jn(),[n,r]=y.useState({name:"",email:"",phone:"",designation:"",profileImage:"",bio:""}),[s,i]=y.useState(!1),[l,a]=y.useState(!1),[c,u]=y.useState(null),[m,f]=y.useState(null);y.useEffect(()=>{e&&(r({name:e.name||"",email:e.email||"",phone:e.phone||"",designation:e.designation||"",profileImage:e.profileImage||"",bio:e.bio||""}),u(e.profileImage||null))},[e]);const j=w=>{const{name:x,value:g}=w.target;r(_=>({..._,[x]:g}))},I=w=>{const x=w.target.files[0];if(x){f(x);const g=new FileReader;g.onload=_=>{u(_.target.result)},g.readAsDataURL(x)}},h=()=>{f(null),u(null),r(w=>({...w,profileImage:""}))},v=async w=>{var x;w.preventDefault(),a(!0);try{const g=new FormData;g.append("name",n.name),g.append("phone",n.phone),g.append("designation",n.designation),g.append("bio",n.bio),m&&g.append("profileImage",m);const R=((x=(await Tt.updateProfile(g)).data)==null?void 0:x.user)||{};r(A=>({...A,name:R.name??A.name,phone:R.phone??A.phone,designation:R.designation??A.designation,bio:R.bio??A.bio,profileImage:R.profileImage??A.profileImage})),R.profileImage&&u(R.profileImage),t(A=>A?{...A,...R}:R),q.success("Profile updated successfully"),i(!1)}catch(g){console.error("Profile update error:",g),q.error("Failed to update profile")}finally{a(!1)}},S=()=>{i(!1),r({name:e.name||"",email:e.email||"",phone:e.phone||"",designation:e.designation||"",profileImage:e.profileImage||"",bio:e.bio||""}),u(e.profileImage||null),f(null)};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between py-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Hi,{to:"/dashboard",className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Tl,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),o.jsx("p",{className:"text-gray-600",children:"Manage your profile information"})]})]}),!s&&o.jsxs("button",{onClick:()=>i(!0),className:"btn-primary inline-flex items-center",children:[o.jsx(Qi,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative inline-block",children:[c?o.jsx("img",{src:c.startsWith("http")?c:`${Me}${c}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover mx-auto"}):o.jsx("div",{className:"w-32 h-32 bg-primary-100 rounded-full flex items-center justify-center mx-auto",children:o.jsx(an,{className:"w-16 h-16 text-primary-600"})}),s&&o.jsx("div",{className:"absolute bottom-0 right-0",children:o.jsxs("label",{className:"bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors",children:[o.jsx(t2,{className:"w-4 h-4"}),o.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden"})]})})]}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-4",children:n.name}),o.jsx("p",{className:"text-gray-600",children:n.designation||"No designation"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n.email}),s&&c&&o.jsxs("button",{onClick:h,className:"mt-2 text-red-600 hover:text-red-700 text-sm inline-flex items-center",children:[o.jsx(Xi,{className:"w-4 h-4 mr-1"}),"Remove Image"]})]})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"card p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:s?"Edit Profile Information":"Profile Information"}),s?o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),o.jsx("input",{type:"text",name:"name",value:n.name,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),o.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"+1 (555) 123-4567"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),o.jsx("input",{type:"text",name:"designation",value:n.designation,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Software Developer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:n.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),o.jsx("textarea",{name:"bio",value:n.bio,onChange:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Tell us about yourself..."})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx("button",{type:"button",onClick:S,className:"btn-secondary",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:l,className:"btn-primary inline-flex items-center",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(i2,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(an,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Name"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.name||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ji,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Phone"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.phone||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Zw,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Designation"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.designation||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Kp,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.email})]})]})]}),n.bio&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Bio"}),o.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:n.bio})]})]})]})})]})})]})};function w2(){const e=xl(),[t,n]=y.useState(!0),[r,s]=y.useState([]),[i,l]=y.useState([]),[a,c]=y.useState(new Set),[u,m]=y.useState(new Set),[f,j]=y.useState(null),[I,h]=y.useState(!1),[v,S]=y.useState("users"),[w,x]=y.useState(""),g=K=>K&&(/^https?:\/\//i.test(K)?K:`${Me}${K}`),_=K=>{if(!K&&K!==0)return"";const ne=K/1024/1024;return`${ne.toFixed(ne<.1?2:1)} MB`};y.useEffect(()=>{try{const K=sessionStorage.getItem("forwardMessage");K&&j(JSON.parse(K))}catch{}},[]),y.useEffect(()=>{(async()=>{try{n(!0);const[ne,$]=await Promise.all([Tt.getActiveUsers(),rn.getGroups()]);s(ne.data||[]),l(($.data||[]).filter(Y=>Y.isActive!==!1))}catch{}finally{n(!1)}})()},[]);const R=K=>{c(ne=>{const $=new Set(ne);return $.has(K)?$.delete(K):$.add(K),$})},A=K=>{m(ne=>{const $=new Set(ne);return $.has(K)?$.delete(K):$.add(K),$})},P=async()=>{if(!(!(f!=null&&f.id)&&!(f!=null&&f._id))&&!(a.size===0&&u.size===0))try{h(!0),await qe.forwardMessage({messageId:f.id||f._id,targets:{users:Array.from(a),groups:Array.from(u)}}),sessionStorage.removeItem("forwardMessage"),e(-1)}catch{h(!1)}};if(t)return o.jsx("div",{className:"p-6",children:"Loading..."});const G=r.filter(K=>K.name.toLowerCase().includes(w.toLowerCase())||(K.email||"").toLowerCase().includes(w.toLowerCase())),Q=i.filter(K=>K.name.toLowerCase().includes(w.toLowerCase())),X=a.size+u.size;return o.jsxs("div",{className:"h-screen bg-white",children:[o.jsxs("div",{className:"sticky top-0 z-10 bg-gray-100 text-white",children:[o.jsx("div",{className:"max-w-3xl mx-auto px-4 pt-3",children:o.jsx("input",{value:w,onChange:K=>x(K.target.value),placeholder:"Search name or group",className:"w-full bg-white text-gray-800 rounded-full px-4 py-2 text-sm focus:outline-none",type:"text"})}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-2 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"inline-flex bg-white rounded-full p-1",children:[o.jsx("button",{className:`px-4 py-1 text-sm rounded-full ${v==="users"?"bg-gray-200 text-gray-800":"text-gray-800"}`,onClick:()=>S("users"),children:"Chats"}),o.jsx("button",{className:`px-4 py-1 text-sm rounded-full ${v==="groups"?"bg-gray-200 text-gray-800":"text-gray-800"}`,onClick:()=>S("groups"),children:"Groups"})]}),o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsx("div",{className:"font-semibold -ml-4 whitespace-nowrap text-gray-800",children:"Forward"})}),o.jsxs("div",{className:"text-sm opacity-90 whitespace-nowrap text-gray-800",children:[X," selected"]})]})]}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 pt-3 pb-24",children:[f&&o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"bg-gray-100 rounded-2xl p-3 inline-block max-w-full",children:[o.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.jsx("div",{className:"text-xs font-medium text-gray-600",children:"Preview"})}),f.messageType==="image"?o.jsxs("div",{className:"max-w-[200px]",children:[o.jsx("img",{src:g(f.fileUrl),alt:f.fileName||"image",className:"rounded-lg w-full h-auto max-h-[150px] object-cover"}),f.message&&o.jsx("div",{className:"mt-2 text-sm text-gray-800 break-words",children:f.message}),o.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):f.messageType==="video"?o.jsxs("div",{className:"max-w-[200px]",children:[o.jsx("video",{src:g(f.fileUrl),controls:!0,className:"rounded-lg w-full h-auto max-h-[150px] object-cover"}),f.message&&o.jsx("div",{className:"mt-2 text-sm text-gray-800 break-words",children:f.message}),o.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):f.messageType&&f.messageType!=="text"?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded-lg shadow-sm",children:[o.jsx("svg",{className:"w-6 h-6 text-gray-600",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zM8 18h8v2H8v-2zm0-4h8v2H8v-2zm6-7.5V9h3.5L14 6.5z"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:f.fileName||"Attachment"}),o.jsx("div",{className:"text-xs text-gray-500",children:_(f.fileSize)}),f.message&&o.jsx("div",{className:"text-sm text-gray-800 break-words mt-1",children:f.message})]})]}),o.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):o.jsx("div",{className:"text-sm text-gray-800 break-words max-w-[200px]",children:f.message})]})}),v==="users"?o.jsxs("div",{className:"divide-y border rounded-xl overflow-hidden",children:[G.map(K=>{var ne,$;return o.jsxs("button",{onClick:()=>R(K.id),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50",children:[o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-green-500 text-white flex items-center justify-center",children:K.profileImage?o.jsx("img",{src:`${Me}${K.profileImage}`,alt:K.name,className:"w-full h-full object-cover"}):o.jsx("span",{className:"font-semibold",children:($=(ne=K.name)==null?void 0:ne[0])==null?void 0:$.toUpperCase()})}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:K.name}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:K.email})]}),o.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${a.has(K.id)?"bg-green-500 border-green-500":"border-gray-300"}`,children:a.has(K.id)&&o.jsx("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},K.id)}),G.length===0&&o.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"No chats found"})]}):o.jsxs("div",{className:"divide-y border rounded-xl overflow-hidden",children:[Q.map(K=>{var $;const ne=K.id||K._id;return o.jsxs("button",{onClick:()=>A(ne),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50",children:[o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-green-500 text-white flex items-center justify-center",children:K.avatar?o.jsx("img",{src:`${Me}${K.avatar}`,alt:K.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V20h6v-3.5c0-2.33-4.67-3.5-7-3.5z"})})}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:K.name}),o.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[(($=K.members)==null?void 0:$.length)||0," members"]})]}),o.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${u.has(ne)?"bg-green-500 border-green-500":"border-gray-300"}`,children:u.has(ne)&&o.jsx("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},ne)}),Q.length===0&&o.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"No groups found"})]})]}),o.jsx("div",{className:"fixed bottom-0 inset-x-0 bg-white border-t",children:o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:[X," selected"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Cancel"}),o.jsx("button",{className:"btn-primary",disabled:I||X===0,onClick:P,children:"Send"})]})]})})]})}const tg=({size:e="md"})=>{const t={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"};return o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:`${t[e]} animate-spin rounded-full border-4 border-gray-200 border-t-primary-600`})})},j2=({group:e,callData:t,isIncoming:n=!1,onCallEnd:r,onCallAnswer:s,onCallDecline:i})=>{var ke,pe,Ie,Be;const{socket:l,isConnected:a}=Un(),[c,u]=y.useState(n?"incoming":"outgoing"),[m,f]=y.useState(!1),[j,I]=y.useState((t==null?void 0:t.callType)==="video"),[h,v]=y.useState(0),[S,w]=y.useState([]),[x,g]=y.useState(null),_=y.useRef(null),R=y.useRef({}),A=y.useRef(null),P=y.useRef({}),G=y.useRef(null),Q=y.useRef(null),X=y.useRef(!1),K={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};y.useEffect(()=>(console.log("GroupCall useEffect - callData:",t,"isIncoming:",n),t&&t.callId&&a&&!X.current&&ne(),()=>{ue()}),[t==null?void 0:t.callId,a]),y.useEffect(()=>(c==="connected"&&G.current?Q.current=setInterval(()=>{const E=Math.floor((Date.now()-G.current)/1e3);v(E)},1e3):Q.current&&(clearInterval(Q.current),Q.current=null),()=>{Q.current&&clearInterval(Q.current)}),[c]);const ne=async()=>{try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){console.error("WebRTC not supported in this browser or requires HTTPS"),g("Group calls require HTTPS connection or are not supported in this browser. Please use HTTPS or try a different browser.");return}if(typeof RTCPeerConnection>"u"){console.error("RTCPeerConnection not supported"),g("WebRTC is not supported in this browser. Please use a modern browser like Chrome, Firefox, or Safari.");return}const E={audio:!0,video:j?{width:640,height:480}:!1};try{A.current=await navigator.mediaDevices.getUserMedia(E)}catch(V){V.name==="NotAllowedError"||V.name==="PermissionDeniedError"?g("Camera/microphone access denied. Please allow access and try again."):V.name==="NotFoundError"||V.name==="DevicesNotFoundError"?g("Camera/microphone not found. Please check your devices."):V.name==="NotReadableError"||V.name==="TrackStartError"?g("Camera/microphone is being used by another application."):V.name==="SecurityError"?g("Group calls require HTTPS connection. Please access the site via HTTPS."):g(`Media access failed: ${V.message}`);return}_.current&&(_.current.srcObject=A.current,_.current.play().catch(()=>{})),$(),X.current=!0,n||l.emit("group-call-join",{callId:t.callId,groupId:t.groupId})}catch{X.current=!1,g("Failed to access camera/microphone. Please check permissions.")}},$=()=>{l&&(console.log("Setting up group call socket listeners for call:",t.callId),l.off("group-call-joined"),l.off("group-call-left"),l.off("group-call-ended"),l.off("group-call-participant-joined"),l.off("group-call-participant-left"),l.off("group-call-offer"),l.off("group-call-answer"),l.off("group-call-ice-candidate"),l.off("group-call-error"),l.on("group-call-joined",E=>{console.log("📞 Group call joined:",E),E.callId===t.callId&&(u("connected"),G.current=Date.now(),w(V=>[...V,E.participant]))}),l.on("group-call-participant-joined",E=>{console.log("📞 Participant joined:",E),E.callId===t.callId&&w(V=>[...V,E.newParticipant])}),l.on("group-call-participant-left",E=>{console.log("📞 Participant left:",E),E.callId===t.callId&&w(V=>V.filter(H=>H.id!==E.leftParticipant._id))}),l.on("group-call-ended",E=>{console.log("📞 Group call ended:",E),E.callId===t.callId&&U()}),l.on("group-call-offer",async E=>{console.log("📞 Group call offer received:",E),E.callId===t.callId&&E.from&&await ee(E.from._id,E.offer)}),l.on("group-call-answer",async E=>{console.log("📞 Group call answer received:",E),E.callId===t.callId&&E.from&&await le(E.from._id,E.answer)}),l.on("group-call-ice-candidate",async E=>{console.log("📞 Group call ICE candidate received:",E),E.callId===t.callId&&E.from&&await fe(E.from._id,E.candidate,E.sdpMLineIndex,E.sdpMid)}),l.on("group-call-error",E=>{console.error("📞 Group call error:",E),g(E.error)}))},Y=async E=>{try{const V=new RTCPeerConnection(K);return A.current&&A.current.getTracks().forEach(H=>{V.addTrack(H,A.current)}),V.ontrack=H=>{if(console.log("🎵 Remote track received from user:",E,"Track kind:",H.track.kind),H.streams&&H.streams[0]){const Le=H.streams[0];if(H.track.kind==="audio"){console.log("🎵 Audio track received, creating audio element");const ge=document.createElement("audio");ge.srcObject=Le,ge.autoplay=!0,ge.volume=1,ge.style.display="none",document.body.appendChild(ge),R.current[`${E}_audio`]||(R.current[`${E}_audio`]=ge)}H.track.kind==="video"&&R.current[E]&&(R.current[E].srcObject=Le,R.current[E].play().catch(ge=>{ge.name!=="AbortError"&&console.error("🎥 Error playing remote video:",ge)}))}},V.onicecandidate=H=>{H.candidate&&l&&l.emit("group-call-ice-candidate",{callId:t.callId,groupId:t.groupId,targetUserId:E,candidate:H.candidate.candidate,sdpMLineIndex:H.candidate.sdpMLineIndex,sdpMid:H.candidate.sdpMid})},V.onconnectionstatechange=()=>{const H=V.connectionState;console.log("🔗 Connection state changed for user",E,":",H),H==="connected"?console.log("✅ WebRTC connection established with user:",E):(H==="disconnected"||H==="failed")&&console.log("❌ WebRTC connection failed with user:",E,":",H)},P.current[E]=V,V}catch(V){throw console.error("Failed to create peer connection for user",E,":",V),V}},ee=async(E,V)=>{try{let H=P.current[E];H||(H=await Y(E)),await H.setRemoteDescription(V);const Le=await H.createAnswer();await H.setLocalDescription(Le),l.emit("group-call-answer",{callId:t.callId,groupId:t.groupId,targetUserId:E,answer:Le})}catch(H){console.error("Failed to handle incoming offer from user",E,":",H)}},le=async(E,V)=>{try{const H=P.current[E];H&&await H.setRemoteDescription(V)}catch(H){console.error("Failed to handle incoming answer from user",E,":",H)}},fe=async(E,V,H,Le)=>{try{const ge=P.current[E];ge&&await ge.addIceCandidate({candidate:V,sdpMLineIndex:H,sdpMid:Le})}catch(ge){console.error("Failed to handle ICE candidate from user",E,":",ge)}},z=async()=>{try{u("connecting"),s&&s(),l.emit("group-call-join",{callId:t.callId,groupId:t.groupId})}catch(E){console.error("Failed to answer group call:",E),g("Failed to answer group call")}},T=()=>{u("declined"),i&&i(),setTimeout(()=>{r&&r()},1e3)},U=()=>{l&&l.emit("group-call-leave",{callId:t.callId,groupId:t.groupId}),u("ended"),r&&r()},L=()=>{A.current&&(A.current.getAudioTracks().forEach(V=>{V.enabled=m}),f(!m))},B=()=>{if(A.current){const E=A.current.getVideoTracks(),V=!j;E.forEach(H=>{H.enabled=V}),I(V)}},ue=()=>{A.current&&A.current.getTracks().forEach(E=>E.stop()),Object.values(P.current).forEach(E=>{E&&E.close()}),P.current={},Object.values(R.current).forEach(E=>{E&&E.remove&&E.remove()}),R.current={},Q.current&&clearInterval(Q.current)},xe=E=>{const V=Math.floor(E/60),H=E%60;return`${V}:${H.toString().padStart(2,"0")}`};return x?o.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700 p-6 w-96 text-center",children:[o.jsx("div",{className:"text-4xl mb-3",children:"❌"}),o.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Group Call Error"}),o.jsx("p",{className:"text-gray-300 mb-4 text-sm",children:x}),o.jsx("button",{className:"btn btn-primary",onClick:r,children:"Close"})]})}):o.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden w-full max-w-6xl h-5/6",children:[o.jsxs("div",{className:"bg-black bg-opacity-20 px-6 py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200",children:e!=null&&e.avatar?o.jsx("img",{src:e.avatar,alt:e.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-blue-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-lg",children:((pe=(ke=e==null?void 0:e.name)==null?void 0:ke.charAt(0))==null?void 0:pe.toUpperCase())||"G"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-white text-lg",children:(e==null?void 0:e.name)||"Group Call"}),o.jsxs("p",{className:"text-sm text-gray-300",children:[c==="incoming"&&"Incoming group call...",c==="outgoing"&&"Starting group call...",c==="connecting"&&"Connecting...",c==="connected"&&`Connected - ${xe(h)}`,c==="declined"&&"Call declined",c==="ended"&&"Call ended"]})]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("p",{className:"text-sm text-gray-300",children:[S.length," participant",S.length!==1?"s":""]})})]}),o.jsx("div",{className:"relative h-96 bg-black p-4",children:j?o.jsxs("div",{className:"grid grid-cols-2 gap-4 h-full",children:[o.jsxs("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[o.jsx("video",{ref:_,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:"You"})]}),S.map((E,V)=>o.jsxs("div",{className:"relative bg-gray-800 rounded-lg overflow-hidden",children:[o.jsx("video",{ref:H=>R.current[E.id]=H,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:E.name}),E.isMuted&&o.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white text-xs px-1 py-1 rounded",children:"🔇"})]},E.id||E._id||V))]}):o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-32 h-32 rounded-full bg-gray-700 flex items-center justify-center mb-4 mx-auto",children:o.jsx("span",{className:"text-3xl text-white",children:((Be=(Ie=e==null?void 0:e.name)==null?void 0:Ie.charAt(0))==null?void 0:Be.toUpperCase())||"G"})}),o.jsx("p",{className:"text-white text-sm",children:"Audio Only Group Call"})]})})}),o.jsx("div",{className:"bg-black bg-opacity-20 p-6",children:o.jsxs("div",{className:"flex justify-center space-x-4",children:[c==="incoming"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:T,title:"Decline",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("button",{className:"w-16 h-16 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:z,title:"Answer",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]}),c==="connected"&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl ${m?"bg-red-500 hover:bg-red-600 text-white":"bg-white bg-opacity-20 hover:bg-opacity-30 text-white"}`,onClick:L,title:m?"Unmute":"Mute",children:m?o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]}):o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})})}),(t==null?void 0:t.callType)==="video"&&o.jsx("button",{className:`w-14 h-14 rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl ${j?"bg-white bg-opacity-20 hover:bg-opacity-30 text-white":"bg-red-500 hover:bg-red-600 text-white"}`,onClick:B,title:j?"Disable Video":"Enable Video",children:j?o.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}):o.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"})]})}),o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:U,title:"End Call",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(c==="outgoing"||c==="connecting")&&o.jsx("button",{className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",onClick:U,title:"Cancel Call",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})})},N2=()=>{var u,m;const{socket:e,isConnected:t}=Un(),[n,r]=y.useState(null),[s,i]=y.useState(null);y.useEffect(()=>{if(!(!e||!t))return console.log("Setting up GroupCallManager socket listeners"),e.on("incoming-group-call",f=>{console.log("📞 Incoming group call received:",f),i({callId:f.callId,callType:f.callType,groupId:f.groupId,groupName:f.groupName,initiator:f.initiator})}),e.on("group-call-initiated",f=>{console.log("📞 Group call initiated:",f),r({callId:f.callId,callType:f.callType,groupId:f.groupId,initiator:f.initiator,isIncoming:!1})}),e.on("group-call-joined",f=>{console.log("📞 Group call joined:",f),r(j=>({...j,callId:f.callId,groupId:f.groupId,participant:f.participant,isIncoming:!1}))}),e.on("group-call-ended",f=>{console.log("📞 Group call ended:",f),r(null),i(null)}),e.on("group-call-left",f=>{console.log("📞 Group call left:",f),r(null),i(null)}),e.on("group-call-error",f=>{console.error("📞 Group call error:",f),r(null),i(null)}),()=>{e.off("incoming-group-call"),e.off("group-call-initiated"),e.off("group-call-joined"),e.off("group-call-ended"),e.off("group-call-left"),e.off("group-call-error")}},[e,t]);const l=()=>{s&&(r({...s,isIncoming:!0}),i(null))},a=()=>{s&&(e.emit("group-call-decline",{callId:s.callId,groupId:s.groupId}),i(null))},c=()=>{n&&(r(null),i(null))};return o.jsxs(o.Fragment,{children:[n&&o.jsx(j2,{group:{name:n.groupName||"Group",avatar:null},callData:n,isIncoming:n.isIncoming,onCallEnd:c,onCallAnswer:l,onCallDecline:a}),s&&!n&&o.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center",children:o.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl shadow-2xl border border-gray-700 p-6 w-96 text-center",children:[o.jsx("div",{className:"mb-4",children:o.jsx("div",{className:"w-16 h-16 rounded-full mx-auto bg-blue-500 text-white flex items-center justify-center text-lg font-bold border-2 border-white",children:((u=s.groupName)==null?void 0:u.charAt(0))||"G"})}),o.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:s.groupName||"Group Call"}),o.jsxs("p",{className:"text-gray-300 mb-2",children:[((m=s.initiator)==null?void 0:m.name)||"Someone"," is calling"]}),o.jsx("p",{className:"text-gray-400 text-sm mb-6",children:s.callType==="video"?"📹 Video Call":"📞 Voice Call"}),o.jsxs("div",{className:"flex justify-center gap-4",children:[o.jsx("button",{onClick:a,className:"w-12 h-12 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("button",{onClick:l,className:"w-12 h-12 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})]})]})})]})};function $n({children:e,allowedRoles:t}){const{user:n,loading:r}=jn();return r?o.jsx(tg,{}):n?t&&!t.includes(n.role)?o.jsx(Ks,{to:"/dashboard",replace:!0}):e:o.jsx(Ks,{to:"/login",replace:!0})}function b2(){return o.jsx(Z1,{children:o.jsx(Ty,{children:o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(vv,{position:"top-right"}),o.jsx(k2,{})]})})})}function k2(){const{user:e,loading:t}=jn();return t?o.jsx(tg,{}):o.jsx(o.Fragment,{children:e?o.jsxs(Qw,{user:e,children:[o.jsx(N2,{}),o.jsxs(sf,{children:[o.jsx(Lt,{path:"/login",element:o.jsx(Ks,{to:"/dashboard",replace:!0})}),o.jsx(Lt,{path:"/dashboard",element:o.jsx($n,{children:e&&e.role==="user"?o.jsx(Af,{}):o.jsx(f2,{})})}),o.jsx(Lt,{path:"/user-dashboard",element:o.jsx($n,{allowedRoles:["user"],children:o.jsx(Af,{})})}),o.jsx(Lt,{path:"/chat",element:o.jsx($n,{children:o.jsx(h2,{})})}),o.jsx(Lt,{path:"/users",element:o.jsx($n,{allowedRoles:["superadmin","admin"],children:o.jsx(p2,{})})}),o.jsx(Lt,{path:"/groups",element:o.jsx($n,{allowedRoles:["admin"],children:o.jsx(g2,{})})}),o.jsx(Lt,{path:"/group/:groupId",element:o.jsx($n,{children:o.jsx(y2,{})})}),o.jsx(Lt,{path:"/profile",element:o.jsx($n,{children:o.jsx(v2,{})})}),o.jsx(Lt,{path:"/forward",element:o.jsx($n,{children:o.jsx(w2,{})})}),o.jsx(Lt,{path:"/",element:o.jsx(Ks,{to:"/dashboard",replace:!0})})]})]}):o.jsxs(sf,{children:[o.jsx(Lt,{path:"/login",element:o.jsx(d2,{})}),o.jsx(Lt,{path:"*",element:o.jsx(Ks,{to:"/login",replace:!0})})]})})}ha.createRoot(document.getElementById("root")).render(o.jsx(el.StrictMode,{children:o.jsx(b2,{})}));
