function Dh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Bh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yf={exports:{}},zo={},vf={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ri=Symbol.for("react.element"),Vh=Symbol.for("react.portal"),Hh=Symbol.for("react.fragment"),Gh=Symbol.for("react.strict_mode"),Wh=Symbol.for("react.profiler"),qh=Symbol.for("react.provider"),Kh=Symbol.for("react.context"),Qh=Symbol.for("react.forward_ref"),Jh=Symbol.for("react.suspense"),Yh=Symbol.for("react.memo"),Xh=Symbol.for("react.lazy"),_u=Symbol.iterator;function Zh(e){return e===null||typeof e!="object"?null:(e=_u&&e[_u]||e["@@iterator"],typeof e=="function"?e:null)}var wf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nf=Object.assign,jf={};function es(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||wf}es.prototype.isReactComponent={};es.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};es.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Sf(){}Sf.prototype=es.prototype;function fc(e,t,n){this.props=e,this.context=t,this.refs=jf,this.updater=n||wf}var mc=fc.prototype=new Sf;mc.constructor=fc;Nf(mc,es.prototype);mc.isPureReactComponent=!0;var Tu=Array.isArray,kf=Object.prototype.hasOwnProperty,pc={current:null},bf={key:!0,ref:!0,__self:!0,__source:!0};function Cf(e,t,n){var r,s={},o=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)kf.call(t,r)&&!bf.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:ri,type:e,key:o,ref:l,props:s,_owner:pc.current}}function eg(e,t){return{$$typeof:ri,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function hc(e){return typeof e=="object"&&e!==null&&e.$$typeof===ri}function tg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ru=/\/+/g;function yl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tg(""+e.key):t.toString(36)}function $i(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ri:case Vh:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+yl(l,0):r,Tu(s)?(n="",e!=null&&(n=e.replace(Ru,"$&/")+"/"),$i(s,t,n,"",function(u){return u})):s!=null&&(hc(s)&&(s=eg(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Ru,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",Tu(e))for(var a=0;a<e.length;a++){o=e[a];var c=r+yl(o,a);l+=$i(o,t,n,c,s)}else if(c=Zh(e),typeof c=="function")for(e=c.call(e),a=0;!(o=e.next()).done;)o=o.value,c=r+yl(o,a++),l+=$i(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function yi(e,t,n){if(e==null)return e;var r=[],s=0;return $i(e,r,"","",function(o){return t.call(n,o,s++)}),r}function ng(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var dt={current:null},zi={transition:null},rg={ReactCurrentDispatcher:dt,ReactCurrentBatchConfig:zi,ReactCurrentOwner:pc};function Ef(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:yi,forEach:function(e,t,n){yi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return yi(e,function(){t++}),t},toArray:function(e){return yi(e,function(t){return t})||[]},only:function(e){if(!hc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=es;ge.Fragment=Hh;ge.Profiler=Wh;ge.PureComponent=fc;ge.StrictMode=Gh;ge.Suspense=Jh;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rg;ge.act=Ef;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Nf({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=pc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)kf.call(t,c)&&!bf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ri,type:e.type,key:s,ref:o,props:r,_owner:l}};ge.createContext=function(e){return e={$$typeof:Kh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qh,_context:e},e.Consumer=e};ge.createElement=Cf;ge.createFactory=function(e){var t=Cf.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:Qh,render:e}};ge.isValidElement=hc;ge.lazy=function(e){return{$$typeof:Xh,_payload:{_status:-1,_result:e},_init:ng}};ge.memo=function(e,t){return{$$typeof:Yh,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=zi.transition;zi.transition={};try{e()}finally{zi.transition=t}};ge.unstable_act=Ef;ge.useCallback=function(e,t){return dt.current.useCallback(e,t)};ge.useContext=function(e){return dt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return dt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return dt.current.useEffect(e,t)};ge.useId=function(){return dt.current.useId()};ge.useImperativeHandle=function(e,t,n){return dt.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return dt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return dt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return dt.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return dt.current.useReducer(e,t,n)};ge.useRef=function(e){return dt.current.useRef(e)};ge.useState=function(e){return dt.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return dt.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return dt.current.useTransition()};ge.version="18.3.1";vf.exports=ge;var v=vf.exports;const _f=Bh(v),sg=Dh({__proto__:null,default:_f},[v]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig=v,og=Symbol.for("react.element"),lg=Symbol.for("react.fragment"),ag=Object.prototype.hasOwnProperty,cg=ig.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ug={key:!0,ref:!0,__self:!0,__source:!0};function Tf(e,t,n){var r,s={},o=null,l=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)ag.call(t,r)&&!ug.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:og,type:e,key:o,ref:l,props:s,_owner:cg.current}}zo.Fragment=lg;zo.jsx=Tf;zo.jsxs=Tf;yf.exports=zo;var i=yf.exports,Xl={},Rf={exports:{}},_t={},If={exports:{}},Af={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,k){var M=$.length;$.push(k);e:for(;0<M;){var A=M-1>>>1,z=$[A];if(0<s(z,k))$[A]=k,$[M]=z,M=A;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var k=$[0],M=$.pop();if(M!==k){$[0]=M;e:for(var A=0,z=$.length,re=z>>>1;A<re;){var ne=2*(A+1)-1,ve=$[ne],he=ne+1,Ge=$[he];if(0>s(ve,M))he<z&&0>s(Ge,ve)?($[A]=Ge,$[he]=M,A=he):($[A]=ve,$[ne]=M,A=ne);else if(he<z&&0>s(Ge,M))$[A]=Ge,$[he]=M,A=he;else break e}}return k}function s($,k){var M=$.sortIndex-k.sortIndex;return M!==0?M:$.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var c=[],u=[],m=1,d=null,w=3,C=!1,h=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var k=n(u);k!==null;){if(k.callback===null)r(u);else if(k.startTime<=$)r(u),k.sortIndex=k.expirationTime,t(c,k);else break;k=n(u)}}function _($){if(x=!1,y($),!h)if(n(c)!==null)h=!0,ee(R);else{var k=n(u);k!==null&&le(_,k.startTime-$)}}function R($,k){h=!1,x&&(x=!1,g(H),H=-1),C=!0;var M=w;try{for(y(k),d=n(c);d!==null&&(!(d.expirationTime>k)||$&&!V());){var A=d.callback;if(typeof A=="function"){d.callback=null,w=d.priorityLevel;var z=A(d.expirationTime<=k);k=e.unstable_now(),typeof z=="function"?d.callback=z:d===n(c)&&r(c),y(k)}else r(c);d=n(c)}if(d!==null)var re=!0;else{var ne=n(u);ne!==null&&le(_,ne.startTime-k),re=!1}return re}finally{d=null,w=M,C=!1}}var F=!1,U=null,H=-1,X=5,W=-1;function V(){return!(e.unstable_now()-W<X)}function q(){if(U!==null){var $=e.unstable_now();W=$;var k=!0;try{k=U(!0,$)}finally{k?O():(F=!1,U=null)}}else F=!1}var O;if(typeof p=="function")O=function(){p(q)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ie=J.port2;J.port1.onmessage=q,O=function(){ie.postMessage(null)}}else O=function(){S(q,0)};function ee($){U=$,F||(F=!0,O())}function le($,k){H=S(function(){$(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){h||C||(h=!0,ee(R))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function($){switch(w){case 1:case 2:case 3:var k=3;break;default:k=w}var M=w;w=k;try{return $()}finally{w=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,k){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var M=w;w=$;try{return k()}finally{w=M}},e.unstable_scheduleCallback=function($,k,M){var A=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?A+M:A):M=A,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=M+z,$={id:m++,callback:k,priorityLevel:$,startTime:M,expirationTime:z,sortIndex:-1},M>A?($.sortIndex=M,t(u,$),n(c)===null&&$===n(u)&&(x?(g(H),H=-1):x=!0,le(_,M-A))):($.sortIndex=z,t(c,$),h||C||(h=!0,ee(R))),$},e.unstable_shouldYield=V,e.unstable_wrapCallback=function($){var k=w;return function(){var M=w;w=k;try{return $.apply(this,arguments)}finally{w=M}}}})(Af);If.exports=Af;var dg=If.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg=v,Et=dg;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pf=new Set,Us={};function vr(e,t){Wr(e,t),Wr(e+"Capture",t)}function Wr(e,t){for(Us[e]=t,e=0;e<t.length;e++)Pf.add(t[e])}var Sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=Object.prototype.hasOwnProperty,mg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iu={},Au={};function pg(e){return Zl.call(Au,e)?!0:Zl.call(Iu,e)?!1:mg.test(e)?Au[e]=!0:(Iu[e]=!0,!1)}function hg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gg(e,t,n,r){if(t===null||typeof t>"u"||hg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ft(e,t,n,r,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){et[e]=new ft(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];et[t]=new ft(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){et[e]=new ft(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){et[e]=new ft(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){et[e]=new ft(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){et[e]=new ft(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){et[e]=new ft(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){et[e]=new ft(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){et[e]=new ft(e,5,!1,e.toLowerCase(),null,!1,!1)});var gc=/[\-:]([a-z])/g;function xc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gc,xc);et[t]=new ft(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gc,xc);et[t]=new ft(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gc,xc);et[t]=new ft(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){et[e]=new ft(e,1,!1,e.toLowerCase(),null,!1,!1)});et.xlinkHref=new ft("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){et[e]=new ft(e,1,!1,e.toLowerCase(),null,!0,!0)});function yc(e,t,n,r){var s=et.hasOwnProperty(t)?et[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gg(t,n,s,r)&&(n=null),r||s===null?pg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var _n=fg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vi=Symbol.for("react.element"),Cr=Symbol.for("react.portal"),Er=Symbol.for("react.fragment"),vc=Symbol.for("react.strict_mode"),ea=Symbol.for("react.profiler"),Mf=Symbol.for("react.provider"),Of=Symbol.for("react.context"),wc=Symbol.for("react.forward_ref"),ta=Symbol.for("react.suspense"),na=Symbol.for("react.suspense_list"),Nc=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),Lf=Symbol.for("react.offscreen"),Pu=Symbol.iterator;function us(e){return e===null||typeof e!="object"?null:(e=Pu&&e[Pu]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Object.assign,vl;function ws(e){if(vl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vl=t&&t[1]||""}return`
`+vl+e}var wl=!1;function Nl(e,t){if(!e||wl)return"";wl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),l=s.length-1,a=o.length-1;1<=l&&0<=a&&s[l]!==o[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==o[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==o[a]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=a);break}}}finally{wl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ws(e):""}function xg(e){switch(e.tag){case 5:return ws(e.type);case 16:return ws("Lazy");case 13:return ws("Suspense");case 19:return ws("SuspenseList");case 0:case 2:case 15:return e=Nl(e.type,!1),e;case 11:return e=Nl(e.type.render,!1),e;case 1:return e=Nl(e.type,!0),e;default:return""}}function ra(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Er:return"Fragment";case Cr:return"Portal";case ea:return"Profiler";case vc:return"StrictMode";case ta:return"Suspense";case na:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Of:return(e.displayName||"Context")+".Consumer";case Mf:return(e._context.displayName||"Context")+".Provider";case wc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Nc:return t=e.displayName||null,t!==null?t:ra(e.type)||"Memo";case Pn:t=e._payload,e=e._init;try{return ra(e(t))}catch{}}return null}function yg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ra(t);case 8:return t===vc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Uf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vg(e){var t=Uf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wi(e){e._valueTracker||(e._valueTracker=vg(e))}function Ff(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Uf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function io(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sa(e,t){var n=t.checked;return Oe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Mu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $f(e,t){t=t.checked,t!=null&&yc(e,"checked",t,!1)}function ia(e,t){$f(e,t);var n=Yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oa(e,t.type,n):t.hasOwnProperty("defaultValue")&&oa(e,t.type,Yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ou(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function oa(e,t,n){(t!=="number"||io(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ns=Array.isArray;function Fr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Yn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function la(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Oe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Lu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(Ns(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Yn(n)}}function zf(e,t){var n=Yn(t.value),r=Yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Uu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Df(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function aa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Df(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ni,Bf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ni=Ni||document.createElement("div"),Ni.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ni.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wg=["Webkit","ms","Moz","O"];Object.keys(bs).forEach(function(e){wg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bs[t]=bs[e]})});function Vf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||bs.hasOwnProperty(e)&&bs[e]?(""+t).trim():t+"px"}function Hf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Ng=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ca(e,t){if(t){if(Ng[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function ua(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var da=null;function jc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fa=null,$r=null,zr=null;function Fu(e){if(e=oi(e)){if(typeof fa!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Go(t),fa(e.stateNode,e.type,t))}}function Gf(e){$r?zr?zr.push(e):zr=[e]:$r=e}function Wf(){if($r){var e=$r,t=zr;if(zr=$r=null,Fu(e),t)for(e=0;e<t.length;e++)Fu(t[e])}}function qf(e,t){return e(t)}function Kf(){}var jl=!1;function Qf(e,t,n){if(jl)return e(t,n);jl=!0;try{return qf(e,t,n)}finally{jl=!1,($r!==null||zr!==null)&&(Kf(),Wf())}}function $s(e,t){var n=e.stateNode;if(n===null)return null;var r=Go(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var ma=!1;if(Sn)try{var ds={};Object.defineProperty(ds,"passive",{get:function(){ma=!0}}),window.addEventListener("test",ds,ds),window.removeEventListener("test",ds,ds)}catch{ma=!1}function jg(e,t,n,r,s,o,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(m){this.onError(m)}}var Cs=!1,oo=null,lo=!1,pa=null,Sg={onError:function(e){Cs=!0,oo=e}};function kg(e,t,n,r,s,o,l,a,c){Cs=!1,oo=null,jg.apply(Sg,arguments)}function bg(e,t,n,r,s,o,l,a,c){if(kg.apply(this,arguments),Cs){if(Cs){var u=oo;Cs=!1,oo=null}else throw Error(D(198));lo||(lo=!0,pa=u)}}function wr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $u(e){if(wr(e)!==e)throw Error(D(188))}function Cg(e){var t=e.alternate;if(!t){if(t=wr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return $u(s),e;if(o===r)return $u(s),t;o=o.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=o;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,r=o;break}if(a===r){l=!0,r=s,n=o;break}a=a.sibling}if(!l){for(a=o.child;a;){if(a===n){l=!0,n=o,r=s;break}if(a===r){l=!0,r=o,n=s;break}a=a.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Yf(e){return e=Cg(e),e!==null?Xf(e):null}function Xf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xf(e);if(t!==null)return t;e=e.sibling}return null}var Zf=Et.unstable_scheduleCallback,zu=Et.unstable_cancelCallback,Eg=Et.unstable_shouldYield,_g=Et.unstable_requestPaint,Fe=Et.unstable_now,Tg=Et.unstable_getCurrentPriorityLevel,Sc=Et.unstable_ImmediatePriority,em=Et.unstable_UserBlockingPriority,ao=Et.unstable_NormalPriority,Rg=Et.unstable_LowPriority,tm=Et.unstable_IdlePriority,Do=null,un=null;function Ig(e){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(Do,e,void 0,(e.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:Mg,Ag=Math.log,Pg=Math.LN2;function Mg(e){return e>>>=0,e===0?32:31-(Ag(e)/Pg|0)|0}var ji=64,Si=4194304;function js(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function co(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?r=js(a):(o&=l,o!==0&&(r=js(o)))}else l=n&~s,l!==0?r=js(l):o!==0&&(r=js(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Yt(t),s=1<<n,r|=e[n],t&=~s;return r}function Og(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-Yt(o),a=1<<l,c=s[l];c===-1?(!(a&n)||a&r)&&(s[l]=Og(a,t)):c<=t&&(e.expiredLanes|=a),o&=~a}}function ha(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nm(){var e=ji;return ji<<=1,!(ji&4194240)&&(ji=64),e}function Sl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function si(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yt(t),e[t]=n}function Ug(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Yt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function kc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Yt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ke=0;function rm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sm,bc,im,om,lm,ga=!1,ki=[],Dn=null,Bn=null,Vn=null,zs=new Map,Ds=new Map,On=[],Fg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Du(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Bn=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":zs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ds.delete(t.pointerId)}}function fs(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=oi(t),t!==null&&bc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function $g(e,t,n,r,s){switch(t){case"focusin":return Dn=fs(Dn,e,t,n,r,s),!0;case"dragenter":return Bn=fs(Bn,e,t,n,r,s),!0;case"mouseover":return Vn=fs(Vn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return zs.set(o,fs(zs.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Ds.set(o,fs(Ds.get(o)||null,e,t,n,r,s)),!0}return!1}function am(e){var t=or(e.target);if(t!==null){var n=wr(t);if(n!==null){if(t=n.tag,t===13){if(t=Jf(n),t!==null){e.blockedOn=t,lm(e.priority,function(){im(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Di(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);da=r,n.target.dispatchEvent(r),da=null}else return t=oi(n),t!==null&&bc(t),e.blockedOn=n,!1;t.shift()}return!0}function Bu(e,t,n){Di(e)&&n.delete(t)}function zg(){ga=!1,Dn!==null&&Di(Dn)&&(Dn=null),Bn!==null&&Di(Bn)&&(Bn=null),Vn!==null&&Di(Vn)&&(Vn=null),zs.forEach(Bu),Ds.forEach(Bu)}function ms(e,t){e.blockedOn===t&&(e.blockedOn=null,ga||(ga=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,zg)))}function Bs(e){function t(s){return ms(s,e)}if(0<ki.length){ms(ki[0],e);for(var n=1;n<ki.length;n++){var r=ki[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Dn!==null&&ms(Dn,e),Bn!==null&&ms(Bn,e),Vn!==null&&ms(Vn,e),zs.forEach(t),Ds.forEach(t),n=0;n<On.length;n++)r=On[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<On.length&&(n=On[0],n.blockedOn===null);)am(n),n.blockedOn===null&&On.shift()}var Dr=_n.ReactCurrentBatchConfig,uo=!0;function Dg(e,t,n,r){var s=ke,o=Dr.transition;Dr.transition=null;try{ke=1,Cc(e,t,n,r)}finally{ke=s,Dr.transition=o}}function Bg(e,t,n,r){var s=ke,o=Dr.transition;Dr.transition=null;try{ke=4,Cc(e,t,n,r)}finally{ke=s,Dr.transition=o}}function Cc(e,t,n,r){if(uo){var s=xa(e,t,n,r);if(s===null)Pl(e,t,r,fo,n),Du(e,r);else if($g(s,e,t,n,r))r.stopPropagation();else if(Du(e,r),t&4&&-1<Fg.indexOf(e)){for(;s!==null;){var o=oi(s);if(o!==null&&sm(o),o=xa(e,t,n,r),o===null&&Pl(e,t,r,fo,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Pl(e,t,r,null,n)}}var fo=null;function xa(e,t,n,r){if(fo=null,e=jc(r),e=or(e),e!==null)if(t=wr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fo=e,null}function cm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tg()){case Sc:return 1;case em:return 4;case ao:case Rg:return 16;case tm:return 536870912;default:return 16}default:return 16}}var Fn=null,Ec=null,Bi=null;function um(){if(Bi)return Bi;var e,t=Ec,n=t.length,r,s="value"in Fn?Fn.value:Fn.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[o-r];r++);return Bi=s.slice(e,1<r?1-r:void 0)}function Vi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bi(){return!0}function Vu(){return!1}function Tt(e){function t(n,r,s,o,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?bi:Vu,this.isPropagationStopped=Vu,this}return Oe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),t}var ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=Tt(ts),ii=Oe({},ts,{view:0,detail:0}),Vg=Tt(ii),kl,bl,ps,Bo=Oe({},ii,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ps&&(ps&&e.type==="mousemove"?(kl=e.screenX-ps.screenX,bl=e.screenY-ps.screenY):bl=kl=0,ps=e),kl)},movementY:function(e){return"movementY"in e?e.movementY:bl}}),Hu=Tt(Bo),Hg=Oe({},Bo,{dataTransfer:0}),Gg=Tt(Hg),Wg=Oe({},ii,{relatedTarget:0}),Cl=Tt(Wg),qg=Oe({},ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Kg=Tt(qg),Qg=Oe({},ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jg=Tt(Qg),Yg=Oe({},ts,{data:0}),Gu=Tt(Yg),Xg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=e0[e])?!!t[e]:!1}function Tc(){return t0}var n0=Oe({},ii,{key:function(e){if(e.key){var t=Xg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tc,charCode:function(e){return e.type==="keypress"?Vi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),r0=Tt(n0),s0=Oe({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wu=Tt(s0),i0=Oe({},ii,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tc}),o0=Tt(i0),l0=Oe({},ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),a0=Tt(l0),c0=Oe({},Bo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=Tt(c0),d0=[9,13,27,32],Rc=Sn&&"CompositionEvent"in window,Es=null;Sn&&"documentMode"in document&&(Es=document.documentMode);var f0=Sn&&"TextEvent"in window&&!Es,dm=Sn&&(!Rc||Es&&8<Es&&11>=Es),qu=String.fromCharCode(32),Ku=!1;function fm(e,t){switch(e){case"keyup":return d0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function m0(e,t){switch(e){case"compositionend":return mm(t);case"keypress":return t.which!==32?null:(Ku=!0,qu);case"textInput":return e=t.data,e===qu&&Ku?null:e;default:return null}}function p0(e,t){if(_r)return e==="compositionend"||!Rc&&fm(e,t)?(e=um(),Bi=Ec=Fn=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dm&&t.locale!=="ko"?null:t.data;default:return null}}var h0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h0[e.type]:t==="textarea"}function pm(e,t,n,r){Gf(r),t=mo(t,"onChange"),0<t.length&&(n=new _c("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _s=null,Vs=null;function g0(e){bm(e,0)}function Vo(e){var t=Ir(e);if(Ff(t))return e}function x0(e,t){if(e==="change")return t}var hm=!1;if(Sn){var El;if(Sn){var _l="oninput"in document;if(!_l){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),_l=typeof Ju.oninput=="function"}El=_l}else El=!1;hm=El&&(!document.documentMode||9<document.documentMode)}function Yu(){_s&&(_s.detachEvent("onpropertychange",gm),Vs=_s=null)}function gm(e){if(e.propertyName==="value"&&Vo(Vs)){var t=[];pm(t,Vs,e,jc(e)),Qf(g0,t)}}function y0(e,t,n){e==="focusin"?(Yu(),_s=t,Vs=n,_s.attachEvent("onpropertychange",gm)):e==="focusout"&&Yu()}function v0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vo(Vs)}function w0(e,t){if(e==="click")return Vo(t)}function N0(e,t){if(e==="input"||e==="change")return Vo(t)}function j0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:j0;function Hs(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zl.call(t,s)||!tn(e[s],t[s]))return!1}return!0}function Xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zu(e,t){var n=Xu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xu(n)}}function xm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ym(){for(var e=window,t=io();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=io(e.document)}return t}function Ic(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function S0(e){var t=ym(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&xm(n.ownerDocument.documentElement,n)){if(r!==null&&Ic(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=Zu(n,o);var l=Zu(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var k0=Sn&&"documentMode"in document&&11>=document.documentMode,Tr=null,ya=null,Ts=null,va=!1;function ed(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;va||Tr==null||Tr!==io(r)||(r=Tr,"selectionStart"in r&&Ic(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ts&&Hs(Ts,r)||(Ts=r,r=mo(ya,"onSelect"),0<r.length&&(t=new _c("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Tr)))}function Ci(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rr={animationend:Ci("Animation","AnimationEnd"),animationiteration:Ci("Animation","AnimationIteration"),animationstart:Ci("Animation","AnimationStart"),transitionend:Ci("Transition","TransitionEnd")},Tl={},vm={};Sn&&(vm=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function Ho(e){if(Tl[e])return Tl[e];if(!Rr[e])return e;var t=Rr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in vm)return Tl[e]=t[n];return e}var wm=Ho("animationend"),Nm=Ho("animationiteration"),jm=Ho("animationstart"),Sm=Ho("transitionend"),km=new Map,td="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(e,t){km.set(e,t),vr(t,[e])}for(var Rl=0;Rl<td.length;Rl++){var Il=td[Rl],b0=Il.toLowerCase(),C0=Il[0].toUpperCase()+Il.slice(1);Zn(b0,"on"+C0)}Zn(wm,"onAnimationEnd");Zn(Nm,"onAnimationIteration");Zn(jm,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(Sm,"onTransitionEnd");Wr("onMouseEnter",["mouseout","mouseover"]);Wr("onMouseLeave",["mouseout","mouseover"]);Wr("onPointerEnter",["pointerout","pointerover"]);Wr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ss));function nd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,bg(r,t,void 0,e),e.currentTarget=null}function bm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==o&&s.isPropagationStopped())break e;nd(s,a,u),o=c}else for(l=0;l<r.length;l++){if(a=r[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==o&&s.isPropagationStopped())break e;nd(s,a,u),o=c}}}if(lo)throw e=pa,lo=!1,pa=null,e}function Ee(e,t){var n=t[ka];n===void 0&&(n=t[ka]=new Set);var r=e+"__bubble";n.has(r)||(Cm(t,e,2,!1),n.add(r))}function Al(e,t,n){var r=0;t&&(r|=4),Cm(n,e,r,t)}var Ei="_reactListening"+Math.random().toString(36).slice(2);function Gs(e){if(!e[Ei]){e[Ei]=!0,Pf.forEach(function(n){n!=="selectionchange"&&(E0.has(n)||Al(n,!1,e),Al(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ei]||(t[Ei]=!0,Al("selectionchange",!1,t))}}function Cm(e,t,n,r){switch(cm(t)){case 1:var s=Dg;break;case 4:s=Bg;break;default:s=Cc}n=s.bind(null,t,n,e),s=void 0,!ma||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Pl(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;a!==null;){if(l=or(a),l===null)return;if(c=l.tag,c===5||c===6){r=o=l;continue e}a=a.parentNode}}r=r.return}Qf(function(){var u=o,m=jc(n),d=[];e:{var w=km.get(e);if(w!==void 0){var C=_c,h=e;switch(e){case"keypress":if(Vi(n)===0)break e;case"keydown":case"keyup":C=r0;break;case"focusin":h="focus",C=Cl;break;case"focusout":h="blur",C=Cl;break;case"beforeblur":case"afterblur":C=Cl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Gg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=o0;break;case wm:case Nm:case jm:C=Kg;break;case Sm:C=a0;break;case"scroll":C=Vg;break;case"wheel":C=u0;break;case"copy":case"cut":case"paste":C=Jg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=Wu}var x=(t&4)!==0,S=!x&&e==="scroll",g=x?w!==null?w+"Capture":null:w;x=[];for(var p=u,y;p!==null;){y=p;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,g!==null&&(_=$s(p,g),_!=null&&x.push(Ws(p,_,y)))),S)break;p=p.return}0<x.length&&(w=new C(w,h,null,n,m),d.push({event:w,listeners:x}))}}if(!(t&7)){e:{if(w=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",w&&n!==da&&(h=n.relatedTarget||n.fromElement)&&(or(h)||h[kn]))break e;if((C||w)&&(w=m.window===m?m:(w=m.ownerDocument)?w.defaultView||w.parentWindow:window,C?(h=n.relatedTarget||n.toElement,C=u,h=h?or(h):null,h!==null&&(S=wr(h),h!==S||h.tag!==5&&h.tag!==6)&&(h=null)):(C=null,h=u),C!==h)){if(x=Hu,_="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(x=Wu,_="onPointerLeave",g="onPointerEnter",p="pointer"),S=C==null?w:Ir(C),y=h==null?w:Ir(h),w=new x(_,p+"leave",C,n,m),w.target=S,w.relatedTarget=y,_=null,or(m)===u&&(x=new x(g,p+"enter",h,n,m),x.target=y,x.relatedTarget=S,_=x),S=_,C&&h)t:{for(x=C,g=h,p=0,y=x;y;y=br(y))p++;for(y=0,_=g;_;_=br(_))y++;for(;0<p-y;)x=br(x),p--;for(;0<y-p;)g=br(g),y--;for(;p--;){if(x===g||g!==null&&x===g.alternate)break t;x=br(x),g=br(g)}x=null}else x=null;C!==null&&rd(d,w,C,x,!1),h!==null&&S!==null&&rd(d,S,h,x,!0)}}e:{if(w=u?Ir(u):window,C=w.nodeName&&w.nodeName.toLowerCase(),C==="select"||C==="input"&&w.type==="file")var R=x0;else if(Qu(w))if(hm)R=N0;else{R=v0;var F=y0}else(C=w.nodeName)&&C.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(R=w0);if(R&&(R=R(e,u))){pm(d,R,n,m);break e}F&&F(e,w,u),e==="focusout"&&(F=w._wrapperState)&&F.controlled&&w.type==="number"&&oa(w,"number",w.value)}switch(F=u?Ir(u):window,e){case"focusin":(Qu(F)||F.contentEditable==="true")&&(Tr=F,ya=u,Ts=null);break;case"focusout":Ts=ya=Tr=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,ed(d,n,m);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":ed(d,n,m)}var U;if(Rc)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else _r?fm(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(dm&&n.locale!=="ko"&&(_r||H!=="onCompositionStart"?H==="onCompositionEnd"&&_r&&(U=um()):(Fn=m,Ec="value"in Fn?Fn.value:Fn.textContent,_r=!0)),F=mo(u,H),0<F.length&&(H=new Gu(H,e,null,n,m),d.push({event:H,listeners:F}),U?H.data=U:(U=mm(n),U!==null&&(H.data=U)))),(U=f0?m0(e,n):p0(e,n))&&(u=mo(u,"onBeforeInput"),0<u.length&&(m=new Gu("onBeforeInput","beforeinput",null,n,m),d.push({event:m,listeners:u}),m.data=U))}bm(d,t)})}function Ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function mo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=$s(e,n),o!=null&&r.unshift(Ws(e,o,s)),o=$s(e,t),o!=null&&r.push(Ws(e,o,s))),e=e.return}return r}function br(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rd(e,t,n,r,s){for(var o=t._reactName,l=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=$s(n,o),c!=null&&l.unshift(Ws(n,c,a))):s||(c=$s(n,o),c!=null&&l.push(Ws(n,c,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var _0=/\r\n?/g,T0=/\u0000|\uFFFD/g;function sd(e){return(typeof e=="string"?e:""+e).replace(_0,`
`).replace(T0,"")}function _i(e,t,n){if(t=sd(t),sd(e)!==t&&n)throw Error(D(425))}function po(){}var wa=null,Na=null;function ja(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Sa=typeof setTimeout=="function"?setTimeout:void 0,R0=typeof clearTimeout=="function"?clearTimeout:void 0,id=typeof Promise=="function"?Promise:void 0,I0=typeof queueMicrotask=="function"?queueMicrotask:typeof id<"u"?function(e){return id.resolve(null).then(e).catch(A0)}:Sa;function A0(e){setTimeout(function(){throw e})}function Ml(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Bs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Bs(t)}function Hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function od(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var ns=Math.random().toString(36).slice(2),an="__reactFiber$"+ns,qs="__reactProps$"+ns,kn="__reactContainer$"+ns,ka="__reactEvents$"+ns,P0="__reactListeners$"+ns,M0="__reactHandles$"+ns;function or(e){var t=e[an];if(t)return t;for(var n=e.parentNode;n;){if(t=n[kn]||n[an]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=od(e);e!==null;){if(n=e[an])return n;e=od(e)}return t}e=n,n=e.parentNode}return null}function oi(e){return e=e[an]||e[kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Go(e){return e[qs]||null}var ba=[],Ar=-1;function er(e){return{current:e}}function _e(e){0>Ar||(e.current=ba[Ar],ba[Ar]=null,Ar--)}function Ce(e,t){Ar++,ba[Ar]=e.current,e.current=t}var Xn={},ot=er(Xn),xt=er(!1),mr=Xn;function qr(e,t){var n=e.type.contextTypes;if(!n)return Xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function yt(e){return e=e.childContextTypes,e!=null}function ho(){_e(xt),_e(ot)}function ld(e,t,n){if(ot.current!==Xn)throw Error(D(168));Ce(ot,t),Ce(xt,n)}function Em(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,yg(e)||"Unknown",s));return Oe({},n,r)}function go(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xn,mr=ot.current,Ce(ot,e),Ce(xt,xt.current),!0}function ad(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Em(e,t,mr),r.__reactInternalMemoizedMergedChildContext=e,_e(xt),_e(ot),Ce(ot,e)):_e(xt),Ce(xt,n)}var vn=null,Wo=!1,Ol=!1;function _m(e){vn===null?vn=[e]:vn.push(e)}function O0(e){Wo=!0,_m(e)}function tr(){if(!Ol&&vn!==null){Ol=!0;var e=0,t=ke;try{var n=vn;for(ke=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}vn=null,Wo=!1}catch(s){throw vn!==null&&(vn=vn.slice(e+1)),Zf(Sc,tr),s}finally{ke=t,Ol=!1}}return null}var Pr=[],Mr=0,xo=null,yo=0,Pt=[],Mt=0,pr=null,wn=1,Nn="";function sr(e,t){Pr[Mr++]=yo,Pr[Mr++]=xo,xo=e,yo=t}function Tm(e,t,n){Pt[Mt++]=wn,Pt[Mt++]=Nn,Pt[Mt++]=pr,pr=e;var r=wn;e=Nn;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var o=32-Yt(t)+s;if(30<o){var l=s-s%5;o=(r&(1<<l)-1).toString(32),r>>=l,s-=l,wn=1<<32-Yt(t)+s|n<<s|r,Nn=o+e}else wn=1<<o|n<<s|r,Nn=e}function Ac(e){e.return!==null&&(sr(e,1),Tm(e,1,0))}function Pc(e){for(;e===xo;)xo=Pr[--Mr],Pr[Mr]=null,yo=Pr[--Mr],Pr[Mr]=null;for(;e===pr;)pr=Pt[--Mt],Pt[Mt]=null,Nn=Pt[--Mt],Pt[Mt]=null,wn=Pt[--Mt],Pt[Mt]=null}var Ct=null,bt=null,Ae=!1,Qt=null;function Rm(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ct=e,bt=Hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ct=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=pr!==null?{id:wn,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ct=e,bt=null,!0):!1;default:return!1}}function Ca(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ea(e){if(Ae){var t=bt;if(t){var n=t;if(!cd(e,t)){if(Ca(e))throw Error(D(418));t=Hn(n.nextSibling);var r=Ct;t&&cd(e,t)?Rm(r,n):(e.flags=e.flags&-4097|2,Ae=!1,Ct=e)}}else{if(Ca(e))throw Error(D(418));e.flags=e.flags&-4097|2,Ae=!1,Ct=e}}}function ud(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function Ti(e){if(e!==Ct)return!1;if(!Ae)return ud(e),Ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ja(e.type,e.memoizedProps)),t&&(t=bt)){if(Ca(e))throw Im(),Error(D(418));for(;t;)Rm(e,t),t=Hn(t.nextSibling)}if(ud(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=Hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=Ct?Hn(e.stateNode.nextSibling):null;return!0}function Im(){for(var e=bt;e;)e=Hn(e.nextSibling)}function Kr(){bt=Ct=null,Ae=!1}function Mc(e){Qt===null?Qt=[e]:Qt.push(e)}var L0=_n.ReactCurrentBatchConfig;function hs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var a=s.refs;l===null?delete a[o]:a[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function Ri(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dd(e){var t=e._init;return t(e._payload)}function Am(e){function t(g,p){if(e){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function n(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function r(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Kn(g,p),g.index=0,g.sibling=null,g}function o(g,p,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function l(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,p,y,_){return p===null||p.tag!==6?(p=Bl(y,g.mode,_),p.return=g,p):(p=s(p,y),p.return=g,p)}function c(g,p,y,_){var R=y.type;return R===Er?m(g,p,y.props.children,_,y.key):p!==null&&(p.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Pn&&dd(R)===p.type)?(_=s(p,y.props),_.ref=hs(g,p,y),_.return=g,_):(_=Ji(y.type,y.key,y.props,null,g.mode,_),_.ref=hs(g,p,y),_.return=g,_)}function u(g,p,y,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Vl(y,g.mode,_),p.return=g,p):(p=s(p,y.children||[]),p.return=g,p)}function m(g,p,y,_,R){return p===null||p.tag!==7?(p=dr(y,g.mode,_,R),p.return=g,p):(p=s(p,y),p.return=g,p)}function d(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Bl(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case vi:return y=Ji(p.type,p.key,p.props,null,g.mode,y),y.ref=hs(g,null,p),y.return=g,y;case Cr:return p=Vl(p,g.mode,y),p.return=g,p;case Pn:var _=p._init;return d(g,_(p._payload),y)}if(Ns(p)||us(p))return p=dr(p,g.mode,y,null),p.return=g,p;Ri(g,p)}return null}function w(g,p,y,_){var R=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return R!==null?null:a(g,p,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case vi:return y.key===R?c(g,p,y,_):null;case Cr:return y.key===R?u(g,p,y,_):null;case Pn:return R=y._init,w(g,p,R(y._payload),_)}if(Ns(y)||us(y))return R!==null?null:m(g,p,y,_,null);Ri(g,y)}return null}function C(g,p,y,_,R){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(y)||null,a(p,g,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case vi:return g=g.get(_.key===null?y:_.key)||null,c(p,g,_,R);case Cr:return g=g.get(_.key===null?y:_.key)||null,u(p,g,_,R);case Pn:var F=_._init;return C(g,p,y,F(_._payload),R)}if(Ns(_)||us(_))return g=g.get(y)||null,m(p,g,_,R,null);Ri(p,_)}return null}function h(g,p,y,_){for(var R=null,F=null,U=p,H=p=0,X=null;U!==null&&H<y.length;H++){U.index>H?(X=U,U=null):X=U.sibling;var W=w(g,U,y[H],_);if(W===null){U===null&&(U=X);break}e&&U&&W.alternate===null&&t(g,U),p=o(W,p,H),F===null?R=W:F.sibling=W,F=W,U=X}if(H===y.length)return n(g,U),Ae&&sr(g,H),R;if(U===null){for(;H<y.length;H++)U=d(g,y[H],_),U!==null&&(p=o(U,p,H),F===null?R=U:F.sibling=U,F=U);return Ae&&sr(g,H),R}for(U=r(g,U);H<y.length;H++)X=C(U,g,H,y[H],_),X!==null&&(e&&X.alternate!==null&&U.delete(X.key===null?H:X.key),p=o(X,p,H),F===null?R=X:F.sibling=X,F=X);return e&&U.forEach(function(V){return t(g,V)}),Ae&&sr(g,H),R}function x(g,p,y,_){var R=us(y);if(typeof R!="function")throw Error(D(150));if(y=R.call(y),y==null)throw Error(D(151));for(var F=R=null,U=p,H=p=0,X=null,W=y.next();U!==null&&!W.done;H++,W=y.next()){U.index>H?(X=U,U=null):X=U.sibling;var V=w(g,U,W.value,_);if(V===null){U===null&&(U=X);break}e&&U&&V.alternate===null&&t(g,U),p=o(V,p,H),F===null?R=V:F.sibling=V,F=V,U=X}if(W.done)return n(g,U),Ae&&sr(g,H),R;if(U===null){for(;!W.done;H++,W=y.next())W=d(g,W.value,_),W!==null&&(p=o(W,p,H),F===null?R=W:F.sibling=W,F=W);return Ae&&sr(g,H),R}for(U=r(g,U);!W.done;H++,W=y.next())W=C(U,g,H,W.value,_),W!==null&&(e&&W.alternate!==null&&U.delete(W.key===null?H:W.key),p=o(W,p,H),F===null?R=W:F.sibling=W,F=W);return e&&U.forEach(function(q){return t(g,q)}),Ae&&sr(g,H),R}function S(g,p,y,_){if(typeof y=="object"&&y!==null&&y.type===Er&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case vi:e:{for(var R=y.key,F=p;F!==null;){if(F.key===R){if(R=y.type,R===Er){if(F.tag===7){n(g,F.sibling),p=s(F,y.props.children),p.return=g,g=p;break e}}else if(F.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Pn&&dd(R)===F.type){n(g,F.sibling),p=s(F,y.props),p.ref=hs(g,F,y),p.return=g,g=p;break e}n(g,F);break}else t(g,F);F=F.sibling}y.type===Er?(p=dr(y.props.children,g.mode,_,y.key),p.return=g,g=p):(_=Ji(y.type,y.key,y.props,null,g.mode,_),_.ref=hs(g,p,y),_.return=g,g=_)}return l(g);case Cr:e:{for(F=y.key;p!==null;){if(p.key===F)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(g,p.sibling),p=s(p,y.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else t(g,p);p=p.sibling}p=Vl(y,g.mode,_),p.return=g,g=p}return l(g);case Pn:return F=y._init,S(g,p,F(y._payload),_)}if(Ns(y))return h(g,p,y,_);if(us(y))return x(g,p,y,_);Ri(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(g,p.sibling),p=s(p,y),p.return=g,g=p):(n(g,p),p=Bl(y,g.mode,_),p.return=g,g=p),l(g)):n(g,p)}return S}var Qr=Am(!0),Pm=Am(!1),vo=er(null),wo=null,Or=null,Oc=null;function Lc(){Oc=Or=wo=null}function Uc(e){var t=vo.current;_e(vo),e._currentValue=t}function _a(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Br(e,t){wo=e,Oc=Or=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gt=!0),e.firstContext=null)}function $t(e){var t=e._currentValue;if(Oc!==e)if(e={context:e,memoizedValue:t,next:null},Or===null){if(wo===null)throw Error(D(308));Or=e,wo.dependencies={lanes:0,firstContext:e}}else Or=Or.next=e;return t}var lr=null;function Fc(e){lr===null?lr=[e]:lr.push(e)}function Mm(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Fc(t)):(n.next=s.next,s.next=n),t.interleaved=n,bn(e,r)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function $c(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Om(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function jn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Gn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,bn(e,n)}return s=r.interleaved,s===null?(t.next=t,Fc(r)):(t.next=s.next,s.next=t),r.interleaved=t,bn(e,n)}function Hi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kc(e,n)}}function fd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function No(e,t,n,r){var s=e.updateQueue;Mn=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?o=u:l.next=u,l=c;var m=e.alternate;m!==null&&(m=m.updateQueue,a=m.lastBaseUpdate,a!==l&&(a===null?m.firstBaseUpdate=u:a.next=u,m.lastBaseUpdate=c))}if(o!==null){var d=s.baseState;l=0,m=u=c=null,a=o;do{var w=a.lane,C=a.eventTime;if((r&w)===w){m!==null&&(m=m.next={eventTime:C,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,x=a;switch(w=t,C=n,x.tag){case 1:if(h=x.payload,typeof h=="function"){d=h.call(C,d,w);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=x.payload,w=typeof h=="function"?h.call(C,d,w):h,w==null)break e;d=Oe({},d,w);break e;case 2:Mn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,w=s.effects,w===null?s.effects=[a]:w.push(a))}else C={eventTime:C,lane:w,tag:a.tag,payload:a.payload,callback:a.callback,next:null},m===null?(u=m=C,c=d):m=m.next=C,l|=w;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;w=a,a=w.next,w.next=null,s.lastBaseUpdate=w,s.shared.pending=null}}while(1);if(m===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=m,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);gr|=l,e.lanes=l,e.memoizedState=d}}function md(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var li={},dn=er(li),Ks=er(li),Qs=er(li);function ar(e){if(e===li)throw Error(D(174));return e}function zc(e,t){switch(Ce(Qs,t),Ce(Ks,e),Ce(dn,li),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:aa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=aa(t,e)}_e(dn),Ce(dn,t)}function Jr(){_e(dn),_e(Ks),_e(Qs)}function Lm(e){ar(Qs.current);var t=ar(dn.current),n=aa(t,e.type);t!==n&&(Ce(Ks,e),Ce(dn,n))}function Dc(e){Ks.current===e&&(_e(dn),_e(Ks))}var Pe=er(0);function jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ll=[];function Bc(){for(var e=0;e<Ll.length;e++)Ll[e]._workInProgressVersionPrimary=null;Ll.length=0}var Gi=_n.ReactCurrentDispatcher,Ul=_n.ReactCurrentBatchConfig,hr=0,Me=null,Ve=null,Ke=null,So=!1,Rs=!1,Js=0,U0=0;function nt(){throw Error(D(321))}function Vc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function Hc(e,t,n,r,s,o){if(hr=o,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gi.current=e===null||e.memoizedState===null?D0:B0,e=n(r,s),Rs){o=0;do{if(Rs=!1,Js=0,25<=o)throw Error(D(301));o+=1,Ke=Ve=null,t.updateQueue=null,Gi.current=V0,e=n(r,s)}while(Rs)}if(Gi.current=ko,t=Ve!==null&&Ve.next!==null,hr=0,Ke=Ve=Me=null,So=!1,t)throw Error(D(300));return e}function Gc(){var e=Js!==0;return Js=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Me.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function zt(){if(Ve===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Ve.next;var t=Ke===null?Me.memoizedState:Ke.next;if(t!==null)Ke=t,Ve=e;else{if(e===null)throw Error(D(310));Ve=e,e={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Ke===null?Me.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function Ys(e,t){return typeof t=="function"?t(e):t}function Fl(e){var t=zt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Ve,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var a=l=null,c=null,u=o;do{var m=u.lane;if((hr&m)===m)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,l=r):c=c.next=d,Me.lanes|=m,gr|=m}u=u.next}while(u!==null&&u!==o);c===null?l=r:c.next=a,tn(r,t.memoizedState)||(gt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,Me.lanes|=o,gr|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function $l(e){var t=zt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);tn(o,t.memoizedState)||(gt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Um(){}function Fm(e,t){var n=Me,r=zt(),s=t(),o=!tn(r.memoizedState,s);if(o&&(r.memoizedState=s,gt=!0),r=r.queue,Wc(Dm.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Xs(9,zm.bind(null,n,r,s,t),void 0,null),Qe===null)throw Error(D(349));hr&30||$m(n,t,s)}return s}function $m(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zm(e,t,n,r){t.value=n,t.getSnapshot=r,Bm(t)&&Vm(e)}function Dm(e,t,n){return n(function(){Bm(t)&&Vm(e)})}function Bm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tn(e,n)}catch{return!0}}function Vm(e){var t=bn(e,1);t!==null&&Xt(t,e,1,-1)}function pd(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:e},t.queue=e,e=e.dispatch=z0.bind(null,Me,e),[t.memoizedState,e]}function Xs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Hm(){return zt().memoizedState}function Wi(e,t,n,r){var s=ln();Me.flags|=e,s.memoizedState=Xs(1|t,n,void 0,r===void 0?null:r)}function qo(e,t,n,r){var s=zt();r=r===void 0?null:r;var o=void 0;if(Ve!==null){var l=Ve.memoizedState;if(o=l.destroy,r!==null&&Vc(r,l.deps)){s.memoizedState=Xs(t,n,o,r);return}}Me.flags|=e,s.memoizedState=Xs(1|t,n,o,r)}function hd(e,t){return Wi(8390656,8,e,t)}function Wc(e,t){return qo(2048,8,e,t)}function Gm(e,t){return qo(4,2,e,t)}function Wm(e,t){return qo(4,4,e,t)}function qm(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Km(e,t,n){return n=n!=null?n.concat([e]):null,qo(4,4,qm.bind(null,t,e),n)}function qc(){}function Qm(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jm(e,t){var n=zt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Vc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ym(e,t,n){return hr&21?(tn(n,t)||(n=nm(),Me.lanes|=n,gr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=n)}function F0(e,t){var n=ke;ke=n!==0&&4>n?n:4,e(!0);var r=Ul.transition;Ul.transition={};try{e(!1),t()}finally{ke=n,Ul.transition=r}}function Xm(){return zt().memoizedState}function $0(e,t,n){var r=qn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zm(e))ep(t,n);else if(n=Mm(e,t,n,r),n!==null){var s=ut();Xt(n,e,r,s),tp(n,t,r)}}function z0(e,t,n){var r=qn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zm(e))ep(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,a=o(l,n);if(s.hasEagerState=!0,s.eagerState=a,tn(a,l)){var c=t.interleaved;c===null?(s.next=s,Fc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Mm(e,t,s,r),n!==null&&(s=ut(),Xt(n,e,r,s),tp(n,t,r))}}function Zm(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function ep(e,t){Rs=So=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,kc(e,n)}}var ko={readContext:$t,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},D0={readContext:$t,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:hd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Wi(4194308,4,qm.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wi(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$0.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:pd,useDebugValue:qc,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=pd(!1),t=e[0];return e=F0.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,s=ln();if(Ae){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Qe===null)throw Error(D(349));hr&30||$m(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,hd(Dm.bind(null,r,o,e),[e]),r.flags|=2048,Xs(9,zm.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ln(),t=Qe.identifierPrefix;if(Ae){var n=Nn,r=wn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Js++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=U0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},B0={readContext:$t,useCallback:Qm,useContext:$t,useEffect:Wc,useImperativeHandle:Km,useInsertionEffect:Gm,useLayoutEffect:Wm,useMemo:Jm,useReducer:Fl,useRef:Hm,useState:function(){return Fl(Ys)},useDebugValue:qc,useDeferredValue:function(e){var t=zt();return Ym(t,Ve.memoizedState,e)},useTransition:function(){var e=Fl(Ys)[0],t=zt().memoizedState;return[e,t]},useMutableSource:Um,useSyncExternalStore:Fm,useId:Xm,unstable_isNewReconciler:!1},V0={readContext:$t,useCallback:Qm,useContext:$t,useEffect:Wc,useImperativeHandle:Km,useInsertionEffect:Gm,useLayoutEffect:Wm,useMemo:Jm,useReducer:$l,useRef:Hm,useState:function(){return $l(Ys)},useDebugValue:qc,useDeferredValue:function(e){var t=zt();return Ve===null?t.memoizedState=e:Ym(t,Ve.memoizedState,e)},useTransition:function(){var e=$l(Ys)[0],t=zt().memoizedState;return[e,t]},useMutableSource:Um,useSyncExternalStore:Fm,useId:Xm,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Oe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ta(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Oe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ko={isMounted:function(e){return(e=e._reactInternals)?wr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ut(),s=qn(e),o=jn(r,s);o.payload=t,n!=null&&(o.callback=n),t=Gn(e,o,s),t!==null&&(Xt(t,e,s,r),Hi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ut(),s=qn(e),o=jn(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Gn(e,o,s),t!==null&&(Xt(t,e,s,r),Hi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ut(),r=qn(e),s=jn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Gn(e,s,r),t!==null&&(Xt(t,e,r,n),Hi(t,e,r))}};function gd(e,t,n,r,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,l):t.prototype&&t.prototype.isPureReactComponent?!Hs(n,r)||!Hs(s,o):!0}function np(e,t,n){var r=!1,s=Xn,o=t.contextType;return typeof o=="object"&&o!==null?o=$t(o):(s=yt(t)?mr:ot.current,r=t.contextTypes,o=(r=r!=null)?qr(e,s):Xn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ko,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function xd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ko.enqueueReplaceState(t,t.state,null)}function Ra(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},$c(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=$t(o):(o=yt(t)?mr:ot.current,s.context=qr(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ta(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ko.enqueueReplaceState(s,s.state,null),No(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Yr(e,t){try{var n="",r=t;do n+=xg(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function zl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ia(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var H0=typeof WeakMap=="function"?WeakMap:Map;function rp(e,t,n){n=jn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Co||(Co=!0,Da=r),Ia(e,t)},n}function sp(e,t,n){n=jn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ia(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ia(e,t),typeof r!="function"&&(Wn===null?Wn=new Set([this]):Wn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function yd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new H0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=sx.bind(null,e,t,n),t.then(e,e))}function vd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=jn(-1,1),t.tag=2,Gn(n,t,1))),n.lanes|=1),e)}var G0=_n.ReactCurrentOwner,gt=!1;function ct(e,t,n,r){t.child=e===null?Pm(t,null,n,r):Qr(t,e.child,n,r)}function Nd(e,t,n,r,s){n=n.render;var o=t.ref;return Br(t,s),r=Hc(e,t,n,r,o,s),n=Gc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cn(e,t,s)):(Ae&&n&&Ac(t),t.flags|=1,ct(e,t,r,s),t.child)}function jd(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!tu(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,ip(e,t,o,r,s)):(e=Ji(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:Hs,n(l,r)&&e.ref===t.ref)return Cn(e,t,s)}return t.flags|=1,e=Kn(o,r),e.ref=t.ref,e.return=t,t.child=e}function ip(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Hs(o,r)&&e.ref===t.ref)if(gt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(gt=!0);else return t.lanes=e.lanes,Cn(e,t,s)}return Aa(e,t,n,r,s)}function op(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Ur,kt),kt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ce(Ur,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ce(Ur,kt),kt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ce(Ur,kt),kt|=r;return ct(e,t,s,n),t.child}function lp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,s){var o=yt(n)?mr:ot.current;return o=qr(t,o),Br(t,s),n=Hc(e,t,n,r,o,s),r=Gc(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Cn(e,t,s)):(Ae&&r&&Ac(t),t.flags|=1,ct(e,t,n,s),t.child)}function Sd(e,t,n,r,s){if(yt(n)){var o=!0;go(t)}else o=!1;if(Br(t,s),t.stateNode===null)qi(e,t),np(t,n,r),Ra(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=$t(u):(u=yt(n)?mr:ot.current,u=qr(t,u));var m=n.getDerivedStateFromProps,d=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||c!==u)&&xd(t,l,r,u),Mn=!1;var w=t.memoizedState;l.state=w,No(t,r,l,s),c=t.memoizedState,a!==r||w!==c||xt.current||Mn?(typeof m=="function"&&(Ta(t,n,m,r),c=t.memoizedState),(a=Mn||gd(t,n,a,r,w,c,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=u,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Om(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Wt(t.type,a),l.props=u,d=t.pendingProps,w=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=$t(c):(c=yt(n)?mr:ot.current,c=qr(t,c));var C=n.getDerivedStateFromProps;(m=typeof C=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==d||w!==c)&&xd(t,l,r,c),Mn=!1,w=t.memoizedState,l.state=w,No(t,r,l,s);var h=t.memoizedState;a!==d||w!==h||xt.current||Mn?(typeof C=="function"&&(Ta(t,n,C,r),h=t.memoizedState),(u=Mn||gd(t,n,u,r,w,h,c)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,h,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,h,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),l.props=r,l.state=h,l.context=c,r=u):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&w===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&w===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,o,s)}function Pa(e,t,n,r,s,o){lp(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&ad(t,n,!1),Cn(e,t,o);r=t.stateNode,G0.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Qr(t,e.child,null,o),t.child=Qr(t,null,a,o)):ct(e,t,a,o),t.memoizedState=r.state,s&&ad(t,n,!0),t.child}function ap(e){var t=e.stateNode;t.pendingContext?ld(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ld(e,t.context,!1),zc(e,t.containerInfo)}function kd(e,t,n,r,s){return Kr(),Mc(s),t.flags|=256,ct(e,t,n,r),t.child}var Ma={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function cp(e,t,n){var r=t.pendingProps,s=Pe.current,o=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ce(Pe,s&1),e===null)return Ea(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Yo(l,r,0,null),e=dr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oa(n),t.memoizedState=Ma,e):Kc(t,l));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return W0(e,t,l,r,a,s,n);if(o){o=r.fallback,l=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Kn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?o=Kn(a,o):(o=dr(o,l,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=e.child.memoizedState,l=l===null?Oa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ma,r}return o=e.child,e=o.sibling,r=Kn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Kc(e,t){return t=Yo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ii(e,t,n,r){return r!==null&&Mc(r),Qr(t,e.child,null,n),e=Kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W0(e,t,n,r,s,o,l){if(n)return t.flags&256?(t.flags&=-257,r=zl(Error(D(422))),Ii(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Yo({mode:"visible",children:r.children},s,0,null),o=dr(o,s,l,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Qr(t,e.child,null,l),t.child.memoizedState=Oa(l),t.memoizedState=Ma,o);if(!(t.mode&1))return Ii(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(D(419)),r=zl(o,r,void 0),Ii(e,t,l,r)}if(a=(l&e.childLanes)!==0,gt||a){if(r=Qe,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,bn(e,s),Xt(r,e,s,-1))}return eu(),r=zl(Error(D(421))),Ii(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ix.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,bt=Hn(s.nextSibling),Ct=t,Ae=!0,Qt=null,e!==null&&(Pt[Mt++]=wn,Pt[Mt++]=Nn,Pt[Mt++]=pr,wn=e.id,Nn=e.overflow,pr=t),t=Kc(t,r.children),t.flags|=4096,t)}function bd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),_a(e.return,t,n)}function Dl(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function up(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ct(e,t,r.children,n),r=Pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bd(e,n,t);else if(e.tag===19)bd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ce(Pe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&jo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Dl(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&jo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Dl(t,!0,n,null,o);break;case"together":Dl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=Kn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Kn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function q0(e,t,n){switch(t.tag){case 3:ap(t),Kr();break;case 5:Lm(t);break;case 1:yt(t.type)&&go(t);break;case 4:zc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ce(vo,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Pe,Pe.current&1),t.flags|=128,null):n&t.child.childLanes?cp(e,t,n):(Ce(Pe,Pe.current&1),e=Cn(e,t,n),e!==null?e.sibling:null);Ce(Pe,Pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return up(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Pe,Pe.current),r)break;return null;case 22:case 23:return t.lanes=0,op(e,t,n)}return Cn(e,t,n)}var dp,La,fp,mp;dp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};La=function(){};fp=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ar(dn.current);var o=null;switch(n){case"input":s=sa(e,s),r=sa(e,r),o=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),o=[];break;case"textarea":s=la(e,s),r=la(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=po)}ca(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Us.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Us.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ee("scroll",e),o||a===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};mp=function(e,t,n,r){n!==r&&(t.flags|=4)};function gs(e,t){if(!Ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function K0(e,t,n){var r=t.pendingProps;switch(Pc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(t),null;case 1:return yt(t.type)&&ho(),rt(t),null;case 3:return r=t.stateNode,Jr(),_e(xt),_e(ot),Bc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ti(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Qt!==null&&(Ha(Qt),Qt=null))),La(e,t),rt(t),null;case 5:Dc(t);var s=ar(Qs.current);if(n=t.type,e!==null&&t.stateNode!=null)fp(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return rt(t),null}if(e=ar(dn.current),Ti(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[an]=t,r[qs]=o,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Ss.length;s++)Ee(Ss[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Mu(r,o),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",r);break;case"textarea":Lu(r,o),Ee("invalid",r)}ca(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var a=o[l];l==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&_i(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&_i(r.textContent,a,e),s=["children",""+a]):Us.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&Ee("scroll",r)}switch(n){case"input":wi(r),Ou(r,o,!0);break;case"textarea":wi(r),Uu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=po)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Df(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[an]=t,e[qs]=r,dp(e,t,!1,!1),t.stateNode=e;e:{switch(l=ua(n,r),n){case"dialog":Ee("cancel",e),Ee("close",e),s=r;break;case"iframe":case"object":case"embed":Ee("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ss.length;s++)Ee(Ss[s],e);s=r;break;case"source":Ee("error",e),s=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),s=r;break;case"details":Ee("toggle",e),s=r;break;case"input":Mu(e,r),s=sa(e,r),Ee("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":Lu(e,r),s=la(e,r),Ee("invalid",e);break;default:s=r}ca(n,s),a=s;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?Hf(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Bf(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Fs(e,c):typeof c=="number"&&Fs(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Us.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ee("scroll",e):c!=null&&yc(e,o,c,l))}switch(n){case"input":wi(e),Ou(e,r,!1);break;case"textarea":wi(e),Uu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Yn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Fr(e,!!r.multiple,o,!1):r.defaultValue!=null&&Fr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=po)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rt(t),null;case 6:if(e&&t.stateNode!=null)mp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=ar(Qs.current),ar(dn.current),Ti(t)){if(r=t.stateNode,n=t.memoizedProps,r[an]=t,(o=r.nodeValue!==n)&&(e=Ct,e!==null))switch(e.tag){case 3:_i(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_i(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[an]=t,t.stateNode=r}return rt(t),null;case 13:if(_e(Pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ae&&bt!==null&&t.mode&1&&!(t.flags&128))Im(),Kr(),t.flags|=98560,o=!1;else if(o=Ti(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(D(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(D(317));o[an]=t}else Kr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rt(t),o=!1}else Qt!==null&&(Ha(Qt),Qt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Pe.current&1?He===0&&(He=3):eu())),t.updateQueue!==null&&(t.flags|=4),rt(t),null);case 4:return Jr(),La(e,t),e===null&&Gs(t.stateNode.containerInfo),rt(t),null;case 10:return Uc(t.type._context),rt(t),null;case 17:return yt(t.type)&&ho(),rt(t),null;case 19:if(_e(Pe),o=t.memoizedState,o===null)return rt(t),null;if(r=(t.flags&128)!==0,l=o.rendering,l===null)if(r)gs(o,!1);else{if(He!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=jo(e),l!==null){for(t.flags|=128,gs(o,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ce(Pe,Pe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Fe()>Xr&&(t.flags|=128,r=!0,gs(o,!1),t.lanes=4194304)}else{if(!r)if(e=jo(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!Ae)return rt(t),null}else 2*Fe()-o.renderingStartTime>Xr&&n!==1073741824&&(t.flags|=128,r=!0,gs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(n=o.last,n!==null?n.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Fe(),t.sibling=null,n=Pe.current,Ce(Pe,r?n&1|2:n&1),t):(rt(t),null);case 22:case 23:return Zc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(rt(t),t.subtreeFlags&6&&(t.flags|=8192)):rt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Q0(e,t){switch(Pc(t),t.tag){case 1:return yt(t.type)&&ho(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jr(),_e(xt),_e(ot),Bc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Dc(t),null;case 13:if(_e(Pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Kr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(Pe),null;case 4:return Jr(),null;case 10:return Uc(t.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var Ai=!1,st=!1,J0=typeof WeakSet=="function"?WeakSet:Set,K=null;function Lr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ue(e,t,r)}else n.current=null}function Ua(e,t,n){try{n()}catch(r){Ue(e,t,r)}}var Cd=!1;function Y0(e,t){if(wa=uo,e=ym(),Ic(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,u=0,m=0,d=e,w=null;t:for(;;){for(var C;d!==n||s!==0&&d.nodeType!==3||(a=l+s),d!==o||r!==0&&d.nodeType!==3||(c=l+r),d.nodeType===3&&(l+=d.nodeValue.length),(C=d.firstChild)!==null;)w=d,d=C;for(;;){if(d===e)break t;if(w===n&&++u===s&&(a=l),w===o&&++m===r&&(c=l),(C=d.nextSibling)!==null)break;d=w,w=d.parentNode}d=C}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Na={focusedElem:e,selectionRange:n},uo=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var x=h.memoizedProps,S=h.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?x:Wt(t.type,x),S);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(_){Ue(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return h=Cd,Cd=!1,h}function Is(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ua(t,n,o)}s=s.next}while(s!==r)}}function Qo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Fa(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function pp(e){var t=e.alternate;t!==null&&(e.alternate=null,pp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[an],delete t[qs],delete t[ka],delete t[P0],delete t[M0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hp(e){return e.tag===5||e.tag===3||e.tag===4}function Ed(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $a(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=po));else if(r!==4&&(e=e.child,e!==null))for($a(e,t,n),e=e.sibling;e!==null;)$a(e,t,n),e=e.sibling}function za(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(za(e,t,n),e=e.sibling;e!==null;)za(e,t,n),e=e.sibling}var Xe=null,qt=!1;function In(e,t,n){for(n=n.child;n!==null;)gp(e,t,n),n=n.sibling}function gp(e,t,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(Do,n)}catch{}switch(n.tag){case 5:st||Lr(n,t);case 6:var r=Xe,s=qt;Xe=null,In(e,t,n),Xe=r,qt=s,Xe!==null&&(qt?(e=Xe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(qt?(e=Xe,n=n.stateNode,e.nodeType===8?Ml(e.parentNode,n):e.nodeType===1&&Ml(e,n),Bs(e)):Ml(Xe,n.stateNode));break;case 4:r=Xe,s=qt,Xe=n.stateNode.containerInfo,qt=!0,In(e,t,n),Xe=r,qt=s;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Ua(n,t,l),s=s.next}while(s!==r)}In(e,t,n);break;case 1:if(!st&&(Lr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ue(n,t,a)}In(e,t,n);break;case 21:In(e,t,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,In(e,t,n),st=r):In(e,t,n);break;default:In(e,t,n)}}function _d(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new J0),t.forEach(function(r){var s=ox.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,qt=!1;break e;case 3:Xe=a.stateNode.containerInfo,qt=!0;break e;case 4:Xe=a.stateNode.containerInfo,qt=!0;break e}a=a.return}if(Xe===null)throw Error(D(160));gp(o,l,s),Xe=null,qt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ue(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)xp(t,e),t=t.sibling}function xp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gt(t,e),sn(e),r&4){try{Is(3,e,e.return),Qo(3,e)}catch(x){Ue(e,e.return,x)}try{Is(5,e,e.return)}catch(x){Ue(e,e.return,x)}}break;case 1:Gt(t,e),sn(e),r&512&&n!==null&&Lr(n,n.return);break;case 5:if(Gt(t,e),sn(e),r&512&&n!==null&&Lr(n,n.return),e.flags&32){var s=e.stateNode;try{Fs(s,"")}catch(x){Ue(e,e.return,x)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=n!==null?n.memoizedProps:o,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&$f(s,o),ua(a,l);var u=ua(a,o);for(l=0;l<c.length;l+=2){var m=c[l],d=c[l+1];m==="style"?Hf(s,d):m==="dangerouslySetInnerHTML"?Bf(s,d):m==="children"?Fs(s,d):yc(s,m,d,u)}switch(a){case"input":ia(s,o);break;case"textarea":zf(s,o);break;case"select":var w=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var C=o.value;C!=null?Fr(s,!!o.multiple,C,!1):w!==!!o.multiple&&(o.defaultValue!=null?Fr(s,!!o.multiple,o.defaultValue,!0):Fr(s,!!o.multiple,o.multiple?[]:"",!1))}s[qs]=o}catch(x){Ue(e,e.return,x)}}break;case 6:if(Gt(t,e),sn(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(x){Ue(e,e.return,x)}}break;case 3:if(Gt(t,e),sn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(t.containerInfo)}catch(x){Ue(e,e.return,x)}break;case 4:Gt(t,e),sn(e);break;case 13:Gt(t,e),sn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Yc=Fe())),r&4&&_d(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(st=(u=st)||m,Gt(t,e),st=u):Gt(t,e),sn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(K=e,m=e.child;m!==null;){for(d=K=m;K!==null;){switch(w=K,C=w.child,w.tag){case 0:case 11:case 14:case 15:Is(4,w,w.return);break;case 1:Lr(w,w.return);var h=w.stateNode;if(typeof h.componentWillUnmount=="function"){r=w,n=w.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(x){Ue(r,n,x)}}break;case 5:Lr(w,w.return);break;case 22:if(w.memoizedState!==null){Rd(d);continue}}C!==null?(C.return=w,K=C):Rd(d)}m=m.sibling}e:for(m=null,d=e;;){if(d.tag===5){if(m===null){m=d;try{s=d.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Vf("display",l))}catch(x){Ue(e,e.return,x)}}}else if(d.tag===6){if(m===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){Ue(e,e.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Gt(t,e),sn(e),r&4&&_d(e);break;case 21:break;default:Gt(t,e),sn(e)}}function sn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(hp(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Fs(s,""),r.flags&=-33);var o=Ed(e);za(e,o,s);break;case 3:case 4:var l=r.stateNode.containerInfo,a=Ed(e);$a(e,a,l);break;default:throw Error(D(161))}}catch(c){Ue(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function X0(e,t,n){K=e,yp(e)}function yp(e,t,n){for(var r=(e.mode&1)!==0;K!==null;){var s=K,o=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||Ai;if(!l){var a=s.alternate,c=a!==null&&a.memoizedState!==null||st;a=Ai;var u=st;if(Ai=l,(st=c)&&!u)for(K=s;K!==null;)l=K,c=l.child,l.tag===22&&l.memoizedState!==null?Id(s):c!==null?(c.return=l,K=c):Id(s);for(;o!==null;)K=o,yp(o),o=o.sibling;K=s,Ai=a,st=u}Td(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,K=o):Td(e)}}function Td(e){for(;K!==null;){var t=K;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:st||Qo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!st)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&md(t,o,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}md(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var d=m.dehydrated;d!==null&&Bs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}st||t.flags&512&&Fa(t)}catch(w){Ue(t,t.return,w)}}if(t===e){K=null;break}if(n=t.sibling,n!==null){n.return=t.return,K=n;break}K=t.return}}function Rd(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var n=t.sibling;if(n!==null){n.return=t.return,K=n;break}K=t.return}}function Id(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qo(4,t)}catch(c){Ue(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ue(t,s,c)}}var o=t.return;try{Fa(t)}catch(c){Ue(t,o,c)}break;case 5:var l=t.return;try{Fa(t)}catch(c){Ue(t,l,c)}}}catch(c){Ue(t,t.return,c)}if(t===e){K=null;break}var a=t.sibling;if(a!==null){a.return=t.return,K=a;break}K=t.return}}var Z0=Math.ceil,bo=_n.ReactCurrentDispatcher,Qc=_n.ReactCurrentOwner,Ut=_n.ReactCurrentBatchConfig,we=0,Qe=null,ze=null,Ze=0,kt=0,Ur=er(0),He=0,Zs=null,gr=0,Jo=0,Jc=0,As=null,pt=null,Yc=0,Xr=1/0,yn=null,Co=!1,Da=null,Wn=null,Pi=!1,$n=null,Eo=0,Ps=0,Ba=null,Ki=-1,Qi=0;function ut(){return we&6?Fe():Ki!==-1?Ki:Ki=Fe()}function qn(e){return e.mode&1?we&2&&Ze!==0?Ze&-Ze:L0.transition!==null?(Qi===0&&(Qi=nm()),Qi):(e=ke,e!==0||(e=window.event,e=e===void 0?16:cm(e.type)),e):1}function Xt(e,t,n,r){if(50<Ps)throw Ps=0,Ba=null,Error(D(185));si(e,n,r),(!(we&2)||e!==Qe)&&(e===Qe&&(!(we&2)&&(Jo|=n),He===4&&Ln(e,Ze)),vt(e,r),n===1&&we===0&&!(t.mode&1)&&(Xr=Fe()+500,Wo&&tr()))}function vt(e,t){var n=e.callbackNode;Lg(e,t);var r=co(e,e===Qe?Ze:0);if(r===0)n!==null&&zu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&zu(n),t===1)e.tag===0?O0(Ad.bind(null,e)):_m(Ad.bind(null,e)),I0(function(){!(we&6)&&tr()}),n=null;else{switch(rm(r)){case 1:n=Sc;break;case 4:n=em;break;case 16:n=ao;break;case 536870912:n=tm;break;default:n=ao}n=Cp(n,vp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function vp(e,t){if(Ki=-1,Qi=0,we&6)throw Error(D(327));var n=e.callbackNode;if(Vr()&&e.callbackNode!==n)return null;var r=co(e,e===Qe?Ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=_o(e,r);else{t=r;var s=we;we|=2;var o=Np();(Qe!==e||Ze!==t)&&(yn=null,Xr=Fe()+500,ur(e,t));do try{nx();break}catch(a){wp(e,a)}while(1);Lc(),bo.current=o,we=s,ze!==null?t=0:(Qe=null,Ze=0,t=He)}if(t!==0){if(t===2&&(s=ha(e),s!==0&&(r=s,t=Va(e,s))),t===1)throw n=Zs,ur(e,0),Ln(e,r),vt(e,Fe()),n;if(t===6)Ln(e,r);else{if(s=e.current.alternate,!(r&30)&&!ex(s)&&(t=_o(e,r),t===2&&(o=ha(e),o!==0&&(r=o,t=Va(e,o))),t===1))throw n=Zs,ur(e,0),Ln(e,r),vt(e,Fe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:ir(e,pt,yn);break;case 3:if(Ln(e,r),(r&130023424)===r&&(t=Yc+500-Fe(),10<t)){if(co(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ut(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Sa(ir.bind(null,e,pt,yn),t);break}ir(e,pt,yn);break;case 4:if(Ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-Yt(r);o=1<<l,l=t[l],l>s&&(s=l),r&=~o}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Z0(r/1960))-r,10<r){e.timeoutHandle=Sa(ir.bind(null,e,pt,yn),r);break}ir(e,pt,yn);break;case 5:ir(e,pt,yn);break;default:throw Error(D(329))}}}return vt(e,Fe()),e.callbackNode===n?vp.bind(null,e):null}function Va(e,t){var n=As;return e.current.memoizedState.isDehydrated&&(ur(e,t).flags|=256),e=_o(e,t),e!==2&&(t=pt,pt=n,t!==null&&Ha(t)),e}function Ha(e){pt===null?pt=e:pt.push.apply(pt,e)}function ex(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!tn(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ln(e,t){for(t&=~Jc,t&=~Jo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yt(t),r=1<<n;e[n]=-1,t&=~r}}function Ad(e){if(we&6)throw Error(D(327));Vr();var t=co(e,0);if(!(t&1))return vt(e,Fe()),null;var n=_o(e,t);if(e.tag!==0&&n===2){var r=ha(e);r!==0&&(t=r,n=Va(e,r))}if(n===1)throw n=Zs,ur(e,0),Ln(e,t),vt(e,Fe()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ir(e,pt,yn),vt(e,Fe()),null}function Xc(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(Xr=Fe()+500,Wo&&tr())}}function xr(e){$n!==null&&$n.tag===0&&!(we&6)&&Vr();var t=we;we|=1;var n=Ut.transition,r=ke;try{if(Ut.transition=null,ke=1,e)return e()}finally{ke=r,Ut.transition=n,we=t,!(we&6)&&tr()}}function Zc(){kt=Ur.current,_e(Ur)}function ur(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,R0(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(Pc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ho();break;case 3:Jr(),_e(xt),_e(ot),Bc();break;case 5:Dc(r);break;case 4:Jr();break;case 13:_e(Pe);break;case 19:_e(Pe);break;case 10:Uc(r.type._context);break;case 22:case 23:Zc()}n=n.return}if(Qe=e,ze=e=Kn(e.current,null),Ze=kt=t,He=0,Zs=null,Jc=Jo=gr=0,pt=As=null,lr!==null){for(t=0;t<lr.length;t++)if(n=lr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,r.next=l}n.pending=r}lr=null}return e}function wp(e,t){do{var n=ze;try{if(Lc(),Gi.current=ko,So){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}So=!1}if(hr=0,Ke=Ve=Me=null,Rs=!1,Js=0,Qc.current=null,n===null||n.return===null){He=1,Zs=t,ze=null;break}e:{var o=e,l=n.return,a=n,c=t;if(t=Ze,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,m=a,d=m.tag;if(!(m.mode&1)&&(d===0||d===11||d===15)){var w=m.alternate;w?(m.updateQueue=w.updateQueue,m.memoizedState=w.memoizedState,m.lanes=w.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=vd(l);if(C!==null){C.flags&=-257,wd(C,l,a,o,t),C.mode&1&&yd(o,u,t),t=C,c=u;var h=t.updateQueue;if(h===null){var x=new Set;x.add(c),t.updateQueue=x}else h.add(c);break e}else{if(!(t&1)){yd(o,u,t),eu();break e}c=Error(D(426))}}else if(Ae&&a.mode&1){var S=vd(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),wd(S,l,a,o,t),Mc(Yr(c,a));break e}}o=c=Yr(c,a),He!==4&&(He=2),As===null?As=[o]:As.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var g=rp(o,c,t);fd(o,g);break e;case 1:a=c;var p=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Wn===null||!Wn.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=sp(o,a,t);fd(o,_);break e}}o=o.return}while(o!==null)}Sp(n)}catch(R){t=R,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(1)}function Np(){var e=bo.current;return bo.current=ko,e===null?ko:e}function eu(){(He===0||He===3||He===2)&&(He=4),Qe===null||!(gr&268435455)&&!(Jo&268435455)||Ln(Qe,Ze)}function _o(e,t){var n=we;we|=2;var r=Np();(Qe!==e||Ze!==t)&&(yn=null,ur(e,t));do try{tx();break}catch(s){wp(e,s)}while(1);if(Lc(),we=n,bo.current=r,ze!==null)throw Error(D(261));return Qe=null,Ze=0,He}function tx(){for(;ze!==null;)jp(ze)}function nx(){for(;ze!==null&&!Eg();)jp(ze)}function jp(e){var t=bp(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?Sp(e):ze=t,Qc.current=null}function Sp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Q0(n,t),n!==null){n.flags&=32767,ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{He=6,ze=null;return}}else if(n=K0(n,t,kt),n!==null){ze=n;return}if(t=t.sibling,t!==null){ze=t;return}ze=t=e}while(t!==null);He===0&&(He=5)}function ir(e,t,n){var r=ke,s=Ut.transition;try{Ut.transition=null,ke=1,rx(e,t,n,r)}finally{Ut.transition=s,ke=r}return null}function rx(e,t,n,r){do Vr();while($n!==null);if(we&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Ug(e,o),e===Qe&&(ze=Qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pi||(Pi=!0,Cp(ao,function(){return Vr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ut.transition,Ut.transition=null;var l=ke;ke=1;var a=we;we|=4,Qc.current=null,Y0(e,n),xp(n,e),S0(Na),uo=!!wa,Na=wa=null,e.current=n,X0(n),_g(),we=a,ke=l,Ut.transition=o}else e.current=n;if(Pi&&(Pi=!1,$n=e,Eo=s),o=e.pendingLanes,o===0&&(Wn=null),Ig(n.stateNode),vt(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Co)throw Co=!1,e=Da,Da=null,e;return Eo&1&&e.tag!==0&&Vr(),o=e.pendingLanes,o&1?e===Ba?Ps++:(Ps=0,Ba=e):Ps=0,tr(),null}function Vr(){if($n!==null){var e=rm(Eo),t=Ut.transition,n=ke;try{if(Ut.transition=null,ke=16>e?16:e,$n===null)var r=!1;else{if(e=$n,$n=null,Eo=0,we&6)throw Error(D(331));var s=we;for(we|=4,K=e.current;K!==null;){var o=K,l=o.child;if(K.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(K=u;K!==null;){var m=K;switch(m.tag){case 0:case 11:case 15:Is(8,m,o)}var d=m.child;if(d!==null)d.return=m,K=d;else for(;K!==null;){m=K;var w=m.sibling,C=m.return;if(pp(m),m===u){K=null;break}if(w!==null){w.return=C,K=w;break}K=C}}}var h=o.alternate;if(h!==null){var x=h.child;if(x!==null){h.child=null;do{var S=x.sibling;x.sibling=null,x=S}while(x!==null)}}K=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,K=l;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Is(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,K=g;break e}K=o.return}}var p=e.current;for(K=p;K!==null;){l=K;var y=l.child;if(l.subtreeFlags&2064&&y!==null)y.return=l,K=y;else e:for(l=p;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qo(9,a)}}catch(R){Ue(a,a.return,R)}if(a===l){K=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,K=_;break e}K=a.return}}if(we=s,tr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(Do,e)}catch{}r=!0}return r}finally{ke=n,Ut.transition=t}}return!1}function Pd(e,t,n){t=Yr(n,t),t=rp(e,t,1),e=Gn(e,t,1),t=ut(),e!==null&&(si(e,1,t),vt(e,t))}function Ue(e,t,n){if(e.tag===3)Pd(e,e,n);else for(;t!==null;){if(t.tag===3){Pd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wn===null||!Wn.has(r))){e=Yr(n,e),e=sp(t,e,1),t=Gn(t,e,1),e=ut(),t!==null&&(si(t,1,e),vt(t,e));break}}t=t.return}}function sx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ut(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(Ze&n)===n&&(He===4||He===3&&(Ze&130023424)===Ze&&500>Fe()-Yc?ur(e,0):Jc|=n),vt(e,t)}function kp(e,t){t===0&&(e.mode&1?(t=Si,Si<<=1,!(Si&130023424)&&(Si=4194304)):t=1);var n=ut();e=bn(e,t),e!==null&&(si(e,t,n),vt(e,n))}function ix(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kp(e,n)}function ox(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),kp(e,n)}var bp;bp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||xt.current)gt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gt=!1,q0(e,t,n);gt=!!(e.flags&131072)}else gt=!1,Ae&&t.flags&1048576&&Tm(t,yo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qi(e,t),e=t.pendingProps;var s=qr(t,ot.current);Br(t,n),s=Hc(null,t,r,e,s,n);var o=Gc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yt(r)?(o=!0,go(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$c(t),s.updater=Ko,t.stateNode=s,s._reactInternals=t,Ra(t,r,e,n),t=Pa(null,t,r,!0,o,n)):(t.tag=0,Ae&&o&&Ac(t),ct(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=ax(r),e=Wt(r,e),s){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Sd(null,t,r,e,n);break e;case 11:t=Nd(null,t,r,e,n);break e;case 14:t=jd(null,t,r,Wt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),Aa(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),Sd(e,t,r,s,n);case 3:e:{if(ap(t),e===null)throw Error(D(387));r=t.pendingProps,o=t.memoizedState,s=o.element,Om(e,t),No(t,r,null,n);var l=t.memoizedState;if(r=l.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Yr(Error(D(423)),t),t=kd(e,t,r,n,s);break e}else if(r!==s){s=Yr(Error(D(424)),t),t=kd(e,t,r,n,s);break e}else for(bt=Hn(t.stateNode.containerInfo.firstChild),Ct=t,Ae=!0,Qt=null,n=Pm(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kr(),r===s){t=Cn(e,t,n);break e}ct(e,t,r,n)}t=t.child}return t;case 5:return Lm(t),e===null&&Ea(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,ja(r,s)?l=null:o!==null&&ja(r,o)&&(t.flags|=32),lp(e,t),ct(e,t,l,n),t.child;case 6:return e===null&&Ea(t),null;case 13:return cp(e,t,n);case 4:return zc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Qr(t,null,r,n):ct(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),Nd(e,t,r,s,n);case 7:return ct(e,t,t.pendingProps,n),t.child;case 8:return ct(e,t,t.pendingProps.children,n),t.child;case 12:return ct(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,Ce(vo,r._currentValue),r._currentValue=l,o!==null)if(tn(o.value,l)){if(o.children===s.children&&!xt.current){t=Cn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){l=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=jn(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?c.next=c:(c.next=m.next,m.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),_a(o.return,n,t),a.lanes|=n;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(D(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),_a(l,n,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}ct(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Br(t,n),s=$t(s),r=r(s),t.flags|=1,ct(e,t,r,n),t.child;case 14:return r=t.type,s=Wt(r,t.pendingProps),s=Wt(r.type,s),jd(e,t,r,s,n);case 15:return ip(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),qi(e,t),t.tag=1,yt(r)?(e=!0,go(t)):e=!1,Br(t,n),np(t,r,s),Ra(t,r,s,n),Pa(null,t,r,!0,e,n);case 19:return up(e,t,n);case 22:return op(e,t,n)}throw Error(D(156,t.tag))};function Cp(e,t){return Zf(e,t)}function lx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,r){return new lx(e,t,n,r)}function tu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ax(e){if(typeof e=="function")return tu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wc)return 11;if(e===Nc)return 14}return 2}function Kn(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ji(e,t,n,r,s,o){var l=2;if(r=e,typeof e=="function")tu(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Er:return dr(n.children,s,o,t);case vc:l=8,s|=8;break;case ea:return e=Lt(12,n,t,s|2),e.elementType=ea,e.lanes=o,e;case ta:return e=Lt(13,n,t,s),e.elementType=ta,e.lanes=o,e;case na:return e=Lt(19,n,t,s),e.elementType=na,e.lanes=o,e;case Lf:return Yo(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Mf:l=10;break e;case Of:l=9;break e;case wc:l=11;break e;case Nc:l=14;break e;case Pn:l=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Lt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function dr(e,t,n,r){return e=Lt(7,e,r,t),e.lanes=n,e}function Yo(e,t,n,r){return e=Lt(22,e,r,t),e.elementType=Lf,e.lanes=n,e.stateNode={isHidden:!1},e}function Bl(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function Vl(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sl(0),this.expirationTimes=Sl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nu(e,t,n,r,s,o,l,a,c){return e=new cx(e,t,n,a,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Lt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$c(o),e}function ux(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ep(e){if(!e)return Xn;e=e._reactInternals;e:{if(wr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(yt(n))return Em(e,n,t)}return t}function _p(e,t,n,r,s,o,l,a,c){return e=nu(n,r,!0,e,s,o,l,a,c),e.context=Ep(null),n=e.current,r=ut(),s=qn(n),o=jn(r,s),o.callback=t??null,Gn(n,o,s),e.current.lanes=s,si(e,s,r),vt(e,r),e}function Xo(e,t,n,r){var s=t.current,o=ut(),l=qn(s);return n=Ep(n),t.context===null?t.context=n:t.pendingContext=n,t=jn(o,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Gn(s,t,l),e!==null&&(Xt(e,s,l,o),Hi(e,s,l)),l}function To(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Md(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ru(e,t){Md(e,t),(e=e.alternate)&&Md(e,t)}function dx(){return null}var Tp=typeof reportError=="function"?reportError:function(e){console.error(e)};function su(e){this._internalRoot=e}Zo.prototype.render=su.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Xo(e,t,null,null)};Zo.prototype.unmount=su.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xr(function(){Xo(null,e,null,null)}),t[kn]=null}};function Zo(e){this._internalRoot=e}Zo.prototype.unstable_scheduleHydration=function(e){if(e){var t=om();e={blockedOn:null,target:e,priority:t};for(var n=0;n<On.length&&t!==0&&t<On[n].priority;n++);On.splice(n,0,e),n===0&&am(e)}};function iu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function el(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Od(){}function fx(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=To(l);o.call(u)}}var l=_p(t,r,e,0,null,!1,!1,"",Od);return e._reactRootContainer=l,e[kn]=l.current,Gs(e.nodeType===8?e.parentNode:e),xr(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=To(c);a.call(u)}}var c=nu(e,0,!1,null,null,!1,!1,"",Od);return e._reactRootContainer=c,e[kn]=c.current,Gs(e.nodeType===8?e.parentNode:e),xr(function(){Xo(t,c,n,r)}),c}function tl(e,t,n,r,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var a=s;s=function(){var c=To(l);a.call(c)}}Xo(t,l,e,s)}else l=fx(n,t,e,s,r);return To(l)}sm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=js(t.pendingLanes);n!==0&&(kc(t,n|1),vt(t,Fe()),!(we&6)&&(Xr=Fe()+500,tr()))}break;case 13:xr(function(){var r=bn(e,1);if(r!==null){var s=ut();Xt(r,e,1,s)}}),ru(e,1)}};bc=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=ut();Xt(t,e,134217728,n)}ru(e,134217728)}};im=function(e){if(e.tag===13){var t=qn(e),n=bn(e,t);if(n!==null){var r=ut();Xt(n,e,t,r)}ru(e,t)}};om=function(){return ke};lm=function(e,t){var n=ke;try{return ke=e,t()}finally{ke=n}};fa=function(e,t,n){switch(t){case"input":if(ia(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Go(r);if(!s)throw Error(D(90));Ff(r),ia(r,s)}}}break;case"textarea":zf(e,n);break;case"select":t=n.value,t!=null&&Fr(e,!!n.multiple,t,!1)}};qf=Xc;Kf=xr;var mx={usingClientEntryPoint:!1,Events:[oi,Ir,Go,Gf,Wf,Xc]},xs={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},px={bundleType:xs.bundleType,version:xs.version,rendererPackageName:xs.rendererPackageName,rendererConfig:xs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_n.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Yf(e),e===null?null:e.stateNode},findFiberByHostInstance:xs.findFiberByHostInstance||dx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mi.isDisabled&&Mi.supportsFiber)try{Do=Mi.inject(px),un=Mi}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iu(t))throw Error(D(200));return ux(e,t,null,n)};_t.createRoot=function(e,t){if(!iu(e))throw Error(D(299));var n=!1,r="",s=Tp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=nu(e,1,!1,null,null,n,!1,r,s),e[kn]=t.current,Gs(e.nodeType===8?e.parentNode:e),new su(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Yf(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return xr(e)};_t.hydrate=function(e,t,n){if(!el(t))throw Error(D(200));return tl(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!iu(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",l=Tp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=_p(t,null,e,1,n??null,s,!1,o,l),e[kn]=t.current,Gs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Zo(t)};_t.render=function(e,t,n){if(!el(t))throw Error(D(200));return tl(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!el(e))throw Error(D(40));return e._reactRootContainer?(xr(function(){tl(null,null,e,!1,function(){e._reactRootContainer=null,e[kn]=null})}),!0):!1};_t.unstable_batchedUpdates=Xc;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!el(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return tl(e,t,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function Rp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Rp)}catch(e){console.error(e)}}Rp(),Rf.exports=_t;var hx=Rf.exports,Ld=hx;Xl.createRoot=Ld.createRoot,Xl.hydrateRoot=Ld.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ei.apply(this,arguments)}var zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(zn||(zn={}));const Ud="popstate";function gx(e){e===void 0&&(e={});function t(r,s){let{pathname:o,search:l,hash:a}=r.location;return Ga("",{pathname:o,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ro(s)}return yx(t,n,null,e)}function $e(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ip(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xx(){return Math.random().toString(36).substr(2,8)}function Fd(e,t){return{usr:e.state,key:e.key,idx:t}}function Ga(e,t,n,r){return n===void 0&&(n=null),ei({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?rs(t):t,{state:n,key:t&&t.key||r||xx()})}function Ro(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function rs(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function yx(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,l=s.history,a=zn.Pop,c=null,u=m();u==null&&(u=0,l.replaceState(ei({},l.state,{idx:u}),""));function m(){return(l.state||{idx:null}).idx}function d(){a=zn.Pop;let S=m(),g=S==null?null:S-u;u=S,c&&c({action:a,location:x.location,delta:g})}function w(S,g){a=zn.Push;let p=Ga(x.location,S,g);n&&n(p,S),u=m()+1;let y=Fd(p,u),_=x.createHref(p);try{l.pushState(y,"",_)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;s.location.assign(_)}o&&c&&c({action:a,location:x.location,delta:1})}function C(S,g){a=zn.Replace;let p=Ga(x.location,S,g);n&&n(p,S),u=m();let y=Fd(p,u),_=x.createHref(p);l.replaceState(y,"",_),o&&c&&c({action:a,location:x.location,delta:0})}function h(S){let g=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof S=="string"?S:Ro(S);return p=p.replace(/ $/,"%20"),$e(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let x={get action(){return a},get location(){return e(s,l)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Ud,d),c=S,()=>{s.removeEventListener(Ud,d),c=null}},createHref(S){return t(s,S)},createURL:h,encodeLocation(S){let g=h(S);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:w,replace:C,go(S){return l.go(S)}};return x}var $d;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})($d||($d={}));function vx(e,t,n){return n===void 0&&(n="/"),wx(e,t,n,!1)}function wx(e,t,n,r){let s=typeof t=="string"?rs(t):t,o=ou(s.pathname||"/",n);if(o==null)return null;let l=Ap(e);Nx(l);let a=null;for(let c=0;a==null&&c<l.length;++c){let u=Ax(o);a=Rx(l[c],u,r)}return a}function Ap(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,l,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&($e(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Qn([r,c.relativePath]),m=n.concat(c);o.children&&o.children.length>0&&($e(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ap(o.children,t,m,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:_x(u,o.index),routesMeta:m})};return e.forEach((o,l)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))s(o,l);else for(let c of Pp(o.path))s(o,l,c)}),t}function Pp(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let l=Pp(r.join("/")),a=[];return a.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&a.push(...l),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function Nx(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Tx(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jx=/^:[\w-]+$/,Sx=3,kx=2,bx=1,Cx=10,Ex=-2,zd=e=>e==="*";function _x(e,t){let n=e.split("/"),r=n.length;return n.some(zd)&&(r+=Ex),t&&(r+=kx),n.filter(s=>!zd(s)).reduce((s,o)=>s+(jx.test(o)?Sx:o===""?bx:Cx),r)}function Tx(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Rx(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},o="/",l=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,m=o==="/"?t:t.slice(o.length)||"/",d=Dd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),w=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Dd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!d)return null;Object.assign(s,d.params),l.push({params:s,pathname:Qn([o,d.pathname]),pathnameBase:Lx(Qn([o,d.pathnameBase])),route:w}),d.pathnameBase!=="/"&&(o=Qn([o,d.pathnameBase]))}return l}function Dd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Ix(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,m,d)=>{let{paramName:w,isOptional:C}=m;if(w==="*"){let x=a[d]||"";l=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const h=a[d];return C&&!h?u[w]=void 0:u[w]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:l,pattern:e}}function Ix(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ip(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Ax(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ip(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function ou(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Px(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?rs(e):e;return{pathname:n?n.startsWith("/")?n:Mx(n,t):t,search:Ux(r),hash:Fx(s)}}function Mx(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hl(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Ox(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function lu(e,t){let n=Ox(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function au(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=rs(e):(s=ei({},e),$e(!s.pathname||!s.pathname.includes("?"),Hl("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),Hl("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),Hl("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,a;if(l==null)a=n;else{let d=t.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),d-=1;s.pathname=w.join("/")}a=d>=0?t[d]:"/"}let c=Px(s,a),u=l&&l!=="/"&&l.endsWith("/"),m=(o||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const Qn=e=>e.join("/").replace(/\/\/+/g,"/"),Lx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ux=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Fx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $x(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mp=["post","put","patch","delete"];new Set(Mp);const zx=["get",...Mp];new Set(zx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ti.apply(this,arguments)}const cu=v.createContext(null),Dx=v.createContext(null),nr=v.createContext(null),nl=v.createContext(null),Tn=v.createContext({outlet:null,matches:[],isDataRoute:!1}),Op=v.createContext(null);function Bx(e,t){let{relative:n}=t===void 0?{}:t;ss()||$e(!1);let{basename:r,navigator:s}=v.useContext(nr),{hash:o,pathname:l,search:a}=Up(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:Qn([r,l])),s.createHref({pathname:c,search:a,hash:o})}function ss(){return v.useContext(nl)!=null}function ai(){return ss()||$e(!1),v.useContext(nl).location}function Lp(e){v.useContext(nr).static||v.useLayoutEffect(e)}function rl(){let{isDataRoute:e}=v.useContext(Tn);return e?ny():Vx()}function Vx(){ss()||$e(!1);let e=v.useContext(cu),{basename:t,future:n,navigator:r}=v.useContext(nr),{matches:s}=v.useContext(Tn),{pathname:o}=ai(),l=JSON.stringify(lu(s,n.v7_relativeSplatPath)),a=v.useRef(!1);return Lp(()=>{a.current=!0}),v.useCallback(function(u,m){if(m===void 0&&(m={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=au(u,JSON.parse(l),o,m.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Qn([t,d.pathname])),(m.replace?r.replace:r.push)(d,m.state,m)},[t,r,l,o,e])}function Hx(){let{matches:e}=v.useContext(Tn),t=e[e.length-1];return t?t.params:{}}function Up(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=v.useContext(nr),{matches:s}=v.useContext(Tn),{pathname:o}=ai(),l=JSON.stringify(lu(s,r.v7_relativeSplatPath));return v.useMemo(()=>au(e,JSON.parse(l),o,n==="path"),[e,l,o,n])}function Gx(e,t){return Wx(e,t)}function Wx(e,t,n,r){ss()||$e(!1);let{navigator:s}=v.useContext(nr),{matches:o}=v.useContext(Tn),l=o[o.length-1],a=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=ai(),m;if(t){var d;let S=typeof t=="string"?rs(t):t;c==="/"||(d=S.pathname)!=null&&d.startsWith(c)||$e(!1),m=S}else m=u;let w=m.pathname||"/",C=w;if(c!=="/"){let S=c.replace(/^\//,"").split("/");C="/"+w.replace(/^\//,"").split("/").slice(S.length).join("/")}let h=vx(e,{pathname:C}),x=Yx(h&&h.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Qn([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Qn([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),o,n,r);return t&&x?v.createElement(nl.Provider,{value:{location:ti({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:zn.Pop}},x):x}function qx(){let e=ty(),t=$x(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),n?v.createElement("pre",{style:s},n):null,o)}const Kx=v.createElement(qx,null);class Qx extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?v.createElement(Tn.Provider,{value:this.props.routeContext},v.createElement(Op.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Jx(e){let{routeContext:t,match:n,children:r}=e,s=v.useContext(cu);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),v.createElement(Tn.Provider,{value:t},r)}function Yx(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let m=l.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);m>=0||$e(!1),l=l.slice(0,Math.min(l.length,m+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<l.length;m++){let d=l[m];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=m),d.route.id){let{loaderData:w,errors:C}=n,h=d.route.loader&&w[d.route.id]===void 0&&(!C||C[d.route.id]===void 0);if(d.route.lazy||h){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((m,d,w)=>{let C,h=!1,x=null,S=null;n&&(C=a&&d.route.id?a[d.route.id]:void 0,x=d.route.errorElement||Kx,c&&(u<0&&w===0?(ry("route-fallback",!1),h=!0,S=null):u===w&&(h=!0,S=d.route.hydrateFallbackElement||null)));let g=t.concat(l.slice(0,w+1)),p=()=>{let y;return C?y=x:h?y=S:d.route.Component?y=v.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=m,v.createElement(Jx,{match:d,routeContext:{outlet:m,matches:g,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||w===0)?v.createElement(Qx,{location:n.location,revalidation:n.revalidation,component:x,error:C,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Fp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Fp||{}),Io=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Io||{});function Xx(e){let t=v.useContext(cu);return t||$e(!1),t}function Zx(e){let t=v.useContext(Dx);return t||$e(!1),t}function ey(e){let t=v.useContext(Tn);return t||$e(!1),t}function $p(e){let t=ey(),n=t.matches[t.matches.length-1];return n.route.id||$e(!1),n.route.id}function ty(){var e;let t=v.useContext(Op),n=Zx(Io.UseRouteError),r=$p(Io.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function ny(){let{router:e}=Xx(Fp.UseNavigateStable),t=$p(Io.UseNavigateStable),n=v.useRef(!1);return Lp(()=>{n.current=!0}),v.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ti({fromRouteId:t},o)))},[e,t])}const Bd={};function ry(e,t,n){!t&&!Bd[e]&&(Bd[e]=!0)}function sy(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Ms(e){let{to:t,replace:n,state:r,relative:s}=e;ss()||$e(!1);let{future:o,static:l}=v.useContext(nr),{matches:a}=v.useContext(Tn),{pathname:c}=ai(),u=rl(),m=au(t,lu(a,o.v7_relativeSplatPath),c,s==="path"),d=JSON.stringify(m);return v.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:s}),[u,d,s,n,r]),null}function St(e){$e(!1)}function iy(e){let{basename:t="/",children:n=null,location:r,navigationType:s=zn.Pop,navigator:o,static:l=!1,future:a}=e;ss()&&$e(!1);let c=t.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:c,navigator:o,static:l,future:ti({v7_relativeSplatPath:!1},a)}),[c,a,o,l]);typeof r=="string"&&(r=rs(r));let{pathname:m="/",search:d="",hash:w="",state:C=null,key:h="default"}=r,x=v.useMemo(()=>{let S=ou(m,c);return S==null?null:{location:{pathname:S,search:d,hash:w,state:C,key:h},navigationType:s}},[c,m,d,w,C,h,s]);return x==null?null:v.createElement(nr.Provider,{value:u},v.createElement(nl.Provider,{children:n,value:x}))}function Vd(e){let{children:t,location:n}=e;return Gx(Wa(t),n)}new Promise(()=>{});function Wa(e,t){t===void 0&&(t=[]);let n=[];return v.Children.forEach(e,(r,s)=>{if(!v.isValidElement(r))return;let o=[...t,s];if(r.type===v.Fragment){n.push.apply(n,Wa(r.props.children,o));return}r.type!==St&&$e(!1),!r.props.index||!r.props.children||$e(!1);let l={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Wa(r.props.children,o)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qa.apply(this,arguments)}function oy(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,o;for(o=0;o<r.length;o++)s=r[o],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ly(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ay(e,t){return e.button===0&&(!t||t==="_self")&&!ly(e)}const cy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uy="6";try{window.__reactRouterVersion=uy}catch{}const dy="startTransition",Hd=sg[dy];function fy(e){let{basename:t,children:n,future:r,window:s}=e,o=v.useRef();o.current==null&&(o.current=gx({window:s,v5Compat:!0}));let l=o.current,[a,c]=v.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},m=v.useCallback(d=>{u&&Hd?Hd(()=>c(d)):c(d)},[c,u]);return v.useLayoutEffect(()=>l.listen(m),[l,m]),v.useEffect(()=>sy(r),[r]),v.createElement(iy,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:l,future:r})}const my=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",py=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ao=v.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:o,replace:l,state:a,target:c,to:u,preventScrollReset:m,viewTransition:d}=t,w=oy(t,cy),{basename:C}=v.useContext(nr),h,x=!1;if(typeof u=="string"&&py.test(u)&&(h=u,my))try{let y=new URL(window.location.href),_=u.startsWith("//")?new URL(y.protocol+u):new URL(u),R=ou(_.pathname,C);_.origin===y.origin&&R!=null?u=R+_.search+_.hash:x=!0}catch{}let S=Bx(u,{relative:s}),g=hy(u,{replace:l,state:a,target:c,preventScrollReset:m,relative:s,viewTransition:d});function p(y){r&&r(y),y.defaultPrevented||g(y)}return v.createElement("a",qa({},w,{href:h||S,onClick:x||o?r:p,ref:n,target:c}))});var Gd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Gd||(Gd={}));var Wd;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Wd||(Wd={}));function hy(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:l,viewTransition:a}=t===void 0?{}:t,c=rl(),u=ai(),m=Up(e,{relative:l});return v.useCallback(d=>{if(ay(d,n)){d.preventDefault();let w=r!==void 0?r:Ro(u)===Ro(m);c(e,{replace:w,state:s,preventScrollReset:o,relative:l,viewTransition:a})}},[u,c,m,r,s,n,e,o,l,a])}let gy={data:""},xy=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||gy,yy=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,vy=/\/\*[^]*?\*\/|  +/g,qd=/\n+/g,Un=(e,t)=>{let n="",r="",s="";for(let o in e){let l=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+l+";":r+=o[1]=="f"?Un(l,o):o+"{"+Un(l,o[1]=="k"?"":t)+"}":typeof l=="object"?r+=Un(l,t?t.replace(/([^,])+/g,a=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):o):l!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Un.p?Un.p(o,l):o+":"+l+";")}return n+(t&&s?t+"{"+s+"}":s)+r},xn={},zp=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+zp(e[n]);return t}return e},wy=(e,t,n,r,s)=>{let o=zp(e),l=xn[o]||(xn[o]=(c=>{let u=0,m=11;for(;u<c.length;)m=101*m+c.charCodeAt(u++)>>>0;return"go"+m})(o));if(!xn[l]){let c=o!==e?e:(u=>{let m,d,w=[{}];for(;m=yy.exec(u.replace(vy,""));)m[4]?w.shift():m[3]?(d=m[3].replace(qd," ").trim(),w.unshift(w[0][d]=w[0][d]||{})):w[0][m[1]]=m[2].replace(qd," ").trim();return w[0]})(e);xn[l]=Un(s?{["@keyframes "+l]:c}:c,n?"":"."+l)}let a=n&&xn.g?xn.g:null;return n&&(xn.g=xn[l]),((c,u,m,d)=>{d?u.data=u.data.replace(d,c):u.data.indexOf(c)===-1&&(u.data=m?c+u.data:u.data+c)})(xn[l],t,r,a),l},Ny=(e,t,n)=>e.reduce((r,s,o)=>{let l=t[o];if(l&&l.call){let a=l(n),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;l=c?"."+c:a&&typeof a=="object"?a.props?"":Un(a,""):a===!1?"":a}return r+s+(l??"")},"");function sl(e){let t=this||{},n=e.call?e(t.p):e;return wy(n.unshift?n.raw?Ny(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,xy(t.target),t.g,t.o,t.k)}let Dp,Ka,Qa;sl.bind({g:1});let En=sl.bind({k:1});function jy(e,t,n,r){Un.p=t,Dp=e,Ka=n,Qa=r}function rr(e,t){let n=this||{};return function(){let r=arguments;function s(o,l){let a=Object.assign({},o),c=a.className||s.className;n.p=Object.assign({theme:Ka&&Ka()},a),n.o=/ *go\d+/.test(c),a.className=sl.apply(n,r)+(c?" "+c:""),t&&(a.ref=l);let u=e;return e[0]&&(u=a.as||e,delete a.as),Qa&&u[0]&&Qa(a),Dp(u,a)}return t?t(s):s}}var Sy=e=>typeof e=="function",Po=(e,t)=>Sy(e)?e(t):e,ky=(()=>{let e=0;return()=>(++e).toString()})(),Bp=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),by=20,uu="default",Vp=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:r}=t;return Vp(e,{type:e.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+o}))}}},Yi=[],Hp={toasts:[],pausedAt:void 0,settings:{toastLimit:by}},cn={},Gp=(e,t=uu)=>{cn[t]=Vp(cn[t]||Hp,e),Yi.forEach(([n,r])=>{n===t&&r(cn[t])})},Wp=e=>Object.keys(cn).forEach(t=>Gp(e,t)),Cy=e=>Object.keys(cn).find(t=>cn[t].toasts.some(n=>n.id===e)),il=(e=uu)=>t=>{Gp(t,e)},Ey={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},_y=(e={},t=uu)=>{let[n,r]=v.useState(cn[t]||Hp),s=v.useRef(cn[t]);v.useEffect(()=>(s.current!==cn[t]&&r(cn[t]),Yi.push([t,r]),()=>{let l=Yi.findIndex(([a])=>a===t);l>-1&&Yi.splice(l,1)}),[t]);let o=n.toasts.map(l=>{var a,c,u;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((a=e[l.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||Ey[l.type],style:{...e.style,...(u=e[l.type])==null?void 0:u.style,...l.style}}});return{...n,toasts:o}},Ty=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||ky()}),ci=e=>(t,n)=>{let r=Ty(t,e,n);return il(r.toasterId||Cy(r.id))({type:2,toast:r}),r.id},G=(e,t)=>ci("blank")(e,t);G.error=ci("error");G.success=ci("success");G.loading=ci("loading");G.custom=ci("custom");G.dismiss=(e,t)=>{let n={type:3,toastId:e};t?il(t)(n):Wp(n)};G.dismissAll=e=>G.dismiss(void 0,e);G.remove=(e,t)=>{let n={type:4,toastId:e};t?il(t)(n):Wp(n)};G.removeAll=e=>G.remove(void 0,e);G.promise=(e,t,n)=>{let r=G.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let o=t.success?Po(t.success,s):void 0;return o?G.success(o,{id:r,...n,...n==null?void 0:n.success}):G.dismiss(r),s}).catch(s=>{let o=t.error?Po(t.error,s):void 0;o?G.error(o,{id:r,...n,...n==null?void 0:n.error}):G.dismiss(r)}),e};var Ry=1e3,Iy=(e,t="default")=>{let{toasts:n,pausedAt:r}=_y(e,t),s=v.useRef(new Map).current,o=v.useCallback((d,w=Ry)=>{if(s.has(d))return;let C=setTimeout(()=>{s.delete(d),l({type:4,toastId:d})},w);s.set(d,C)},[]);v.useEffect(()=>{if(r)return;let d=Date.now(),w=n.map(C=>{if(C.duration===1/0)return;let h=(C.duration||0)+C.pauseDuration-(d-C.createdAt);if(h<0){C.visible&&G.dismiss(C.id);return}return setTimeout(()=>G.dismiss(C.id,t),h)});return()=>{w.forEach(C=>C&&clearTimeout(C))}},[n,r,t]);let l=v.useCallback(il(t),[t]),a=v.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=v.useCallback((d,w)=>{l({type:1,toast:{id:d,height:w}})},[l]),u=v.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),m=v.useCallback((d,w)=>{let{reverseOrder:C=!1,gutter:h=8,defaultPosition:x}=w||{},S=n.filter(y=>(y.position||x)===(d.position||x)&&y.height),g=S.findIndex(y=>y.id===d.id),p=S.filter((y,_)=>_<g&&y.visible).length;return S.filter(y=>y.visible).slice(...C?[p+1]:[0,p]).reduce((y,_)=>y+(_.height||0)+h,0)},[n]);return v.useEffect(()=>{n.forEach(d=>{if(d.dismissed)o(d.id,d.removeDelay);else{let w=s.get(d.id);w&&(clearTimeout(w),s.delete(d.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:c,startPause:a,endPause:u,calculateOffset:m}}},Ay=En`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Py=En`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,My=En`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Oy=rr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ay} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Py} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${My} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ly=En`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Uy=rr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Ly} 1s linear infinite;
`,Fy=En`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,$y=En`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,zy=rr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Fy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${$y} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Dy=rr("div")`
  position: absolute;
`,By=rr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Vy=En`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hy=rr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Vy} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Gy=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?v.createElement(Hy,null,t):t:n==="blank"?null:v.createElement(By,null,v.createElement(Uy,{...r}),n!=="loading"&&v.createElement(Dy,null,n==="error"?v.createElement(Oy,{...r}):v.createElement(zy,{...r})))},Wy=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qy=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Ky="0%{opacity:0;} 100%{opacity:1;}",Qy="0%{opacity:1;} 100%{opacity:0;}",Jy=rr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Yy=rr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Xy=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=Bp()?[Ky,Qy]:[Wy(n),qy(n)];return{animation:t?`${En(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${En(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Zy=v.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?Xy(e.position||t||"top-center",e.visible):{opacity:0},o=v.createElement(Gy,{toast:e}),l=v.createElement(Yy,{...e.ariaProps},Po(e.message,e));return v.createElement(Jy,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:o,message:l}):v.createElement(v.Fragment,null,o,l))});jy(v.createElement);var ev=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let o=v.useCallback(l=>{if(l){let a=()=>{let c=l.getBoundingClientRect().height;r(e,c)};a(),new MutationObserver(a).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return v.createElement("div",{ref:o,className:t,style:n},s)},tv=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Bp()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},nv=sl`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Oi=16,rv=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:o,containerStyle:l,containerClassName:a})=>{let{toasts:c,handlers:u}=Iy(n,o);return v.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Oi,left:Oi,right:Oi,bottom:Oi,pointerEvents:"none",...l},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(m=>{let d=m.position||t,w=u.calculateOffset(m,{reverseOrder:e,gutter:r,defaultPosition:t}),C=tv(d,w);return v.createElement(ev,{id:m.id,key:m.id,onHeightUpdate:u.updateHeight,className:m.visible?nv:"",style:C},m.type==="custom"?Po(m.message,m):s?s(m):v.createElement(Zy,{toast:m,position:d}))}))};function qp(e,t){return function(){return e.apply(t,arguments)}}const{toString:sv}=Object.prototype,{getPrototypeOf:du}=Object,{iterator:ol,toStringTag:Kp}=Symbol,ll=(e=>t=>{const n=sv.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),nn=e=>(e=e.toLowerCase(),t=>ll(t)===e),al=e=>t=>typeof t===e,{isArray:is}=Array,Zr=al("undefined");function ui(e){return e!==null&&!Zr(e)&&e.constructor!==null&&!Zr(e.constructor)&&wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qp=nn("ArrayBuffer");function iv(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Qp(e.buffer),t}const ov=al("string"),wt=al("function"),Jp=al("number"),di=e=>e!==null&&typeof e=="object",lv=e=>e===!0||e===!1,Xi=e=>{if(ll(e)!=="object")return!1;const t=du(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Kp in e)&&!(ol in e)},av=e=>{if(!di(e)||ui(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},cv=nn("Date"),uv=nn("File"),dv=nn("Blob"),fv=nn("FileList"),mv=e=>di(e)&&wt(e.pipe),pv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||wt(e.append)&&((t=ll(e))==="formdata"||t==="object"&&wt(e.toString)&&e.toString()==="[object FormData]"))},hv=nn("URLSearchParams"),[gv,xv,yv,vv]=["ReadableStream","Request","Response","Headers"].map(nn),wv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fi(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),is(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(ui(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let a;for(r=0;r<l;r++)a=o[r],t.call(null,e[a],a,e)}}function Yp(e,t){if(ui(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const cr=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Xp=e=>!Zr(e)&&e!==cr;function Ja(){const{caseless:e,skipUndefined:t}=Xp(this)&&this||{},n={},r=(s,o)=>{const l=e&&Yp(n,o)||o;Xi(n[l])&&Xi(s)?n[l]=Ja(n[l],s):Xi(s)?n[l]=Ja({},s):is(s)?n[l]=s.slice():(!t||!Zr(s))&&(n[l]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&fi(arguments[s],r);return n}const Nv=(e,t,n,{allOwnKeys:r}={})=>(fi(t,(s,o)=>{n&&wt(s)?e[o]=qp(s,n):e[o]=s},{allOwnKeys:r}),e),jv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Sv=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},kv=(e,t,n,r)=>{let s,o,l;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)l=s[o],(!r||r(l,e,t))&&!a[l]&&(t[l]=e[l],a[l]=!0);e=n!==!1&&du(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},bv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Cv=e=>{if(!e)return null;if(is(e))return e;let t=e.length;if(!Jp(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Ev=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&du(Uint8Array)),_v=(e,t)=>{const r=(e&&e[ol]).call(e);let s;for(;(s=r.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},Tv=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Rv=nn("HTMLFormElement"),Iv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Kd=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Av=nn("RegExp"),Zp=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};fi(n,(s,o)=>{let l;(l=t(s,o,e))!==!1&&(r[o]=l||s)}),Object.defineProperties(e,r)},Pv=e=>{Zp(e,(t,n)=>{if(wt(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(wt(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Mv=(e,t)=>{const n={},r=s=>{s.forEach(o=>{n[o]=!0})};return is(e)?r(e):r(String(e).split(t)),n},Ov=()=>{},Lv=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Uv(e){return!!(e&&wt(e.append)&&e[Kp]==="FormData"&&e[ol])}const Fv=e=>{const t=new Array(10),n=(r,s)=>{if(di(r)){if(t.indexOf(r)>=0)return;if(ui(r))return r;if(!("toJSON"in r)){t[s]=r;const o=is(r)?[]:{};return fi(r,(l,a)=>{const c=n(l,s+1);!Zr(c)&&(o[a]=c)}),t[s]=void 0,o}}return r};return n(e,0)},$v=nn("AsyncFunction"),zv=e=>e&&(di(e)||wt(e))&&wt(e.then)&&wt(e.catch),eh=((e,t)=>e?setImmediate:t?((n,r)=>(cr.addEventListener("message",({source:s,data:o})=>{s===cr&&o===n&&r.length&&r.shift()()},!1),s=>{r.push(s),cr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",wt(cr.postMessage)),Dv=typeof queueMicrotask<"u"?queueMicrotask.bind(cr):typeof process<"u"&&process.nextTick||eh,Bv=e=>e!=null&&wt(e[ol]),I={isArray:is,isArrayBuffer:Qp,isBuffer:ui,isFormData:pv,isArrayBufferView:iv,isString:ov,isNumber:Jp,isBoolean:lv,isObject:di,isPlainObject:Xi,isEmptyObject:av,isReadableStream:gv,isRequest:xv,isResponse:yv,isHeaders:vv,isUndefined:Zr,isDate:cv,isFile:uv,isBlob:dv,isRegExp:Av,isFunction:wt,isStream:mv,isURLSearchParams:hv,isTypedArray:Ev,isFileList:fv,forEach:fi,merge:Ja,extend:Nv,trim:wv,stripBOM:jv,inherits:Sv,toFlatObject:kv,kindOf:ll,kindOfTest:nn,endsWith:bv,toArray:Cv,forEachEntry:_v,matchAll:Tv,isHTMLForm:Rv,hasOwnProperty:Kd,hasOwnProp:Kd,reduceDescriptors:Zp,freezeMethods:Pv,toObjectSet:Mv,toCamelCase:Iv,noop:Ov,toFiniteNumber:Lv,findKey:Yp,global:cr,isContextDefined:Xp,isSpecCompliantForm:Uv,toJSONObject:Fv,isAsyncFn:$v,isThenable:zv,setImmediate:eh,asap:Dv,isIterable:Bv};function de(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}I.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const th=de.prototype,nh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nh[e]={value:e}});Object.defineProperties(de,nh);Object.defineProperty(th,"isAxiosError",{value:!0});de.from=(e,t,n,r,s,o)=>{const l=Object.create(th);I.toFlatObject(e,l,function(m){return m!==Error.prototype},u=>u!=="isAxiosError");const a=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return de.call(l,a,c,n,r,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",o&&Object.assign(l,o),l};const Vv=null;function Ya(e){return I.isPlainObject(e)||I.isArray(e)}function rh(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function Qd(e,t,n){return e?e.concat(t).map(function(s,o){return s=rh(s),!n&&o?"["+s+"]":s}).join(n?".":""):t}function Hv(e){return I.isArray(e)&&!e.some(Ya)}const Gv=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function cl(e,t,n){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=I.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,S){return!I.isUndefined(S[x])});const r=n.metaTokens,s=n.visitor||m,o=n.dots,l=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(I.isDate(h))return h.toISOString();if(I.isBoolean(h))return h.toString();if(!c&&I.isBlob(h))throw new de("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(h)||I.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function m(h,x,S){let g=h;if(h&&!S&&typeof h=="object"){if(I.endsWith(x,"{}"))x=r?x:x.slice(0,-2),h=JSON.stringify(h);else if(I.isArray(h)&&Hv(h)||(I.isFileList(h)||I.endsWith(x,"[]"))&&(g=I.toArray(h)))return x=rh(x),g.forEach(function(y,_){!(I.isUndefined(y)||y===null)&&t.append(l===!0?Qd([x],_,o):l===null?x:x+"[]",u(y))}),!1}return Ya(h)?!0:(t.append(Qd(S,x,o),u(h)),!1)}const d=[],w=Object.assign(Gv,{defaultVisitor:m,convertValue:u,isVisitable:Ya});function C(h,x){if(!I.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+x.join("."));d.push(h),I.forEach(h,function(g,p){(!(I.isUndefined(g)||g===null)&&s.call(t,g,I.isString(p)?p.trim():p,x,w))===!0&&C(g,x?x.concat(p):[p])}),d.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return C(e),t}function Jd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function fu(e,t){this._pairs=[],e&&cl(e,this,t)}const sh=fu.prototype;sh.append=function(t,n){this._pairs.push([t,n])};sh.toString=function(t){const n=t?function(r){return t.call(this,r,Jd)}:Jd;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Wv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ih(e,t,n){if(!t)return e;const r=n&&n.encode||Wv;I.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(s?o=s(t,n):o=I.isURLSearchParams(t)?t.toString():new fu(t,n).toString(r),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class qv{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Yd=qv,oh={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kv=typeof URLSearchParams<"u"?URLSearchParams:fu,Qv=typeof FormData<"u"?FormData:null,Jv=typeof Blob<"u"?Blob:null,Yv={isBrowser:!0,classes:{URLSearchParams:Kv,FormData:Qv,Blob:Jv},protocols:["http","https","file","blob","url","data"]},mu=typeof window<"u"&&typeof document<"u",Xa=typeof navigator=="object"&&navigator||void 0,Xv=mu&&(!Xa||["ReactNative","NativeScript","NS"].indexOf(Xa.product)<0),Zv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),e1=mu&&window.location.href||"http://localhost",t1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mu,hasStandardBrowserEnv:Xv,hasStandardBrowserWebWorkerEnv:Zv,navigator:Xa,origin:e1},Symbol.toStringTag,{value:"Module"})),it={...t1,...Yv};function n1(e,t){return cl(e,new it.classes.URLSearchParams,{visitor:function(n,r,s,o){return it.isNode&&I.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function r1(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function s1(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}function lh(e){function t(n,r,s,o){let l=n[o++];if(l==="__proto__")return!0;const a=Number.isFinite(+l),c=o>=n.length;return l=!l&&I.isArray(s)?s.length:l,c?(I.hasOwnProp(s,l)?s[l]=[s[l],r]:s[l]=r,!a):((!s[l]||!I.isObject(s[l]))&&(s[l]=[]),t(n,r,s[l],o)&&I.isArray(s[l])&&(s[l]=s1(s[l])),!a)}if(I.isFormData(e)&&I.isFunction(e.entries)){const n={};return I.forEachEntry(e,(r,s)=>{t(r1(r),s,n,0)}),n}return null}function i1(e,t,n){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const pu={transitional:oh,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,o=I.isObject(t);if(o&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return s?JSON.stringify(lh(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)||I.isReadableStream(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return n1(t,this.formSerializer).toString();if((a=I.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return cl(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(n.setContentType("application/json",!1),i1(t)):t}],transformResponse:[function(t){const n=this.transitional||pu.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(I.isResponse(t)||I.isReadableStream(t))return t;if(t&&I.isString(t)&&(r&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(l)throw a.name==="SyntaxError"?de.from(a,de.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:it.classes.FormData,Blob:it.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],e=>{pu.headers[e]={}});const hu=pu,o1=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),l1=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),r=l.substring(s+1).trim(),!(!n||t[n]&&o1[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Xd=Symbol("internals");function ys(e){return e&&String(e).trim().toLowerCase()}function Zi(e){return e===!1||e==null?e:I.isArray(e)?e.map(Zi):String(e)}function a1(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const c1=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Gl(e,t,n,r,s){if(I.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!I.isString(t)){if(I.isString(r))return t.indexOf(r)!==-1;if(I.isRegExp(r))return r.test(t)}}function u1(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function d1(e,t){const n=I.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,o,l){return this[r].call(this,t,s,o,l)},configurable:!0})})}class ul{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function o(a,c,u){const m=ys(c);if(!m)throw new Error("header name must be a non-empty string");const d=I.findKey(s,m);(!d||s[d]===void 0||u===!0||u===void 0&&s[d]!==!1)&&(s[d||c]=Zi(a))}const l=(a,c)=>I.forEach(a,(u,m)=>o(u,m,c));if(I.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(I.isString(t)&&(t=t.trim())&&!c1(t))l(l1(t),n);else if(I.isObject(t)&&I.isIterable(t)){let a={},c,u;for(const m of t){if(!I.isArray(m))throw TypeError("Object iterator must return a key-value pair");a[u=m[0]]=(c=a[u])?I.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}l(a,n)}else t!=null&&o(n,t,r);return this}get(t,n){if(t=ys(t),t){const r=I.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return a1(s);if(I.isFunction(n))return n.call(this,s,r);if(I.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ys(t),t){const r=I.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Gl(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function o(l){if(l=ys(l),l){const a=I.findKey(r,l);a&&(!n||Gl(r,r[a],a,n))&&(delete r[a],s=!0)}}return I.isArray(t)?t.forEach(o):o(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const o=n[r];(!t||Gl(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const n=this,r={};return I.forEach(this,(s,o)=>{const l=I.findKey(r,o);if(l){n[l]=Zi(s),delete n[o];return}const a=t?u1(o):String(o).trim();a!==o&&delete n[o],n[a]=Zi(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return I.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&I.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Xd]=this[Xd]={accessors:{}}).accessors,s=this.prototype;function o(l){const a=ys(l);r[a]||(d1(s,l),r[a]=!0)}return I.isArray(t)?t.forEach(o):o(t),this}}ul.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(ul.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});I.freezeMethods(ul);const Zt=ul;function Wl(e,t){const n=this||hu,r=t||n,s=Zt.from(r.headers);let o=r.data;return I.forEach(e,function(a){o=a.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function ah(e){return!!(e&&e.__CANCEL__)}function os(e,t,n){de.call(this,e??"canceled",de.ERR_CANCELED,t,n),this.name="CanceledError"}I.inherits(os,de,{__CANCEL__:!0});function ch(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new de("Request failed with status code "+n.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function f1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function m1(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,o=0,l;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),m=r[o];l||(l=u),n[s]=c,r[s]=u;let d=o,w=0;for(;d!==s;)w+=n[d++],d=d%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),u-l<t)return;const C=m&&u-m;return C?Math.round(w*1e3/C):void 0}}function p1(e,t){let n=0,r=1e3/t,s,o;const l=(u,m=Date.now())=>{n=m,s=null,o&&(clearTimeout(o),o=null),e(...u)};return[(...u)=>{const m=Date.now(),d=m-n;d>=r?l(u,m):(s=u,o||(o=setTimeout(()=>{o=null,l(s)},r-d)))},()=>s&&l(s)]}const Mo=(e,t,n=3)=>{let r=0;const s=m1(50,250);return p1(o=>{const l=o.loaded,a=o.lengthComputable?o.total:void 0,c=l-r,u=s(c),m=l<=a;r=l;const d={loaded:l,total:a,progress:a?l/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&m?(a-l)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},Zd=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},ef=e=>(...t)=>I.asap(()=>e(...t)),h1=it.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,it.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(it.origin),it.navigator&&/(msie|trident)/i.test(it.navigator.userAgent)):()=>!0,g1=it.hasStandardBrowserEnv?{write(e,t,n,r,s,o){const l=[e+"="+encodeURIComponent(t)];I.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),I.isString(r)&&l.push("path="+r),I.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function x1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function y1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function uh(e,t,n){let r=!x1(t);return e&&(r||n==!1)?y1(e,t):t}const tf=e=>e instanceof Zt?{...e}:e;function yr(e,t){t=t||{};const n={};function r(u,m,d,w){return I.isPlainObject(u)&&I.isPlainObject(m)?I.merge.call({caseless:w},u,m):I.isPlainObject(m)?I.merge({},m):I.isArray(m)?m.slice():m}function s(u,m,d,w){if(I.isUndefined(m)){if(!I.isUndefined(u))return r(void 0,u,d,w)}else return r(u,m,d,w)}function o(u,m){if(!I.isUndefined(m))return r(void 0,m)}function l(u,m){if(I.isUndefined(m)){if(!I.isUndefined(u))return r(void 0,u)}else return r(void 0,m)}function a(u,m,d){if(d in t)return r(u,m);if(d in e)return r(void 0,u)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:a,headers:(u,m,d)=>s(tf(u),tf(m),d,!0)};return I.forEach(Object.keys({...e,...t}),function(m){const d=c[m]||s,w=d(e[m],t[m],m);I.isUndefined(w)&&d!==a||(n[m]=w)}),n}const dh=e=>{const t=yr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:a}=t;if(t.headers=l=Zt.from(l),t.url=ih(uh(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&l.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),I.isFormData(n)){if(it.hasStandardBrowserEnv||it.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(I.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([m,d])=>{u.includes(m.toLowerCase())&&l.set(m,d)})}}if(it.hasStandardBrowserEnv&&(r&&I.isFunction(r)&&(r=r(t)),r||r!==!1&&h1(t.url))){const c=s&&o&&g1.read(o);c&&l.set(s,c)}return t},v1=typeof XMLHttpRequest<"u",w1=v1&&function(e){return new Promise(function(n,r){const s=dh(e);let o=s.data;const l=Zt.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,m,d,w,C,h;function x(){C&&C(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(m),s.signal&&s.signal.removeEventListener("abort",m)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function g(){if(!S)return;const y=Zt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!a||a==="text"||a==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:y,config:e,request:S};ch(function(U){n(U),x()},function(U){r(U),x()},R),S=null}"onloadend"in S?S.onloadend=g:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(g)},S.onabort=function(){S&&(r(new de("Request aborted",de.ECONNABORTED,e,S)),S=null)},S.onerror=function(_){const R=_&&_.message?_.message:"Network Error",F=new de(R,de.ERR_NETWORK,e,S);F.event=_||null,r(F),S=null},S.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const R=s.transitional||oh;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),r(new de(_,R.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,e,S)),S=null},o===void 0&&l.setContentType(null),"setRequestHeader"in S&&I.forEach(l.toJSON(),function(_,R){S.setRequestHeader(R,_)}),I.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),a&&a!=="json"&&(S.responseType=s.responseType),u&&([w,h]=Mo(u,!0),S.addEventListener("progress",w)),c&&S.upload&&([d,C]=Mo(c),S.upload.addEventListener("progress",d),S.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(m=y=>{S&&(r(!y||y.type?new os(null,e,S):y),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(m),s.signal&&(s.signal.aborted?m():s.signal.addEventListener("abort",m)));const p=f1(s.url);if(p&&it.protocols.indexOf(p)===-1){r(new de("Unsupported protocol "+p+":",de.ERR_BAD_REQUEST,e));return}S.send(o||null)})},N1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const o=function(u){if(!s){s=!0,a();const m=u instanceof Error?u:this.reason;r.abort(m instanceof de?m:new os(m instanceof Error?m.message:m))}};let l=t&&setTimeout(()=>{l=null,o(new de(`timeout ${t} of ms exceeded`,de.ETIMEDOUT))},t);const a=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),e=null)};e.forEach(u=>u.addEventListener("abort",o));const{signal:c}=r;return c.unsubscribe=()=>I.asap(a),c}},j1=N1,S1=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},k1=async function*(e,t){for await(const n of b1(e))yield*S1(n,t)},b1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},nf=(e,t,n,r)=>{const s=k1(e,t);let o=0,l,a=c=>{l||(l=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:m}=await s.next();if(u){a(),c.close();return}let d=m.byteLength;if(n){let w=o+=d;n(w)}c.enqueue(new Uint8Array(m))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},rf=64*1024,{isFunction:Li}=I,C1=(({Request:e,Response:t})=>({Request:e,Response:t}))(I.global),{ReadableStream:sf,TextEncoder:of}=I.global,lf=(e,...t)=>{try{return!!e(...t)}catch{return!1}},E1=e=>{e=I.merge.call({skipUndefined:!0},C1,e);const{fetch:t,Request:n,Response:r}=e,s=t?Li(t):typeof fetch=="function",o=Li(n),l=Li(r);if(!s)return!1;const a=s&&Li(sf),c=s&&(typeof of=="function"?(h=>x=>h.encode(x))(new of):async h=>new Uint8Array(await new n(h).arrayBuffer())),u=o&&a&&lf(()=>{let h=!1;const x=new n(it.origin,{body:new sf,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!x}),m=l&&a&&lf(()=>I.isReadableStream(new r("").body)),d={stream:m&&(h=>h.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!d[h]&&(d[h]=(x,S)=>{let g=x&&x[h];if(g)return g.call(x);throw new de(`Response type '${h}' is not supported`,de.ERR_NOT_SUPPORT,S)})});const w=async h=>{if(h==null)return 0;if(I.isBlob(h))return h.size;if(I.isSpecCompliantForm(h))return(await new n(it.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(I.isArrayBufferView(h)||I.isArrayBuffer(h))return h.byteLength;if(I.isURLSearchParams(h)&&(h=h+""),I.isString(h))return(await c(h)).byteLength},C=async(h,x)=>{const S=I.toFiniteNumber(h.getContentLength());return S??w(x)};return async h=>{let{url:x,method:S,data:g,signal:p,cancelToken:y,timeout:_,onDownloadProgress:R,onUploadProgress:F,responseType:U,headers:H,withCredentials:X="same-origin",fetchOptions:W}=dh(h),V=t||fetch;U=U?(U+"").toLowerCase():"text";let q=j1([p,y&&y.toAbortSignal()],_),O=null;const J=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let ie;try{if(F&&u&&S!=="get"&&S!=="head"&&(ie=await C(H,g))!==0){let A=new n(x,{method:"POST",body:g,duplex:"half"}),z;if(I.isFormData(g)&&(z=A.headers.get("content-type"))&&H.setContentType(z),A.body){const[re,ne]=Zd(ie,Mo(ef(F)));g=nf(A.body,rf,re,ne)}}I.isString(X)||(X=X?"include":"omit");const ee=o&&"credentials"in n.prototype,le={...W,signal:q,method:S.toUpperCase(),headers:H.normalize().toJSON(),body:g,duplex:"half",credentials:ee?X:void 0};O=o&&new n(x,le);let $=await(o?V(O,W):V(x,le));const k=m&&(U==="stream"||U==="response");if(m&&(R||k&&J)){const A={};["status","statusText","headers"].forEach(ve=>{A[ve]=$[ve]});const z=I.toFiniteNumber($.headers.get("content-length")),[re,ne]=R&&Zd(z,Mo(ef(R),!0))||[];$=new r(nf($.body,rf,re,()=>{ne&&ne(),J&&J()}),A)}U=U||"text";let M=await d[I.findKey(d,U)||"text"]($,h);return!k&&J&&J(),await new Promise((A,z)=>{ch(A,z,{data:M,headers:Zt.from($.headers),status:$.status,statusText:$.statusText,config:h,request:O})})}catch(ee){throw J&&J(),ee&&ee.name==="TypeError"&&/Load failed|fetch/i.test(ee.message)?Object.assign(new de("Network Error",de.ERR_NETWORK,h,O),{cause:ee.cause||ee}):de.from(ee,ee&&ee.code,h,O)}}},_1=new Map,fh=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:s}=t,o=[r,s,n];let l=o.length,a=l,c,u,m=_1;for(;a--;)c=o[a],u=m.get(c),u===void 0&&m.set(c,u=a?new Map:E1(t)),m=u;return u};fh();const Za={http:Vv,xhr:w1,fetch:{get:fh}};I.forEach(Za,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const af=e=>`- ${e}`,T1=e=>I.isFunction(e)||e===null||e===!1,mh={getAdapter:(e,t)=>{e=I.isArray(e)?e:[e];const{length:n}=e;let r,s;const o={};for(let l=0;l<n;l++){r=e[l];let a;if(s=r,!T1(r)&&(s=Za[(a=String(r)).toLowerCase()],s===void 0))throw new de(`Unknown adapter '${a}'`);if(s&&(I.isFunction(s)||(s=s.get(t))))break;o[a||"#"+l]=s}if(!s){const l=Object.entries(o).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?l.length>1?`since :
`+l.map(af).join(`
`):" "+af(l[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:Za};function ql(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new os(null,e)}function cf(e){return ql(e),e.headers=Zt.from(e.headers),e.data=Wl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),mh.getAdapter(e.adapter||hu.adapter,e)(e).then(function(r){return ql(e),r.data=Wl.call(e,e.transformResponse,r),r.headers=Zt.from(r.headers),r},function(r){return ah(r)||(ql(e),r&&r.response&&(r.response.data=Wl.call(e,e.transformResponse,r.response),r.response.headers=Zt.from(r.response.headers))),Promise.reject(r)})}const ph="1.12.2",dl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{dl[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const uf={};dl.transitional=function(t,n,r){function s(o,l){return"[Axios v"+ph+"] Transitional option '"+o+"'"+l+(r?". "+r:"")}return(o,l,a)=>{if(t===!1)throw new de(s(l," has been removed"+(n?" in "+n:"")),de.ERR_DEPRECATED);return n&&!uf[l]&&(uf[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,l,a):!0}};dl.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function R1(e,t,n){if(typeof e!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],l=t[o];if(l){const a=e[o],c=a===void 0||l(a,o,e);if(c!==!0)throw new de("option "+o+" must be "+c,de.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new de("Unknown option "+o,de.ERR_BAD_OPTION)}}const eo={assertOptions:R1,validators:dl},on=eo.validators;class Oo{constructor(t){this.defaults=t||{},this.interceptors={request:new Yd,response:new Yd}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=yr(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:o}=n;r!==void 0&&eo.assertOptions(r,{silentJSONParsing:on.transitional(on.boolean),forcedJSONParsing:on.transitional(on.boolean),clarifyTimeoutError:on.transitional(on.boolean)},!1),s!=null&&(I.isFunction(s)?n.paramsSerializer={serialize:s}:eo.assertOptions(s,{encode:on.function,serialize:on.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),eo.assertOptions(n,{baseUrl:on.spelling("baseURL"),withXsrfToken:on.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=o&&I.merge(o.common,o[n.method]);o&&I.forEach(["delete","get","head","post","put","patch","common"],h=>{delete o[h]}),n.headers=Zt.concat(l,o);const a=[];let c=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(c=c&&x.synchronous,a.unshift(x.fulfilled,x.rejected))});const u=[];this.interceptors.response.forEach(function(x){u.push(x.fulfilled,x.rejected)});let m,d=0,w;if(!c){const h=[cf.bind(this),void 0];for(h.unshift(...a),h.push(...u),w=h.length,m=Promise.resolve(n);d<w;)m=m.then(h[d++],h[d++]);return m}w=a.length;let C=n;for(;d<w;){const h=a[d++],x=a[d++];try{C=h(C)}catch(S){x.call(this,S);break}}try{m=cf.call(this,C)}catch(h){return Promise.reject(h)}for(d=0,w=u.length;d<w;)m=m.then(u[d++],u[d++]);return m}getUri(t){t=yr(this.defaults,t);const n=uh(t.baseURL,t.url,t.allowAbsoluteUrls);return ih(n,t.params,t.paramsSerializer)}}I.forEach(["delete","get","head","options"],function(t){Oo.prototype[t]=function(n,r){return this.request(yr(r||{},{method:t,url:n,data:(r||{}).data}))}});I.forEach(["post","put","patch"],function(t){function n(r){return function(o,l,a){return this.request(yr(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}Oo.prototype[t]=n(),Oo.prototype[t+"Form"]=n(!0)});const to=Oo;class gu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(s=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](s);r._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(a=>{r.subscribe(a),o=a}).then(s);return l.cancel=function(){r.unsubscribe(o)},l},t(function(o,l,a){r.reason||(r.reason=new os(o,l,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new gu(function(s){t=s}),cancel:t}}}const I1=gu;function A1(e){return function(n){return e.apply(null,n)}}function P1(e){return I.isObject(e)&&e.isAxiosError===!0}const ec={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ec).forEach(([e,t])=>{ec[t]=e});const M1=ec;function hh(e){const t=new to(e),n=qp(to.prototype.request,t);return I.extend(n,to.prototype,t,{allOwnKeys:!0}),I.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return hh(yr(e,s))},n}const Be=hh(hu);Be.Axios=to;Be.CanceledError=os;Be.CancelToken=I1;Be.isCancel=ah;Be.VERSION=ph;Be.toFormData=cl;Be.AxiosError=de;Be.Cancel=Be.CanceledError;Be.all=function(t){return Promise.all(t)};Be.spread=A1;Be.isAxiosError=P1;Be.mergeConfig=yr;Be.AxiosHeaders=Zt;Be.formToJSON=e=>lh(I.isHTMLForm(e)?new FormData(e):e);Be.getAdapter=mh.getAdapter;Be.HttpStatusCode=M1;Be.default=Be;const O1=Be,gh="http://13.204.195.88:5001/api",be=gh.replace(/\/?api\/?$/,""),ue=O1.create({baseURL:gh,headers:{"Content-Type":"application/json"}});ue.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));ue.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const Os={login:(e,t)=>ue.post("/auth/login",{email:e,password:t}),registerSuperAdmin:(e,t,n)=>ue.post("/auth/register-superadmin",{name:e,email:t,password:n}),getCurrentUser:()=>ue.get("/auth/me"),checkSuperAdmin:()=>ue.get("/auth/check-superadmin")},ht={getUsers:()=>ue.get("/users"),getActiveUsers:()=>ue.get("/users/active"),createUser:e=>ue.post("/users",e),updateUser:(e,t)=>ue.put(`/users/${e}`,t),deleteUser:e=>ue.delete(`/users/${e}`),toggleUserStatus:e=>ue.put(`/users/${e}/toggle-status`),updateProfile:e=>{const t=e instanceof FormData?e:(()=>{const n=new FormData;return Object.entries(e||{}).forEach(([r,s])=>{s!=null&&n.append(r,s)}),n})();return ue.put("/users/profile",t,{headers:{"Content-Type":"multipart/form-data"}})}},Jt={getGroups:()=>ue.get("/groups"),getMyGroups:()=>ue.get("/groups/my-groups"),createGroup:e=>ue.post("/groups",e),addMembers:(e,t)=>ue.post(`/groups/${e}/members`,{members:t}),removeMember:(e,t)=>ue.delete(`/groups/${e}/members/${t}`),updateGroup:(e,t)=>ue.put(`/groups/${e}`,t),deleteGroup:e=>ue.delete(`/groups/${e}`),uploadGroupAvatar:(e,t)=>ue.post(`/groups/${e}/avatar`,t,{headers:{"Content-Type":"multipart/form-data"}})},Le={getPersonalMessages:e=>ue.get(`/messages/personal/${e}`),getGroupMessages:e=>ue.get(`/messages/group/${e}`),sendPersonalMessage:e=>e instanceof FormData?ue.post("/messages/personal",e,{headers:{"Content-Type":"multipart/form-data"}}):ue.post("/messages/personal",e),sendGroupMessage:e=>e instanceof FormData?ue.post("/messages/group",e,{headers:{"Content-Type":"multipart/form-data"}}):ue.post("/messages/group",e),markAsRead:e=>ue.put(`/messages/${e}/read`),getUnreadCount:()=>ue.get("/messages/unread/count"),getChatState:()=>ue.get("/messages/chat-state"),updateChatState:e=>ue.post("/messages/chat-state",e),forwardMessage:e=>ue.post("/messages/forward",e),editMessage:(e,t)=>ue.put(`/messages/${e}`,{message:t})},ni={getHistory:(e={})=>ue.get("/calls/history",{params:e}),initiate:(e,t="voice",n=null)=>ue.post("/calls/initiate",{receiverId:e,callType:t,offer:n}),answer:(e,t)=>ue.put(`/calls/${e}/answer`,{answer:t}),decline:e=>ue.put(`/calls/${e}/decline`),end:e=>ue.put(`/calls/${e}/end`),addIceCandidate:(e,t,n,r)=>ue.post(`/calls/${e}/ice-candidate`,{candidate:t,sdpMLineIndex:n,sdpMid:r}),getDetails:e=>ue.get(`/calls/${e}`),updateNotes:(e,t)=>ue.put(`/calls/${e}/notes`,{notes:t}),delete:e=>ue.delete(`/calls/${e}`)},L1=Object.freeze(Object.defineProperty({__proto__:null,API_ORIGIN:be,authAPI:Os,callsAPI:ni,default:ue,groupsAPI:Jt,messagesAPI:Le,usersAPI:ht},Symbol.toStringTag,{value:"Module"})),xh=v.createContext(),pn=()=>{const e=v.useContext(xh);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},U1=({children:e})=>{const[t,n]=v.useState(null),[r,s]=v.useState(!0);v.useEffect(()=>{localStorage.getItem("token")?Os.getCurrentUser().then(m=>{n(m.data.user)}).catch(m=>{console.error("Auth check failed:",m),localStorage.removeItem("token")}).finally(()=>{s(!1)}):s(!1)},[]);const c={user:t,setUser:n,login:async(u,m)=>{var d,w,C,h;try{const x=await Os.login(u,m),{token:S,user:g}=x.data;return localStorage.setItem("token",S),n(g),{success:!0,data:x.data}}catch(x){return(w=(d=x.response)==null?void 0:d.data)!=null&&w.disabled?{success:!1,error:"Your account has been disabled by administrator",disabled:!0}:{success:!1,error:((h=(C=x.response)==null?void 0:C.data)==null?void 0:h.message)||"Login failed"}}},registerSuperAdmin:async(u,m,d)=>{var w,C;try{const h=await Os.registerSuperAdmin(u,m,d),{token:x,user:S}=h.data;return localStorage.setItem("token",x),n(S),{success:!0,data:h.data}}catch(h){return{success:!1,error:((C=(w=h.response)==null?void 0:w.data)==null?void 0:C.message)||"Registration failed"}}},logout:()=>{localStorage.removeItem("token"),n(null)},loading:r};return i.jsx(xh.Provider,{value:c,children:e})},F1="modulepreload",$1=function(e){return"/"+e},df={},z1=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=$1(o),o in df)return;df[o]=!0;const l=o.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!r)for(let m=s.length-1;m>=0;m--){const d=s[m];if(d.href===o&&(!l||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":F1,l||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),l)return new Promise((m,d)=>{u.addEventListener("load",m),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t()).catch(o=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o})},mn=Object.create(null);mn.open="0";mn.close="1";mn.ping="2";mn.pong="3";mn.message="4";mn.upgrade="5";mn.noop="6";const no=Object.create(null);Object.keys(mn).forEach(e=>{no[mn[e]]=e});const tc={type:"error",data:"parser error"},yh=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",vh=typeof ArrayBuffer=="function",wh=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,xu=({type:e,data:t},n,r)=>yh&&t instanceof Blob?n?r(t):ff(t,r):vh&&(t instanceof ArrayBuffer||wh(t))?n?r(t):ff(new Blob([t]),r):r(mn[e]+(t||"")),ff=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function mf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Kl;function D1(e,t){if(yh&&e.data instanceof Blob)return e.data.arrayBuffer().then(mf).then(t);if(vh&&(e.data instanceof ArrayBuffer||wh(e.data)))return t(mf(e.data));xu(e,!1,n=>{Kl||(Kl=new TextEncoder),t(Kl.encode(n))})}const pf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ks=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<pf.length;e++)ks[pf.charCodeAt(e)]=e;const B1=e=>{let t=e.length*.75,n=e.length,r,s=0,o,l,a,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),m=new Uint8Array(u);for(r=0;r<n;r+=4)o=ks[e.charCodeAt(r)],l=ks[e.charCodeAt(r+1)],a=ks[e.charCodeAt(r+2)],c=ks[e.charCodeAt(r+3)],m[s++]=o<<2|l>>4,m[s++]=(l&15)<<4|a>>2,m[s++]=(a&3)<<6|c&63;return u},V1=typeof ArrayBuffer=="function",yu=(e,t)=>{if(typeof e!="string")return{type:"message",data:Nh(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:H1(e.substring(1),t)}:no[n]?e.length>1?{type:no[n],data:e.substring(1)}:{type:no[n]}:tc},H1=(e,t)=>{if(V1){const n=B1(e);return Nh(n,t)}else return{base64:!0,data:e}},Nh=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},jh=String.fromCharCode(30),G1=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((o,l)=>{xu(o,!1,a=>{r[l]=a,++s===n&&t(r.join(jh))})})},W1=(e,t)=>{const n=e.split(jh),r=[];for(let s=0;s<n.length;s++){const o=yu(n[s],t);if(r.push(o),o.type==="error")break}return r};function q1(){return new TransformStream({transform(e,t){D1(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,r)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let Ql;function Ui(e){return e.reduce((t,n)=>t+n.length,0)}function Fi(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function K1(e,t){Ql||(Ql=new TextDecoder);const n=[];let r=0,s=-1,o=!1;return new TransformStream({transform(l,a){for(n.push(l);;){if(r===0){if(Ui(n)<1)break;const c=Fi(n,1);o=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Ui(n)<2)break;const c=Fi(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ui(n)<8)break;const c=Fi(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),m=u.getUint32(0);if(m>Math.pow(2,53-32)-1){a.enqueue(tc);break}s=m*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ui(n)<s)break;const c=Fi(n,s);a.enqueue(yu(o?c:Ql.decode(c),t)),r=0}if(s===0||s>e){a.enqueue(tc);break}}}})}const Sh=4;function De(e){if(e)return Q1(e)}function Q1(e){for(var t in De.prototype)e[t]=De.prototype[t];return e}De.prototype.on=De.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};De.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};De.prototype.off=De.prototype.removeListener=De.prototype.removeAllListeners=De.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};De.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};De.prototype.emitReserved=De.prototype.emit;De.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};De.prototype.hasListeners=function(e){return!!this.listeners(e).length};const fl=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),Ot=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),J1="arraybuffer";function kh(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const Y1=Ot.setTimeout,X1=Ot.clearTimeout;function ml(e,t){t.useNativeTimers?(e.setTimeoutFn=Y1.bind(Ot),e.clearTimeoutFn=X1.bind(Ot)):(e.setTimeoutFn=Ot.setTimeout.bind(Ot),e.clearTimeoutFn=Ot.clearTimeout.bind(Ot))}const Z1=1.33;function ew(e){return typeof e=="string"?tw(e):Math.ceil((e.byteLength||e.size)*Z1)}function tw(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function bh(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function nw(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function rw(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class sw extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class vu extends De{constructor(t){super(),this.writable=!1,ml(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new sw(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=yu(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=nw(t);return n.length?"?"+n:""}}class iw extends vu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};W1(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,G1(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=bh()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Ch=!1;try{Ch=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ow=Ch;function lw(){}class aw extends iw{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class fn extends De{constructor(t,n,r){super(),this.createRequest=t,ml(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=kh(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=fn.requestsCount++,fn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=lw,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete fn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fn.requestsCount=0;fn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",hf);else if(typeof addEventListener=="function"){const e="onpagehide"in Ot?"pagehide":"unload";addEventListener(e,hf,!1)}}function hf(){for(let e in fn.requests)fn.requests.hasOwnProperty(e)&&fn.requests[e].abort()}const cw=function(){const e=Eh({xdomain:!1});return e&&e.responseType!==null}();class uw extends aw{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=cw&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new fn(Eh,this.uri(),t)}}function Eh(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||ow))return new XMLHttpRequest}catch{}if(!t)try{return new Ot[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const _h=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class dw extends vu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=_h?{}:kh(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;xu(r,this.supportsBinary,o=>{try{this.doWrite(r,o)}catch{}s&&fl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=bh()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Jl=Ot.WebSocket||Ot.MozWebSocket;class fw extends dw{createSocket(t,n,r){return _h?new Jl(t,n,r):n?new Jl(t,n):new Jl(t)}doWrite(t,n){this.ws.send(n)}}class mw extends vu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=K1(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=q1();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const o=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),o())}).catch(a=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&fl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const pw={websocket:fw,webtransport:mw,polling:uw},hw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,gw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nc(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=hw.exec(e||""),o={},l=14;for(;l--;)o[gw[l]]=s[l]||"";return n!=-1&&r!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=xw(o,o.path),o.queryKey=yw(o,o.query),o}function xw(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function yw(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,o){s&&(n[s]=o)}),n}const rc=typeof addEventListener=="function"&&typeof removeEventListener=="function",ro=[];rc&&addEventListener("offline",()=>{ro.forEach(e=>e())},!1);class Jn extends De{constructor(t,n){if(super(),this.binaryType=J1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=nc(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=nc(n.host).host);ml(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=rw(this.opts.query)),rc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ro.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Sh,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Jn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Jn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=ew(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,fl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const o={type:t,data:n,options:r};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Jn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),rc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=ro.indexOf(this._offlineEventListener);r!==-1&&ro.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Jn.protocol=Sh;class vw extends Jn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Jn.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Jn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(m(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const w=new Error("probe error");w.transport=n.name,this.emitReserved("upgradeError",w)}}))};function o(){r||(r=!0,m(),n.close(),n=null)}const l=d=>{const w=new Error("probe error: "+d);w.transport=n.name,o(),this.emitReserved("upgradeError",w)};function a(){l("transport closed")}function c(){l("socket closed")}function u(d){n&&d.name!==n.name&&o()}const m=()=>{n.removeListener("open",s),n.removeListener("error",l),n.removeListener("close",a),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",l),n.once("close",a),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let ww=class extends vw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>pw[s]).filter(s=>!!s)),super(t,r)}};function Nw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=nc(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+t,r.href=r.protocol+"://"+o+(n&&n.port===r.port?"":":"+r.port),r}const jw=typeof ArrayBuffer=="function",Sw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Th=Object.prototype.toString,kw=typeof Blob=="function"||typeof Blob<"u"&&Th.call(Blob)==="[object BlobConstructor]",bw=typeof File=="function"||typeof File<"u"&&Th.call(File)==="[object FileConstructor]";function wu(e){return jw&&(e instanceof ArrayBuffer||Sw(e))||kw&&e instanceof Blob||bw&&e instanceof File}function so(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(so(e[n]))return!0;return!1}if(wu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return so(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&so(e[n]))return!0;return!1}function Cw(e){const t=[],n=e.data,r=e;return r.data=sc(n,t),r.attachments=t.length,{packet:r,buffers:t}}function sc(e,t){if(!e)return e;if(wu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=sc(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=sc(e[r],t));return n}return e}function Ew(e,t){return e.data=ic(e.data,t),delete e.attachments,e}function ic(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=ic(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=ic(e[n],t));return e}const _w=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Tw=5;var ye;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ye||(ye={}));class Rw{constructor(t){this.replacer=t}encode(t){return(t.type===ye.EVENT||t.type===ye.ACK)&&so(t)?this.encodeAsBinary({type:t.type===ye.EVENT?ye.BINARY_EVENT:ye.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===ye.BINARY_EVENT||t.type===ye.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Cw(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function gf(e){return Object.prototype.toString.call(e)==="[object Object]"}class Nu extends De{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===ye.BINARY_EVENT;r||n.type===ye.BINARY_ACK?(n.type=r?ye.EVENT:ye.ACK,this.reconstructor=new Iw(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(wu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(ye[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ye.BINARY_EVENT||r.type===ye.BINARY_ACK){const o=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(o,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(o,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const o=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(o,n+1))}if(t.charAt(++n)){const o=this.tryParse(t.substr(n));if(Nu.isPayloadValid(r.type,o))r.data=o;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case ye.CONNECT:return gf(n);case ye.DISCONNECT:return n===void 0;case ye.CONNECT_ERROR:return typeof n=="string"||gf(n);case ye.EVENT:case ye.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&_w.indexOf(n[0])===-1);case ye.ACK:case ye.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Iw{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Ew(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Aw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Nu,Encoder:Rw,get PacketType(){return ye},protocol:Tw},Symbol.toStringTag,{value:"Module"}));function Kt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Pw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Rh extends De{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Kt(t,"open",this.onopen.bind(this)),Kt(t,"packet",this.onpacket.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,o;if(Pw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:ye.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const m=this.ids++,d=n.pop();this._registerAckCallback(m,d),l.id=m}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),l=(...a)=>{this.io.clearTimeoutFn(o),n.apply(this,a)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,s)=>{const o=(l,a)=>l?s(l):r(a);o.withError=!0,n.push(o),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...o)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...o)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ye.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ye.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ye.EVENT:case ye.BINARY_EVENT:this.onevent(t);break;case ye.ACK:case ye.BINARY_ACK:this.onack(t);break;case ye.DISCONNECT:this.ondisconnect();break;case ye.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:ye.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ye.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function ls(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ls.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ls.prototype.reset=function(){this.attempts=0};ls.prototype.setMin=function(e){this.ms=e};ls.prototype.setMax=function(e){this.max=e};ls.prototype.setJitter=function(e){this.jitter=e};class oc extends De{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,ml(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ls({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||Aw;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new ww(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Kt(n,"open",function(){r.onopen(),t&&t()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},l=Kt(n,"error",o);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Kt(t,"ping",this.onping.bind(this)),Kt(t,"data",this.ondata.bind(this)),Kt(t,"error",this.onerror.bind(this)),Kt(t,"close",this.onclose.bind(this)),Kt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){fl(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Rh(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const vs={};function Ls(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Nw(e,t.path||"/socket.io"),r=n.source,s=n.id,o=n.path,l=vs[s]&&o in vs[s].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return a?c=new oc(r,t):(vs[s]||(vs[s]=new oc(r,t)),c=vs[s]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Ls,{Manager:oc,Socket:Rh,io:Ls,connect:Ls});const Ih=v.createContext(),mi=()=>{const e=v.useContext(Ih);if(!e)throw new Error("useSocket must be used within a SocketProvider");return e},Mw=({children:e,user:t})=>{const[n,r]=v.useState(null),[s,o]=v.useState(!1),[l,a]=v.useState([]),[c,u]=v.useState(0),[m,d]=v.useState(Date.now()),[w,C]=v.useState([]),h=M=>{if(t&&(t.role==="admin"||t.role==="superadmin")){const z=` DISABLED USER LOGIN ATTEMPT

${M.userName} (${M.userEmail}) is trying to access the system`;G.error(z,{duration:8e3,position:"top-center",style:{background:"#fef2f2",color:"#dc2626",border:"2px solid #ef4444",fontSize:"14px",fontWeight:"bold",padding:"16px",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",whiteSpace:"pre-line"},icon:"",className:"toast-admin-alert"});const re=Date.now()+Math.random();C(ne=>[...ne,{...M,id:re}])}},x=async M=>{try{const{usersAPI:A}=await z1(()=>Promise.resolve().then(()=>L1),void 0);await A.toggleUserStatus(M);const z=w.find(re=>re.userId===M);C(re=>re.filter(ne=>ne.userId!==M)),z&&G.success(` User ${z.userName} has been activated successfully!`,{duration:4e3,position:"top-right"})}catch(A){console.error("Error activating user:",A),G.error("Failed to activate user. Please try again.")}},S=M=>{C(A=>A.filter(z=>z.id!==M))},g={autoConnect:!0,transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:2e4,forceNew:!0,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,maxReconnectionAttempts:1/0};v.useEffect(()=>{if(t&&t.id){console.log(" Initializing socket connection for user:",t.name),console.log(" Socket URL:","http://13.204.195.88:5001"),n&&(console.log(" Closing existing socket connection"),n.close(),r(null));const M=localStorage.getItem("token"),A=Ls("http://13.204.195.88:5001",{...g,auth:{token:M}});return A.on("connect",()=>{u(0),d(Date.now()),o(!0),console.log(" Socket connected - ID:",A.id),console.log(" Connected as user:",t.name),console.log(" Connection URL:",A.io.uri),A.emit("join",t.id),console.log(` User ${t.id} joined personal room`),R(A),U(A)}),A.on("disconnect",z=>{o(!1),console.log(" Socket disconnected - Reason:",z),console.log(" Disconnected user:",t.name),F(),H(),p(A)}),A.on("connect_error",z=>{console.error(" Socket connection error:",z),o(!1),z.message&&z.message.includes("WebSocket")&&(console.log(" WebSocket connection failed, trying polling transport"),A.io.opts.transports=["polling"],setTimeout(()=>A.connect(),1e3)),p(A)}),A.on("reconnect",z=>{u(0),console.log(" Socket reconnected after",z,"attempts"),console.log(" New Socket ID:",A.id),o(!0),A.emit("join",t.id)}),A.on("reconnect_error",z=>{console.error(" Socket reconnection error:",z)}),A.on("reconnect_failed",()=>{console.error(" Socket reconnection failed"),o(!1)}),A.on("ping",z=>{d(Date.now()),console.log(" Ping received - Connection alive, timestamp:",new Date(Date.now()).toLocaleTimeString())}),A.on("pong",z=>{d(Date.now()),console.log(" Pong received - Connection confirmed, timestamp:",new Date(Date.now()).toLocaleTimeString())}),A.on("connect_timeout",()=>{console.log(" Socket connection timed out")}),A.on("reconnect_error",z=>{console.error(" Reconnection error:",z.message)}),A.on("reconnect_failed",()=>{console.error(" Reconnection failed permanently - forcing reconnect"),u(1/0)}),A.on("force-logout",z=>{console.log(" Force logout received:",z),localStorage.removeItem("token"),window.location.href="/login"}),A.on("admin_notification",z=>{h(z)}),A.on("user-online",z=>{var re;console.log(" User came online:",(re=z.user)==null?void 0:re.name),a(ne=>ne.find(he=>he.userId===z.userId)?ne.map(he=>he.userId===z.userId?{...he,isOnline:!0,lastSeen:new Date}:he):[...ne,{...z,isOnline:!0,lastSeen:new Date}])}),A.on("user-offline",z=>{var re;console.log(" User went offline:",(re=z.user)==null?void 0:re.name),a(ne=>ne.find(he=>he.userId===z.userId)?ne.map(he=>he.userId===z.userId?{...he,isOnline:!1,lastSeen:new Date}:he):ne)}),A.on("online-users",z=>{console.log(" Initial online users:",z.map(re=>{var ne;return((ne=re.user)==null?void 0:ne.name)||re.name})),a(z.map(re=>({...re,isOnline:!0,lastSeen:new Date})))}),r(A),()=>{console.log(" Cleaning up socket connection"),F(),H(),A.close(),r(null),o(!1),a([])}}else n&&(console.log(" Disconnecting socket - no user"),n.close(),r(null),o(!1),a([]))},[t==null?void 0:t.id]);const p=M=>{if(console.log(" Starting reconnection logic"),c<5){const A=1e3*Math.pow(2,c);console.log(` Reconnecting in ${A}ms...`),setTimeout(()=>{u(z=>z+1),M.connect()},A)}else console.log(" Max reconnections reached, manual reconnection forced"),M.connect()};let y,_;const R=M=>{y&&clearInterval(y),y=setInterval(()=>{const A=Date.now()-m;console.log(`Time since last ping: ${A}ms`),M&&s&&A>45e3&&(console.log(" Proactive ping sent to prevent timeout"),M.emit("ping",{timestamp:Date.now()}),d(Date.now())),A>18e4?(console.log(" Extended timeout reached - checking connection"),M&&M.connected&&s?(console.log(" Connection verified, resetting last ping"),d(Date.now())):(console.log(" Disconnection confirmed, reconnecting..."),M.connect())):console.log(` Socket maintained: ${A}ms since last ping`)},25e3)},F=()=>{y&&(clearInterval(y),y=null)},U=M=>{_&&clearInterval(_),_=setInterval(()=>{M&&M.connected&&M.emit("client-heartbeat",{t:Date.now()})},2e3)},H=()=>{_&&(clearInterval(_),_=null)},k={socket:n,isConnected:s,onlineUsers:l,notifications:w,sendMessage:(M,A,z="text",re=!1,ne=null)=>{if(console.log(" sendMessage called with:",{receiverId:M,content:A,messageType:z,isGroupChat:re,attachment:ne,socketStatus:{socket:!!n,isConnected:s,socketId:n==null?void 0:n.id}}),n&&s){console.log(" Emitting send-message event...");let ve;return re?(ve={sender:t.id,groupId:M,message:A,messageType:z,timestamp:new Date().toISOString()},n.emit("send-group-message",ve)):(ve={sender:t.id,receiver:M,message:A,messageType:z,timestamp:new Date().toISOString()},n.emit("send-message",ve)),console.log(" Message sent successfully:",ve),!0}else throw console.error(" Cannot send message: Socket not connected"),new Error("Socket not connected. Please check your connection.")},markMessageRead:(M,A)=>{n&&s&&(n.emit("mark-message-read",{messageId:M,senderId:A}),console.log(" Message read marked for:",{messageId:M,senderId:A}))},startTyping:M=>{n&&s&&n.emit("typing",{sender:t.id,receiver:M,isTyping:!0})},stopTyping:M=>{n&&s&&n.emit("typing",{sender:t.id,receiver:M,isTyping:!1})},isUserOnline:M=>{const A=l.find(z=>z.userId===M);return A?A.isOnline:!1},joinGroup:M=>{n&&s&&(n.emit("join-group",M),console.log(" Joined group room:",M))},leaveGroup:M=>{n&&s&&(n.emit("leave-group",M),console.log(" Left group room:",M))},onReceiveMessage:M=>{n&&(n.off("receive-message"),n.on("receive-message",A=>{console.log(" Received message:",A),M(A)}))},onReceiveGroupMessage:M=>{n&&(n.off("receive-group-message"),n.on("receive-group-message",A=>{console.log(" Received group message:",A),M(A)}))},onMessageSent:M=>{n&&(n.off("message-sent"),n.on("message-sent",A=>{console.log(" Message sent confirmation:",A),M(A)}))},handleActivateUser:x,handleCloseNotification:S,getConnectionStatus:()=>({isConnected:s,reconnectAttempts:c,lastPing:new Date(m).toLocaleString(),socketId:n==null?void 0:n.id})};return i.jsx(Ih.Provider,{value:k,children:e})};var Ow={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Lw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fe=(e,t)=>{const n=v.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:a,...c},u)=>v.createElement("svg",{ref:u,...Ow,width:s,height:s,stroke:r,strokeWidth:l?Number(o)*24/Number(s):o,className:`lucide lucide-${Lw(e)}`,...c},[...t.map(([m,d])=>v.createElement(m,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${e}`,n},pl=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Yl=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Uw=fe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Fw=fe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),$w=fe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),lc=fe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),zw=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Lo=fe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Hr=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ac=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),cc=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gr=fe("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),ju=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Dw=fe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Bw=fe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Ah=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ph=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),fr=fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),uc=fe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Mh=fe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Uo=fe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Vw=fe("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),Su=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Oh=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Hw=fe("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),Gw=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),hl=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Lh=fe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ku=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),gl=fe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Ww=fe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),qw=fe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),dc=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Kw=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),bu=fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),en=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Ft=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Fo=fe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Qw=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),$o=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Jw=()=>{const[e,t]=v.useState({name:"",email:"",password:"",confirmPassword:""}),[n,r]=v.useState("user"),[s,o]=v.useState(!1),[l,a]=v.useState(!1),[c,u]=v.useState(!1),[m,d]=v.useState(!0),[w,C]=v.useState(!1),[h,x]=v.useState(!1),{login:S,registerSuperAdmin:g}=pn();v.useEffect(()=>{(async()=>{try{const U=await Os.checkSuperAdmin();u(U.data.exists)}catch(U){console.error("Error checking super admin:",U)}finally{d(!1)}})()},[]);const p=[{value:"user",label:"User",icon:en,description:"Chat with other users"},{value:"admin",label:"Admin",icon:gl,description:"Manage users and groups"},{value:"superadmin",label:"Super Admin",icon:Lo,description:"Full system access"}],y=F=>{t({...e,[F.target.name]:F.target.value})},_=async F=>{F.preventDefault(),a(!0);try{if(s&&n==="superadmin"){if(e.password!==e.confirmPassword){G.error("Passwords do not match");return}const U=await g(e.name,e.email,e.password);U.success?G.success("Super Admin registered successfully!"):G.error(U.error)}else{const U=await S(e.email,e.password);U.success?G.success("Login successful!"):U.disabled?G.error("Your account has been disabled by administrator"):G.error(U.error)}}catch{G.error("An error occurred. Please try again.")}finally{a(!1)}},R=()=>{if(!s&&c){G.error("Super admin already exists. Please login instead.");return}o(!s),t({name:"",email:"",password:"",confirmPassword:""})};return m?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full space-y-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Internal Chat App"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Checking system status..."}),i.jsx("div",{className:"flex justify-center mt-4",children:i.jsx("div",{className:"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})})]})})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Internal Chat App"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s?"Register as Super Admin":"Sign in to your account"})]}),i.jsxs("div",{className:"card p-8",children:[!s&&i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Role"}),i.jsx("div",{className:"grid grid-cols-1 gap-3",children:p.map(F=>{const U=F.icon;return i.jsx("button",{type:"button",onClick:()=>r(F.value),className:`p-3 rounded-lg border-2 transition-all ${n===F.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(U,{className:"w-5 h-5 text-gray-600"}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium text-gray-900",children:F.label}),i.jsx("div",{className:"text-sm text-gray-500",children:F.description})]})]})},F.value)})})]}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:e.name,onChange:y,className:"input-field mt-1",placeholder:"Enter your full name"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),i.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e.email,onChange:y,className:"input-field mt-1",placeholder:"Enter your email"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx("input",{id:"password",name:"password",type:w?"text":"password",required:!0,value:e.password,onChange:y,className:"input-field pr-10",placeholder:"Enter your password"}),i.jsx("button",{type:"button","aria-label":w?"Hide password":"Show password",onClick:()=>C(!w),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",children:w?i.jsx(ac,{className:"w-5 h-5"}):i.jsx(cc,{className:"w-5 h-5"})})]})]}),s&&i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",required:!0,value:e.confirmPassword,onChange:y,className:"input-field pr-10",placeholder:"Confirm your password"}),i.jsx("button",{type:"button","aria-label":h?"Hide password":"Show password",onClick:()=>x(!h),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600",children:h?i.jsx(ac,{className:"w-5 h-5"}):i.jsx(cc,{className:"w-5 h-5"})})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:l,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),s?"Registering...":"Signing in..."]}):s?"Register Super Admin":"Sign In"})}),i.jsx("div",{className:"text-center",children:i.jsx("button",{type:"button",onClick:R,disabled:m,className:"text-sm text-primary-600 hover:text-primary-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Checking system status...":s?"Already have an account? Sign in":c?"Super admin already exists. Please login instead.":"Need to register Super Admin? Click here"})})]})]})]})})},Yw=()=>{const{user:e,logout:t}=pn(),{notifications:n,handleActivateUser:r,handleCloseNotification:s}=mi(),[o,l]=v.useState({totalUsers:0,totalGroups:0,activeUsers:0,disabledUsers:0}),[a,c]=v.useState(!0),[u,m]=v.useState(!1),[d,w]=v.useState(!1);v.useEffect(()=>{C()},[]),v.useEffect(()=>{const S=g=>{if(u){const p=document.querySelector(".notification-panel");p&&!p.contains(g.target)&&m(!1)}};return u&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[u]),v.useEffect(()=>{const S=g=>{if(d){const p=document.querySelector(".account-menu-container");p&&!p.contains(g.target)&&w(!1)}};return d&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[d]);const C=async()=>{try{c(!0);const[S,g]=await Promise.all([e.role==="user"?ht.getActiveUsers():ht.getUsers(),Jt.getMyGroups()]),p=Array.isArray(S.data)?S.data:[],y=p.filter(R=>(R.isActive??!0)===!0).length,_=p.filter(R=>(R.isActive??!0)===!1).length;l({totalUsers:p.length,totalGroups:g.data.length,activeUsers:y,disabledUsers:_})}catch{G.error("Failed to load dashboard data")}finally{c(!1)}},h=S=>{switch(S){case"superadmin":return i.jsx(Lo,{className:"w-5 h-5 text-yellow-600"});case"admin":return i.jsx(gl,{className:"w-5 h-5 text-blue-600"});default:return i.jsx(en,{className:"w-5 h-5 text-gray-600"})}},x=S=>{switch(S){case"superadmin":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return a?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-6",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsxs(Ao,{to:"/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?i.jsx("img",{src:`${be}${e.profileImage}`,alt:"Profile",className:"w-12 h-12 rounded-full object-cover"}):i.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-primary-600 font-medium text-lg",children:e.name.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),i.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",e.name,"!"]})]})]})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[(e.role==="admin"||e.role==="superadmin")&&i.jsx("div",{className:"relative",children:i.jsxs("button",{onClick:()=>m(!u),className:"relative p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-full transition-colors",children:[i.jsx(Yl,{className:"w-6 h-6"}),n.length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n.length})]})}),i.jsxs("div",{className:"relative account-menu-container",children:[i.jsx("button",{onClick:()=>w(S=>!S),className:`px-3 py-1 rounded-full text-sm font-medium hover:opacity-90 transition ${x(e.role)}`,children:i.jsxs("div",{className:"flex items-center space-x-1",children:[h(e.role),i.jsx("span",{className:"capitalize",children:e.role})]})}),d&&i.jsx("div",{className:"absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-md shadow-lg z-20",children:i.jsxs("button",{onClick:()=>{w(!1),t(),G.success("Logged out successfully")},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[i.jsx(Ah,{className:"w-4 h-4"}),i.jsx("span",{children:"Logout"})]})})]})]})]})})}),u&&(e.role==="admin"||e.role==="superadmin")&&i.jsx("div",{className:"notification-panel bg-white border-b shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Yl,{className:"w-5 h-5 text-primary-600"}),i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n.length>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n.length})]}),i.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:i.jsx($o,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"space-y-3",children:n.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(Yl,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{children:"No notifications yet"})]}):n.map(S=>i.jsx("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:i.jsx(en,{className:"w-4 h-4 text-orange-600"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"text-sm font-bold text-orange-700 flex items-center gap-2",children:[i.jsx("span",{children:""}),"Disabled User Login Attempt"]}),i.jsxs("div",{className:"mt-1 text-sm",children:[i.jsx("div",{className:"font-semibold text-gray-900",children:S.userName}),i.jsx("div",{className:"text-gray-600",children:S.userEmail}),i.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Time: ",new Date(S.timestamp).toLocaleTimeString()]})]})]}),i.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[i.jsxs("button",{onClick:()=>r(S.userId),className:"flex items-center space-x-1 bg-green-600 text-white px-3 py-1.5 rounded-md text-xs font-medium hover:bg-green-700 transition-colors",children:[i.jsx(lc,{className:"w-3 h-3"}),i.jsx("span",{children:"Activate"})]}),i.jsxs("button",{onClick:()=>s(S.id),className:"flex items-center space-x-1 bg-gray-100 text-gray-700 px-3 py-1.5 rounded-md text-xs font-medium hover:bg-gray-200 transition-colors",children:[i.jsx($o,{className:"w-3 h-3"}),i.jsx("span",{children:"Close"})]})]})]})},S.id))})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:i.jsx(Ft,{className:"w-6 h-6 text-blue-600"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalUsers})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100",children:i.jsx(fr,{className:"w-6 h-6 text-green-600"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Groups"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.totalGroups})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-green-100",children:i.jsx(Ft,{className:"w-6 h-6 text-green-600"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.activeUsers})]})]})}),i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-red-100",children:i.jsx(Ft,{className:"w-6 h-6 text-red-600"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disabled Users"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.disabledUsers})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Chat"}),i.jsx(fr,{className:"w-5 h-5 text-gray-400"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Start chatting with other users or join group conversations."}),i.jsxs("a",{href:"/chat",className:"btn-primary inline-flex items-center",children:[i.jsx(fr,{className:"w-4 h-4 mr-2"}),"Open Chat"]})]}),e.role!=="user"&&i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Management"}),i.jsx(ku,{className:"w-5 h-5 text-gray-400"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:e.role==="superadmin"?"Manage admins and view all users in the system.":"Manage users and create groups for team communication."}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("a",{href:"/users",className:"btn-secondary w-full inline-flex items-center justify-center",children:[i.jsx(bu,{className:"w-4 h-4 mr-2"}),e.role==="superadmin"?"Manage Admins":"Manage Users"]}),e.role==="admin"&&i.jsxs("a",{href:"/groups",className:"btn-primary w-full inline-flex items-center justify-center",children:[i.jsx(Oh,{className:"w-4 h-4 mr-2"}),"Manage Groups"]})]})]}),i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Info"}),i.jsx(en,{className:"w-5 h-5 text-gray-400"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),i.jsx("span",{className:"ml-2 text-gray-900",children:e.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email:"}),i.jsx("span",{className:"ml-2 text-gray-900",children:e.email})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Role:"}),i.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${x(e.role)}`,children:e.role})]})]})]}),e.role==="superadmin"&&i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Overview"}),i.jsx(Lo,{className:"w-5 h-5 text-yellow-600"})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:"You have full access to manage the entire system including admins and all users."}),i.jsxs("div",{className:"text-sm text-gray-500",children:[i.jsx("p",{children:" Create and manage admin accounts"}),i.jsx("p",{children:" View all system users"}),i.jsx("p",{children:" Monitor system activity"})]})]})]})]})]})};class Xw{constructor(){this.socket=null,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.reconnectDelay=1e3,this.pingInterval=null,this.lastPingTime=Date.now(),this.currentUserId=null,this.listeners=new Map,this.isConnecting=!1}connect(){if(this.isConnecting)return this.socket;if(this.socket&&this.socket.connected)return this.socket;console.log(" Creating new socket connection..."),this.isConnecting=!0,this.socket&&(this.socket.disconnect(),this.socket=null);const t=localStorage.getItem("token");return this.socket=Ls("http://13.204.195.88:5001",{autoConnect:!0,reconnection:!0,reconnectionDelay:this.reconnectDelay,reconnectionAttempts:this.maxReconnectAttempts,maxReconnectionAttempts:this.maxReconnectAttempts,timeout:2e4,forceNew:!0,multiplex:!1,transports:["websocket","polling"],auth:{token:t}}),this.setupEventHandlers(),this.isConnecting=!1,this.socket}setupEventHandlers(){this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.lastPingTime=Date.now(),console.log(" ===== SOCKET CONNECTED ===== "),console.log(" Socket ID:",this.socket.id),console.log(" Connection URL:",this.socket.io.uri),console.log(" Transport:",this.socket.io.engine.transport.name),console.log(" Current User ID:",this.currentUserId),console.log(" Active listeners:",this.listeners.size),console.log("========================================"),this.currentUserId&&this.joinUserRoom(this.currentUserId),this.startPingMonitoring(),this.setupMessageListeners(),this.socket.emit("ping",{timestamp:Date.now()}),console.log(" Enhanced connection alive detection initiated")}),this.socket.on("disconnect",t=>{this.isConnected=!1,console.log(" ===== SOCKET DISCONNECTED ===== "),console.log(" Reason:",t),console.log(" Attempting reconnection..."),console.log("========================================"),this.stopPingMonitoring(),this.attemptReconnection()}),this.socket.on("connect_error",t=>{console.error(" ===== CONNECTION ERROR ===== "),console.error(" Error:",t.message),console.error(" URL:",t.type),console.error(" Status:",t.description),console.error("========================================="),this.attemptReconnection()}),this.socket.on("reconnect",t=>{console.log(" ===== RECONNECTION SUCCESSFUL ===== "),console.log(" Attempts tried:",t),console.log(" New Socket ID:",this.socket.id),console.log("==============================================")}),this.socket.on("ping",t=>{this.lastPingTime=Date.now(),console.log(" Ping received - Connection alive, timestamp:",new Date(this.lastPingTime).toLocaleTimeString())}),this.socket.on("pong",t=>{this.lastPingTime=Date.now(),console.log(" Pong received - Connection confirmed, timestamp:",new Date(this.lastPingTime).toLocaleTimeString())}),this.socket.on("connect_timeout",()=>{console.log(" ===== CONNECTION TIMEOUT ===== "),console.log(" Socket connection timed out"),console.log("======================================")}),this.socket.on("reconnect_error",t=>{console.error(" ===== RECONNECTION ERROR ===== "),console.error("Error:",t.message),console.error("========================================")}),this.socket.on("reconnect_failed",()=>{console.error(" ===== FAILED RECONNECTION ===== "),console.error(" Socket reconnection permanently failed"),console.error(" Attempting force reconnect..."),console.error("===========================================")})}setupMessageListeners(){console.log(" ===== SETTING UP MESSAGE LISTENERS ===== "),console.log(" Total listeners to register:",this.listeners.size);for(const[t,n]of this.listeners)this.socket&&(this.socket.removeAllListeners(t),this.socket.on(t,n),console.log(` Re-registered listener: ${t}`));console.log(" ===== ALL LISTENERS ACTIVE ===== "),console.log(" Socket ready for real-time messaging"),console.log("========================================")}maintainConnection(){console.log(" ===== MAINTAINING PERSISTENT CONNECTION ===== "),!this.isConnected||!this.socket?(console.log(" Socket disconnected, reconnecting..."),this.connect()):(console.log(" Socket is connected, maintaining listeners"),this.setupMessageListeners(),this.socket&&this.isConnected&&(this.socket.emit("ping",{timestamp:Date.now()}),this.lastPingTime=Date.now(),console.log("Keep-alive ping sent - Connection maintained"),setTimeout(()=>{this.socket&&this.isConnected&&this.socket.emit("pong",{timestamp:Date.now()})},100))),console.log("==============================================")}forceChatroomReception(){console.log(" FORCING CHATROOM MESSAGE RECEPTION"),this.socket&&this.isConnected?(this.setupMessageListeners(),console.log(" Chatroom reception listeners reinforced")):(console.log(" Socket not available for chatroom reinforcement"),this.connect()),console.log("=====")}startPingMonitoring(){this.pingInterval&&clearInterval(this.pingInterval),this.pingInterval=setInterval(()=>{const t=Date.now()-this.lastPingTime;if(console.log(` Health check: Time since last ping: ${t}ms`),this.socket&&this.isConnected&&t>45e3&&(console.log(" Proactive ping sent to prevent timeout"),this.socket.emit("ping",{timestamp:Date.now()}),this.lastPingTime=Date.now()),t>18e4){if(console.log(" Extended timeout reached - checking real disconnection"),this.socket&&this.socket.connected&&this.isConnected){console.log(" Socket connection verified alive, resetting timer"),this.lastPingTime=Date.now();return}console.log(" Real disconnection confirmed, force reconnecting..."),this.forceReconnect()}else console.log(` Socket health maintained: ${t}ms response time`)},25e3)}stopPingMonitoring(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}attemptReconnection(){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log(" ===== ATTEMPTING RECONNECTION ===== "),console.log(` Attempt: ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),console.log(` Delay: ${this.reconnectDelay*this.reconnectAttempts}ms`),console.log("===================="),setTimeout(()=>{console.log(" Executing reconnection..."),this.connect()},this.reconnectDelay*this.reconnectAttempts)):(console.log(" ===== MAX ATTEMPTS REACHED ===== "),console.log(" Forcing socket reset..."),setTimeout(()=>{this.forceReconnect()},this.reconnectDelay*5),console.log("====================================="))}forceReconnect(){console.log(" Force reconnecting socket..."),this.stopPingMonitoring(),this.reconnectAttempts=0,this.socket&&(this.socket.disconnect(),this.socket=null),setTimeout(()=>{this.connect()},2e3)}disconnect(){this.stopPingMonitoring(),this.listeners.clear(),this.socket&&(this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.currentUserId=null}joinUserRoom(t){this.currentUserId=t,this.socket&&this.isConnected?(this.socket.emit("join",t),console.log(" Joined user room:",t)):console.log(" Waiting to join user room after connection...")}joinGroupRoom(t){this.socket&&this.socket.emit("join-group",t)}leaveGroupRoom(t){this.socket&&this.socket.emit("leave-group",t)}sendPersonalMessage(t){var n;if(console.log(" ===== SENDING PERSONAL MESSAGE ===== "),console.log(" Data:",t),console.log(" Socket available:",!!this.socket),console.log(" Socket connected:",this.isConnected),console.log(" Socket ID:",(n=this.socket)==null?void 0:n.id),!this.socket||!this.isConnected){console.log(" Socket not connected, connecting first..."),this.connect(),setTimeout(()=>{this.socket&&this.isConnected?(console.log(" Retrying message send after connection"),this.socket.emit("send-message",t),console.log(" Personal message retry sent successfully")):console.error(" Still not connected after retry")},2e3);return}this.ensureConnected(),this.socket&&this.isConnected?(this.socket.emit("send-message",t),console.log(" Personal message sent successfully"),setTimeout(()=>{this.socket&&this.isConnected&&this.socket.emit("ping",{timestamp:Date.now()})},100)):console.error(" Socket lost connection before sending message"),console.log("=============================================")}sendGroupMessage(t){var n;if(console.log(" ===== SENDING GROUP MESSAGE ===== "),console.log(" Data:",t),console.log(" Socket available:",!!this.socket),console.log(" Socket connected:",this.isConnected),console.log(" Socket ID:",(n=this.socket)==null?void 0:n.id),!this.socket||!this.isConnected){console.log(" Socket not connected, connecting first..."),this.connect(),setTimeout(()=>{this.socket&&this.isConnected?(console.log(" Retrying group message send after connection"),this.socket.emit("send-group-message",t),console.log(" Group message retry sent successfully")):console.error(" Still not connected after retry")},2e3);return}this.socket.emit("send-group-message",t),console.log(" Group message sent successfully"),console.log("============================================")}onReceiveMessage(t){console.log(" Registering onReceiveMessage listener"),this.registerListener("receive-message",n=>{console.log(" Received message:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)}),setTimeout(()=>{this.socket&&this.isConnected&&(this.socket.off("receive-message"),this.socket.on("receive-message",n=>{console.log(" Maintained receive-message listener:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)}),console.log(" Listener re-registered for chatroom persistence"))},1e3)}onReceiveGroupMessage(t){console.log(" Registering onReceiveGroupMessage listener"),this.registerListener("receive-group-message",n=>{console.log(" Received group message:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)})}onMessageSent(t){console.log(" Registering onMessageSent listener"),this.registerListener("message-sent",n=>{console.log(" Message sent confirmation:",n);const r={...n,_isOurMessage:!0,_isConfirmation:!0,_timestamp:new Date().toISOString()};t(r)})}registerListener(t,n){this.listeners.set(t,n),console.log(` Stored listener for event: ${t}`),this.socket&&this.isConnected?(this.socket.off(t),this.socket.on(t,n),console.log(` Listener immediately registered for event: ${t}`)):console.log(` Listener queued for event: ${t} (waiting for connection)`)}onGroupMessageSent(t){this.registerListener("group-message-sent",t)}onTyping(t){this.registerListener("user-typing",t)}sendTyping(t){this.socket&&this.isConnected&&this.socket.emit("typing",t)}onError(t){this.registerListener("error",t)}onAvatarUpdate(t){this.registerListener("avatar-updated",t)}onUserProfileUpdate(t){this.registerListener("user-profile-updated",t)}removeAllListeners(){this.listeners.clear(),this.socket&&(this.socket.removeAllListeners(),this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.lastPingTime=Date.now(),this.currentUserId&&this.joinUserRoom(this.currentUserId),this.startPingMonitoring(),this.setupMessageListeners()}))}ensureConnected(){return!this.socket||!this.isConnected?(console.log(" Ensuring socket connection..."),this.connect()):!0}getConnectionStatus(){var t;return{isConnected:this.isConnected,socketId:(t=this.socket)==null?void 0:t.id,lastPing:new Date(this.lastPingTime).toLocaleString(),listenersCount:this.listeners.size}}logConnectionStatus(){var t,n,r,s,o,l,a;console.log(" ===== SOCKET STATUS REPORT ===== "),console.log(" Is Connected:",this.isConnected?" YES":" NO"),console.log(" Socket ID:",((t=this.socket)==null?void 0:t.id)||"N/A"),console.log(" Connection URL:",((r=(n=this.socket)==null?void 0:n.io)==null?void 0:r.uri)||"N/A"),console.log(" Transport:",((a=(l=(o=(s=this.socket)==null?void 0:s.io)==null?void 0:o.engine)==null?void 0:l.transport)==null?void 0:a.name)||"N/A"),console.log(" Current User ID:",this.currentUserId||"Not set"),console.log(" Active Listeners:",this.listeners.size),console.log(" Reconnect Attempts:",this.reconnectAttempts),console.log(" Last Ping:",new Date(this.lastPingTime).toLocaleTimeString()),console.log(" Listeners registered:",Array.from(this.listeners.keys()).join(", ")||"None"),console.log("========================================")}testConnection(){console.log(" ===== TESTING SOCKET CONNECTION ===== "),this.logConnectionStatus(),this.socket&&(console.log(" Emitting test ping..."),this.socket.emit("ping")),console.log("============================================")}forceConnectionTest(){console.log(" ===== MANUAL CONNECTION FORCE TEST ===== "),this.connect(),setTimeout(()=>{this.testConnection()},3e3),console.log("=============================================")}reset(){console.log(" Resetting socket service..."),this.disconnect(),this.currentUserId=null,this.listeners.clear(),this.reconnectAttempts=0,this.isConnecting=!1,clearTimeout(this.reconnectTimeout)}}const qe=new Xw,Uh=({user:e,callData:t,isIncoming:n=!1,onCallEnd:r,onCallAnswer:s,onCallDecline:o})=>{var O,J,ie,ee,le,$,k,M,A,z,re,ne,ve,he,Ge;const{socket:l}=mi(),[a,c]=v.useState(n?"incoming":"outgoing"),[u,m]=v.useState(!1),[d,w]=v.useState(0),[C,h]=v.useState(null),x=v.useRef(null),S=v.useRef(null),g=v.useRef(null),p=v.useRef(null),y=v.useRef(null),_={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]},R=async()=>{try{g.current=new RTCPeerConnection(_),g.current.onicecandidate=je=>{if(je.candidate&&l)try{l.emit("ice-candidate",{callId:t.callId,candidate:je.candidate.candidate,sdpMLineIndex:je.candidate.sdpMLineIndex,sdpMid:je.candidate.sdpMid})}catch(Je){console.error("Error sending ICE candidate:",Je)}},g.current.ontrack=je=>{S.current&&(S.current.srcObject=je.streams[0])},g.current.onconnectionstatechange=()=>{const je=g.current.connectionState;je==="connected"?(c("connected"),F()):(je==="disconnected"||je==="failed")&&V()};const ae=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});return p.current=ae,x.current&&(x.current.srcObject=ae),ae.getAudioTracks().forEach(je=>{g.current.addTrack(je,ae)}),!0}catch(ae){return console.error("Error initializing WebRTC:",ae),h("Failed to access microphone. Please check permissions."),!1}},F=()=>{y.current=setInterval(()=>{w(ae=>ae+1)},1e3)},U=()=>{y.current&&(clearInterval(y.current),y.current=null)},H=ae=>{const je=Math.floor(ae/60),Je=ae%60;return`${je.toString().padStart(2,"0")}:${Je.toString().padStart(2,"0")}`},X=async()=>{await R()&&(c("connecting"),s&&s(),l&&l.emit("call-answer",{callId:t.callId}))},W=()=>{c("declined"),o&&o(),l&&l.emit("call-decline",{callId:t.callId})},V=()=>{U(),g.current&&(g.current.close(),g.current=null),p.current&&(p.current.getTracks().forEach(ae=>ae.stop()),p.current=null),c("ended"),r&&r(),l&&l.emit("call-end",{callId:t.callId})},q=()=>{if(p.current){const ae=p.current.getAudioTracks()[0];ae&&(ae.enabled=!ae.enabled,m(!ae.enabled))}};return v.useEffect(()=>{if(!l)return;const ae=async Q=>{if(Q.callId===t.callId){c("connecting");try{const Te=await g.current.createOffer();await g.current.setLocalDescription(Te),l.emit("call-offer",{callId:t.callId,offer:Te})}catch{h("Failed to establish connection")}}},je=async Q=>{if(Q.callId===t.callId)try{await g.current.setRemoteDescription(Q.offer);const Te=await g.current.createAnswer();await g.current.setLocalDescription(Te),l.emit("call-answer-webrtc",{callId:t.callId,answer:Te})}catch{h("Failed to establish connection")}},Je=async Q=>{if(Q.callId===t.callId)try{await g.current.setRemoteDescription(Q.answer)}catch{h("Failed to establish connection")}},Dt=async Q=>{if(Q.callId===t.callId&&g.current)try{const Te=new RTCIceCandidate({candidate:Q.candidate,sdpMLineIndex:Q.sdpMLineIndex,sdpMid:Q.sdpMid});await g.current.addIceCandidate(Te)}catch{}},tt=Q=>{Q.callId===t.callId&&(c("declined"),V())},te=Q=>{Q.callId===t.callId&&V()};return l.on("call-answered",ae),l.on("call-offer",je),l.on("call-answer-webrtc",Je),l.on("ice-candidate",Dt),l.on("call-declined",tt),l.on("call-ended",te),()=>{l.off("call-answered",ae),l.off("call-offer",je),l.off("call-answer-webrtc",Je),l.off("ice-candidate",Dt),l.off("call-declined",tt),l.off("call-ended",te)}},[l,t.callId]),v.useEffect(()=>{!n&&a==="outgoing"&&R()},[n,a]),v.useEffect(()=>()=>{U(),g.current&&g.current.close(),p.current&&p.current.getTracks().forEach(ae=>ae.stop())},[]),n&&a==="incoming"?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex flex-col items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full mx-4 text-center shadow-2xl",children:[i.jsx("div",{className:"mb-6",children:(O=t==null?void 0:t.caller)!=null&&O.avatar?i.jsx("img",{src:t.caller.avatar,alt:t.caller.name,className:"w-24 h-24 rounded-full mx-auto object-cover"}):i.jsx("div",{className:"w-24 h-24 rounded-full mx-auto bg-green-500 text-white flex items-center justify-center text-2xl font-bold",children:((ie=(J=t==null?void 0:t.caller)==null?void 0:J.name)==null?void 0:ie.charAt(0))||"U"})}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:((ee=t==null?void 0:t.caller)==null?void 0:ee.name)||"Unknown"}),i.jsx("p",{className:"text-gray-600 mb-8",children:" Incoming voice call..."}),i.jsxs("div",{className:"flex justify-center gap-6",children:[i.jsx("button",{onClick:W,className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-2xl transition-colors shadow-lg",children:""}),i.jsx("button",{onClick:X,className:"w-16 h-16 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-2xl transition-colors shadow-lg",children:""})]})]})}):C?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full mx-4 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Call Error"}),i.jsx("p",{className:"text-gray-600 mb-6",children:C}),i.jsx("button",{onClick:V,className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition-colors",children:"Close"})]})}):i.jsxs("div",{className:"fixed inset-0 bg-gradient-to-br from-green-400 to-green-600 flex flex-col items-center justify-center z-50 text-white",children:[i.jsx("audio",{ref:x,muted:!0,autoPlay:!0}),i.jsx("audio",{ref:S,autoPlay:!0}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-sm text-green-100 mb-2",children:a==="connecting"?"Connecting...":a==="connected"?"Voice Call":a==="outgoing"?"Calling...":"Call"}),i.jsx("h1",{className:"text-2xl font-semibold",children:((le=t==null?void 0:t.otherUser)==null?void 0:le.name)||(($=t==null?void 0:t.caller)==null?void 0:$.name)||"Unknown"}),a==="connected"&&i.jsx("p",{className:"text-green-100 mt-2",children:H(d)})]}),i.jsx("div",{className:"mb-12",children:(k=t==null?void 0:t.otherUser)!=null&&k.avatar||(M=t==null?void 0:t.caller)!=null&&M.avatar?i.jsx("img",{src:((A=t==null?void 0:t.otherUser)==null?void 0:A.avatar)||((z=t==null?void 0:t.caller)==null?void 0:z.avatar),alt:((re=t==null?void 0:t.otherUser)==null?void 0:re.name)||((ne=t==null?void 0:t.caller)==null?void 0:ne.name),className:"w-32 h-32 rounded-full object-cover shadow-2xl"}):i.jsx("div",{className:"w-32 h-32 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-4xl font-bold shadow-2xl",children:((Ge=((ve=t==null?void 0:t.otherUser)==null?void 0:ve.name)||((he=t==null?void 0:t.caller)==null?void 0:he.name))==null?void 0:Ge.charAt(0))||"U"})}),i.jsxs("div",{className:"mb-8 text-center",children:[a==="outgoing"&&i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),i.jsx("span",{className:"text-green-100",children:"Calling..."})]}),a==="connecting"&&i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce"}),i.jsx("span",{className:"text-green-100",children:"Connecting..."})]}),a==="connected"&&i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full"}),i.jsx("span",{className:"text-green-100",children:"Connected"})]})]}),i.jsxs("div",{className:"flex gap-6",children:[a==="connected"&&i.jsx("button",{onClick:q,className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl transition-all shadow-lg ${u?"bg-red-500 hover:bg-red-600":"bg-white bg-opacity-20 hover:bg-opacity-30"}`,title:u?"Unmute":"Mute",children:u?"":""}),i.jsx("button",{onClick:V,className:"w-16 h-16 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-2xl transition-colors shadow-lg",title:"End Call",children:""})]}),a==="connected"&&i.jsxs("div",{className:"mt-8 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx("div",{className:"w-1 h-2 bg-green-300 rounded"}),i.jsx("div",{className:"w-1 h-3 bg-green-300 rounded"}),i.jsx("div",{className:"w-1 h-4 bg-green-300 rounded"}),i.jsx("div",{className:"w-1 h-3 bg-green-300 rounded"}),i.jsx("div",{className:"w-1 h-2 bg-green-300 rounded"})]}),i.jsx("span",{className:"text-xs text-green-100 mt-1 block",children:"Good quality"})]})]})},Fh=({user:e,callData:t,isIncoming:n=!1,onCallEnd:r,onCallAnswer:s,onCallDecline:o})=>{var he,Ge,ae,je,Je,Dt,tt,te,Q,Te,Nt,Bt,Rt,mt,We,Re,Ye;const{socket:l,isConnected:a}=mi(),[c,u]=v.useState(n?"incoming":"outgoing"),[m,d]=v.useState(!1),[w,C]=v.useState((t==null?void 0:t.callType)==="video"),[h,x]=v.useState(0),[S,g]=v.useState(null),p=v.useRef(null),y=v.useRef(null),_=v.useRef(null),R=v.useRef(null),F=v.useRef(null),U=v.useRef(null),H=v.useRef(!1),X=v.useRef(null),W=v.useRef(!1),V=v.useRef(!1),q=v.useRef([]),O=v.useRef(!1),J={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:stun1.l.google.com:19302"}]};v.useEffect(()=>(t&&t.callId&&a&&ie(),()=>{ne()}),[t,a]),v.useEffect(()=>(c==="connected"&&F.current?U.current=setInterval(()=>{const Z=Math.floor((Date.now()-F.current)/1e3);x(Z)},1e3):U.current&&(clearInterval(U.current),U.current=null),()=>{U.current&&clearInterval(U.current)}),[c]);const ie=async()=>{try{H.current=!1,X.current=null,W.current=!1,V.current=!1,q.current=[],O.current=!1;const Z={audio:!0,video:w?{width:640,height:480}:!1};try{_.current=await navigator.mediaDevices.getUserMedia(Z)}catch(Ne){Ne.name==="NotAllowedError"?g("Camera/microphone access denied. Please allow access and try again."):Ne.name==="NotFoundError"?g("Camera/microphone not found. Please check your devices."):Ne.name==="NotReadableError"?g("Camera/microphone is being used by another application."):g(`Media access failed: ${Ne.message}`);return}_.current.getAudioTracks().forEach(Ne=>{Ne.enabled=!0}),_.current.getVideoTracks().forEach(Ne=>{Ne.enabled=!0}),p.current&&(p.current.srcObject=_.current,p.current.play().catch(()=>{}));try{R.current=new RTCPeerConnection(J)}catch(Ne){g(`Failed to create peer connection: ${Ne.message}`);return}try{_.current.getTracks().forEach(Ne=>{R.current.addTrack(Ne,_.current)})}catch(Ne){g(`Failed to add tracks to peer connection: ${Ne.message}`);return}R.current.ontrack=Ne=>{if(y.current){y.current.srcObject=Ne.streams[0],y.current.play().catch(()=>{});const Rn=Ne.streams[0];Rn.getAudioTracks().forEach(Ht=>{Ht.enabled=!0}),Rn.getVideoTracks().forEach(Ht=>{Ht.enabled=!0}),y.current.volume!==void 0&&(y.current.volume=1)}},R.current.onicecandidate=Ne=>{Ne.candidate&&l&&l.emit("ice-candidate",{callId:t.callId,candidate:Ne.candidate.candidate,sdpMLineIndex:Ne.candidate.sdpMLineIndex,sdpMid:Ne.candidate.sdpMid})},R.current.onconnectionstatechange=()=>{const Ne=R.current.connectionState;Ne==="connected"?(u("connected"),F.current=Date.now()):(Ne==="disconnected"||Ne==="failed")&&A()},ee(),O.current=!0,n||await $()}catch{O.current=!1,g("Failed to access camera/microphone. Please check permissions.")}},ee=()=>{l&&(l.off("call-answered"),l.off("call-declined"),l.off("call-ended"),l.off("call-error"),l.off("call-offer"),l.off("ice-candidate"),l.on("call-answered",async Z=>{if(Z.callId===t.callId){if(X.current===Z.callId)return;try{if(Z.answer&&R.current){const Se=typeof Z.answer=="string"?JSON.parse(Z.answer):Z.answer;R.current.signalingState==="have-local-offer"&&!H.current&&(await R.current.setRemoteDescription(Se),H.current=!0,X.current=Z.callId,await le())}u("connected"),F.current=Date.now()}catch{g("Failed to handle call answer")}}}),l.on("call-declined",Z=>{Z.callId===t.callId&&(u("declined"),setTimeout(()=>{r&&r()},2e3))}),l.on("call-ended",Z=>{Z.callId===t.callId&&A()}),l.on("ice-candidate",async Z=>{if(Z.callId===t.callId&&R.current)try{const Se=R.current.signalingState;Se==="stable"||Se==="have-local-offer"||Se==="have-remote-offer"?await R.current.addIceCandidate({candidate:Z.candidate,sdpMLineIndex:Z.sdpMLineIndex,sdpMid:Z.sdpMid}):q.current.push({candidate:Z.candidate,sdpMLineIndex:Z.sdpMLineIndex,sdpMid:Z.sdpMid})}catch{}}),l.on("call-error",Z=>{g(Z.error)}),l.on("call-offer",async Z=>{if(Z.callId===t.callId&&n)try{const Se=typeof Z.offer=="string"?JSON.parse(Z.offer):Z.offer;R.current&&R.current.signalingState==="stable"&&(await R.current.setRemoteDescription(Se),await le())}catch{g("Failed to handle call offer")}}))},le=async()=>{if(q.current.length>0){for(const Z of q.current)try{await R.current.addIceCandidate(Z)}catch{}q.current=[]}},$=async()=>{try{if(!O.current){g("WebRTC not initialized yet");return}if(!R.current){g("Peer connection not available");return}if(!l||!l.connected){g("Socket connection not available");return}if(!t||!t.callId){g("Call data not available");return}if(V.current)return;const Z=R.current.signalingState;if(Z!=="stable"){g(`Cannot create offer in state: ${Z}`);return}const Se=await R.current.createOffer();await R.current.setLocalDescription(Se),V.current=!0,l.emit("call-offer",{callId:t.callId,offer:Se}),u("ringing")}catch(Z){g(`Failed to create call offer: ${Z.message}`)}},k=async()=>{try{if(R.current)if(R.current.signalingState==="have-remote-offer"){const Se=await R.current.createAnswer();await R.current.setLocalDescription(Se),l.emit("call-answer",{callId:t.callId,answer:Se}),u("connected"),F.current=Date.now(),s&&s()}else g("Cannot answer call in current state");else g("Call connection not ready")}catch{g("Failed to answer call")}},M=()=>{l&&l.emit("call-decline",{callId:t.callId}),u("declined"),o&&o(),setTimeout(()=>{r&&r()},1e3)},A=()=>{W.current||(W.current=!0,l&&l.emit("call-end",{callId:t.callId}),u("ended"),r&&r())},z=()=>{_.current&&(_.current.getAudioTracks().forEach(Se=>{Se.enabled=m}),d(!m))},re=()=>{if(_.current){const Z=_.current.getVideoTracks(),Se=!w;Z.forEach(Vt=>{Vt.enabled=Se}),C(Se)}},ne=()=>{_.current&&_.current.getTracks().forEach(Z=>Z.stop()),R.current&&R.current.close(),U.current&&clearInterval(U.current)},ve=Z=>{const Se=Math.floor(Z/60),Vt=Z%60;return`${Se}:${Vt.toString().padStart(2,"0")}`};return S?i.jsx("div",{className:"call-error-container",children:i.jsxs("div",{className:"call-error",children:[i.jsx("div",{className:"error-icon",children:""}),i.jsx("h3",{children:"Call Error"}),i.jsx("p",{children:S}),i.jsx("button",{className:"btn btn-primary",onClick:r,children:"Close"})]})}):i.jsxs("div",{className:"webrtc-call-container",children:[i.jsx("div",{className:"video-container",children:w?i.jsxs(i.Fragment,{children:[i.jsx("video",{ref:y,autoPlay:!0,playsInline:!0,className:"remote-video"}),i.jsx("video",{ref:p,autoPlay:!0,playsInline:!0,muted:!0,className:"local-video"})]}):i.jsx("div",{className:"audio-only-indicator",children:i.jsx("p",{children:"Audio Only Call"})})}),i.jsx("div",{className:"call-info-overlay",children:i.jsxs("div",{className:"call-user-info",children:[i.jsx("div",{className:"call-avatar",children:(he=t==null?void 0:t.otherUser)!=null&&he.avatar||(Ge=t==null?void 0:t.receiver)!=null&&Ge.avatar||(ae=t==null?void 0:t.caller)!=null&&ae.avatar?i.jsx("img",{src:((je=t.otherUser)==null?void 0:je.avatar)||((Je=t.receiver)==null?void 0:Je.avatar)||((Dt=t.caller)==null?void 0:Dt.avatar),alt:((tt=t.otherUser)==null?void 0:tt.name)||((te=t.receiver)==null?void 0:te.name)||((Q=t.caller)==null?void 0:Q.name)}):i.jsx("div",{className:"default-avatar-large",children:((mt=(Rt=((Te=t==null?void 0:t.otherUser)==null?void 0:Te.name)||((Nt=t==null?void 0:t.receiver)==null?void 0:Nt.name)||((Bt=t==null?void 0:t.caller)==null?void 0:Bt.name))==null?void 0:Rt.charAt(0))==null?void 0:mt.toUpperCase())||"U"})}),i.jsx("h2",{children:((We=t==null?void 0:t.otherUser)==null?void 0:We.name)||((Re=t==null?void 0:t.receiver)==null?void 0:Re.name)||((Ye=t==null?void 0:t.caller)==null?void 0:Ye.name)||"Unknown"}),i.jsxs("p",{className:"call-status-text",children:[c==="incoming"&&"Incoming call...",c==="outgoing"&&"Calling...",c==="ringing"&&"Ringing...",c==="connected"&&`Connected - ${ve(h)}`,c==="declined"&&"Call declined",c==="ended"&&"Call ended"]})]})}),i.jsxs("div",{className:"call-controls",children:[c==="incoming"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"call-control-btn decline-btn",onClick:M,children:""}),i.jsx("button",{className:"call-control-btn answer-btn",onClick:k,children:""})]}),c==="connected"&&i.jsxs(i.Fragment,{children:[i.jsx("button",{className:`call-control-btn ${m?"muted":""}`,onClick:z,title:m?"Unmute":"Mute",children:m?"":""}),(t==null?void 0:t.callType)==="video"&&i.jsx("button",{className:`call-control-btn ${w?"":"video-disabled"}`,onClick:re,title:w?"Disable Video":"Enable Video",children:w?"":""}),i.jsx("button",{className:"call-control-btn end-btn",onClick:A,title:"End Call",children:""})]}),(c==="outgoing"||c==="ringing")&&i.jsx("button",{className:"call-control-btn end-btn",onClick:A,title:"Cancel Call",children:""})]})]})},xf=()=>{const{user:e,logout:t}=pn(),{socket:n,isConnected:r,sendMessage:s,joinGroup:o,leaveGroup:l,onReceiveMessage:a,onReceiveGroupMessage:c,onMessageSent:u,getConnectionStatus:m}=mi(),[d,w]=v.useState([]),[C,h]=v.useState([]),[x,S]=v.useState(null),[g,p]=v.useState([]),[y,_]=v.useState(""),[R,F]=v.useState(""),[U,H]=v.useState(!0),[X,W]=v.useState({}),[V,q]=v.useState({}),[O,J]=v.useState(null),[ie,ee]=v.useState(null),[le,$]=v.useState(!1),[k,M]=v.useState({}),[A,z]=v.useState(()=>{try{const f=sessionStorage.getItem("downloadedMessages");return f?JSON.parse(f):{}}catch{return{}}}),[re,ne]=v.useState(!1),[ve,he]=v.useState(null),[Ge,ae]=v.useState(!1),je=f=>f&&(/^https?:\/\//i.test(f)?f:`${be}${f}`),[Je,Dt]=v.useState(null),[tt,te]=v.useState(!1),[Q,Te]=v.useState(null),[Nt,Bt]=v.useState(null),[Rt,mt]=v.useState(""),We=f=>((f==null?void 0:f.id)||(f==null?void 0:f._id)||(f==null?void 0:f.messageId)||"").toString(),Re=f=>{Je&&clearTimeout(Je);const N=setTimeout(()=>{Te(f),te(!0)},700);Dt(N)},Ye=()=>{Je&&(clearTimeout(Je),Dt(null))},Z=async()=>{try{const f=(Q==null?void 0:Q.messageType)==="text"?(Q==null?void 0:Q.message)||"":je(Q==null?void 0:Q.fileUrl)||(Q==null?void 0:Q.fileName)||"";f&&await navigator.clipboard.writeText(f)}catch{}te(!1)},Se=()=>{if(Q){try{sessionStorage.setItem("forwardMessage",JSON.stringify({id:Q.id||Q._id,message:Q.message,messageType:Q.messageType,fileUrl:Q.fileUrl,fileName:Q.fileName,fileSize:Q.fileSize,fileType:Q.fileType}))}catch{}window.location.href="/forward"}te(!1)},Vt=()=>{var f,N,T,b;if(Q&&Q.messageType==="text"){const P=((f=Q.sender)==null?void 0:f.id)||((N=Q.sender)==null?void 0:N._id)||Q.sender;P===e.id||P===e._id||P===((T=e.id)==null?void 0:T.toString())||P===((b=e._id)==null?void 0:b.toString())?(Bt(Q),mt(Q.message||"")):G.error("You can only edit your own messages")}te(!1)},Ne=async()=>{if(!(!Nt||!Rt.trim()))try{p(f=>f.map(N=>We(N)===We(Nt)?{...N,message:Rt.trim(),isEdited:!0,editedAt:new Date().toISOString()}:N)),await Le.editMessage(Nt.id||Nt._id,Rt.trim()),Bt(null),mt("")}catch(f){console.error("Failed to edit message:",f),G.error("Failed to edit message")}},Rn=()=>{Bt(null),mt("")},Ht=v.useRef(null);v.useEffect(()=>((async()=>{try{console.log(" Loading chat state from database for UserDashboard...");const N=await Le.getChatState(),{personalChats:T,groupChats:b}=N.data,P={},L={};T.forEach(B=>{var oe,se,xe;B.unreadCount>0&&(P[B.chatId]=B.unreadCount),B.lastMessage&&B.lastMessage.message&&(L[B.chatId]={id:B.lastMessage._id||B.lastMessage.id,message:B.lastMessage.message,senderName:B.lastMessage.senderName||((oe=B.lastMessage.sender)==null?void 0:oe.name)||"User",senderId:B.lastMessage.senderId||((se=B.lastMessage.sender)==null?void 0:se._id)||((xe=B.lastMessage.sender)==null?void 0:xe.id),timestamp:B.lastMessage.createdAt||B.lastMessage.timestamp})}),b.forEach(B=>{var oe,se,xe;B.unreadCount>0&&(P[B.chatId]=B.unreadCount),B.lastMessage&&B.lastMessage.message&&(L[B.chatId]={id:B.lastMessage._id||B.lastMessage.id,message:B.lastMessage.message,senderName:B.lastMessage.senderName||((oe=B.lastMessage.sender)==null?void 0:oe.name)||"User",senderId:B.lastMessage.senderId||((se=B.lastMessage.sender)==null?void 0:se._id)||((xe=B.lastMessage.sender)==null?void 0:xe.id),timestamp:B.lastMessage.createdAt||B.lastMessage.timestamp})}),W(P),q(L),console.log(" UserDashboard chat state loaded from database:",{unreadCounts:P,lastMessages:Object.keys(L).length})}catch(N){console.error("Error loading chat state from database:",N)}})(),pi(),hi(),()=>{}),[]),v.useEffect(()=>(x&&(as(),hi(),x.type==="group"&&(o(x.id),console.log(" UserDashboard joined group room for:",x.name))),()=>{qe.removeAllListeners(),x&&x.type==="group"&&(l(x.id),console.log(" UserDashboard left group room for:",x.name)),qe.healthCheckInterval&&(clearInterval(qe.healthCheckInterval),delete qe.healthCheckInterval)}),[x]),v.useEffect(()=>{Cu()},[g]);const Nr=async()=>{try{console.log(" Refreshing UserDashboard chat state from database...");const f=await Le.getChatState(),{personalChats:N,groupChats:T}=f.data,b={},P={};N.forEach(L=>{var B,oe,se;L.unreadCount>0&&(b[L.chatId]=L.unreadCount),L.lastMessage&&L.lastMessage.message&&(P[L.chatId]={id:L.lastMessage._id||L.lastMessage.id,message:L.lastMessage.message,senderName:L.lastMessage.senderName||((B=L.lastMessage.sender)==null?void 0:B.name)||"User",senderId:L.lastMessage.senderId||((oe=L.lastMessage.sender)==null?void 0:oe._id)||((se=L.lastMessage.sender)==null?void 0:se.id),timestamp:L.lastMessage.createdAt||L.lastMessage.timestamp})}),T.forEach(L=>{var B,oe,se;L.unreadCount>0&&(b[L.chatId]=L.unreadCount),L.lastMessage&&L.lastMessage.message&&(P[L.chatId]={id:L.lastMessage._id||L.lastMessage.id,message:L.lastMessage.message,senderName:L.lastMessage.senderName||((B=L.lastMessage.sender)==null?void 0:B.name)||"User",senderId:L.lastMessage.senderId||((oe=L.lastMessage.sender)==null?void 0:oe._id)||((se=L.lastMessage.sender)==null?void 0:se.id),timestamp:L.lastMessage.createdAt||L.lastMessage.timestamp})}),W(b),q(P),console.log(" UserDashboard chat state refreshed from database")}catch(f){console.error("Error refreshing UserDashboard chat state:",f)}};v.useEffect(()=>{window.testSocketDashboard=()=>{qe.testConnection()},window.checkSocketDashboard=()=>{qe.logConnectionStatus()},window.forceSocketConnectDashboard=()=>{qe.forceConnectionTest()},console.log(" UserDashboard Socket debugging methods available:"),console.log(" - testSocketDashboard() - Test socket connection status"),console.log(" - checkSocketDashboard() - Show current socket status"),console.log(" - forceSocketConnectDashboard() - Force reconnection")},[]);const pi=async()=>{try{H(!0);const[f,N]=await Promise.all([ht.getActiveUsers(),Jt.getMyGroups()]);console.log(" UserDashboard Data Loaded:"),console.log(" Users:",f.data.length),console.log(" Groups:",N.data.length),console.log(" Group Details:",N.data.map(T=>{var b;return{id:T.id,name:T.name,members:((b=T.members)==null?void 0:b.length)||0,avatar:T.avatar?"Has Avatar":"No Avatar"}})),w(f.data.filter(T=>T.id!==e.id)),h(N.data)}catch(f){console.error("Error fetching dashboard data:",f),G.error("Failed to load dashboard data")}finally{H(!1)}},hi=()=>{console.log(" Setting up enhanced UserDashboard socket listeners with Context API...");const f=m();console.log(" Current socket status:",f),a(N=>{var se,xe;console.log(" USERDASHBOARD CONTEXT - received message:",N);const T=typeof N.sender=="object"?N.sender.id||N.sender._id:N.sender,b=typeof N.receiver=="object"?N.receiver.id||N.receiver._id:N.receiver,P=N.id||N._id||N.messageId,L=N.message||N.content,B=T===e.id||T===e._id||T===((se=e.id)==null?void 0:se.toString())||T===((xe=e._id)==null?void 0:xe.toString());if(N._isConfirmation||N.isConfirmMessage||N.isMessageSentConfirmation){console.log(" Skipping confirmation message");return}const oe=gi(N,x,e);if(console.log(" ENHANCED USERDASHBOARD MESSAGE FILTERING:",{senderId:T,receiverId:b,messageId:P,messageText:L,selectedChatId:x==null?void 0:x.id,selectedChatType:x==null?void 0:x.type,currentUserId:e.id,isCurrentUserSender:B,isForCurrentChat:oe,messageData:N}),oe&&x)console.log(" Processing message for current active dashboard chat"),B?console.log(" Message from current user - handled by optimistic updates"):(console.log(" Adding external message to current dashboard chat immediately"),p(Y=>{if(Y.some(me=>{var At,rn;const jt=me.id||me._id||me.messageId,Ie=me.message||me.content,It=((At=me.sender)==null?void 0:At.id)||((rn=me.sender)==null?void 0:rn._id)||me.sender,lt=me.createdAt||me.timestamp,at=N.createdAt||N.timestamp;return!!(jt===P&&P||Ie===L&&String(It)===String(T)&&at&&lt&&Math.abs(new Date(at)-new Date(lt))<5e3||me.isOptimistic&&Ie===L&&String(It)===String(T)&&at&&lt&&Math.abs(new Date(at)-new Date(lt))<1e4)}))return console.log(" UserDashboard enhanced detection: Message already exists - confirmed duplicate",{messageId:P,messageText:L==null?void 0:L.substring(0,20),senderId:T,isDuplicate:!0}),Y;console.log(" REAL-TIME USERDASHBOARD: NEW message confirmed - Adding to active chat",{messageId:P,messageText:L==null?void 0:L.substring(0,20),senderId:T,isDuplicate:!1});const ce=hn(N,T);return gn(x.id,N,T),setTimeout(()=>{Nr()},100),[...Y,ce]}));else if(L&&!B){const Y=T||N.sender;Y&&Y!==e.id&&(console.log(" Incrementing unread count for dashboard chat:",Y),W(pe=>({...pe,[Y]:(pe[Y]||0)+1})),gn(Y,N,T),setTimeout(()=>{Nr()},100))}}),u(N=>{console.log(" Dashboard message sent confirmation received:",N),N&&N.id&&p(T=>{const b=T.filter(L=>!L.isOptimistic),P={id:N.id,message:N.message,messageType:N.messageType||"text",fileUrl:N.fileUrl,fileName:N.fileName,fileSize:N.fileSize,fileType:N.fileType,sender:N.sender,createdAt:N.createdAt||N.timestamp,timestamp:N.timestamp,isOptimistic:!1};return[...b,P]})}),c(N=>{var se,xe,Y,pe;console.log(" USERDASHBOARD GROUP MESSAGE CONTEXT - received message:",N);const T=typeof N.sender=="object"?N.sender.id||N.sender._id:N.sender,b=N.groupId||((se=N.group)==null?void 0:se.id)||((xe=N.group)==null?void 0:xe._id),P=N.id||N._id||N.messageId,L=N.message||N.content,B=T===e.id||T===e._id||T===((Y=e.id)==null?void 0:Y.toString())||T===((pe=e._id)==null?void 0:pe.toString());if(N._isConfirmation||N.isConfirmMessage||N.isMessageSentConfirmation){console.log(" Skipping confirmation message");return}const oe=x&&x.type==="group"&&(b===x.id||String(b)===String(x.id));if(console.log(" USERDASHBOARD GROUP MESSAGE FILTERING:",{senderId:T,groupId:b,messageId:P,messageText:L,selectedChatId:x==null?void 0:x.id,selectedChatType:x==null?void 0:x.type,currentUserId:e.id,isCurrentUserSender:B,isForCurrentGroup:oe,messageData:N}),oe&&x)console.log(" Processing group message for current UserDashboard group"),B?console.log(" Group message from current user - handled by optimistic updates"):(console.log(" Adding external group message to current dashboard chat immediately"),p(ce=>{if(ce.some(Ie=>{var kr,Eu;const It=Ie.id||Ie._id||Ie.messageId,lt=Ie.message||Ie.content,at=((kr=Ie.sender)==null?void 0:kr.id)||((Eu=Ie.sender)==null?void 0:Eu._id)||Ie.sender,At=Ie.createdAt||Ie.timestamp,rn=N.createdAt||N.timestamp;return!!(It===P&&P||lt===L&&String(at)===String(T)&&rn&&At&&Math.abs(new Date(rn)-new Date(At))<5e3||Ie.isOptimistic&&lt===L&&String(at)===String(T)&&rn&&At&&Math.abs(new Date(rn)-new Date(At))<1e4)}))return console.log(" USERDASHBOARD GROUP duplicate detection: Message already exists",{messageId:P,messageText:L==null?void 0:L.substring(0,20),senderId:T==null?void 0:T.toString(),isDuplicate:!0}),ce;console.log(" USERDASHBOARD GROUP REAL-TIME: NEW message confirmed - Adding to active group",{messageId:P,messageText:L==null?void 0:L.substring(0,20),senderId:T,groupId:b});const jt=hn(N,T);return gn(x.id,N,T),setTimeout(()=>{Nr()},100),[...ce,jt]}));else if(L&&!B){const ce=b||N.groupId;ce&&(!x||x.type!=="group"||String(ce)!==String(x.id))&&(console.log(" UserDashboard incrementing unread count for group:",ce),W(jt=>({...jt,[ce]:(jt[ce]||0)+1})),gn(ce,N,T),setTimeout(()=>{Nr()},100))}}),n&&(n.off("incoming-call"),n.on("incoming-call",N=>{ae(!0),he({callId:N.callId,callType:N.callType,caller:N.caller}),ne(!0)}),n.off("call-initiated"),n.on("call-initiated",N=>{ae(!1),he({callId:N.callId,callType:N.callType,otherUser:N.receiver}),ne(!0)}),n.off("messages-seen"),n.on("messages-seen",N=>{console.log(" Messages seen by user:",N.readBy),x&&x.type==="personal"&&N.chatId===x.id&&p(T=>T.map(b=>{var L,B;return(((L=b.sender)==null?void 0:L.id)||((B=b.sender)==null?void 0:B._id)||b.sender)===e.id?{...b,isRead:!0,readBy:[{user:N.readBy,readAt:N.timestamp}]}:b}))}))},gi=(f,N,T)=>{var B,oe,se,xe;if(!N)return!1;const b=((B=f.sender)==null?void 0:B.id)||((oe=f.sender)==null?void 0:oe._id)||f.sender,P=((se=f.receiver)==null?void 0:se.id)||((xe=f.receiver)==null?void 0:xe._id)||f.receiver,L=f.chatId||f.chatRoom;return N.type==="personal"&&N.id&&(b===N.id&&P===T.id||b===T.id&&P===N.id||String(b)===String(N.id)||String(P)===String(N.id))?!0:N.type==="group"?L===N.id||f.groupId===N.id:!1},hn=(f,N)=>{var T,b;return{id:f.id||f._id||f.messageId,message:f.message||f.content,messageType:f.messageType||"text",fileUrl:f.fileUrl,fileName:f.fileName,fileSize:f.fileSize,fileType:f.fileType,sender:typeof f.sender=="object"?f.sender:{id:N,name:f.senderName||((T=f.sender)==null?void 0:T.name)||"User",profileImage:f.senderProfileImage||((b=f.sender)==null?void 0:b.profileImage)},createdAt:f.createdAt||f.timestamp||new Date().toISOString(),timestamp:f.timestamp||f.createdAt,isFromOtherUser:!(N===e.id||N===e._id)}},gn=(f,N,T)=>{const b=T===e.id||T===e._id;q(P=>{var L;return{...P,[f]:{id:N.id||N._id||N.messageId,message:N.message||N.content,senderName:b?"You":N.senderName||((L=N.sender)==null?void 0:L.name)||"User",senderId:T,timestamp:N.createdAt||N.timestamp||new Date().toISOString()}}})},as=async()=>{var f;try{let N;if(x.type==="personal"){if(!x.id){console.error("User ID is undefined for personal chat");return}N=await Le.getPersonalMessages(x.id)}else{if(!x.id){console.error("Group ID is undefined for group chat");return}N=await Le.getGroupMessages(x.id)}const T=N.data;if(p(T),T.length>0){const b=T[T.length-1];gn(x.id,b,((f=b.sender)==null?void 0:f.id)||b.sender)}}catch(N){console.error("Error fetching messages:",N),G.error("Failed to load messages")}},jr=f=>{const N=document.createElement("input");N.type="file",N.style.display="none",f==="image"?N.accept="image/*":f==="video"?N.accept="video/*":f==="document"&&(N.accept=".pdf,.doc,.docx,.txt,.csv,.xls,.xlsx"),N.onchange=T=>{const b=T.target.files[0];if(b){if(J(b),b.type.startsWith("image/")){const P=new FileReader;P.onload=L=>ee(L.target.result),P.readAsDataURL(b)}else ee(null);$(!1)}},document.body.appendChild(N),N.click(),document.body.removeChild(N)},Sr=()=>{J(null),ee(null)},cs=async(f,N,T)=>{try{M(ce=>({...ce,[T]:{progress:0,downloading:!0}}));const b=await fetch(je(f)),P=b.headers.get("content-length"),L=parseInt(P,10);if(!b.ok)throw new Error("Download failed");const B=b.body.getReader(),oe=[];let se=0;for(;;){const{done:ce,value:me}=await B.read();if(ce)break;oe.push(me),se+=me.length;const jt=L?Math.round(se/L*100):0;M(Ie=>({...Ie,[T]:{progress:jt,downloading:!0}}))}const xe=new Blob(oe),Y=window.URL.createObjectURL(xe),pe=document.createElement("a");pe.href=Y,pe.download=N,document.body.appendChild(pe),pe.click(),document.body.removeChild(pe),window.URL.revokeObjectURL(Y),M(ce=>({...ce,[T]:{progress:100,downloading:!1}})),z(ce=>{const me={...ce,[T]:!0};try{sessionStorage.setItem("downloadedMessages",JSON.stringify(me))}catch{}return me}),setTimeout(()=>{M(ce=>{const me={...ce};return delete me[T],me})},2e3)}catch(b){console.error("Download failed:",b),M(P=>({...P,[T]:{progress:0,downloading:!1,error:!0}}))}};v.useEffect(()=>{const f=N=>{le&&!N.target.closest(".file-options-container")&&$(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[le]);const xl=async f=>{if(f.preventDefault(),!y.trim()&&!O||!x)return;if(x.type==="personal"&&x.isActive===!1){G.error("Cannot send messages to disabled users");return}const N=y.trim();_("");try{let T={sender:e.id,message:N,messageType:"text"};if(x.type==="personal"?T.receiver=x.id:T.group=x.id,O){const b=new FormData;x.type==="personal"?b.append("receiver",x.id):b.append("group",x.id),b.append("message",N),b.append("file",O);let P="file";O.type.startsWith("image/")?P="image":O.type.startsWith("video/")&&(P="video");const L={id:Date.now(),message:N||O.name,messageType:P,fileUrl:URL.createObjectURL(O),fileName:O.name,fileSize:O.size,fileType:O.type,sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};p(B=>[...B,L]),gn(x.id,{id:L.id,message:L.message,createdAt:L.createdAt},e.id),x.type==="personal"?await Le.sendPersonalMessage(b):await Le.sendGroupMessage(b),Sr()}else{const b={id:Date.now(),message:N,messageType:"text",sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};if(p(P=>[...P,b]),gn(x.id,{id:b.id,message:b.message,createdAt:b.createdAt},e.id),x.type==="personal")try{await s(x.id,N,"text",!1),console.log(" Dashboard message sent via context socket")}catch(P){console.warn("Context socket failed, trying API:",P),await Le.sendPersonalMessage(T)}else try{await s(x.id,N,"text",!0),console.log(" Dashboard group message sent via context socket")}catch(P){console.warn("Context socket failed, trying API:",P),await Le.sendGroupMessage({sender:e.id,group:x.id,message:N,timestamp:new Date().toISOString()})}}console.log(" Dashboard message sent successfully")}catch(T){console.error(" Failed to send dashboard message:",T),G.error("Failed to send message"),p(b=>b.filter(P=>!P.isOptimistic))}},Cu=()=>{var f;(f=Ht.current)==null||f.scrollIntoView({behavior:"smooth"})},xi=()=>{t(),G.success("Logged out successfully")},E=[...d.map(f=>({id:f.id,name:f.name,email:f.email,type:"personal",avatar:f.name.charAt(0).toUpperCase(),profileImage:f.profileImage,lastMessage:V[f.id]||null,isActive:f.isActive})),...C.map(f=>{var N;return{id:f.id,name:f.name,email:`${((N=f.members)==null?void 0:N.length)||0} members`,type:"group",avatar:f.avatar?`${be}${f.avatar}`:"G",profileImage:f.avatar,lastMessage:V[f.id]||null}})].sort((f,N)=>{var P,L;const T=(P=f.lastMessage)!=null&&P.timestamp?new Date(f.lastMessage.timestamp).getTime():0;return((L=N.lastMessage)!=null&&L.timestamp?new Date(N.lastMessage.timestamp).getTime():0)-T}).filter(f=>f.name.toLowerCase().includes(R.toLowerCase())||f.email.toLowerCase().includes(R.toLowerCase()));return U?i.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):i.jsxs("div",{className:"h-screen bg-gray-50 flex",children:[i.jsxs("div",{className:"w-full h-screen flex bg-white shadow-lg",children:[i.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] bg-white border-r border-gray-200 flex flex-col",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"WhatsApp Chat"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ao,{to:"/profile",className:"text-gray-500 hover:text-gray-700",children:i.jsx(ku,{className:"w-5 h-5"})}),i.jsx("button",{onClick:xi,className:"p-1 text-gray-500 hover:text-gray-700",title:"Logout",children:i.jsx(Ah,{className:"w-5 h-5"})})]})]}),i.jsx("div",{className:"flex items-center space-x-3 mb-3",children:i.jsxs(Ao,{to:"/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?i.jsx("img",{src:`${be}${e.profileImage}`,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):i.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium",children:e.name.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),i.jsx("p",{className:"text-xs text-green-600",children:"Online"})]})]})}),i.jsxs("div",{className:"relative",children:[i.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search or start new chat",value:R,onChange:f=>F(f.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[E.map(f=>i.jsx("div",{onClick:()=>{console.log("Selecting chat:",f),S({type:f.type,id:f.id,name:f.name,profileImage:f.profileImage,isActive:f.isActive!==!1}),X[f.id]&&(W(N=>{const T={...N};return delete T[f.id],T}),Le.updateChatState({chatId:f.id,chatType:f.type,action:"clear_unread"}).catch(N=>{console.error("Error clearing unread count:",N)}))},className:`p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 ${(x==null?void 0:x.id)===f.id&&(x==null?void 0:x.type)===f.type?"bg-green-50":""} ${f.type==="personal"&&f.isActive===!1?"opacity-60 bg-red-50 border-l-4 border-red-300":""}`,title:f.type==="personal"&&f.isActive===!1?"Disabled User":"",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:`w-12 h-12 rounded-full overflow-hidden ${f.type==="personal"&&f.isActive===!1?"bg-gray-300":"bg-gray-200"}`,children:f.type==="personal"?f.profileImage?i.jsx("img",{src:`${be}${f.profileImage}`,alt:f.name,className:`w-full h-full object-cover ${f.isActive===!1?"grayscale opacity-70":""}`}):i.jsx("div",{className:`w-full h-full ${f.isActive===!1?"bg-gray-400":"bg-green-500"} flex items-center justify-center`,children:i.jsx("span",{className:"text-white font-semibold text-lg",children:f.avatar})}):f.profileImage?i.jsx("img",{src:f.avatar,alt:f.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx(Ft,{className:"w-6 h-6 text-white"})})}),f.type==="personal"&&f.isActive!==!1&&i.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"}),f.type==="personal"&&f.isActive===!1&&i.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-white flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs font-bold",children:""})})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("h3",{className:`truncate ${f.type==="personal"&&f.isActive===!1?"font-medium text-red-700 line-through":"font-medium text-gray-900"}`,children:[f.name,f.type==="personal"&&f.isActive===!1&&i.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Disabled)"})]}),f.type==="group"&&i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Group"}),tt&&Q&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/30",onClick:()=>te(!1),children:i.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-xl w-full sm:w-80 p-4 shadow-xl",onClick:N=>N.stopPropagation(),children:[i.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Actions"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full btn-secondary",onClick:Z,children:"Copy"}),Q.messageType==="text"&&(()=>{var b,P,L,B;const N=((b=Q.sender)==null?void 0:b.id)||((P=Q.sender)==null?void 0:P._id)||Q.sender;return N===e.id||N===e._id||N===((L=e.id)==null?void 0:L.toString())||N===((B=e._id)==null?void 0:B.toString())?i.jsx("button",{className:"w-full btn-primary",onClick:Vt,children:"Edit"}):null})(),i.jsx("button",{className:"w-full btn-primary",onClick:Se,children:"Forward"}),i.jsx("button",{className:"w-full btn-secondary",onClick:()=>te(!1),children:"Cancel"})]})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"12:30"}),X[f.id]&&X[f.id]>0&&i.jsx("div",{className:"bg-green-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:X[f.id]>99?"99+":X[f.id]})]})]}),i.jsx("p",{className:`text-sm truncate ${f.type==="personal"&&f.isActive===!1?"text-red-400":"text-gray-500"}`,children:f.type==="personal"&&f.isActive===!1?"User is disabled - cannot send new messages":f.lastMessage&&f.lastMessage.message?`${f.lastMessage.senderName||"You"}: ${f.lastMessage.message}`:"No messages yet"})]})]})},`${f.type}-${f.id}`)),E.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(fr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500 text-sm",children:R?"No chats found.":"No chats available."})]})]})]}),i.jsx("div",{className:"flex-1 flex flex-col",children:x?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:x.type==="personal"?x.profileImage?i.jsx("img",{src:`${be}${x.profileImage}`,alt:x.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:x.name.charAt(0).toUpperCase()})}):x.profileImage?i.jsx("img",{src:`${be}${x.profileImage}`,alt:x.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx(Ft,{className:"w-5 h-5 text-white"})})}),i.jsxs("div",{className:`${x.type==="group"?"cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors":""}`,onClick:()=>{x.type==="group"&&(window.location.href=`/group/${x.id}`)},title:x.type==="group"?"Click to view group info":"",children:[i.jsxs("h3",{className:`font-semibold ${x.type==="personal"&&x.isActive===!1?"text-red-700":"text-gray-900"}`,children:[x.name,x.type==="personal"&&x.isActive===!1&&i.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Disabled)"})]}),i.jsx("p",{className:`text-xs ${x.type==="personal"&&x.isActive===!1?"text-red-400":"text-gray-500"}`,children:x.type==="personal"?x.isActive===!1?"User is disabled - viewing mode only":"last seen today at 10:30 AM":`${x.email}`})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(Vw,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var f,N;if(!(!x||x.type!=="personal"))try{const b=(N=(f=(await ni.initiate(x.id,"voice")).data)==null?void 0:f.data)==null?void 0:N.call;b&&b._id&&(ae(!1),he({callId:b._id,callType:"voice",otherUser:b.otherUser}),ne(!0),n.emit("call-initiate",{receiverId:x.id,callType:"voice",callId:b._id}))}catch(T){console.error("Failed to initiate call",T)}}}),i.jsx(Fo,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var f,N;if(!(!x||x.type!=="personal"))try{const b=(N=(f=(await ni.initiate(x.id,"video")).data)==null?void 0:f.data)==null?void 0:N.call;b&&b._id&&(ae(!1),he({callId:b._id,callType:"video",otherUser:b.otherUser}),ne(!0),n.emit("call-initiate",{receiverId:x.id,callType:"video",callId:b._id}))}catch(T){console.error("Failed to initiate video call",T)}}}),i.jsx(uc,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 relative",children:i.jsxs("div",{className:"max-w-8xl mx-auto",children:[g.map((f,N)=>{var L,B,oe,se,xe,Y,pe;let T=!1;if(typeof f.sender=="object"&&f.sender!==null){const ce=f.sender._id||f.sender.id;T=ce===e.id||ce===e._id||ce===((L=e.id)==null?void 0:L.toString())||ce===((B=e._id)==null?void 0:B.toString())}else T=f.sender===e.id||f.sender===e._id||f.sender===((oe=e.id)==null?void 0:oe.toString())||f.sender===((se=e._id)==null?void 0:se.toString());const b=typeof f.sender=="object"?(xe=f.sender)==null?void 0:xe.name:"User",P=typeof f.sender=="object"?(Y=f.sender)==null?void 0:Y.profileImage:null;return i.jsx("div",{className:`flex ${T?"justify-end":"justify-start"} mb-4`,children:i.jsxs("div",{className:`flex items-start gap-2 max-w-sm lg:max-w-md ${T?"flex-row-reverse":"flex-row"}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-300 flex-shrink-0",children:T?e.profileImage?i.jsx("img",{src:`${be}${e.profileImage}`,alt:e.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs font-medium",children:e.name.charAt(0).toUpperCase()})}):P?i.jsx("img",{src:`${be}${P}`,alt:b,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gray-400 flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs font-medium",children:String(b).charAt(0).toUpperCase()})})}),i.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg ${T?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"} ${tt&&Q&&We(Q)===We(f)?"ring-2 ring-blue-400":""}`,onMouseDown:()=>Re(f),onMouseUp:Ye,onMouseLeave:Ye,onTouchStart:()=>Re(f),onTouchEnd:Ye,onContextMenu:ce=>{ce.preventDefault(),Te(f),te(!0)},children:[f.fileUrl&&i.jsx("div",{className:"mb-2",children:f.messageType==="image"?i.jsxs("div",{className:"relative",onMouseDown:()=>Re(f),onMouseUp:Ye,onMouseLeave:Ye,onTouchStart:()=>Re(f),onTouchEnd:Ye,children:[i.jsx("img",{src:je(f.fileUrl),alt:f.fileName,className:`max-w-xs rounded-lg ${!T&&!A[f.id||f._id]?"blur-sm cursor-pointer":"cursor-default"} hover:opacity-90`,onClick:()=>{T||cs(f.fileUrl,f.fileName,f.id||f._id)}}),!T&&!A[f.id||f._id]&&i.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[i.jsx(Hr,{className:"w-3 h-3"}),((f.fileSize||0)/1024/1024).toFixed(1)," MB"]}),k[f.id||f._id]&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),i.jsxs("p",{className:"text-sm text-white",children:[k[f.id||f._id].progress,"%"]})]})})]}):f.messageType==="video"?i.jsxs("div",{className:"relative",onMouseDown:()=>Re(f),onMouseUp:Ye,onMouseLeave:Ye,onTouchStart:()=>Re(f),onTouchEnd:Ye,children:[i.jsx("video",{src:je(f.fileUrl),controls:!0,className:`max-w-xs rounded-lg ${!T&&!A[f.id||f._id]?"blur-sm":""}`,onClick:()=>{T||cs(f.fileUrl,f.fileName,f.id||f._id)}}),!T&&!A[f.id||f._id]&&i.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[i.jsx(Hr,{className:"w-3 h-3"}),((f.fileSize||0)/1024/1024).toFixed(1)," MB"]}),k[f.id||f._id]&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),i.jsxs("p",{className:"text-sm text-white",children:[k[f.id||f._id].progress,"%"]})]})})]}):i.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-20 rounded-lg relative",onMouseDown:()=>Re(f),onMouseUp:Ye,onMouseLeave:Ye,onTouchStart:()=>Re(f),onTouchEnd:Ye,children:[i.jsx(Gr,{className:"w-5 h-5"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:f.fileName}),i.jsxs("p",{className:"text-xs opacity-75",children:[(f.fileSize/1024/1024).toFixed(2)," MB"]})]}),!T&&i.jsx("button",{onClick:()=>cs(f.fileUrl,f.fileName,f.id||f._id),className:"p-1 hover:bg-white hover:bg-opacity-20 rounded",disabled:(pe=k[f.id||f._id])==null?void 0:pe.downloading,children:i.jsx(Hr,{className:"w-4 h-4"})}),k[f.id||f._id]&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg p-2 text-center",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mx-auto mb-1"}),i.jsxs("p",{className:"text-xs text-white",children:[k[f.id||f._id].progress,"%"]})]})})]})}),f.message&&(Nt&&We(Nt)===We(f)?i.jsxs("div",{className:"mb-2",children:[i.jsx("input",{type:"text",value:Rt,onChange:ce=>mt(ce.target.value),className:"w-full px-2 py-1 text-sm bg-white bg-opacity-20 rounded border-none focus:outline-none focus:ring-1 focus:ring-white",autoFocus:!0,onKeyDown:ce=>{ce.key==="Enter"&&Ne(),ce.key==="Escape"&&Rn()}}),i.jsxs("div",{className:"flex gap-1 mt-1",children:[i.jsx("button",{onClick:Ne,className:"text-xs px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),i.jsx("button",{onClick:Rn,className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]}):i.jsxs("p",{className:"text-sm mb-1 break-words",children:[f.message,(f.isEdited||f.editedAt)&&i.jsx("span",{className:"text-xs opacity-75 ml-1",children:"(edited)"})]})),i.jsxs("div",{className:`flex items-center gap-1 text-xs self-end ${T?"text-green-100":"text-gray-500"}`,children:[i.jsx("span",{children:new Date(f.createdAt||f.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),T&&i.jsx("span",{className:"ml-1 relative inline-flex items-center",title:f.isRead||f.readBy&&f.readBy.length>0?"Seen":"Delivered",children:f.isRead||f.readBy&&f.readBy.length>0?i.jsx("svg",{className:"w-4 h-4 text-blue-500",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})}):i.jsx("svg",{className:"w-4 h-4 opacity-70",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})})})]})]})]})},f.id||f._id||N)}),i.jsx("div",{ref:Ht})]})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:x.type==="personal"&&x.isActive===!1?i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-3 w-full text-center",children:i.jsx("p",{className:"text-red-600 text-sm font-medium",children:"This user is disabled. You can view previous messages but cannot send new ones."})})}):i.jsxs("div",{className:"relative",children:[le&&i.jsx("div",{className:"file-options-container absolute bottom-16 left-4 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-50",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>jr("image"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[i.jsx(ju,{className:"w-8 h-8 text-green-600 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Image"})]}),i.jsxs("button",{onClick:()=>jr("video"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[i.jsx(Fo,{className:"w-8 h-8 text-blue-600 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Video"})]}),i.jsxs("button",{onClick:()=>jr("document"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[i.jsx(Gr,{className:"w-8 h-8 text-purple-600 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Document"})]})]})}),O&&i.jsx("div",{className:"mb-3 p-3 bg-gray-100 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[ie?i.jsx("img",{src:ie,alt:"Preview",className:"w-12 h-12 object-cover rounded"}):i.jsx(Gr,{className:"w-8 h-8 text-gray-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium",children:O.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[(O.size/1024/1024).toFixed(2)," MB"]})]})]}),i.jsx("button",{onClick:Sr,className:"text-gray-500 hover:text-gray-700",children:""})]})}),i.jsxs("form",{onSubmit:xl,className:"flex items-center space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>$(!le),className:"p-2 text-gray-500 hover:text-gray-700",title:"Attach file",children:i.jsx(Mh,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{type:"text",value:y,onChange:f=>_(f.target.value),placeholder:"Type a message",className:"w-full py-2 px-4 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})}),i.jsx("button",{type:"submit",disabled:!y.trim()&&!O,className:"bg-green-500 text-white p-2 rounded-full hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i.jsx(Lh,{className:"w-5 h-5"})})]})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(fr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Welcome to WhatsApp Chat"}),i.jsx("p",{className:"text-gray-500 max-w-md",children:"Select a conversation from the sidebar to start messaging. Your conversations will appear on the left side."})]})})})]}),re&&ve&&i.jsx(i.Fragment,{children:ve.callType==="voice"?i.jsx(Uh,{user:e,callData:ve,isIncoming:Ge,onCallEnd:()=>{ne(!1),he(null),ae(!1)},onCallAnswer:()=>{ae(!1)},onCallDecline:()=>{ne(!1),he(null),ae(!1)}}):i.jsx(Fh,{user:e,callData:ve,isIncoming:Ge,onCallEnd:()=>{ne(!1),he(null),ae(!1)},onCallAnswer:()=>{ae(!1)},onCallDecline:()=>{ne(!1),he(null),ae(!1)}})})]})},Zw=()=>{const{user:e}=pn(),{socket:t,isConnected:n,sendMessage:r,joinGroup:s,leaveGroup:o,onReceiveMessage:l,onReceiveGroupMessage:a,onMessageSent:c,getConnectionStatus:u}=mi(),[m,d]=v.useState([]),[w,C]=v.useState([]),[h,x]=v.useState(null),[S,g]=v.useState([]),[p,y]=v.useState(""),[_,R]=v.useState(""),[F,U]=v.useState(!0),[H,X]=v.useState({}),[W,V]=v.useState({}),[q,O]=v.useState(null),[J,ie]=v.useState(null),[ee,le]=v.useState(!1),[$,k]=v.useState({}),[M,A]=v.useState(()=>{try{const j=sessionStorage.getItem("downloadedMessages");return j?JSON.parse(j):{}}catch{return{}}}),[z,re]=v.useState(!1),[ne,ve]=v.useState(null),[he,Ge]=v.useState(!1),ae=j=>j&&(/^https?:\/\//i.test(j)?j:`${be}${j}`),[je,Je]=v.useState(null),[Dt,tt]=v.useState(!1),[te,Q]=v.useState(null),[Te,Nt]=v.useState(null),[Bt,Rt]=v.useState(""),mt=j=>((j==null?void 0:j.id)||(j==null?void 0:j._id)||(j==null?void 0:j.messageId)||"").toString(),We=j=>{je&&clearTimeout(je);const E=setTimeout(()=>{Q(j),tt(!0)},700);Je(E)},Re=()=>{je&&(clearTimeout(je),Je(null))},Ye=async()=>{try{const j=(te==null?void 0:te.messageType)==="text"?(te==null?void 0:te.message)||"":ae(te==null?void 0:te.fileUrl)||(te==null?void 0:te.fileName)||"";j&&await navigator.clipboard.writeText(j)}catch{}tt(!1)},Z=()=>{if(te){try{sessionStorage.setItem("forwardMessage",JSON.stringify({id:te.id||te._id,message:te.message,messageType:te.messageType,fileUrl:te.fileUrl,fileName:te.fileName,fileSize:te.fileSize,fileType:te.fileType}))}catch{}window.location.href="/forward"}tt(!1)},Se=()=>{var j,E,f,N;if(te&&te.messageType==="text"){const T=((j=te.sender)==null?void 0:j.id)||((E=te.sender)==null?void 0:E._id)||te.sender;T===e.id||T===e._id||T===((f=e.id)==null?void 0:f.toString())||T===((N=e._id)==null?void 0:N.toString())?(Nt(te),Rt(te.message||"")):G.error("You can only edit your own messages")}tt(!1)},Vt=async()=>{if(!(!Te||!Bt.trim()))try{g(j=>j.map(E=>mt(E)===mt(Te)?{...E,message:Bt.trim(),isEdited:!0,editedAt:new Date().toISOString()}:E)),await Le.editMessage(Te.id||Te._id,Bt.trim()),Nt(null),Rt("")}catch(j){console.error("Failed to edit message:",j),G.error("Failed to edit message")}},Ne=()=>{Nt(null),Rt("")},Rn=v.useRef(null);v.useEffect(()=>((async()=>{try{console.log(" Loading chat state from database...");const E=await Le.getChatState(),{personalChats:f,groupChats:N}=E.data,T={},b={};f.forEach(P=>{var L,B,oe;P.unreadCount>0?T[P.chatId]=P.unreadCount:delete T[P.chatId],P.lastMessage&&P.lastMessage.message&&(b[P.chatId]={id:P.lastMessage._id||P.lastMessage.id,message:P.lastMessage.message,senderName:P.lastMessage.senderName||((L=P.lastMessage.sender)==null?void 0:L.name)||"User",senderId:P.lastMessage.senderId||((B=P.lastMessage.sender)==null?void 0:B._id)||((oe=P.lastMessage.sender)==null?void 0:oe.id),timestamp:P.lastMessage.createdAt||P.lastMessage.timestamp})}),N.forEach(P=>{var L,B,oe;P.unreadCount>0?T[P.chatId]=P.unreadCount:delete T[P.chatId],P.lastMessage&&P.lastMessage.message&&(b[P.chatId]={id:P.lastMessage._id||P.lastMessage.id,message:P.lastMessage.message,senderName:P.lastMessage.senderName||((L=P.lastMessage.sender)==null?void 0:L.name)||"User",senderId:P.lastMessage.senderId||((B=P.lastMessage.sender)==null?void 0:B._id)||((oe=P.lastMessage.sender)==null?void 0:oe.id),timestamp:P.lastMessage.createdAt||P.lastMessage.timestamp})}),X(T),V(b),console.log(" Chat state loaded from database:",{unreadCounts:T,lastMessages:Object.keys(b).length})}catch(E){console.error("Error loading chat state from database:",E)}})(),Nr(),()=>{qe.removeAllListeners(),qe.healthCheckInterval&&(clearInterval(qe.healthCheckInterval),delete qe.healthCheckInterval)}),[]),v.useEffect(()=>(h&&(gn(),pi(),h.type==="group"&&(s(h.id),console.log(" Joined group room for:",h.name))),()=>{qe.removeAllListeners(),h&&h.type==="group"&&(o(h.id),console.log(" Left group room for:",h.name)),qe.healthCheckInterval&&(clearInterval(qe.healthCheckInterval),delete qe.healthCheckInterval)}),[h]),v.useEffect(()=>{xl()},[S]);const Ht=async()=>{try{console.log(" Refreshing chat state from database...");const j=await Le.getChatState(),{personalChats:E,groupChats:f}=j.data,N={},T={};E.forEach(b=>{var P,L,B;b.unreadCount>0&&(N[b.chatId]=b.unreadCount),b.lastMessage&&b.lastMessage.message&&(T[b.chatId]={id:b.lastMessage._id||b.lastMessage.id,message:b.lastMessage.message,senderName:b.lastMessage.senderName||((P=b.lastMessage.sender)==null?void 0:P.name)||"User",senderId:b.lastMessage.senderId||((L=b.lastMessage.sender)==null?void 0:L._id)||((B=b.lastMessage.sender)==null?void 0:B.id),timestamp:b.lastMessage.createdAt||b.lastMessage.timestamp})}),f.forEach(b=>{var P,L,B;b.unreadCount>0&&(N[b.chatId]=b.unreadCount),b.lastMessage&&b.lastMessage.message&&(T[b.chatId]={id:b.lastMessage._id||b.lastMessage.id,message:b.lastMessage.message,senderName:b.lastMessage.senderName||((P=b.lastMessage.sender)==null?void 0:P.name)||"User",senderId:b.lastMessage.senderId||((L=b.lastMessage.sender)==null?void 0:L._id)||((B=b.lastMessage.sender)==null?void 0:B.id),timestamp:b.lastMessage.createdAt||b.lastMessage.timestamp})}),X(N),V(T),console.log(" Chat state refreshed from database")}catch(j){console.error("Error refreshing chat state:",j)}};v.useEffect(()=>{window.testSocket=()=>{qe.testConnection()},window.checkSocket=()=>{qe.logConnectionStatus()},window.forceSocketConnect=()=>{qe.forceConnectionTest()},console.log(" Socket debugging methods available:"),console.log(" - testSocket() - Test socket connection status"),console.log(" - checkSocket() - Show current socket status"),console.log(" - forceSocketConnect() - Force reconnection")},[]);const Nr=async()=>{try{U(!0);const[j,E]=await Promise.all([ht.getActiveUsers(),Jt.getMyGroups()]);console.log(" Chat Data Loaded:"),console.log(" Users:",j.data.length),console.log(" Groups:",E.data.length),console.log(" Group Details:",E.data.map(f=>{var N;return{id:f.id,name:f.name,members:((N=f.members)==null?void 0:N.length)||0,avatar:f.avatar?"Has Avatar":"No Avatar"}})),d(j.data.filter(f=>f.id!==e.id)),C(E.data),pi()}catch(j){console.error("Error fetching initial data:",j),G.error("Failed to load chat data")}finally{U(!1)}},pi=()=>{console.log(" Setting up enhanced socket listeners with Context API...");const j=u();console.log(" Current socket status:",j),l(E=>{var B,oe;console.log(" CHATROOM CONTEXT - received message:",E);const f=typeof E.sender=="object"?E.sender.id||E.sender._id:E.sender,N=typeof E.receiver=="object"?E.receiver.id||E.receiver._id:E.receiver,T=E.id||E._id||E.messageId,b=E.message||E.content,P=f===e.id||f===e._id||f===((B=e.id)==null?void 0:B.toString())||f===((oe=e._id)==null?void 0:oe.toString());if(E._isConfirmation||E.isConfirmMessage||E.isMessageSentConfirmation){console.log(" Skipping confirmation message");return}const L=hi(E,h,e);if(console.log(" ENHANCED MESSAGE FILTERING:",{senderId:f,receiverId:N,messageId:T,messageText:b,selectedChatId:h==null?void 0:h.id,selectedChatType:h==null?void 0:h.type,currentUserId:e.id,isCurrentUserSender:P,isForCurrentChat:L,messageData:E}),L&&h)console.log(" Processing message for current active chat"),P?console.log(" Message from current user - handled by optimistic updates"):(console.log(" Adding external message to current chat immediately"),g(se=>{if(se.some(pe=>{var lt,at;const ce=pe.id||pe._id||pe.messageId,me=pe.message||pe.content,jt=((lt=pe.sender)==null?void 0:lt.id)||((at=pe.sender)==null?void 0:at._id)||pe.sender,Ie=pe.createdAt||pe.timestamp,It=E.createdAt||E.timestamp;return!!(ce===T&&T||me===b&&String(jt)===String(f)&&It&&Ie&&Math.abs(new Date(It)-new Date(Ie))<5e3||pe.isOptimistic&&me===b&&String(jt)===String(f)&&It&&Ie&&Math.abs(new Date(It)-new Date(Ie))<1e4)}))return console.log(" Enhanced detection: Message already exists - confirmed duplicate",{messageId:T,messageText:b==null?void 0:b.substring(0,20),senderId:f,isDuplicate:!0}),se;console.log(" REAL-TIME: NEW message confirmed - Adding to active chat",{messageId:T,messageText:b==null?void 0:b.substring(0,20),senderId:f,isDuplicate:!1});const Y=gi(E,f);return hn(h.id,E,f),setTimeout(()=>{Ht()},100),[...se,Y]}));else if(b&&!P){const se=f||E.sender;se&&se!==e.id&&(console.log(" Incrementing unread count for chat:",se),X(xe=>({...xe,[se]:(xe[se]||0)+1})),hn(se,E,f),setTimeout(()=>{Ht()},100))}}),c(E=>{console.log(" Message sent confirmation received:",E),E&&E.id&&g(f=>{const N=f.filter(b=>!b.isOptimistic),T={id:E.id,message:E.message,messageType:E.messageType||"text",fileUrl:E.fileUrl,fileName:E.fileName,fileSize:E.fileSize,fileType:E.fileType,sender:E.sender,createdAt:E.createdAt||E.timestamp,timestamp:E.timestamp,isOptimistic:!1};return[...N,T]})}),a(E=>{var B,oe,se,xe;console.log(" GROUP MESSAGE CONTEXT - received message:",E);const f=typeof E.sender=="object"?E.sender.id||E.sender._id:E.sender,N=E.groupId||((B=E.group)==null?void 0:B.id)||((oe=E.group)==null?void 0:oe._id),T=E.id||E._id||E.messageId,b=E.message||E.content,P=f===e.id||f===e._id||f===((se=e.id)==null?void 0:se.toString())||f===((xe=e._id)==null?void 0:xe.toString());if(E._isConfirmation||E.isConfirmMessage||E.isMessageSentConfirmation){console.log(" Skipping confirmation message");return}const L=h&&h.type==="group"&&(N===h.id||String(N)===String(h.id));if(console.log(" GROUP MESSAGE FILTERING:",{senderId:f,groupId:N,messageId:T,messageText:b,selectedChatId:h==null?void 0:h.id,selectedChatType:h==null?void 0:h.type,currentUserId:e.id,isCurrentUserSender:P,isForCurrentGroup:L,messageData:E}),L&&h)console.log(" Processing group message for current group"),P?console.log(" Group message from current user - handled by optimistic updates"):(console.log(" Adding external group message to current chat immediately"),g(Y=>{if(Y.some(me=>{var At,rn;const jt=me.id||me._id||me.messageId,Ie=me.message||me.content,It=((At=me.sender)==null?void 0:At.id)||((rn=me.sender)==null?void 0:rn._id)||me.sender,lt=me.createdAt||me.timestamp,at=E.createdAt||E.timestamp;return!!(jt===T&&T||Ie===b&&String(It)===String(f)&&at&&lt&&Math.abs(new Date(at)-new Date(lt))<5e3||me.isOptimistic&&Ie===b&&String(It)===String(f)&&at&&lt&&Math.abs(new Date(at)-new Date(lt))<1e4)}))return console.log(" GROUP duplicate detection: Message already exists",{messageId:T,messageText:b==null?void 0:b.substring(0,20),senderId:f==null?void 0:f.toString(),isDuplicate:!0}),Y;console.log(" GROUP REAL-TIME: NEW message confirmed - Adding to active group",{messageId:T,messageText:b==null?void 0:b.substring(0,20),senderId:f,groupId:N});const ce=gi(E,f);return hn(h.id,E,f),setTimeout(()=>{Ht()},100),[...Y,ce]}));else if(b&&!P){const Y=N||E.groupId;Y&&(!h||h.type!=="group"||String(Y)!==String(h.id))&&(console.log(" Incrementing unread count for group:",Y),X(ce=>({...ce,[Y]:(ce[Y]||0)+1})),hn(Y,E,f),setTimeout(()=>{Ht()},100))}}),t&&(t.off("incoming-call"),t.on("incoming-call",E=>{Ge(!0),ve({callId:E.callId,callType:E.callType,caller:E.caller}),re(!0)}),t.off("call-initiated"),t.on("call-initiated",E=>{Ge(!1),ve({callId:E.callId,callType:E.callType,otherUser:E.receiver}),re(!0)}),t.off("messages-seen"),t.on("messages-seen",E=>{console.log(" Messages seen by user:",E.readBy),h&&h.type==="personal"&&E.chatId===h.id&&g(f=>f.map(N=>{var b,P;return(((b=N.sender)==null?void 0:b.id)||((P=N.sender)==null?void 0:P._id)||N.sender)===e.id?{...N,isRead:!0,readBy:[{user:E.readBy,readAt:E.timestamp}]}:N}))}))},hi=(j,E,f)=>{var P,L,B,oe;if(!E)return!1;const N=((P=j.sender)==null?void 0:P.id)||((L=j.sender)==null?void 0:L._id)||j.sender,T=((B=j.receiver)==null?void 0:B.id)||((oe=j.receiver)==null?void 0:oe._id)||j.receiver,b=j.chatId||j.chatRoom;return E.type==="personal"&&E.id&&(N===E.id&&T===f.id||N===f.id&&T===E.id||String(N)===String(E.id)||String(T)===String(E.id))?!0:E.type==="group"?b===E.id||j.groupId===E.id:!1},gi=(j,E)=>{var f,N;return{id:j.id||j._id||j.messageId,message:j.message||j.content,messageType:j.messageType||"text",fileUrl:j.fileUrl,fileName:j.fileName,fileSize:j.fileSize,fileType:j.fileType,sender:typeof j.sender=="object"?j.sender:{id:E,name:j.senderName||((f=j.sender)==null?void 0:f.name)||"User",profileImage:j.senderProfileImage||((N=j.sender)==null?void 0:N.profileImage)},createdAt:j.createdAt||j.timestamp||new Date().toISOString(),timestamp:j.timestamp||j.createdAt,isFromOtherUser:!(E===e.id||E===e._id)}},hn=(j,E,f)=>{var b;const N=f===e.id||f===e._id,T={id:E.id||E._id||E.messageId,message:E.message||E.content,senderName:N?"You":E.senderName||((b=E.sender)==null?void 0:b.name)||"User",senderId:f,timestamp:E.createdAt||E.timestamp||new Date().toISOString()};V(P=>({...P,[j]:T}))},gn=async()=>{var j;try{let E;if(h.type==="personal"){if(!h.id){console.error("User ID is undefined for personal chat");return}E=await Le.getPersonalMessages(h.id)}else{if(!h.id){console.error("Group ID is undefined for group chat");return}E=await Le.getGroupMessages(h.id)}const f=E.data;if(g(f),f.length>0){const N=f[f.length-1];hn(h.id,N,((j=N.sender)==null?void 0:j.id)||N.sender)}}catch(E){console.error("Error fetching messages:",E),G.error("Failed to load messages")}},as=j=>{const E=document.createElement("input");E.type="file",E.style.display="none",j==="image"?E.accept="image/*":j==="video"?E.accept="video/*":j==="document"&&(E.accept=".pdf,.doc,.docx,.txt,.csv,.xls,.xlsx"),E.onchange=f=>{const N=f.target.files[0];if(N){if(O(N),N.type.startsWith("image/")){const T=new FileReader;T.onload=b=>ie(b.target.result),T.readAsDataURL(N)}else ie(null);le(!1)}},document.body.appendChild(E),E.click(),document.body.removeChild(E)},jr=()=>{O(null),ie(null)},Sr=async(j,E,f)=>{try{k(Y=>({...Y,[f]:{progress:0,downloading:!0}}));const N=await fetch(ae(j)),T=N.headers.get("content-length"),b=parseInt(T,10);if(!N.ok)throw new Error("Download failed");const P=N.body.getReader(),L=[];let B=0;for(;;){const{done:Y,value:pe}=await P.read();if(Y)break;L.push(pe),B+=pe.length;const ce=b?Math.round(B/b*100):0;k(me=>({...me,[f]:{progress:ce,downloading:!0}}))}const oe=new Blob(L),se=window.URL.createObjectURL(oe),xe=document.createElement("a");xe.href=se,xe.download=E,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),window.URL.revokeObjectURL(se),k(Y=>({...Y,[f]:{progress:100,downloading:!1}})),A(Y=>{const pe={...Y,[f]:!0};try{sessionStorage.setItem("downloadedMessages",JSON.stringify(pe))}catch{}return pe}),setTimeout(()=>{k(Y=>{const pe={...Y};return delete pe[f],pe})},2e3)}catch(N){console.error("Download failed:",N),k(T=>({...T,[f]:{progress:0,downloading:!1,error:!0}}))}};v.useEffect(()=>{const j=E=>{ee&&!E.target.closest(".file-options-container")&&le(!1)};return document.addEventListener("mousedown",j),()=>{document.removeEventListener("mousedown",j)}},[ee]);const cs=async j=>{if(j.preventDefault(),!p.trim()&&!q||!h)return;const E=p.trim();y("");try{let f,N="text";q&&(q.type.startsWith("image/")?N="image":q.type.startsWith("video/")?N="video":N="file");const T={id:Date.now(),message:E||(q?q.name:""),messageType:N,fileUrl:q?URL.createObjectURL(q):null,fileName:q?q.name:null,fileSize:q?q.size:null,fileType:q?q.type:null,sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};if(g(b=>[...b,T]),hn(h.id,{id:T.id,message:T.message,createdAt:T.createdAt},e.id),q){const b=new FormData;b.append("file",q),b.append("message",E),h.type==="personal"?(b.append("receiver",h.id),f=await Le.sendPersonalMessage(b)):(b.append("group",h.id),f=await Le.sendGroupMessage(b)),jr()}else if(h.type==="personal")try{await r(h.id,E,"text",!1),console.log(" Message sent via context socket")}catch(b){console.warn("Context socket failed, trying API:",b),await Le.sendPersonalMessage({sender:e.id,receiver:h.id,message:E,timestamp:new Date().toISOString()})}else try{await r(h.id,E,"text",!0),console.log(" Group message sent via context socket")}catch(b){console.warn("Context group socket failed, trying API:",b),await Le.sendGroupMessage({sender:e.id,group:h.id,message:E,timestamp:new Date().toISOString()})}console.log(" Message sent successfully")}catch(f){console.error(" Failed to send message:",f),G.error("Failed to send message"),g(N=>N.filter(T=>!T.isOptimistic))}},xl=()=>{var j;(j=Rn.current)==null||j.scrollIntoView({behavior:"smooth"})},xi=[...m.map(j=>({id:j.id,name:j.name,email:j.email,type:"personal",avatar:j.name.charAt(0).toUpperCase(),profileImage:j.profileImage,lastMessage:W[j.id]||null})),...w.map(j=>{var E;return{id:j.id,name:j.name,email:`${((E=j.members)==null?void 0:E.length)||0} members`,type:"group",avatar:j.avatar?`${be}${j.avatar}`:"G",profileImage:j.avatar,lastMessage:W[j.id]||null}})].sort((j,E)=>{var T,b;const f=(T=j.lastMessage)!=null&&T.timestamp?new Date(j.lastMessage.timestamp).getTime():0;return((b=E.lastMessage)!=null&&b.timestamp?new Date(E.lastMessage.timestamp).getTime():0)-f}).filter(j=>j.name.toLowerCase().includes(_.toLowerCase())||j.email.toLowerCase().includes(_.toLowerCase()));return F?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):i.jsx("div",{className:"h-screen bg-gray-50 flex",children:i.jsxs("div",{className:"w-full h-screen flex bg-white shadow-lg",children:[i.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] bg-white border-r border-gray-200 flex flex-col",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"WhatsApp Chat"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>window.location.href="/profile",className:"text-gray-500 hover:text-gray-700",title:"Profile",children:i.jsx(en,{className:"w-5 h-5"})}),i.jsx(uc,{className:"w-5 h-5 text-gray-500 cursor-pointer hover:text-gray-700"})]})]}),i.jsx("div",{className:"flex items-center space-x-3 mb-3",children:i.jsxs("button",{onClick:()=>window.location.href="/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?i.jsx("img",{src:`${be}${e.profileImage}`,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):i.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium",children:e.name.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),i.jsx("p",{className:"text-xs text-green-600",children:"Online"})]})]})})]}),i.jsx("div",{className:"p-3 bg-white border-b border-gray-200",children:i.jsxs("div",{className:"relative",children:[i.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search or start new chat",value:_,onChange:j=>R(j.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto",children:[xi.map(j=>i.jsx("div",{onClick:()=>{console.log("Selecting chat:",j),x({type:j.type,id:j.id,name:j.name,profileImage:j.profileImage}),H[j.id]&&(X(E=>{const f={...E};return delete f[j.id],f}),Le.updateChatState({chatId:j.id,chatType:j.type,action:"clear_unread"}).catch(E=>{console.error("Error clearing unread count:",E)}))},className:`p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 ${(h==null?void 0:h.id)===j.id&&(h==null?void 0:h.type)===j.type?"bg-green-50":""}`,children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"relative",children:i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200",children:j.type==="personal"?j.profileImage?i.jsx("img",{src:`${be}${j.profileImage}`,alt:j.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-lg",children:j.avatar})}):j.profileImage?i.jsx("img",{src:j.avatar,alt:j.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx(Ft,{className:"w-6 h-6 text-white"})})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h3",{className:"font-medium text-gray-900 truncate",children:j.name}),j.type==="group"&&i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Group"}),Dt&&te&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/30",onClick:()=>tt(!1),children:i.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-xl w-full sm:w-80 p-4 shadow-xl",onClick:E=>E.stopPropagation(),children:[i.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Actions"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("button",{className:"w-full btn-secondary",onClick:Ye,children:"Copy"}),te.messageType==="text"&&(()=>{var N,T,b,P;const E=((N=te.sender)==null?void 0:N.id)||((T=te.sender)==null?void 0:T._id)||te.sender;return E===e.id||E===e._id||E===((b=e.id)==null?void 0:b.toString())||E===((P=e._id)==null?void 0:P.toString())?i.jsx("button",{className:"w-full btn-primary",onClick:Se,children:"Edit"}):null})(),i.jsx("button",{className:"w-full btn-primary",onClick:Z,children:"Forward"}),i.jsx("button",{className:"w-full btn-secondary",onClick:()=>tt(!1),children:"Cancel"})]})]})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-xs text-gray-500",children:"12:30"}),H[j.id]&&H[j.id]>0&&i.jsx("div",{className:"bg-green-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:H[j.id]>99?"99+":H[j.id]})]})]}),i.jsx("p",{className:"text-sm text-gray-500 truncate",children:j.lastMessage&&j.lastMessage.message?`${j.lastMessage.senderName||"You"}: ${j.lastMessage.message}`:"No messages yet"})]})]})},`${j.type}-${j.id}`)),xi.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(fr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500 text-sm",children:_?"No chats found.":"No chats available."})]})]})]}),i.jsx("div",{className:"flex-1 flex flex-col",children:h?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:h.type==="personal"?h.profileImage?i.jsx("img",{src:`${be}${h.profileImage}`,alt:h.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold",children:h.name.charAt(0).toUpperCase()})}):h.profileImage?i.jsx("img",{src:`${be}${h.profileImage}`,alt:h.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx(Ft,{className:"w-5 h-5 text-white"})})}),i.jsxs("div",{className:`cursor-pointer ${h.type==="group"?"hover:bg-gray-50 p-2 rounded-lg transition-colors":""}`,onClick:()=>{h.type==="group"&&(window.location.href=`/group/${h.id}`)},title:h.type==="group"?"Click to view group info":"",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:h.name}),i.jsx("p",{className:"text-xs text-gray-500",children:h.type==="personal"?"last seen today at 10:30 AM":`${h.email}`})]})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(Su,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var j,E;if(!(!h||h.type!=="personal"))try{const N=(E=(j=(await ni.initiate(h.id,"voice")).data)==null?void 0:j.data)==null?void 0:E.call;N&&N._id&&(Ge(!1),ve({callId:N._id,callType:"voice",otherUser:N.otherUser}),re(!0),t.emit("call-initiate",{receiverId:h.id,callType:"voice",callId:N._id}))}catch(f){console.error("Failed to initiate call",f)}}}),i.jsx(Fo,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800",onClick:async()=>{var j,E;if(!(!h||h.type!=="personal"))try{const N=(E=(j=(await ni.initiate(h.id,"video")).data)==null?void 0:j.data)==null?void 0:E.call;N&&N._id&&(Ge(!1),ve({callId:N._id,callType:"video",otherUser:N.otherUser}),re(!0),t.emit("call-initiate",{receiverId:h.id,callType:"video",callId:N._id}))}catch(f){console.error("Failed to initiate video call",f)}}}),i.jsx(uc,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 relative",children:i.jsxs("div",{className:"max-w-8xl mx-auto",children:[S.map((j,E)=>{var b,P,L,B,oe,se,xe;let f=!1;if(typeof j.sender=="object"&&j.sender!==null){const Y=j.sender._id||j.sender.id;f=Y===e.id||Y===e._id||Y===((b=e.id)==null?void 0:b.toString())||Y===((P=e._id)==null?void 0:P.toString())}else f=j.sender===e.id||j.sender===e._id||j.sender===((L=e.id)==null?void 0:L.toString())||j.sender===((B=e._id)==null?void 0:B.toString());const N=typeof j.sender=="object"?(oe=j.sender)==null?void 0:oe.name:"User",T=typeof j.sender=="object"?(se=j.sender)==null?void 0:se.profileImage:null;return i.jsx("div",{className:`flex ${f?"justify-end":"justify-start"} mb-4`,children:i.jsxs("div",{className:`flex items-start gap-2 max-w-sm lg:max-w-md ${f?"flex-row-reverse":"flex-row"}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-300 flex-shrink-0",children:f?e.profileImage?i.jsx("img",{src:`${be}${e.profileImage}`,alt:e.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs font-medium",children:e.name.charAt(0).toUpperCase()})}):T?i.jsx("img",{src:`${be}${T}`,alt:N,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-gray-400 flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xs font-medium",children:String(N).charAt(0).toUpperCase()})})}),i.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg ${f?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"} ${Dt&&te&&mt(te)===mt(j)?"ring-2 ring-blue-400":""}`,onMouseDown:()=>We(j),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>We(j),onTouchEnd:Re,onContextMenu:Y=>{Y.preventDefault(),Q(j),tt(!0)},children:[j.fileUrl&&i.jsx("div",{className:"mb-2",children:j.messageType==="image"?i.jsxs("div",{className:"relative",onMouseDown:()=>We(j),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>We(j),onTouchEnd:Re,children:[i.jsx("img",{src:ae(j.fileUrl),alt:j.fileName,className:`max-w-xs rounded-lg ${!f&&!M[j.id||j._id]?"blur-sm cursor-pointer":"cursor-default"} hover:opacity-90`,onClick:()=>{f||Sr(j.fileUrl,j.fileName,j.id||j._id)}}),!f&&!M[j.id||j._id]&&i.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[i.jsx(Hr,{className:"w-3 h-3"}),((j.fileSize||0)/1024/1024).toFixed(1)," MB"]}),$[j.id||j._id]&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),i.jsxs("p",{className:"text-sm text-white",children:[$[j.id||j._id].progress,"%"]})]})})]}):j.messageType==="video"?i.jsxs("div",{className:"relative",onMouseDown:()=>We(j),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>We(j),onTouchEnd:Re,children:[i.jsx("video",{src:ae(j.fileUrl),controls:!0,className:`max-w-xs rounded-lg ${!f&&!M[j.id||j._id]?"blur-sm":""}`,onClick:()=>{f||Sr(j.fileUrl,j.fileName,j.id||j._id)}}),!f&&!M[j.id||j._id]&&i.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[i.jsx(Hr,{className:"w-3 h-3"}),((j.fileSize||0)/1024/1024).toFixed(1)," MB"]}),$[j.id||j._id]&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[i.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),i.jsxs("p",{className:"text-sm text-white",children:[$[j.id||j._id].progress,"%"]})]})})]}):i.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-20 rounded-lg relative",onMouseDown:()=>We(j),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>We(j),onTouchEnd:Re,children:[i.jsx(Gr,{className:"w-5 h-5"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:j.fileName}),i.jsxs("p",{className:"text-xs opacity-75",children:[(j.fileSize/1024/1024).toFixed(2)," MB"]})]}),!f&&i.jsx("button",{onClick:()=>Sr(j.fileUrl,j.fileName,j.id||j._id),className:"p-1 hover:bg-white hover:bg-opacity-20 rounded",disabled:(xe=$[j.id||j._id])==null?void 0:xe.downloading,children:i.jsx(Hr,{className:"w-4 h-4"})}),$[j.id||j._id]&&i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:i.jsxs("div",{className:"bg-black/60 rounded-lg px-2 py-1 text-center",children:[i.jsx("div",{className:"w-6 h-6 border-2 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-1"}),i.jsxs("p",{className:"text-xs text-white",children:[$[j.id||j._id].progress,"%"]})]})})]})}),j.message&&(Te&&mt(Te)===mt(j)?i.jsxs("div",{className:"mb-2",children:[i.jsx("input",{type:"text",value:Bt,onChange:Y=>Rt(Y.target.value),className:"w-full px-2 py-1 text-sm bg-white bg-opacity-20 rounded border-none focus:outline-none focus:ring-1 focus:ring-white",autoFocus:!0,onKeyDown:Y=>{Y.key==="Enter"&&Vt(),Y.key==="Escape"&&Ne()}}),i.jsxs("div",{className:"flex gap-1 mt-1",children:[i.jsx("button",{onClick:Vt,className:"text-xs px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),i.jsx("button",{onClick:Ne,className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]}):i.jsxs("p",{className:"text-sm mb-1 break-words",children:[j.message,(j.isEdited||j.editedAt)&&i.jsx("span",{className:"text-xs opacity-75 ml-1",children:"(edited)"})]})),i.jsxs("div",{className:`flex items-center gap-1 text-xs self-end ${f?"text-green-100":"text-gray-500"}`,children:[i.jsx("span",{children:new Date(j.createdAt||j.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),f&&i.jsx("span",{className:"ml-1 relative inline-flex items-center",title:j.isRead||j.readBy&&j.readBy.length>0?"Seen":"Delivered",children:j.isRead||j.readBy&&j.readBy.length>0?i.jsx("svg",{className:"w-4 h-4 text-blue-500",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})}):i.jsx("svg",{className:"w-4 h-4 opacity-70",viewBox:"0 0 16 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z",fill:"currentColor"})})})]})]})]})},j.id||j._id||E)}),i.jsx("div",{ref:Rn})]})}),z&&ne&&(ne.callType==="voice"?i.jsx(Uh,{user:e,callData:ne,isIncoming:he,onCallEnd:()=>{re(!1),ve(null)},onCallAnswer:()=>{},onCallDecline:()=>{re(!1),ve(null)}}):i.jsx(Fh,{user:e,callData:ne,isIncoming:he,onCallEnd:()=>{re(!1),ve(null)},onCallAnswer:()=>{},onCallDecline:()=>{re(!1),ve(null)}})),q&&i.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[J?i.jsx("img",{src:J,alt:"Preview",className:"w-12 h-12 rounded-lg object-cover"}):i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:i.jsx(Gr,{className:"w-6 h-6 text-gray-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:q.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[(q.size/1024/1024).toFixed(2)," MB"]})]})]}),i.jsx("button",{onClick:jr,className:"text-gray-500 hover:text-gray-700",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),ee&&i.jsx("div",{className:"file-options-container absolute bottom-16 left-4 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-50",children:i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("button",{onClick:()=>as("image"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[i.jsx(ju,{className:"w-8 h-8 text-green-600 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Image"})]}),i.jsxs("button",{onClick:()=>as("video"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[i.jsx(Fo,{className:"w-8 h-8 text-blue-600 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Video"})]}),i.jsxs("button",{onClick:()=>as("document"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[i.jsx(Gr,{className:"w-8 h-8 text-purple-600 mb-1"}),i.jsx("span",{className:"text-xs text-gray-700",children:"Document"})]})]})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-4 relative",children:i.jsxs("form",{onSubmit:cs,className:"flex items-center space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>le(!ee),className:"p-2 text-gray-500 hover:text-gray-700",title:"Attach file",children:i.jsx(Mh,{className:"w-6 h-6"})}),i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{type:"text",value:p,onChange:j=>y(j.target.value),placeholder:"Type a message",className:"w-full py-2 px-4 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})}),i.jsx("button",{type:"submit",disabled:!p.trim()&&!q,className:"bg-green-500 text-white p-2 rounded-full hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i.jsx(Lh,{className:"w-5 h-5"})})]})})]}):i.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(fr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Welcome to WhatsApp"}),i.jsx("p",{className:"text-gray-500 max-w-md",children:"Select a conversation from the sidebar to start messaging. Your conversations will appear on the left side."})]})})})]})})},eN=()=>{const{user:e}=pn(),[t,n]=v.useState([]),[r,s]=v.useState(!0),[o,l]=v.useState(""),[a,c]=v.useState(!1),[u,m]=v.useState(null),[d,w]=v.useState({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),[C,h]=v.useState(""),[x,S]=v.useState(!1),[g,p]=v.useState("list"),[y,_]=v.useState(new Set),R=k=>y.has(k),F=k=>{_(M=>{const A=new Set(M);return A.has(k)?A.delete(k):A.add(k),A})},U=()=>_(new Set),H=()=>_(new Set($.map(k=>k.id))),X=async k=>{if(y.size===0)return;const M=k?"enable":"disable";if(window.confirm(`Are you sure you want to ${M} ${y.size} selected user(s)?`))try{const A=new Map(t.map(z=>[z.id,z]));for(const z of y){const re=A.get(z);re&&(re.isActive??!0)!==k&&await ht.toggleUserStatus(z)}G.success(`Selected users ${M}d`),U(),W()}catch(A){console.error("Bulk toggle error",A),G.error("Failed bulk update")}};v.useEffect(()=>{W()},[]);const W=async()=>{try{s(!0);const k=await ht.getUsers();let M=k.data;e.role==="admin"&&(M=k.data.filter(A=>A.role!=="superadmin")),n(M)}catch(k){console.error("Error fetching users:",k),G.error("Failed to load users")}finally{s(!1)}},V=async k=>{var M,A;if(k.preventDefault(),!d.name.trim()){G.error("Name is required");return}if(!d.email.trim()){G.error("Email is required");return}if(!u&&!d.password.trim()){G.error("Password is required");return}try{const z={name:d.name.trim(),email:d.email.trim(),role:d.role,phone:d.phone.trim(),designation:d.designation.trim(),bio:d.bio.trim(),isActive:d.isActive};u?(d.password.trim()&&(z.password=d.password),await ht.updateUser(u.id,z),G.success("User updated successfully")):(z.password=d.password,await ht.createUser(z),G.success("User created successfully")),c(!1),m(null),w({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),W()}catch(z){console.error("User operation error:",z),G.error(((A=(M=z.response)==null?void 0:M.data)==null?void 0:A.message)||"Operation failed")}},q=async k=>{if(window.confirm("Are you sure you want to delete this user?"))try{await ht.deleteUser(k),G.success("User deleted successfully"),W()}catch{G.error("Failed to delete user")}},O=async(k,M)=>{const A=M?"disable":"enable";if(window.confirm(`Are you sure you want to ${A} this user?`))try{await ht.toggleUserStatus(k),G.success(`User ${A}d successfully`),W()}catch{G.error(`Failed to ${A} user`)}},J=k=>{m(k),w({name:k.name||"",email:k.email||"",password:"",role:k.role||"user",phone:k.phone||"",designation:k.designation||"",bio:k.bio||"",isActive:k.isActive!==!1}),h(k.password||""),S(!1),c(!0)},ie=()=>{m(null),w({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),h(""),c(!0)},ee=k=>{switch(k){case"superadmin":return i.jsx(Lo,{className:"w-4 h-4 text-yellow-600"});case"admin":return i.jsx(gl,{className:"w-4 h-4 text-blue-600"});default:return i.jsx(en,{className:"w-4 h-4 text-gray-600"})}},le=k=>{switch(k){case"superadmin":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},$=t.filter(k=>{var M,A;return k.name.toLowerCase().includes(o.toLowerCase())||k.email.toLowerCase().includes(o.toLowerCase())||((M=k.designation)==null?void 0:M.toLowerCase().includes(o.toLowerCase()))||((A=k.phone)==null?void 0:A.includes(o))});return r?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",title:"Go back",children:i.jsx(pl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),i.jsx("p",{className:"text-gray-600",children:e.role==="superadmin"?"Manage admins and users in the system":"Manage users in your organization"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center rounded-md border border-gray-300 overflow-hidden",children:[i.jsx("button",{className:`px-3 py-2 text-sm ${g==="grid"?"bg-gray-200 text-gray-900":"bg-white text-gray-600"}`,onClick:()=>p("grid"),title:"Grid view",children:i.jsx(Dw,{className:"w-4 h-4"})}),i.jsx("button",{className:`px-3 py-2 text-sm ${g==="list"?"bg-gray-200 text-gray-900":"bg-white text-gray-600"}`,onClick:()=>p("list"),title:"List view",children:i.jsx(Bw,{className:"w-4 h-4"})})]}),i.jsxs("button",{onClick:ie,className:"btn-primary inline-flex items-center",children:[i.jsx(bu,{className:"w-4 h-4 mr-2"}),"Add New User"]})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("div",{className:"card p-6 mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search users by name, email, designation, or phone...",value:o,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),y.size>0&&i.jsxs("div",{className:"card p-4 mb-4 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-700",children:["Selected ",y.size," user(s)"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:H,className:"btn-secondary",children:"Select all"}),i.jsx("button",{onClick:U,className:"btn-secondary",children:"Clear"}),i.jsx("button",{onClick:()=>X(!0),className:"btn-primary",children:"Enable selected"}),i.jsx("button",{onClick:()=>X(!1),className:"btn-secondary text-red-700",children:"Disable selected"})]})]}),g==="grid"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$.map(k=>i.jsxs("div",{className:`relative card p-6 transition-all ${k.isActive?"hover:shadow-lg":"bg-gray-50 border-gray-300 opacity-75"}`,children:[i.jsx("label",{className:"absolute top-3 left-3 inline-flex items-center gap-2 bg-white/80 px-2 py-1 rounded shadow",children:i.jsx("input",{type:"checkbox",checked:R(k.id),onChange:()=>F(k.id)})}),i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-12 h-12 ${k.isActive?"bg-primary-100":"bg-gray-100"} rounded-lg flex items-center justify-center overflow-hidden`,children:k.profileImage?i.jsx("img",{src:`${be}${k.profileImage}`,alt:"Profile",className:`w-12 h-12 rounded-lg object-cover ${k.isActive?"":"grayscale"}`}):i.jsx(en,{className:`w-6 h-6 ${k.isActive?"text-primary-600":"text-gray-400"}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:`font-medium ${k.isActive?"text-gray-900":"text-gray-600"}`,children:k.name}),i.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[ee(k.role),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${le(k.role)}`,children:k.role})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[k.id!==(e==null?void 0:e.id)&&(k.role!=="superadmin"||(e==null?void 0:e.role)==="superadmin")&&i.jsxs("div",{className:"relative inline-flex bg-gray-200 rounded-full p-1 cursor-pointer",onClick:()=>O(k.id,k.isActive),children:[i.jsx("div",{className:"absolute top-1 bg-white rounded-full shadow-sm transition-transform duration-300",style:{width:"50%",height:"calc(100% - 8px)",left:k.isActive?"4px":"calc(50% + 2px)",transform:"none"}}),i.jsxs("div",{className:`relative z-10 px-4 py-2 text-xs font-medium rounded-full flex items-center space-x-1 transition-colors duration-200 ${k.isActive?"text-primary-600":"text-gray-500"}`,children:[i.jsx(lc,{className:"w-3 h-3"}),i.jsx("span",{children:"Active"})]}),i.jsxs("div",{className:`relative z-10 px-4 py-2 text-xs font-medium rounded-full flex items-center space-x-1 transition-colors duration-200 ${k.isActive?"text-gray-500":"text-primary-600"}`,children:[i.jsx(Hw,{className:"w-3 h-3"}),i.jsx("span",{children:"Disabled"})]})]}),i.jsx("button",{onClick:()=>J(k),className:"text-primary-600 hover:text-primary-900",title:"Edit user",children:i.jsx(Uo,{className:"w-4 h-4"})}),k.role!=="superadmin"&&k.id!==(e==null?void 0:e.id)&&i.jsx("button",{onClick:()=>q(k.id),className:"text-red-600 hover:text-red-900",title:"Delete user",children:i.jsx(dc,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Ph,{className:"w-4 h-4 mr-2"}),i.jsx("span",{className:"truncate",children:k.email})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(Su,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:k.phone||"Not provided"})]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[i.jsx(ku,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:k.designation||"Not provided"})]})]}),i.jsx("div",{className:"mb-4",children:i.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.bio||"No bio provided"})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[k.isActive?i.jsx(lc,{className:"w-4 h-4 text-green-600"}):i.jsx(Qw,{className:"w-4 h-4 text-red-600"}),i.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${k.isActive?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:k.isActive?"Active":"Disabled"})]}),k.lastSeen&&i.jsxs("span",{className:"text-xs text-gray-500",children:["Last seen: ",new Date(k.lastSeen).toLocaleDateString()]})]})]},k.id))}):i.jsx("div",{className:"card p-0 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:i.jsx("input",{type:"checkbox",onChange:k=>k.target.checked?H():U(),checked:y.size>0&&y.size===$.length})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),i.jsx("th",{className:"px-4 py-3"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(k=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("input",{type:"checkbox",checked:R(k.id),onChange:()=>F(k.id)})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 overflow-hidden flex items-center justify-center",children:k.profileImage?i.jsx("img",{src:`${be}${k.profileImage}`,alt:"Profile",className:"w-10 h-10 object-cover"}):i.jsx(en,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{children:[i.jsx("div",{className:`font-medium ${k.isActive?"text-gray-900":"text-gray-600"}`,children:k.name}),i.jsx("div",{className:"text-xs text-gray-500",children:k.designation||""})]})]})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${le(k.role)}`,children:k.role})}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:k.email}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:k.phone||""}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${k.isActive?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:k.isActive?"Active":"Disabled"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[k.id!==(e==null?void 0:e.id)&&(k.role!=="superadmin"||(e==null?void 0:e.role)==="superadmin")&&i.jsx("button",{className:"text-gray-600 hover:text-gray-900",title:"Toggle status",onClick:()=>O(k.id,k.isActive),children:k.isActive?i.jsx(qw,{className:"w-5 h-5 text-green-600"}):i.jsx(Ww,{className:"w-5 h-5 text-gray-400"})}),i.jsx("button",{className:"text-primary-600 hover:text-primary-900",title:"Edit",onClick:()=>J(k),children:i.jsx(Uo,{className:"w-4 h-4"})}),k.role!=="superadmin"&&k.id!==(e==null?void 0:e.id)&&i.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete",onClick:()=>q(k.id),children:i.jsx(dc,{className:"w-4 h-4"})})]})})]},k.id))})]})})}),$.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ft,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),i.jsx("p",{className:"text-gray-500",children:o?"Try adjusting your search terms.":"No users have been created yet."})]})]}),a&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u?"Edit User":"Create New User"}),i.jsxs("form",{onSubmit:V,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),i.jsx("input",{type:"text",required:!0,value:d.name,onChange:k=>w({...d,name:k.target.value}),className:"input-field",placeholder:"Enter full name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",required:!0,value:d.email,onChange:k=>w({...d,email:k.target.value}),className:"input-field",placeholder:"Enter email address"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[u?"New Password":"Password",u&&i.jsx("span",{className:"text-gray-500 text-xs ml-1",children:"(leave blank to keep current)"})]}),i.jsx("input",{type:"password",required:!u,value:d.password,onChange:k=>w({...d,password:k.target.value}),className:"input-field",placeholder:u?"Enter new password (optional)":"Enter password"}),u&&i.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded border",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Current Password"}),i.jsxs("button",{type:"button",className:"text-xs text-primary-600 hover:text-primary-800 inline-flex items-center gap-1",onClick:()=>S(k=>!k),children:[x?i.jsx(ac,{className:"w-3 h-3"}):i.jsx(cc,{className:"w-3 h-3"}),x?"Hide":"Show"]})]}),i.jsx("input",{type:x?"text":"password",readOnly:!0,value:C||"[Password not available - please set new password]",className:"w-full input-field font-mono"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),i.jsxs("select",{value:d.role,onChange:k=>w({...d,role:k.target.value}),className:"input-field",children:[i.jsx("option",{value:"user",children:"User"}),e.role==="superadmin"&&i.jsx("option",{value:"admin",children:"Admin"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),i.jsx("input",{type:"tel",value:d.phone,onChange:k=>w({...d,phone:k.target.value}),className:"input-field",placeholder:"Enter phone number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),i.jsx("input",{type:"text",value:d.designation,onChange:k=>w({...d,designation:k.target.value}),className:"input-field",placeholder:"Enter designation"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),i.jsx("textarea",{value:d.bio,onChange:k=>w({...d,bio:k.target.value}),className:"input-field",rows:"3",placeholder:"Enter bio (optional)"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"isActive",checked:d.isActive,onChange:k=>w({...d,isActive:k.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"User is active"})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary",children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary",children:u?"Update User":"Create User"})]})]})]})})]})},tN=()=>{const{user:e}=pn(),[t,n]=v.useState([]),[r,s]=v.useState([]),[o,l]=v.useState(!0),[a,c]=v.useState(""),[u,m]=v.useState(!1),[d,w]=v.useState(null),[C,h]=v.useState({name:"",description:"",members:[]}),[x,S]=v.useState(null),[g,p]=v.useState(null);v.useEffect(()=>{y()},[]);const y=async()=>{var O,J;try{l(!0);const[ie,ee]=await Promise.all([Jt.getGroups(),ht.getActiveUsers()]);console.log("Groups response:",ie.data),console.log("First group:",ie.data[0]),console.log("First group ID:",(O=ie.data[0])==null?void 0:O.id),console.log("First group _ID:",(J=ie.data[0])==null?void 0:J._id);const le=ie.data.map($=>({...$,id:$.id||$._id}));console.log("Transformed groups:",le),n(le),s(ee.data.filter($=>$.id!==e.id))}catch(ie){console.error("Error fetching data:",ie),G.error("Failed to load data")}finally{l(!1)}},_=async O=>{var J,ie;if(O.preventDefault(),!C.name.trim()){G.error("Group name is required");return}if(C.members.length===0){G.error("Please add at least one member to the group");return}try{console.log("Submitting group data:",C),console.log("Editing group:",d),console.log("Editing group ID:",d==null?void 0:d.id);let ee;if(d){if(!d.id){console.error("No group ID found for editing:",d),G.error("Invalid group ID for editing");return}await Jt.updateGroup(d.id,C),ee=d.id,G.success("Group updated successfully")}else{const le=await Jt.createGroup(C);console.log("Group creation result:",le.data),ee=le.data.group._id||le.data.group.id,G.success("Group created successfully")}if(x&&ee)try{const le=new FormData;le.append("avatar",x),await Jt.uploadGroupAvatar(ee,le),G.success("Group avatar uploaded successfully")}catch(le){console.error("Avatar upload error:",le),G.error("Group created but avatar upload failed")}m(!1),w(null),h({name:"",description:"",members:[]}),S(null),p(null),y()}catch(ee){console.error("Group operation error:",ee),G.error(((ie=(J=ee.response)==null?void 0:J.data)==null?void 0:ie.message)||"Operation failed")}},R=async O=>{if(window.confirm("Are you sure you want to delete this group?"))try{await Jt.deleteGroup(O),G.success("Group deleted successfully"),y()}catch{G.error("Failed to delete group")}},F=O=>{var ee;console.log("Editing group:",O),console.log("Group ID:",O.id),console.log("Group _id:",O._id);const J=O.id||O._id;if(!J){console.error("No valid group ID found:",O),G.error("Invalid group selected");return}const ie={...O,id:J};console.log("Group with ID:",ie),w(ie),h({name:O.name,description:O.description||"",members:((ee=O.members)==null?void 0:ee.map(le=>({user:le.user.id||le.user,role:le.role})))||[]}),S(null),p(null),m(!0)},U=()=>{w(null),h({name:"",description:"",members:[]}),S(null),p(null),m(!0)},H=O=>{const J=O.target.files[0];if(J){S(J);const ie=new FileReader;ie.onload=ee=>p(ee.target.result),ie.readAsDataURL(J)}},X=O=>{if(console.log("Adding member:",O),console.log("Current members:",C.members),C.members.find(J=>J.user===O))console.log("Member already exists");else{const J={user:O,role:"member"},ie=[...C.members,J];console.log("Updated members:",ie),h({...C,members:ie})}},W=O=>{h({...C,members:C.members.filter(J=>J.user!==O)})},V=t.filter(O=>{var J;return O.name.toLowerCase().includes(a.toLowerCase())||((J=O.description)==null?void 0:J.toLowerCase().includes(a.toLowerCase()))}),q=r.filter(O=>!C.members.find(J=>J.user===O.id));return o?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex justify-between items-center py-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",title:"Go back",children:i.jsx(pl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Group Management"}),i.jsx("p",{className:"text-gray-600",children:"Create and manage groups for team communication"})]})]}),i.jsxs("button",{onClick:U,className:"btn-primary inline-flex items-center",children:[i.jsx(Oh,{className:"w-4 h-4 mr-2"}),"Create Group"]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsx("div",{className:"card p-6 mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx(hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"Search groups...",value:a,onChange:O=>c(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:V.map(O=>{var J,ie,ee;return i.jsxs("div",{className:"card p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center overflow-hidden",children:O.avatar?i.jsx("img",{src:`${be}${O.avatar}`,alt:"Group avatar",className:"w-12 h-12 rounded-lg object-cover"}):i.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:i.jsx(Ft,{className:"w-6 h-6 text-green-600"})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-gray-900",children:O.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[((J=O.members)==null?void 0:J.length)||0," members"]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:()=>F(O),className:"text-primary-600 hover:text-primary-900",children:i.jsx(Uo,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>R(O.id),className:"text-red-600 hover:text-red-900",children:i.jsx(dc,{className:"w-4 h-4"})})]})]}),O.description&&i.jsx("p",{className:"text-sm text-gray-600 mb-4",children:O.description}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Members:"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[(ie=O.members)==null?void 0:ie.slice(0,3).map((le,$)=>{var k,M,A;return i.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-full px-2 py-1",children:[i.jsx("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-medium text-primary-600",children:((M=(k=le.user)==null?void 0:k.name)==null?void 0:M.charAt(0))||"U"})}),i.jsx("span",{className:"text-xs text-gray-700",children:((A=le.user)==null?void 0:A.name)||"Unknown"})]},$)}),((ee=O.members)==null?void 0:ee.length)>3&&i.jsxs("span",{className:"text-xs text-gray-500",children:["+",O.members.length-3," more"]})]})]})]},O.id)})}),V.length===0&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Ft,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No groups found"}),i.jsx("p",{className:"text-gray-500",children:a?"Try adjusting your search terms.":"Get started by creating your first group."})]})]}),u&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:d?"Edit Group":"Create Group"}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Name"}),i.jsx("input",{type:"text",required:!0,value:C.name,onChange:O=>h({...C,name:O.target.value}),className:"input-field",placeholder:"Enter group name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{value:C.description,onChange:O=>h({...C,description:O.target.value}),className:"input-field",rows:"3",placeholder:"Enter group description (optional)"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Avatar"}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"flex-shrink-0",children:g?i.jsx("img",{src:g,alt:"Avatar preview",className:"w-16 h-16 rounded-lg object-cover border-2 border-gray-200"}):i.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 border-2 border-gray-200 flex items-center justify-center",children:i.jsx(ju,{className:"w-6 h-6 text-gray-400"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("input",{type:"file",accept:"image/*",onChange:H,className:"hidden",id:"avatar-upload"}),i.jsxs("label",{htmlFor:"avatar-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer transition-colors",children:[i.jsx(Kw,{className:"w-4 h-4 mr-2"}),x?"Change Avatar":"Upload Avatar"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),C.members.length>0&&i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"flex flex-wrap gap-2",children:C.members.map((O,J)=>{const ie=r.find(ee=>ee.id===O.user);return i.jsxs("div",{className:"flex items-center space-x-1 bg-primary-100 rounded-full px-3 py-1",children:[i.jsx("span",{className:"text-sm text-primary-700",children:ie==null?void 0:ie.name}),i.jsx("button",{type:"button",onClick:()=>W(O.user),className:"text-primary-600 hover:text-primary-800",children:i.jsx($o,{className:"w-3 h-3"})})]},J)})})}),i.jsxs("div",{className:"border border-gray-300 rounded-lg p-3",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Members:"}),i.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:q.map(O=>i.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-xs font-medium text-primary-600",children:O.name.charAt(0).toUpperCase()})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:O.name}),i.jsx("p",{className:"text-xs text-gray-500",children:O.email})]})]}),i.jsx("button",{type:"button",onClick:()=>X(O.id),className:"text-primary-600 hover:text-primary-800",children:i.jsx(bu,{className:"w-4 h-4"})})]},O.id))})]})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"btn-secondary",children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary",children:d?"Update":"Create"})]})]})]})})]})},nN=()=>{var w,C,h,x,S,g;const{groupId:e}=Hx(),t=rl();pn();const[n,r]=v.useState(null),[s,o]=v.useState(!0),[l,a]=v.useState(!1);v.useEffect(()=>{c()},[e]);const c=async()=>{try{o(!0);const y=(await Jt.getGroups()).data.find(_=>_.id===e);if(!y){G.error("Group not found"),t("/chat");return}r(y)}catch(p){console.error("Error fetching group details:",p),G.error("Failed to load group details"),t("/chat")}finally{o(!1)}},u=p=>{switch(p){case"admin":return i.jsx(gl,{className:"w-4 h-4 text-blue-600"});default:return i.jsx(en,{className:"w-4 h-4 text-gray-600"})}},m=p=>{switch(p){case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},d=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center py-4",children:[i.jsx("button",{onClick:()=>t("/chat"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 transition-colors",title:"Back to chat",children:i.jsx(pl,{className:"w-5 h-5"})}),i.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Group Info"})]})})}),i.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[i.jsxs("div",{className:"card p-8 text-center mb-6",children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg",children:n.avatar?i.jsx("img",{src:`${be}${n.avatar}`,alt:"Group avatar",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:i.jsx(Ft,{className:"w-16 h-16 text-white"})})})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.name}),n.description&&i.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:n.description}),i.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Ft,{className:"w-4 h-4"}),i.jsxs("span",{children:[((w=n.members)==null?void 0:w.length)||0," members"]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(Fw,{className:"w-4 h-4"}),i.jsxs("span",{children:["Created ",d(n.createdAt)]})]})]})]}),i.jsxs("div",{className:"card p-6 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Members"}),i.jsxs("button",{onClick:()=>a(!l),className:"text-primary-600 hover:text-primary-800 transition-colors",children:[l?"Hide":"Show"," (",((C=n.members)==null?void 0:C.length)||0,")"]})]}),l&&i.jsx("div",{className:"space-y-3",children:(h=n.members)==null?void 0:h.map((p,y)=>i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[i.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:p.user.profileImage?i.jsx("img",{src:`${be}${p.user.profileImage}`,alt:p.user.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full bg-primary-500 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-semibold text-sm",children:p.user.name.charAt(0).toUpperCase()})})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:p.user.name}),i.jsxs("div",{className:"flex items-center space-x-1",children:[u(p.role),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${m(p.role)}`,children:p.role})]})]}),i.jsx("p",{className:"text-sm text-gray-500",children:p.user.email})]}),i.jsx("div",{className:"text-xs text-gray-400",children:i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx(zw,{className:"w-3 h-3"}),i.jsxs("span",{children:["Joined ",d(p.joinedAt)]})]})})]},y))})]}),i.jsxs("div",{className:"card p-6 mt-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Group Statistics"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-primary-600",children:((x=n.members)==null?void 0:x.length)||0}),i.jsx("div",{className:"text-sm text-gray-500",children:"Total Members"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600",children:((S=n.members)==null?void 0:S.filter(p=>p.role==="admin").length)||0}),i.jsx("div",{className:"text-sm text-gray-500",children:"Admins"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.ceil((((g=n.members)==null?void 0:g.length)||0)/2)}),i.jsx("div",{className:"text-sm text-gray-500",children:"Active Conversations"})]})]})]})]})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Group not found"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"The group you're looking for doesn't exist."}),i.jsx("button",{onClick:()=>t("/chat"),className:"btn-primary",children:"Back to Chat"})]})})},rN=()=>{const{user:e,setUser:t}=pn(),[n,r]=v.useState({name:"",email:"",phone:"",designation:"",profileImage:"",bio:""}),[s,o]=v.useState(!1),[l,a]=v.useState(!1),[c,u]=v.useState(null),[m,d]=v.useState(null);v.useEffect(()=>{e&&(r({name:e.name||"",email:e.email||"",phone:e.phone||"",designation:e.designation||"",profileImage:e.profileImage||"",bio:e.bio||""}),u(e.profileImage||null))},[e]);const w=g=>{const{name:p,value:y}=g.target;r(_=>({..._,[p]:y}))},C=g=>{const p=g.target.files[0];if(p){d(p);const y=new FileReader;y.onload=_=>{u(_.target.result)},y.readAsDataURL(p)}},h=()=>{d(null),u(null),r(g=>({...g,profileImage:""}))},x=async g=>{var p;g.preventDefault(),a(!0);try{const y=new FormData;y.append("name",n.name),y.append("phone",n.phone),y.append("designation",n.designation),y.append("bio",n.bio),m&&y.append("profileImage",m);const R=((p=(await ht.updateProfile(y)).data)==null?void 0:p.user)||{};r(F=>({...F,name:R.name??F.name,phone:R.phone??F.phone,designation:R.designation??F.designation,bio:R.bio??F.bio,profileImage:R.profileImage??F.profileImage})),R.profileImage&&u(R.profileImage),t(F=>F?{...F,...R}:R),G.success("Profile updated successfully"),o(!1)}catch(y){console.error("Profile update error:",y),G.error("Failed to update profile")}finally{a(!1)}},S=()=>{o(!1),r({name:e.name||"",email:e.email||"",phone:e.phone||"",designation:e.designation||"",profileImage:e.profileImage||"",bio:e.bio||""}),u(e.profileImage||null),d(null)};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsxs("div",{className:"flex items-center justify-between py-6",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(Ao,{to:"/dashboard",className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:i.jsx(pl,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),i.jsx("p",{className:"text-gray-600",children:"Manage your profile information"})]})]}),!s&&i.jsxs("button",{onClick:()=>o(!0),className:"btn-primary inline-flex items-center",children:[i.jsx(Uo,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})})}),i.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-1",children:i.jsx("div",{className:"card p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"relative inline-block",children:[c?i.jsx("img",{src:c.startsWith("http")?c:`${be}${c}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover mx-auto"}):i.jsx("div",{className:"w-32 h-32 bg-primary-100 rounded-full flex items-center justify-center mx-auto",children:i.jsx(en,{className:"w-16 h-16 text-primary-600"})}),s&&i.jsx("div",{className:"absolute bottom-0 right-0",children:i.jsxs("label",{className:"bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors",children:[i.jsx($w,{className:"w-4 h-4"}),i.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden"})]})})]}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-4",children:n.name}),i.jsx("p",{className:"text-gray-600",children:n.designation||"No designation"}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n.email}),s&&c&&i.jsxs("button",{onClick:h,className:"mt-2 text-red-600 hover:text-red-700 text-sm inline-flex items-center",children:[i.jsx($o,{className:"w-4 h-4 mr-1"}),"Remove Image"]})]})})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"card p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:s?"Edit Profile Information":"Profile Information"}),s?i.jsxs("form",{onSubmit:x,className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),i.jsx("input",{type:"text",name:"name",value:n.name,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"+1 (555) 123-4567"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),i.jsx("input",{type:"text",name:"designation",value:n.designation,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Software Developer"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:n.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),i.jsx("textarea",{name:"bio",value:n.bio,onChange:w,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Tell us about yourself..."})]}),i.jsxs("div",{className:"flex justify-end space-x-4",children:[i.jsx("button",{type:"button",onClick:S,className:"btn-secondary",children:"Cancel"}),i.jsx("button",{type:"submit",disabled:l,className:"btn-primary inline-flex items-center",children:l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Gw,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(en,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Name"}),i.jsx("p",{className:"text-sm text-gray-600",children:n.name||"Not provided"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Su,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Phone"}),i.jsx("p",{className:"text-sm text-gray-600",children:n.phone||"Not provided"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Uw,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Designation"}),i.jsx("p",{className:"text-sm text-gray-600",children:n.designation||"Not provided"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Ph,{className:"w-5 h-5 text-gray-400"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email"}),i.jsx("p",{className:"text-sm text-gray-600",children:n.email})]})]})]}),n.bio&&i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Bio"}),i.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:n.bio})]})]})]})})]})})]})};function sN(){const e=rl(),[t,n]=v.useState(!0),[r,s]=v.useState([]),[o,l]=v.useState([]),[a,c]=v.useState(new Set),[u,m]=v.useState(new Set),[d,w]=v.useState(null),[C,h]=v.useState(!1),[x,S]=v.useState("users"),[g,p]=v.useState(""),y=V=>V&&(/^https?:\/\//i.test(V)?V:`${be}${V}`),_=V=>{if(!V&&V!==0)return"";const q=V/1024/1024;return`${q.toFixed(q<.1?2:1)} MB`};v.useEffect(()=>{try{const V=sessionStorage.getItem("forwardMessage");V&&w(JSON.parse(V))}catch{}},[]),v.useEffect(()=>{(async()=>{try{n(!0);const[q,O]=await Promise.all([ht.getActiveUsers(),Jt.getGroups()]);s(q.data||[]),l((O.data||[]).filter(J=>J.isActive!==!1))}catch{}finally{n(!1)}})()},[]);const R=V=>{c(q=>{const O=new Set(q);return O.has(V)?O.delete(V):O.add(V),O})},F=V=>{m(q=>{const O=new Set(q);return O.has(V)?O.delete(V):O.add(V),O})},U=async()=>{if(!(!(d!=null&&d.id)&&!(d!=null&&d._id))&&!(a.size===0&&u.size===0))try{h(!0),await Le.forwardMessage({messageId:d.id||d._id,targets:{users:Array.from(a),groups:Array.from(u)}}),sessionStorage.removeItem("forwardMessage"),e(-1)}catch{h(!1)}};if(t)return i.jsx("div",{className:"p-6",children:"Loading..."});const H=r.filter(V=>V.name.toLowerCase().includes(g.toLowerCase())||(V.email||"").toLowerCase().includes(g.toLowerCase())),X=o.filter(V=>V.name.toLowerCase().includes(g.toLowerCase())),W=a.size+u.size;return i.jsxs("div",{className:"h-screen bg-white",children:[i.jsxs("div",{className:"sticky top-0 z-10 bg-gray-100 text-white",children:[i.jsx("div",{className:"max-w-3xl mx-auto px-4 pt-3",children:i.jsx("input",{value:g,onChange:V=>p(V.target.value),placeholder:"Search name or group",className:"w-full bg-white text-gray-800 rounded-full px-4 py-2 text-sm focus:outline-none",type:"text"})}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-2 flex items-center justify-between gap-2",children:[i.jsxs("div",{className:"inline-flex bg-white rounded-full p-1",children:[i.jsx("button",{className:`px-4 py-1 text-sm rounded-full ${x==="users"?"bg-gray-200 text-gray-800":"text-gray-800"}`,onClick:()=>S("users"),children:"Chats"}),i.jsx("button",{className:`px-4 py-1 text-sm rounded-full ${x==="groups"?"bg-gray-200 text-gray-800":"text-gray-800"}`,onClick:()=>S("groups"),children:"Groups"})]}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsx("div",{className:"font-semibold -ml-4 whitespace-nowrap text-gray-800",children:"Forward"})}),i.jsxs("div",{className:"text-sm opacity-90 whitespace-nowrap text-gray-800",children:[W," selected"]})]})]}),i.jsxs("div",{className:"max-w-3xl mx-auto px-4 pt-3 pb-24",children:[d&&i.jsx("div",{className:"mb-3",children:i.jsxs("div",{className:"bg-gray-100 rounded-2xl p-3 inline-block max-w-full",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:i.jsx("div",{className:"text-xs font-medium text-gray-600",children:"Preview"})}),d.messageType==="image"?i.jsxs("div",{className:"max-w-[200px]",children:[i.jsx("img",{src:y(d.fileUrl),alt:d.fileName||"image",className:"rounded-lg w-full h-auto max-h-[150px] object-cover"}),d.message&&i.jsx("div",{className:"mt-2 text-sm text-gray-800 break-words",children:d.message}),i.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&i.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&i.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):d.messageType==="video"?i.jsxs("div",{className:"max-w-[200px]",children:[i.jsx("video",{src:y(d.fileUrl),controls:!0,className:"rounded-lg w-full h-auto max-h-[150px] object-cover"}),d.message&&i.jsx("div",{className:"mt-2 text-sm text-gray-800 break-words",children:d.message}),i.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&i.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&i.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):d.messageType&&d.messageType!=="text"?i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded-lg shadow-sm",children:[i.jsx("svg",{className:"w-6 h-6 text-gray-600",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zM8 18h8v2H8v-2zm0-4h8v2H8v-2zm6-7.5V9h3.5L14 6.5z"})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:d.fileName||"Attachment"}),i.jsx("div",{className:"text-xs text-gray-500",children:_(d.fileSize)}),d.message&&i.jsx("div",{className:"text-sm text-gray-800 break-words mt-1",children:d.message})]})]}),i.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&i.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&i.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):i.jsx("div",{className:"text-sm text-gray-800 break-words max-w-[200px]",children:d.message})]})}),x==="users"?i.jsxs("div",{className:"divide-y border rounded-xl overflow-hidden",children:[H.map(V=>{var q,O;return i.jsxs("button",{onClick:()=>R(V.id),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-green-500 text-white flex items-center justify-center",children:V.profileImage?i.jsx("img",{src:`${be}${V.profileImage}`,alt:V.name,className:"w-full h-full object-cover"}):i.jsx("span",{className:"font-semibold",children:(O=(q=V.name)==null?void 0:q[0])==null?void 0:O.toUpperCase()})}),i.jsxs("div",{className:"flex-1 text-left min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:V.name}),i.jsx("div",{className:"text-xs text-gray-500 truncate",children:V.email})]}),i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${a.has(V.id)?"bg-green-500 border-green-500":"border-gray-300"}`,children:a.has(V.id)&&i.jsx("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},V.id)}),H.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"No chats found"})]}):i.jsxs("div",{className:"divide-y border rounded-xl overflow-hidden",children:[X.map(V=>{var O;const q=V.id||V._id;return i.jsxs("button",{onClick:()=>F(q),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50",children:[i.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-green-500 text-white flex items-center justify-center",children:V.avatar?i.jsx("img",{src:`${be}${V.avatar}`,alt:V.name,className:"w-full h-full object-cover"}):i.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V20h6v-3.5c0-2.33-4.67-3.5-7-3.5z"})})}),i.jsxs("div",{className:"flex-1 text-left min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:V.name}),i.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[((O=V.members)==null?void 0:O.length)||0," members"]})]}),i.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${u.has(q)?"bg-green-500 border-green-500":"border-gray-300"}`,children:u.has(q)&&i.jsx("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},q)}),X.length===0&&i.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"No groups found"})]})]}),i.jsx("div",{className:"fixed bottom-0 inset-x-0 bg-white border-t",children:i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[W," selected"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Cancel"}),i.jsx("button",{className:"btn-primary",disabled:C||W===0,onClick:U,children:"Send"})]})]})})]})}const $h=({size:e="md"})=>{const t={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"};return i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:`${t[e]} animate-spin rounded-full border-4 border-gray-200 border-t-primary-600`})})};function An({children:e,allowedRoles:t}){const{user:n,loading:r}=pn();return r?i.jsx($h,{}):n?t&&!t.includes(n.role)?i.jsx(Ms,{to:"/dashboard",replace:!0}):e:i.jsx(Ms,{to:"/login",replace:!0})}function iN(){return i.jsx(U1,{children:i.jsx(fy,{children:i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx(rv,{position:"top-right"}),i.jsx(oN,{})]})})})}function oN(){const{user:e,loading:t}=pn();return t?i.jsx($h,{}):i.jsx(i.Fragment,{children:e?i.jsx(Mw,{user:e,children:i.jsxs(Vd,{children:[i.jsx(St,{path:"/login",element:i.jsx(Ms,{to:"/dashboard",replace:!0})}),i.jsx(St,{path:"/dashboard",element:i.jsx(An,{children:e&&e.role==="user"?i.jsx(xf,{}):i.jsx(Yw,{})})}),i.jsx(St,{path:"/user-dashboard",element:i.jsx(An,{allowedRoles:["user"],children:i.jsx(xf,{})})}),i.jsx(St,{path:"/chat",element:i.jsx(An,{children:i.jsx(Zw,{})})}),i.jsx(St,{path:"/users",element:i.jsx(An,{allowedRoles:["superadmin","admin"],children:i.jsx(eN,{})})}),i.jsx(St,{path:"/groups",element:i.jsx(An,{allowedRoles:["admin"],children:i.jsx(tN,{})})}),i.jsx(St,{path:"/group/:groupId",element:i.jsx(An,{children:i.jsx(nN,{})})}),i.jsx(St,{path:"/profile",element:i.jsx(An,{children:i.jsx(rN,{})})}),i.jsx(St,{path:"/forward",element:i.jsx(An,{children:i.jsx(sN,{})})}),i.jsx(St,{path:"/",element:i.jsx(Ms,{to:"/dashboard",replace:!0})})]})}):i.jsxs(Vd,{children:[i.jsx(St,{path:"/login",element:i.jsx(Jw,{})}),i.jsx(St,{path:"*",element:i.jsx(Ms,{to:"/login",replace:!0})})]})})}Xl.createRoot(document.getElementById("root")).render(i.jsx(_f.StrictMode,{children:i.jsx(iN,{})}));
