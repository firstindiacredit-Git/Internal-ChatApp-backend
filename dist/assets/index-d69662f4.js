function Rh(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ah(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cf={exports:{}},Ro={},uf={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qs=Symbol.for("react.element"),Ph=Symbol.for("react.portal"),Mh=Symbol.for("react.fragment"),Oh=Symbol.for("react.strict_mode"),Ih=Symbol.for("react.profiler"),Lh=Symbol.for("react.provider"),Uh=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),Fh=Symbol.for("react.suspense"),$h=Symbol.for("react.memo"),zh=Symbol.for("react.lazy"),vu=Symbol.iterator;function Bh(e){return e===null||typeof e!="object"?null:(e=vu&&e[vu]||e["@@iterator"],typeof e=="function"?e:null)}var df={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ff=Object.assign,pf={};function Hr(e,t,n){this.props=e,this.context=t,this.refs=pf,this.updater=n||df}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mf(){}mf.prototype=Hr.prototype;function nc(e,t,n){this.props=e,this.context=t,this.refs=pf,this.updater=n||df}var rc=nc.prototype=new mf;rc.constructor=nc;ff(rc,Hr.prototype);rc.isPureReactComponent=!0;var wu=Array.isArray,hf=Object.prototype.hasOwnProperty,sc={current:null},gf={key:!0,ref:!0,__self:!0,__source:!0};function yf(e,t,n){var r,s={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)hf.call(t,r)&&!gf.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:qs,type:e,key:i,ref:l,props:s,_owner:sc.current}}function Hh(e,t){return{$$typeof:qs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ic(e){return typeof e=="object"&&e!==null&&e.$$typeof===qs}function Vh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Nu=/\/+/g;function ul(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Vh(""+e.key):t.toString(36)}function Ti(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case qs:case Ph:l=!0}}if(l)return l=e,s=s(l),e=r===""?"."+ul(l,0):r,wu(s)?(n="",e!=null&&(n=e.replace(Nu,"$&/")+"/"),Ti(s,t,n,"",function(u){return u})):s!=null&&(ic(s)&&(s=Hh(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(Nu,"$&/")+"/")+e)),t.push(s)),1;if(l=0,r=r===""?".":r+":",wu(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+ul(i,a);l+=Ti(i,t,n,c,s)}else if(c=Bh(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+ul(i,a++),l+=Ti(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function ai(e,t,n){if(e==null)return e;var r=[],s=0;return Ti(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Gh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tt={current:null},Ri={transition:null},Wh={ReactCurrentDispatcher:tt,ReactCurrentBatchConfig:Ri,ReactCurrentOwner:sc};function xf(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:ai,forEach:function(e,t,n){ai(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ai(e,function(){t++}),t},toArray:function(e){return ai(e,function(t){return t})||[]},only:function(e){if(!ic(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=Hr;de.Fragment=Mh;de.Profiler=Ih;de.PureComponent=nc;de.StrictMode=Oh;de.Suspense=Fh;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wh;de.act=xf;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ff({},e.props),s=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=sc.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)hf.call(t,c)&&!gf.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:qs,type:e.type,key:s,ref:i,props:r,_owner:l}};de.createContext=function(e){return e={$$typeof:Uh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Lh,_context:e},e.Consumer=e};de.createElement=yf;de.createFactory=function(e){var t=yf.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Dh,render:e}};de.isValidElement=ic;de.lazy=function(e){return{$$typeof:zh,_payload:{_status:-1,_result:e},_init:Gh}};de.memo=function(e,t){return{$$typeof:$h,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=Ri.transition;Ri.transition={};try{e()}finally{Ri.transition=t}};de.unstable_act=xf;de.useCallback=function(e,t){return tt.current.useCallback(e,t)};de.useContext=function(e){return tt.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return tt.current.useDeferredValue(e)};de.useEffect=function(e,t){return tt.current.useEffect(e,t)};de.useId=function(){return tt.current.useId()};de.useImperativeHandle=function(e,t,n){return tt.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return tt.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return tt.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return tt.current.useMemo(e,t)};de.useReducer=function(e,t,n){return tt.current.useReducer(e,t,n)};de.useRef=function(e){return tt.current.useRef(e)};de.useState=function(e){return tt.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return tt.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return tt.current.useTransition()};de.version="18.3.1";uf.exports=de;var N=uf.exports;const vf=Ah(N),qh=Rh({__proto__:null,default:vf},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh=N,Qh=Symbol.for("react.element"),Jh=Symbol.for("react.fragment"),Yh=Object.prototype.hasOwnProperty,Xh=Kh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zh={key:!0,ref:!0,__self:!0,__source:!0};function wf(e,t,n){var r,s={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Yh.call(t,r)&&!Zh.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Qh,type:e,key:i,ref:l,props:s,_owner:Xh.current}}Ro.Fragment=Jh;Ro.jsx=wf;Ro.jsxs=wf;cf.exports=Ro;var o=cf.exports,Vl={},Nf={exports:{}},yt={},jf={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,k){var R=U.length;U.push(k);e:for(;0<R;){var P=R-1>>>1,V=U[P];if(0<s(V,k))U[P]=k,U[R]=V,R=P;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var k=U[0],R=U.pop();if(R!==k){U[0]=R;e:for(var P=0,V=U.length,ie=V>>>1;P<ie;){var xe=2*(P+1)-1,ge=U[xe],De=xe+1,Y=U[De];if(0>s(ge,R))De<V&&0>s(Y,ge)?(U[P]=Y,U[De]=R,P=De):(U[P]=ge,U[xe]=R,P=xe);else if(De<V&&0>s(Y,R))U[P]=Y,U[De]=R,P=De;else break e}}return k}function s(U,k){var R=U.sortIndex-k.sortIndex;return R!==0?R:U.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var c=[],u=[],p=1,d=null,v=3,b=!1,h=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(U){for(var k=n(u);k!==null;){if(k.callback===null)r(u);else if(k.startTime<=U)r(u),k.sortIndex=k.expirationTime,t(c,k);else break;k=n(u)}}function C(U){if(y=!1,g(U),!h)if(n(c)!==null)h=!0,ee(O);else{var k=n(u);k!==null&&ae(C,k.startTime-U)}}function O(U,k){h=!1,y&&(y=!1,x(B),B=-1),b=!0;var R=v;try{for(g(k),d=n(c);d!==null&&(!(d.expirationTime>k)||U&&!H());){var P=d.callback;if(typeof P=="function"){d.callback=null,v=d.priorityLevel;var V=P(d.expirationTime<=k);k=e.unstable_now(),typeof V=="function"?d.callback=V:d===n(c)&&r(c),g(k)}else r(c);d=n(c)}if(d!==null)var ie=!0;else{var xe=n(u);xe!==null&&ae(C,xe.startTime-k),ie=!1}return ie}finally{d=null,v=R,b=!1}}var F=!1,z=null,B=-1,X=5,q=-1;function H(){return!(e.unstable_now()-q<X)}function K(){if(z!==null){var U=e.unstable_now();q=U;var k=!0;try{k=z(!0,U)}finally{k?L():(F=!1,z=null)}}else F=!1}var L;if(typeof m=="function")L=function(){m(K)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,se=J.port2;J.port1.onmessage=K,L=function(){se.postMessage(null)}}else L=function(){S(K,0)};function ee(U){z=U,F||(F=!0,L())}function ae(U,k){B=S(function(){U(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){h||b||(h=!0,ee(O))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(U){switch(v){case 1:case 2:case 3:var k=3;break;default:k=v}var R=v;v=k;try{return U()}finally{v=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,k){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var R=v;v=U;try{return k()}finally{v=R}},e.unstable_scheduleCallback=function(U,k,R){var P=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?P+R:P):R=P,U){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=R+V,U={id:p++,callback:k,priorityLevel:U,startTime:R,expirationTime:V,sortIndex:-1},R>P?(U.sortIndex=R,t(u,U),n(c)===null&&U===n(u)&&(y?(x(B),B=-1):y=!0,ae(C,R-P))):(U.sortIndex=V,t(c,U),h||b||(h=!0,ee(O))),U},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(U){var k=v;return function(){var R=v;v=k;try{return U.apply(this,arguments)}finally{v=R}}}})(Sf);jf.exports=Sf;var eg=jf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=N,gt=eg;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kf=new Set,_s={};function ar(e,t){Ir(e,t),Ir(e+"Capture",t)}function Ir(e,t){for(_s[e]=t,e=0;e<t.length;e++)kf.add(t[e])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gl=Object.prototype.hasOwnProperty,ng=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ju={},Su={};function rg(e){return Gl.call(Su,e)?!0:Gl.call(ju,e)?!1:ng.test(e)?Su[e]=!0:(ju[e]=!0,!1)}function sg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ig(e,t,n,r){if(t===null||typeof t>"u"||sg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nt(e,t,n,r,s,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ve[e]=new nt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ve[t]=new nt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ve[e]=new nt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ve[e]=new nt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ve[e]=new nt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ve[e]=new nt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ve[e]=new nt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ve[e]=new nt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ve[e]=new nt(e,5,!1,e.toLowerCase(),null,!1,!1)});var oc=/[\-:]([a-z])/g;function lc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oc,lc);Ve[t]=new nt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oc,lc);Ve[t]=new nt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oc,lc);Ve[t]=new nt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ve[e]=new nt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ve[e]=new nt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ac(e,t,n,r){var s=Ve.hasOwnProperty(t)?Ve[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ig(t,n,s,r)&&(n=null),r||s===null?rg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gn=tg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ci=Symbol.for("react.element"),hr=Symbol.for("react.portal"),gr=Symbol.for("react.fragment"),cc=Symbol.for("react.strict_mode"),Wl=Symbol.for("react.profiler"),bf=Symbol.for("react.provider"),Ef=Symbol.for("react.context"),uc=Symbol.for("react.forward_ref"),ql=Symbol.for("react.suspense"),Kl=Symbol.for("react.suspense_list"),dc=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Cf=Symbol.for("react.offscreen"),ku=Symbol.iterator;function ts(e){return e===null||typeof e!="object"?null:(e=ku&&e[ku]||e["@@iterator"],typeof e=="function"?e:null)}var Ce=Object.assign,dl;function ds(e){if(dl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);dl=t&&t[1]||""}return`
`+dl+e}var fl=!1;function pl(e,t){if(!e||fl)return"";fl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),l=s.length-1,a=i.length-1;1<=l&&0<=a&&s[l]!==i[a];)a--;for(;1<=l&&0<=a;l--,a--)if(s[l]!==i[a]){if(l!==1||a!==1)do if(l--,a--,0>a||s[l]!==i[a]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=a);break}}}finally{fl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ds(e):""}function og(e){switch(e.tag){case 5:return ds(e.type);case 16:return ds("Lazy");case 13:return ds("Suspense");case 19:return ds("SuspenseList");case 0:case 2:case 15:return e=pl(e.type,!1),e;case 11:return e=pl(e.type.render,!1),e;case 1:return e=pl(e.type,!0),e;default:return""}}function Ql(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case gr:return"Fragment";case hr:return"Portal";case Wl:return"Profiler";case cc:return"StrictMode";case ql:return"Suspense";case Kl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ef:return(e.displayName||"Context")+".Consumer";case bf:return(e._context.displayName||"Context")+".Provider";case uc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dc:return t=e.displayName||null,t!==null?t:Ql(e.type)||"Memo";case Nn:t=e._payload,e=e._init;try{return Ql(e(t))}catch{}}return null}function lg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ql(t);case 8:return t===cc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _f(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ag(e){var t=_f(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ui(e){e._valueTracker||(e._valueTracker=ag(e))}function Tf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_f(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Qi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jl(e,t){var n=t.checked;return Ce({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function bu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Rf(e,t){t=t.checked,t!=null&&ac(e,"checked",t,!1)}function Yl(e,t){Rf(e,t);var n=Fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xl(e,t.type,Fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Eu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xl(e,t,n){(t!=="number"||Qi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fs=Array.isArray;function Cr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Zl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Ce({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(fs(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fn(n)}}function Af(e,t){var n=Fn(t.value),r=Fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function _u(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ea(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var di,Mf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(di=di||document.createElement("div"),di.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=di.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ts(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cg=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(e){cg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gs[t]=gs[e]})});function Of(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||gs.hasOwnProperty(e)&&gs[e]?(""+t).trim():t+"px"}function If(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Of(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ug=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ta(e,t){if(t){if(ug[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function na(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ra=null;function fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sa=null,_r=null,Tr=null;function Tu(e){if(e=Js(e)){if(typeof sa!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Io(t),sa(e.stateNode,e.type,t))}}function Lf(e){_r?Tr?Tr.push(e):Tr=[e]:_r=e}function Uf(){if(_r){var e=_r,t=Tr;if(Tr=_r=null,Tu(e),t)for(e=0;e<t.length;e++)Tu(t[e])}}function Df(e,t){return e(t)}function Ff(){}var ml=!1;function $f(e,t,n){if(ml)return e(t,n);ml=!0;try{return Df(e,t,n)}finally{ml=!1,(_r!==null||Tr!==null)&&(Ff(),Uf())}}function Rs(e,t){var n=e.stateNode;if(n===null)return null;var r=Io(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var ia=!1;if(dn)try{var ns={};Object.defineProperty(ns,"passive",{get:function(){ia=!0}}),window.addEventListener("test",ns,ns),window.removeEventListener("test",ns,ns)}catch{ia=!1}function dg(e,t,n,r,s,i,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(p){this.onError(p)}}var ys=!1,Ji=null,Yi=!1,oa=null,fg={onError:function(e){ys=!0,Ji=e}};function pg(e,t,n,r,s,i,l,a,c){ys=!1,Ji=null,dg.apply(fg,arguments)}function mg(e,t,n,r,s,i,l,a,c){if(pg.apply(this,arguments),ys){if(ys){var u=Ji;ys=!1,Ji=null}else throw Error(D(198));Yi||(Yi=!0,oa=u)}}function cr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ru(e){if(cr(e)!==e)throw Error(D(188))}function hg(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ru(s),e;if(i===r)return Ru(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var l=!1,a=s.child;a;){if(a===n){l=!0,n=s,r=i;break}if(a===r){l=!0,r=s,n=i;break}a=a.sibling}if(!l){for(a=i.child;a;){if(a===n){l=!0,n=i,r=s;break}if(a===r){l=!0,r=i,n=s;break}a=a.sibling}if(!l)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Bf(e){return e=hg(e),e!==null?Hf(e):null}function Hf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Hf(e);if(t!==null)return t;e=e.sibling}return null}var Vf=gt.unstable_scheduleCallback,Au=gt.unstable_cancelCallback,gg=gt.unstable_shouldYield,yg=gt.unstable_requestPaint,Ae=gt.unstable_now,xg=gt.unstable_getCurrentPriorityLevel,pc=gt.unstable_ImmediatePriority,Gf=gt.unstable_UserBlockingPriority,Xi=gt.unstable_NormalPriority,vg=gt.unstable_LowPriority,Wf=gt.unstable_IdlePriority,Ao=null,Qt=null;function wg(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Ao,e,void 0,(e.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:Sg,Ng=Math.log,jg=Math.LN2;function Sg(e){return e>>>=0,e===0?32:31-(Ng(e)/jg|0)|0}var fi=64,pi=4194304;function ps(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~s;a!==0?r=ps(a):(i&=l,i!==0&&(r=ps(i)))}else l=n&~s,l!==0?r=ps(l):i!==0&&(r=ps(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lt(t),s=1<<n,r|=e[n],t&=~s;return r}function kg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-Lt(i),a=1<<l,c=s[l];c===-1?(!(a&n)||a&r)&&(s[l]=kg(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function la(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qf(){var e=fi;return fi<<=1,!(fi&4194240)&&(fi=64),e}function hl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ks(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lt(t),e[t]=n}function Eg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Lt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function mc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ye=0;function Kf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Qf,hc,Jf,Yf,Xf,aa=!1,mi=[],Tn=null,Rn=null,An=null,As=new Map,Ps=new Map,Sn=[],Cg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pu(e,t){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":As.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ps.delete(t.pointerId)}}function rs(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Js(t),t!==null&&hc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function _g(e,t,n,r,s){switch(t){case"focusin":return Tn=rs(Tn,e,t,n,r,s),!0;case"dragenter":return Rn=rs(Rn,e,t,n,r,s),!0;case"mouseover":return An=rs(An,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return As.set(i,rs(As.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ps.set(i,rs(Ps.get(i)||null,e,t,n,r,s)),!0}return!1}function Zf(e){var t=Qn(e.target);if(t!==null){var n=cr(t);if(n!==null){if(t=n.tag,t===13){if(t=zf(n),t!==null){e.blockedOn=t,Xf(e.priority,function(){Jf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ai(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ca(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ra=r,n.target.dispatchEvent(r),ra=null}else return t=Js(n),t!==null&&hc(t),e.blockedOn=n,!1;t.shift()}return!0}function Mu(e,t,n){Ai(e)&&n.delete(t)}function Tg(){aa=!1,Tn!==null&&Ai(Tn)&&(Tn=null),Rn!==null&&Ai(Rn)&&(Rn=null),An!==null&&Ai(An)&&(An=null),As.forEach(Mu),Ps.forEach(Mu)}function ss(e,t){e.blockedOn===t&&(e.blockedOn=null,aa||(aa=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,Tg)))}function Ms(e){function t(s){return ss(s,e)}if(0<mi.length){ss(mi[0],e);for(var n=1;n<mi.length;n++){var r=mi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Tn!==null&&ss(Tn,e),Rn!==null&&ss(Rn,e),An!==null&&ss(An,e),As.forEach(t),Ps.forEach(t),n=0;n<Sn.length;n++)r=Sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Sn.length&&(n=Sn[0],n.blockedOn===null);)Zf(n),n.blockedOn===null&&Sn.shift()}var Rr=gn.ReactCurrentBatchConfig,eo=!0;function Rg(e,t,n,r){var s=ye,i=Rr.transition;Rr.transition=null;try{ye=1,gc(e,t,n,r)}finally{ye=s,Rr.transition=i}}function Ag(e,t,n,r){var s=ye,i=Rr.transition;Rr.transition=null;try{ye=4,gc(e,t,n,r)}finally{ye=s,Rr.transition=i}}function gc(e,t,n,r){if(eo){var s=ca(e,t,n,r);if(s===null)bl(e,t,r,to,n),Pu(e,r);else if(_g(s,e,t,n,r))r.stopPropagation();else if(Pu(e,r),t&4&&-1<Cg.indexOf(e)){for(;s!==null;){var i=Js(s);if(i!==null&&Qf(i),i=ca(e,t,n,r),i===null&&bl(e,t,r,to,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bl(e,t,r,null,n)}}var to=null;function ca(e,t,n,r){if(to=null,e=fc(r),e=Qn(e),e!==null)if(t=cr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return to=e,null}function ep(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xg()){case pc:return 1;case Gf:return 4;case Xi:case vg:return 16;case Wf:return 536870912;default:return 16}default:return 16}}var En=null,yc=null,Pi=null;function tp(){if(Pi)return Pi;var e,t=yc,n=t.length,r,s="value"in En?En.value:En.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===s[i-r];r++);return Pi=s.slice(e,1<r?1-r:void 0)}function Mi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hi(){return!0}function Ou(){return!1}function xt(e){function t(n,r,s,i,l){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hi:Ou,this.isPropagationStopped=Ou,this}return Ce(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=hi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=hi)},persist:function(){},isPersistent:hi}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xc=xt(Vr),Qs=Ce({},Vr,{view:0,detail:0}),Pg=xt(Qs),gl,yl,is,Po=Ce({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==is&&(is&&e.type==="mousemove"?(gl=e.screenX-is.screenX,yl=e.screenY-is.screenY):yl=gl=0,is=e),gl)},movementY:function(e){return"movementY"in e?e.movementY:yl}}),Iu=xt(Po),Mg=Ce({},Po,{dataTransfer:0}),Og=xt(Mg),Ig=Ce({},Qs,{relatedTarget:0}),xl=xt(Ig),Lg=Ce({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ug=xt(Lg),Dg=Ce({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fg=xt(Dg),$g=Ce({},Vr,{data:0}),Lu=xt($g),zg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hg[e])?!!t[e]:!1}function vc(){return Vg}var Gg=Ce({},Qs,{key:function(e){if(e.key){var t=zg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Mi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(e){return e.type==="keypress"?Mi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Mi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wg=xt(Gg),qg=Ce({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=xt(qg),Kg=Ce({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),Qg=xt(Kg),Jg=Ce({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yg=xt(Jg),Xg=Ce({},Po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zg=xt(Xg),e0=[9,13,27,32],wc=dn&&"CompositionEvent"in window,xs=null;dn&&"documentMode"in document&&(xs=document.documentMode);var t0=dn&&"TextEvent"in window&&!xs,np=dn&&(!wc||xs&&8<xs&&11>=xs),Du=String.fromCharCode(32),Fu=!1;function rp(e,t){switch(e){case"keyup":return e0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function n0(e,t){switch(e){case"compositionend":return sp(t);case"keypress":return t.which!==32?null:(Fu=!0,Du);case"textInput":return e=t.data,e===Du&&Fu?null:e;default:return null}}function r0(e,t){if(yr)return e==="compositionend"||!wc&&rp(e,t)?(e=tp(),Pi=yc=En=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return np&&t.locale!=="ko"?null:t.data;default:return null}}var s0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!s0[e.type]:t==="textarea"}function ip(e,t,n,r){Lf(r),t=no(t,"onChange"),0<t.length&&(n=new xc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vs=null,Os=null;function i0(e){gp(e,0)}function Mo(e){var t=wr(e);if(Tf(t))return e}function o0(e,t){if(e==="change")return t}var op=!1;if(dn){var vl;if(dn){var wl="oninput"in document;if(!wl){var zu=document.createElement("div");zu.setAttribute("oninput","return;"),wl=typeof zu.oninput=="function"}vl=wl}else vl=!1;op=vl&&(!document.documentMode||9<document.documentMode)}function Bu(){vs&&(vs.detachEvent("onpropertychange",lp),Os=vs=null)}function lp(e){if(e.propertyName==="value"&&Mo(Os)){var t=[];ip(t,Os,e,fc(e)),$f(i0,t)}}function l0(e,t,n){e==="focusin"?(Bu(),vs=t,Os=n,vs.attachEvent("onpropertychange",lp)):e==="focusout"&&Bu()}function a0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Mo(Os)}function c0(e,t){if(e==="click")return Mo(t)}function u0(e,t){if(e==="input"||e==="change")return Mo(t)}function d0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $t=typeof Object.is=="function"?Object.is:d0;function Is(e,t){if($t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Gl.call(t,s)||!$t(e[s],t[s]))return!1}return!0}function Hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vu(e,t){var n=Hu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hu(n)}}function ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cp(){for(var e=window,t=Qi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Qi(e.document)}return t}function Nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function f0(e){var t=cp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ap(n.ownerDocument.documentElement,n)){if(r!==null&&Nc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Vu(n,i);var l=Vu(n,r);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var p0=dn&&"documentMode"in document&&11>=document.documentMode,xr=null,ua=null,ws=null,da=!1;function Gu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;da||xr==null||xr!==Qi(r)||(r=xr,"selectionStart"in r&&Nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ws&&Is(ws,r)||(ws=r,r=no(ua,"onSelect"),0<r.length&&(t=new xc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=xr)))}function gi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:gi("Animation","AnimationEnd"),animationiteration:gi("Animation","AnimationIteration"),animationstart:gi("Animation","AnimationStart"),transitionend:gi("Transition","TransitionEnd")},Nl={},up={};dn&&(up=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Oo(e){if(Nl[e])return Nl[e];if(!vr[e])return e;var t=vr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in up)return Nl[e]=t[n];return e}var dp=Oo("animationend"),fp=Oo("animationiteration"),pp=Oo("animationstart"),mp=Oo("transitionend"),hp=new Map,Wu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(e,t){hp.set(e,t),ar(t,[e])}for(var jl=0;jl<Wu.length;jl++){var Sl=Wu[jl],m0=Sl.toLowerCase(),h0=Sl[0].toUpperCase()+Sl.slice(1);zn(m0,"on"+h0)}zn(dp,"onAnimationEnd");zn(fp,"onAnimationIteration");zn(pp,"onAnimationStart");zn("dblclick","onDoubleClick");zn("focusin","onFocus");zn("focusout","onBlur");zn(mp,"onTransitionEnd");Ir("onMouseEnter",["mouseout","mouseover"]);Ir("onMouseLeave",["mouseout","mouseover"]);Ir("onPointerEnter",["pointerout","pointerover"]);Ir("onPointerLeave",["pointerout","pointerover"]);ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ms));function qu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mg(r,t,void 0,e),e.currentTarget=null}function gp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;qu(s,a,u),i=c}else for(l=0;l<r.length;l++){if(a=r[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;qu(s,a,u),i=c}}}if(Yi)throw e=oa,Yi=!1,oa=null,e}function Ne(e,t){var n=t[ga];n===void 0&&(n=t[ga]=new Set);var r=e+"__bubble";n.has(r)||(yp(t,e,2,!1),n.add(r))}function kl(e,t,n){var r=0;t&&(r|=4),yp(n,e,r,t)}var yi="_reactListening"+Math.random().toString(36).slice(2);function Ls(e){if(!e[yi]){e[yi]=!0,kf.forEach(function(n){n!=="selectionchange"&&(g0.has(n)||kl(n,!1,e),kl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yi]||(t[yi]=!0,kl("selectionchange",!1,t))}}function yp(e,t,n,r){switch(ep(t)){case 1:var s=Rg;break;case 4:s=Ag;break;default:s=gc}n=s.bind(null,t,n,e),s=void 0,!ia||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function bl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;a!==null;){if(l=Qn(a),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}a=a.parentNode}}r=r.return}$f(function(){var u=i,p=fc(n),d=[];e:{var v=hp.get(e);if(v!==void 0){var b=xc,h=e;switch(e){case"keypress":if(Mi(n)===0)break e;case"keydown":case"keyup":b=Wg;break;case"focusin":h="focus",b=xl;break;case"focusout":h="blur",b=xl;break;case"beforeblur":case"afterblur":b=xl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Og;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Qg;break;case dp:case fp:case pp:b=Ug;break;case mp:b=Yg;break;case"scroll":b=Pg;break;case"wheel":b=Zg;break;case"copy":case"cut":case"paste":b=Fg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=Uu}var y=(t&4)!==0,S=!y&&e==="scroll",x=y?v!==null?v+"Capture":null:v;y=[];for(var m=u,g;m!==null;){g=m;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,x!==null&&(C=Rs(m,x),C!=null&&y.push(Us(m,C,g)))),S)break;m=m.return}0<y.length&&(v=new b(v,h,null,n,p),d.push({event:v,listeners:y}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",v&&n!==ra&&(h=n.relatedTarget||n.fromElement)&&(Qn(h)||h[fn]))break e;if((b||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,b?(h=n.relatedTarget||n.toElement,b=u,h=h?Qn(h):null,h!==null&&(S=cr(h),h!==S||h.tag!==5&&h.tag!==6)&&(h=null)):(b=null,h=u),b!==h)){if(y=Iu,C="onMouseLeave",x="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=Uu,C="onPointerLeave",x="onPointerEnter",m="pointer"),S=b==null?v:wr(b),g=h==null?v:wr(h),v=new y(C,m+"leave",b,n,p),v.target=S,v.relatedTarget=g,C=null,Qn(p)===u&&(y=new y(x,m+"enter",h,n,p),y.target=g,y.relatedTarget=S,C=y),S=C,b&&h)t:{for(y=b,x=h,m=0,g=y;g;g=mr(g))m++;for(g=0,C=x;C;C=mr(C))g++;for(;0<m-g;)y=mr(y),m--;for(;0<g-m;)x=mr(x),g--;for(;m--;){if(y===x||x!==null&&y===x.alternate)break t;y=mr(y),x=mr(x)}y=null}else y=null;b!==null&&Ku(d,v,b,y,!1),h!==null&&S!==null&&Ku(d,S,h,y,!0)}}e:{if(v=u?wr(u):window,b=v.nodeName&&v.nodeName.toLowerCase(),b==="select"||b==="input"&&v.type==="file")var O=o0;else if($u(v))if(op)O=u0;else{O=a0;var F=l0}else(b=v.nodeName)&&b.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(O=c0);if(O&&(O=O(e,u))){ip(d,O,n,p);break e}F&&F(e,v,u),e==="focusout"&&(F=v._wrapperState)&&F.controlled&&v.type==="number"&&Xl(v,"number",v.value)}switch(F=u?wr(u):window,e){case"focusin":($u(F)||F.contentEditable==="true")&&(xr=F,ua=u,ws=null);break;case"focusout":ws=ua=xr=null;break;case"mousedown":da=!0;break;case"contextmenu":case"mouseup":case"dragend":da=!1,Gu(d,n,p);break;case"selectionchange":if(p0)break;case"keydown":case"keyup":Gu(d,n,p)}var z;if(wc)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else yr?rp(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(np&&n.locale!=="ko"&&(yr||B!=="onCompositionStart"?B==="onCompositionEnd"&&yr&&(z=tp()):(En=p,yc="value"in En?En.value:En.textContent,yr=!0)),F=no(u,B),0<F.length&&(B=new Lu(B,e,null,n,p),d.push({event:B,listeners:F}),z?B.data=z:(z=sp(n),z!==null&&(B.data=z)))),(z=t0?n0(e,n):r0(e,n))&&(u=no(u,"onBeforeInput"),0<u.length&&(p=new Lu("onBeforeInput","beforeinput",null,n,p),d.push({event:p,listeners:u}),p.data=z))}gp(d,t)})}function Us(e,t,n){return{instance:e,listener:t,currentTarget:n}}function no(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Rs(e,n),i!=null&&r.unshift(Us(e,i,s)),i=Rs(e,t),i!=null&&r.push(Us(e,i,s))),e=e.return}return r}function mr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ku(e,t,n,r,s){for(var i=t._reactName,l=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Rs(n,i),c!=null&&l.unshift(Us(n,c,a))):s||(c=Rs(n,i),c!=null&&l.push(Us(n,c,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var y0=/\r\n?/g,x0=/\u0000|\uFFFD/g;function Qu(e){return(typeof e=="string"?e:""+e).replace(y0,`
`).replace(x0,"")}function xi(e,t,n){if(t=Qu(t),Qu(e)!==t&&n)throw Error(D(425))}function ro(){}var fa=null,pa=null;function ma(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ha=typeof setTimeout=="function"?setTimeout:void 0,v0=typeof clearTimeout=="function"?clearTimeout:void 0,Ju=typeof Promise=="function"?Promise:void 0,w0=typeof queueMicrotask=="function"?queueMicrotask:typeof Ju<"u"?function(e){return Ju.resolve(null).then(e).catch(N0)}:ha;function N0(e){setTimeout(function(){throw e})}function El(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ms(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ms(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gr=Math.random().toString(36).slice(2),qt="__reactFiber$"+Gr,Ds="__reactProps$"+Gr,fn="__reactContainer$"+Gr,ga="__reactEvents$"+Gr,j0="__reactListeners$"+Gr,S0="__reactHandles$"+Gr;function Qn(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fn]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yu(e);e!==null;){if(n=e[qt])return n;e=Yu(e)}return t}e=n,n=e.parentNode}return null}function Js(e){return e=e[qt]||e[fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function wr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Io(e){return e[Ds]||null}var ya=[],Nr=-1;function Bn(e){return{current:e}}function je(e){0>Nr||(e.current=ya[Nr],ya[Nr]=null,Nr--)}function we(e,t){Nr++,ya[Nr]=e.current,e.current=t}var $n={},Qe=Bn($n),lt=Bn(!1),nr=$n;function Lr(e,t){var n=e.type.contextTypes;if(!n)return $n;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function at(e){return e=e.childContextTypes,e!=null}function so(){je(lt),je(Qe)}function Xu(e,t,n){if(Qe.current!==$n)throw Error(D(168));we(Qe,t),we(lt,n)}function xp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,lg(e)||"Unknown",s));return Ce({},n,r)}function io(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$n,nr=Qe.current,we(Qe,e),we(lt,lt.current),!0}function Zu(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=xp(e,t,nr),r.__reactInternalMemoizedMergedChildContext=e,je(lt),je(Qe),we(Qe,e)):je(lt),we(lt,n)}var ln=null,Lo=!1,Cl=!1;function vp(e){ln===null?ln=[e]:ln.push(e)}function k0(e){Lo=!0,vp(e)}function Hn(){if(!Cl&&ln!==null){Cl=!0;var e=0,t=ye;try{var n=ln;for(ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ln=null,Lo=!1}catch(s){throw ln!==null&&(ln=ln.slice(e+1)),Vf(pc,Hn),s}finally{ye=t,Cl=!1}}return null}var jr=[],Sr=0,oo=null,lo=0,Nt=[],jt=0,rr=null,an=1,cn="";function qn(e,t){jr[Sr++]=lo,jr[Sr++]=oo,oo=e,lo=t}function wp(e,t,n){Nt[jt++]=an,Nt[jt++]=cn,Nt[jt++]=rr,rr=e;var r=an;e=cn;var s=32-Lt(r)-1;r&=~(1<<s),n+=1;var i=32-Lt(t)+s;if(30<i){var l=s-s%5;i=(r&(1<<l)-1).toString(32),r>>=l,s-=l,an=1<<32-Lt(t)+s|n<<s|r,cn=i+e}else an=1<<i|n<<s|r,cn=e}function jc(e){e.return!==null&&(qn(e,1),wp(e,1,0))}function Sc(e){for(;e===oo;)oo=jr[--Sr],jr[Sr]=null,lo=jr[--Sr],jr[Sr]=null;for(;e===rr;)rr=Nt[--jt],Nt[jt]=null,cn=Nt[--jt],Nt[jt]=null,an=Nt[--jt],Nt[jt]=null}var ht=null,mt=null,ke=!1,Ot=null;function Np(e,t){var n=kt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function ed(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,mt=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=rr!==null?{id:an,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=kt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ht=e,mt=null,!0):!1;default:return!1}}function xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function va(e){if(ke){var t=mt;if(t){var n=t;if(!ed(e,t)){if(xa(e))throw Error(D(418));t=Pn(n.nextSibling);var r=ht;t&&ed(e,t)?Np(r,n):(e.flags=e.flags&-4097|2,ke=!1,ht=e)}}else{if(xa(e))throw Error(D(418));e.flags=e.flags&-4097|2,ke=!1,ht=e}}}function td(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function vi(e){if(e!==ht)return!1;if(!ke)return td(e),ke=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ma(e.type,e.memoizedProps)),t&&(t=mt)){if(xa(e))throw jp(),Error(D(418));for(;t;)Np(e,t),t=Pn(t.nextSibling)}if(td(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mt=Pn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=ht?Pn(e.stateNode.nextSibling):null;return!0}function jp(){for(var e=mt;e;)e=Pn(e.nextSibling)}function Ur(){mt=ht=null,ke=!1}function kc(e){Ot===null?Ot=[e]:Ot.push(e)}var b0=gn.ReactCurrentBatchConfig;function os(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var a=s.refs;l===null?delete a[i]:a[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function wi(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function nd(e){var t=e._init;return t(e._payload)}function Sp(e){function t(x,m){if(e){var g=x.deletions;g===null?(x.deletions=[m],x.flags|=16):g.push(m)}}function n(x,m){if(!e)return null;for(;m!==null;)t(x,m),m=m.sibling;return null}function r(x,m){for(x=new Map;m!==null;)m.key!==null?x.set(m.key,m):x.set(m.index,m),m=m.sibling;return x}function s(x,m){return x=Ln(x,m),x.index=0,x.sibling=null,x}function i(x,m,g){return x.index=g,e?(g=x.alternate,g!==null?(g=g.index,g<m?(x.flags|=2,m):g):(x.flags|=2,m)):(x.flags|=1048576,m)}function l(x){return e&&x.alternate===null&&(x.flags|=2),x}function a(x,m,g,C){return m===null||m.tag!==6?(m=Ol(g,x.mode,C),m.return=x,m):(m=s(m,g),m.return=x,m)}function c(x,m,g,C){var O=g.type;return O===gr?p(x,m,g.props.children,C,g.key):m!==null&&(m.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Nn&&nd(O)===m.type)?(C=s(m,g.props),C.ref=os(x,m,g),C.return=x,C):(C=$i(g.type,g.key,g.props,null,x.mode,C),C.ref=os(x,m,g),C.return=x,C)}function u(x,m,g,C){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=Il(g,x.mode,C),m.return=x,m):(m=s(m,g.children||[]),m.return=x,m)}function p(x,m,g,C,O){return m===null||m.tag!==7?(m=er(g,x.mode,C,O),m.return=x,m):(m=s(m,g),m.return=x,m)}function d(x,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Ol(""+m,x.mode,g),m.return=x,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ci:return g=$i(m.type,m.key,m.props,null,x.mode,g),g.ref=os(x,null,m),g.return=x,g;case hr:return m=Il(m,x.mode,g),m.return=x,m;case Nn:var C=m._init;return d(x,C(m._payload),g)}if(fs(m)||ts(m))return m=er(m,x.mode,g,null),m.return=x,m;wi(x,m)}return null}function v(x,m,g,C){var O=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return O!==null?null:a(x,m,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ci:return g.key===O?c(x,m,g,C):null;case hr:return g.key===O?u(x,m,g,C):null;case Nn:return O=g._init,v(x,m,O(g._payload),C)}if(fs(g)||ts(g))return O!==null?null:p(x,m,g,C,null);wi(x,g)}return null}function b(x,m,g,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return x=x.get(g)||null,a(m,x,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ci:return x=x.get(C.key===null?g:C.key)||null,c(m,x,C,O);case hr:return x=x.get(C.key===null?g:C.key)||null,u(m,x,C,O);case Nn:var F=C._init;return b(x,m,g,F(C._payload),O)}if(fs(C)||ts(C))return x=x.get(g)||null,p(m,x,C,O,null);wi(m,C)}return null}function h(x,m,g,C){for(var O=null,F=null,z=m,B=m=0,X=null;z!==null&&B<g.length;B++){z.index>B?(X=z,z=null):X=z.sibling;var q=v(x,z,g[B],C);if(q===null){z===null&&(z=X);break}e&&z&&q.alternate===null&&t(x,z),m=i(q,m,B),F===null?O=q:F.sibling=q,F=q,z=X}if(B===g.length)return n(x,z),ke&&qn(x,B),O;if(z===null){for(;B<g.length;B++)z=d(x,g[B],C),z!==null&&(m=i(z,m,B),F===null?O=z:F.sibling=z,F=z);return ke&&qn(x,B),O}for(z=r(x,z);B<g.length;B++)X=b(z,x,B,g[B],C),X!==null&&(e&&X.alternate!==null&&z.delete(X.key===null?B:X.key),m=i(X,m,B),F===null?O=X:F.sibling=X,F=X);return e&&z.forEach(function(H){return t(x,H)}),ke&&qn(x,B),O}function y(x,m,g,C){var O=ts(g);if(typeof O!="function")throw Error(D(150));if(g=O.call(g),g==null)throw Error(D(151));for(var F=O=null,z=m,B=m=0,X=null,q=g.next();z!==null&&!q.done;B++,q=g.next()){z.index>B?(X=z,z=null):X=z.sibling;var H=v(x,z,q.value,C);if(H===null){z===null&&(z=X);break}e&&z&&H.alternate===null&&t(x,z),m=i(H,m,B),F===null?O=H:F.sibling=H,F=H,z=X}if(q.done)return n(x,z),ke&&qn(x,B),O;if(z===null){for(;!q.done;B++,q=g.next())q=d(x,q.value,C),q!==null&&(m=i(q,m,B),F===null?O=q:F.sibling=q,F=q);return ke&&qn(x,B),O}for(z=r(x,z);!q.done;B++,q=g.next())q=b(z,x,B,q.value,C),q!==null&&(e&&q.alternate!==null&&z.delete(q.key===null?B:q.key),m=i(q,m,B),F===null?O=q:F.sibling=q,F=q);return e&&z.forEach(function(K){return t(x,K)}),ke&&qn(x,B),O}function S(x,m,g,C){if(typeof g=="object"&&g!==null&&g.type===gr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ci:e:{for(var O=g.key,F=m;F!==null;){if(F.key===O){if(O=g.type,O===gr){if(F.tag===7){n(x,F.sibling),m=s(F,g.props.children),m.return=x,x=m;break e}}else if(F.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Nn&&nd(O)===F.type){n(x,F.sibling),m=s(F,g.props),m.ref=os(x,F,g),m.return=x,x=m;break e}n(x,F);break}else t(x,F);F=F.sibling}g.type===gr?(m=er(g.props.children,x.mode,C,g.key),m.return=x,x=m):(C=$i(g.type,g.key,g.props,null,x.mode,C),C.ref=os(x,m,g),C.return=x,x=C)}return l(x);case hr:e:{for(F=g.key;m!==null;){if(m.key===F)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(x,m.sibling),m=s(m,g.children||[]),m.return=x,x=m;break e}else{n(x,m);break}else t(x,m);m=m.sibling}m=Il(g,x.mode,C),m.return=x,x=m}return l(x);case Nn:return F=g._init,S(x,m,F(g._payload),C)}if(fs(g))return h(x,m,g,C);if(ts(g))return y(x,m,g,C);wi(x,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(x,m.sibling),m=s(m,g),m.return=x,x=m):(n(x,m),m=Ol(g,x.mode,C),m.return=x,x=m),l(x)):n(x,m)}return S}var Dr=Sp(!0),kp=Sp(!1),ao=Bn(null),co=null,kr=null,bc=null;function Ec(){bc=kr=co=null}function Cc(e){var t=ao.current;je(ao),e._currentValue=t}function wa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ar(e,t){co=e,bc=kr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function Ct(e){var t=e._currentValue;if(bc!==e)if(e={context:e,memoizedValue:t,next:null},kr===null){if(co===null)throw Error(D(308));kr=e,co.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var Jn=null;function _c(e){Jn===null?Jn=[e]:Jn.push(e)}function bp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,_c(t)):(n.next=s.next,s.next=n),t.interleaved=n,pn(e,r)}function pn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var jn=!1;function Tc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ep(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,pn(e,n)}return s=r.interleaved,s===null?(t.next=t,_c(r)):(t.next=s.next,s.next=t),r.interleaved=t,pn(e,n)}function Oi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}function rd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function uo(e,t,n,r){var s=e.updateQueue;jn=!1;var i=s.firstBaseUpdate,l=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==l&&(a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;l=0,p=u=c=null,a=i;do{var v=a.lane,b=a.eventTime;if((r&v)===v){p!==null&&(p=p.next={eventTime:b,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var h=e,y=a;switch(v=t,b=n,y.tag){case 1:if(h=y.payload,typeof h=="function"){d=h.call(b,d,v);break e}d=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=y.payload,v=typeof h=="function"?h.call(b,d,v):h,v==null)break e;d=Ce({},d,v);break e;case 2:jn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,v=s.effects,v===null?s.effects=[a]:v.push(a))}else b={eventTime:b,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(u=p=b,c=d):p=p.next=b,l|=v;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;v=a,a=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(1);if(p===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=p,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ir|=l,e.lanes=l,e.memoizedState=d}}function sd(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Ys={},Jt=Bn(Ys),Fs=Bn(Ys),$s=Bn(Ys);function Yn(e){if(e===Ys)throw Error(D(174));return e}function Rc(e,t){switch(we($s,t),we(Fs,e),we(Jt,Ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ea(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ea(t,e)}je(Jt),we(Jt,t)}function Fr(){je(Jt),je(Fs),je($s)}function Cp(e){Yn($s.current);var t=Yn(Jt.current),n=ea(t,e.type);t!==n&&(we(Fs,e),we(Jt,n))}function Ac(e){Fs.current===e&&(je(Jt),je(Fs))}var be=Bn(0);function fo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _l=[];function Pc(){for(var e=0;e<_l.length;e++)_l[e]._workInProgressVersionPrimary=null;_l.length=0}var Ii=gn.ReactCurrentDispatcher,Tl=gn.ReactCurrentBatchConfig,sr=0,Ee=null,Le=null,$e=null,po=!1,Ns=!1,zs=0,E0=0;function Ge(){throw Error(D(321))}function Mc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$t(e[n],t[n]))return!1;return!0}function Oc(e,t,n,r,s,i){if(sr=i,Ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ii.current=e===null||e.memoizedState===null?R0:A0,e=n(r,s),Ns){i=0;do{if(Ns=!1,zs=0,25<=i)throw Error(D(301));i+=1,$e=Le=null,t.updateQueue=null,Ii.current=P0,e=n(r,s)}while(Ns)}if(Ii.current=mo,t=Le!==null&&Le.next!==null,sr=0,$e=Le=Ee=null,po=!1,t)throw Error(D(300));return e}function Ic(){var e=zs!==0;return zs=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ee.memoizedState=$e=e:$e=$e.next=e,$e}function _t(){if(Le===null){var e=Ee.alternate;e=e!==null?e.memoizedState:null}else e=Le.next;var t=$e===null?Ee.memoizedState:$e.next;if(t!==null)$e=t,Le=e;else{if(e===null)throw Error(D(310));Le=e,e={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},$e===null?Ee.memoizedState=$e=e:$e=$e.next=e}return $e}function Bs(e,t){return typeof t=="function"?t(e):t}function Rl(e){var t=_t(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var l=s.next;s.next=i.next,i.next=l}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=l=null,c=null,u=i;do{var p=u.lane;if((sr&p)===p)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,l=r):c=c.next=d,Ee.lanes|=p,ir|=p}u=u.next}while(u!==null&&u!==i);c===null?l=r:c.next=a,$t(r,t.memoizedState)||(ot=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Ee.lanes|=i,ir|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Al(e){var t=_t(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do i=e(i,l.action),l=l.next;while(l!==s);$t(i,t.memoizedState)||(ot=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _p(){}function Tp(e,t){var n=Ee,r=_t(),s=t(),i=!$t(r.memoizedState,s);if(i&&(r.memoizedState=s,ot=!0),r=r.queue,Lc(Pp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Hs(9,Ap.bind(null,n,r,s,t),void 0,null),ze===null)throw Error(D(349));sr&30||Rp(n,t,s)}return s}function Rp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ap(e,t,n,r){t.value=n,t.getSnapshot=r,Mp(t)&&Op(e)}function Pp(e,t,n){return n(function(){Mp(t)&&Op(e)})}function Mp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$t(e,n)}catch{return!0}}function Op(e){var t=pn(e,1);t!==null&&Ut(t,e,1,-1)}function id(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},t.queue=e,e=e.dispatch=T0.bind(null,Ee,e),[t.memoizedState,e]}function Hs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ee.updateQueue,t===null?(t={lastEffect:null,stores:null},Ee.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ip(){return _t().memoizedState}function Li(e,t,n,r){var s=Wt();Ee.flags|=e,s.memoizedState=Hs(1|t,n,void 0,r===void 0?null:r)}function Uo(e,t,n,r){var s=_t();r=r===void 0?null:r;var i=void 0;if(Le!==null){var l=Le.memoizedState;if(i=l.destroy,r!==null&&Mc(r,l.deps)){s.memoizedState=Hs(t,n,i,r);return}}Ee.flags|=e,s.memoizedState=Hs(1|t,n,i,r)}function od(e,t){return Li(8390656,8,e,t)}function Lc(e,t){return Uo(2048,8,e,t)}function Lp(e,t){return Uo(4,2,e,t)}function Up(e,t){return Uo(4,4,e,t)}function Dp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fp(e,t,n){return n=n!=null?n.concat([e]):null,Uo(4,4,Dp.bind(null,t,e),n)}function Uc(){}function $p(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zp(e,t){var n=_t();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bp(e,t,n){return sr&21?($t(n,t)||(n=qf(),Ee.lanes|=n,ir|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=n)}function C0(e,t){var n=ye;ye=n!==0&&4>n?n:4,e(!0);var r=Tl.transition;Tl.transition={};try{e(!1),t()}finally{ye=n,Tl.transition=r}}function Hp(){return _t().memoizedState}function _0(e,t,n){var r=In(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vp(e))Gp(t,n);else if(n=bp(e,t,n,r),n!==null){var s=et();Ut(n,e,r,s),Wp(n,t,r)}}function T0(e,t,n){var r=In(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vp(e))Gp(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,a=i(l,n);if(s.hasEagerState=!0,s.eagerState=a,$t(a,l)){var c=t.interleaved;c===null?(s.next=s,_c(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=bp(e,t,s,r),n!==null&&(s=et(),Ut(n,e,r,s),Wp(n,t,r))}}function Vp(e){var t=e.alternate;return e===Ee||t!==null&&t===Ee}function Gp(e,t){Ns=po=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,mc(e,n)}}var mo={readContext:Ct,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},R0={readContext:Ct,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:Ct,useEffect:od,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Li(4194308,4,Dp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Li(4194308,4,e,t)},useInsertionEffect:function(e,t){return Li(4,2,e,t)},useMemo:function(e,t){var n=Wt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_0.bind(null,Ee,e),[r.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:id,useDebugValue:Uc,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=id(!1),t=e[0];return e=C0.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ee,s=Wt();if(ke){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),ze===null)throw Error(D(349));sr&30||Rp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,od(Pp.bind(null,r,i,e),[e]),r.flags|=2048,Hs(9,Ap.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Wt(),t=ze.identifierPrefix;if(ke){var n=cn,r=an;n=(r&~(1<<32-Lt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=zs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=E0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},A0={readContext:Ct,useCallback:$p,useContext:Ct,useEffect:Lc,useImperativeHandle:Fp,useInsertionEffect:Lp,useLayoutEffect:Up,useMemo:zp,useReducer:Rl,useRef:Ip,useState:function(){return Rl(Bs)},useDebugValue:Uc,useDeferredValue:function(e){var t=_t();return Bp(t,Le.memoizedState,e)},useTransition:function(){var e=Rl(Bs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Tp,useId:Hp,unstable_isNewReconciler:!1},P0={readContext:Ct,useCallback:$p,useContext:Ct,useEffect:Lc,useImperativeHandle:Fp,useInsertionEffect:Lp,useLayoutEffect:Up,useMemo:zp,useReducer:Al,useRef:Ip,useState:function(){return Al(Bs)},useDebugValue:Uc,useDeferredValue:function(e){var t=_t();return Le===null?t.memoizedState=e:Bp(t,Le.memoizedState,e)},useTransition:function(){var e=Al(Bs)[0],t=_t().memoizedState;return[e,t]},useMutableSource:_p,useSyncExternalStore:Tp,useId:Hp,unstable_isNewReconciler:!1};function At(e,t){if(e&&e.defaultProps){t=Ce({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Na(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ce({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Do={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=et(),s=In(e),i=un(r,s);i.payload=t,n!=null&&(i.callback=n),t=Mn(e,i,s),t!==null&&(Ut(t,e,s,r),Oi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=et(),s=In(e),i=un(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Mn(e,i,s),t!==null&&(Ut(t,e,s,r),Oi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=et(),r=In(e),s=un(n,r);s.tag=2,t!=null&&(s.callback=t),t=Mn(e,s,r),t!==null&&(Ut(t,e,r,n),Oi(t,e,r))}};function ld(e,t,n,r,s,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!Is(n,r)||!Is(s,i):!0}function qp(e,t,n){var r=!1,s=$n,i=t.contextType;return typeof i=="object"&&i!==null?i=Ct(i):(s=at(t)?nr:Qe.current,r=t.contextTypes,i=(r=r!=null)?Lr(e,s):$n),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Do,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function ad(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Do.enqueueReplaceState(t,t.state,null)}function ja(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Tc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Ct(i):(i=at(t)?nr:Qe.current,s.context=Lr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Na(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Do.enqueueReplaceState(s,s.state,null),uo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function $r(e,t){try{var n="",r=t;do n+=og(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Pl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sa(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var M0=typeof WeakMap=="function"?WeakMap:Map;function Kp(e,t,n){n=un(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){go||(go=!0,Ma=r),Sa(e,t)},n}function Qp(e,t,n){n=un(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Sa(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sa(e,t),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function cd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new M0;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=q0.bind(null,e,t,n),t.then(e,e))}function ud(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=un(-1,1),t.tag=2,Mn(n,t,1))),n.lanes|=1),e)}var O0=gn.ReactCurrentOwner,ot=!1;function Ze(e,t,n,r){t.child=e===null?kp(t,null,n,r):Dr(t,e.child,n,r)}function fd(e,t,n,r,s){n=n.render;var i=t.ref;return Ar(t,s),r=Oc(e,t,n,r,i,s),n=Ic(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(ke&&n&&jc(t),t.flags|=1,Ze(e,t,r,s),t.child)}function pd(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Gc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Jp(e,t,i,r,s)):(e=$i(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:Is,n(l,r)&&e.ref===t.ref)return mn(e,t,s)}return t.flags|=1,e=Ln(i,r),e.ref=t.ref,e.return=t,t.child=e}function Jp(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Is(i,r)&&e.ref===t.ref)if(ot=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,mn(e,t,s)}return ka(e,t,n,r,s)}function Yp(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Er,pt),pt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,we(Er,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,we(Er,pt),pt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,we(Er,pt),pt|=r;return Ze(e,t,s,n),t.child}function Xp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ka(e,t,n,r,s){var i=at(n)?nr:Qe.current;return i=Lr(t,i),Ar(t,s),n=Oc(e,t,n,r,i,s),r=Ic(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mn(e,t,s)):(ke&&r&&jc(t),t.flags|=1,Ze(e,t,n,s),t.child)}function md(e,t,n,r,s){if(at(n)){var i=!0;io(t)}else i=!1;if(Ar(t,s),t.stateNode===null)Ui(e,t),qp(t,n,r),ja(t,n,r,s),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ct(u):(u=at(n)?nr:Qe.current,u=Lr(t,u));var p=n.getDerivedStateFromProps,d=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||c!==u)&&ad(t,l,r,u),jn=!1;var v=t.memoizedState;l.state=v,uo(t,r,l,s),c=t.memoizedState,a!==r||v!==c||lt.current||jn?(typeof p=="function"&&(Na(t,n,p,r),c=t.memoizedState),(a=jn||ld(t,n,a,r,v,c,u))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=u,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,Ep(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:At(t.type,a),l.props=u,d=t.pendingProps,v=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ct(c):(c=at(n)?nr:Qe.current,c=Lr(t,c));var b=n.getDerivedStateFromProps;(p=typeof b=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==d||v!==c)&&ad(t,l,r,c),jn=!1,v=t.memoizedState,l.state=v,uo(t,r,l,s);var h=t.memoizedState;a!==d||v!==h||lt.current||jn?(typeof b=="function"&&(Na(t,n,b,r),h=t.memoizedState),(u=jn||ld(t,n,u,r,v,h,c)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,h,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,h,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),l.props=r,l.state=h,l.context=c,r=u):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return ba(e,t,n,r,i,s)}function ba(e,t,n,r,s,i){Xp(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return s&&Zu(t,n,!1),mn(e,t,i);r=t.stateNode,O0.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=Dr(t,e.child,null,i),t.child=Dr(t,null,a,i)):Ze(e,t,a,i),t.memoizedState=r.state,s&&Zu(t,n,!0),t.child}function Zp(e){var t=e.stateNode;t.pendingContext?Xu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xu(e,t.context,!1),Rc(e,t.containerInfo)}function hd(e,t,n,r,s){return Ur(),kc(s),t.flags|=256,Ze(e,t,n,r),t.child}var Ea={dehydrated:null,treeContext:null,retryLane:0};function Ca(e){return{baseLanes:e,cachePool:null,transitions:null}}function em(e,t,n){var r=t.pendingProps,s=be.current,i=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),we(be,s&1),e===null)return va(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=zo(l,r,0,null),e=er(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ca(n),t.memoizedState=Ea,e):Dc(t,l));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return I0(e,t,l,r,a,s,n);if(i){i=r.fallback,l=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Ln(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ln(a,i):(i=er(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?Ca(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=Ea,r}return i=e.child,e=i.sibling,r=Ln(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Dc(e,t){return t=zo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ni(e,t,n,r){return r!==null&&kc(r),Dr(t,e.child,null,n),e=Dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function I0(e,t,n,r,s,i,l){if(n)return t.flags&256?(t.flags&=-257,r=Pl(Error(D(422))),Ni(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=zo({mode:"visible",children:r.children},s,0,null),i=er(i,s,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Dr(t,e.child,null,l),t.child.memoizedState=Ca(l),t.memoizedState=Ea,i);if(!(t.mode&1))return Ni(e,t,l,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=Pl(i,r,void 0),Ni(e,t,l,r)}if(a=(l&e.childLanes)!==0,ot||a){if(r=ze,r!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|l)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,pn(e,s),Ut(r,e,s,-1))}return Vc(),r=Pl(Error(D(421))),Ni(e,t,l,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=K0.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,mt=Pn(s.nextSibling),ht=t,ke=!0,Ot=null,e!==null&&(Nt[jt++]=an,Nt[jt++]=cn,Nt[jt++]=rr,an=e.id,cn=e.overflow,rr=t),t=Dc(t,r.children),t.flags|=4096,t)}function gd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),wa(e.return,t,n)}function Ml(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ze(e,t,r.children,n),r=be.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gd(e,n,t);else if(e.tag===19)gd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(we(be,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&fo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ml(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&fo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ml(t,!0,n,null,i);break;case"together":Ml(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ui(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ir|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=Ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function L0(e,t,n){switch(t.tag){case 3:Zp(t),Ur();break;case 5:Cp(t);break;case 1:at(t.type)&&io(t);break;case 4:Rc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;we(ao,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(we(be,be.current&1),t.flags|=128,null):n&t.child.childLanes?em(e,t,n):(we(be,be.current&1),e=mn(e,t,n),e!==null?e.sibling:null);we(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),we(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,Yp(e,t,n)}return mn(e,t,n)}var nm,_a,rm,sm;nm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_a=function(){};rm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yn(Jt.current);var i=null;switch(n){case"input":s=Jl(e,s),r=Jl(e,r),i=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),i=[];break;case"textarea":s=Zl(e,s),r=Zl(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ro)}ta(n,r);var l;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_s.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ne("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};sm=function(e,t,n,r){n!==r&&(t.flags|=4)};function ls(e,t){if(!ke)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function U0(e,t,n){var r=t.pendingProps;switch(Sc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return at(t.type)&&so(),We(t),null;case 3:return r=t.stateNode,Fr(),je(lt),je(Qe),Pc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ot!==null&&(La(Ot),Ot=null))),_a(e,t),We(t),null;case 5:Ac(t);var s=Yn($s.current);if(n=t.type,e!==null&&t.stateNode!=null)rm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return We(t),null}if(e=Yn(Jt.current),vi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[qt]=t,r[Ds]=i,e=(t.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<ms.length;s++)Ne(ms[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":bu(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":Cu(r,i),Ne("invalid",r)}ta(n,i),s=null;for(var l in i)if(i.hasOwnProperty(l)){var a=i[l];l==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&xi(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&xi(r.textContent,a,e),s=["children",""+a]):_s.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&Ne("scroll",r)}switch(n){case"input":ui(r),Eu(r,i,!0);break;case"textarea":ui(r),_u(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ro)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[qt]=t,e[Ds]=r,nm(e,t,!1,!1),t.stateNode=e;e:{switch(l=na(n,r),n){case"dialog":Ne("cancel",e),Ne("close",e),s=r;break;case"iframe":case"object":case"embed":Ne("load",e),s=r;break;case"video":case"audio":for(s=0;s<ms.length;s++)Ne(ms[s],e);s=r;break;case"source":Ne("error",e),s=r;break;case"img":case"image":case"link":Ne("error",e),Ne("load",e),s=r;break;case"details":Ne("toggle",e),s=r;break;case"input":bu(e,r),s=Jl(e,r),Ne("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),Ne("invalid",e);break;case"textarea":Cu(e,r),s=Zl(e,r),Ne("invalid",e);break;default:s=r}ta(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?If(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mf(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ts(e,c):typeof c=="number"&&Ts(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_s.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ne("scroll",e):c!=null&&ac(e,i,c,l))}switch(n){case"input":ui(e),Eu(e,r,!1);break;case"textarea":ui(e),_u(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Cr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Cr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ro)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return We(t),null;case 6:if(e&&t.stateNode!=null)sm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Yn($s.current),Yn(Jt.current),vi(t)){if(r=t.stateNode,n=t.memoizedProps,r[qt]=t,(i=r.nodeValue!==n)&&(e=ht,e!==null))switch(e.tag){case 3:xi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[qt]=t,t.stateNode=r}return We(t),null;case 13:if(je(be),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ke&&mt!==null&&t.mode&1&&!(t.flags&128))jp(),Ur(),t.flags|=98560,i=!1;else if(i=vi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[qt]=t}else Ur(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;We(t),i=!1}else Ot!==null&&(La(Ot),Ot=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?Ue===0&&(Ue=3):Vc())),t.updateQueue!==null&&(t.flags|=4),We(t),null);case 4:return Fr(),_a(e,t),e===null&&Ls(t.stateNode.containerInfo),We(t),null;case 10:return Cc(t.type._context),We(t),null;case 17:return at(t.type)&&so(),We(t),null;case 19:if(je(be),i=t.memoizedState,i===null)return We(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)ls(i,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=fo(e),l!==null){for(t.flags|=128,ls(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return we(be,be.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ae()>zr&&(t.flags|=128,r=!0,ls(i,!1),t.lanes=4194304)}else{if(!r)if(e=fo(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ls(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!ke)return We(t),null}else 2*Ae()-i.renderingStartTime>zr&&n!==1073741824&&(t.flags|=128,r=!0,ls(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ae(),t.sibling=null,n=be.current,we(be,r?n&1|2:n&1),t):(We(t),null);case 22:case 23:return Hc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pt&1073741824&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function D0(e,t){switch(Sc(t),t.tag){case 1:return at(t.type)&&so(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fr(),je(lt),je(Qe),Pc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ac(t),null;case 13:if(je(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(be),null;case 4:return Fr(),null;case 10:return Cc(t.type._context),null;case 22:case 23:return Hc(),null;case 24:return null;default:return null}}var ji=!1,qe=!1,F0=typeof WeakSet=="function"?WeakSet:Set,W=null;function br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Te(e,t,r)}else n.current=null}function Ta(e,t,n){try{n()}catch(r){Te(e,t,r)}}var yd=!1;function $0(e,t){if(fa=eo,e=cp(),Nc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,u=0,p=0,d=e,v=null;t:for(;;){for(var b;d!==n||s!==0&&d.nodeType!==3||(a=l+s),d!==i||r!==0&&d.nodeType!==3||(c=l+r),d.nodeType===3&&(l+=d.nodeValue.length),(b=d.firstChild)!==null;)v=d,d=b;for(;;){if(d===e)break t;if(v===n&&++u===s&&(a=l),v===i&&++p===r&&(c=l),(b=d.nextSibling)!==null)break;d=v,v=d.parentNode}d=b}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pa={focusedElem:e,selectionRange:n},eo=!1,W=t;W!==null;)if(t=W,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,W=e;else for(;W!==null;){t=W;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var y=h.memoizedProps,S=h.memoizedState,x=t.stateNode,m=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:At(t.type,y),S);x.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(C){Te(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,W=e;break}W=t.return}return h=yd,yd=!1,h}function js(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ta(t,n,i)}s=s.next}while(s!==r)}}function Fo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ra(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function im(e){var t=e.alternate;t!==null&&(e.alternate=null,im(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qt],delete t[Ds],delete t[ga],delete t[j0],delete t[S0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function om(e){return e.tag===5||e.tag===3||e.tag===4}function xd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Aa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ro));else if(r!==4&&(e=e.child,e!==null))for(Aa(e,t,n),e=e.sibling;e!==null;)Aa(e,t,n),e=e.sibling}function Pa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Pa(e,t,n),e=e.sibling;e!==null;)Pa(e,t,n),e=e.sibling}var Be=null,Pt=!1;function vn(e,t,n){for(n=n.child;n!==null;)lm(e,t,n),n=n.sibling}function lm(e,t,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Ao,n)}catch{}switch(n.tag){case 5:qe||br(n,t);case 6:var r=Be,s=Pt;Be=null,vn(e,t,n),Be=r,Pt=s,Be!==null&&(Pt?(e=Be,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Be.removeChild(n.stateNode));break;case 18:Be!==null&&(Pt?(e=Be,n=n.stateNode,e.nodeType===8?El(e.parentNode,n):e.nodeType===1&&El(e,n),Ms(e)):El(Be,n.stateNode));break;case 4:r=Be,s=Pt,Be=n.stateNode.containerInfo,Pt=!0,vn(e,t,n),Be=r,Pt=s;break;case 0:case 11:case 14:case 15:if(!qe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&Ta(n,t,l),s=s.next}while(s!==r)}vn(e,t,n);break;case 1:if(!qe&&(br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Te(n,t,a)}vn(e,t,n);break;case 21:vn(e,t,n);break;case 22:n.mode&1?(qe=(r=qe)||n.memoizedState!==null,vn(e,t,n),qe=r):vn(e,t,n);break;default:vn(e,t,n)}}function vd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new F0),t.forEach(function(r){var s=Q0.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Rt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:Be=a.stateNode,Pt=!1;break e;case 3:Be=a.stateNode.containerInfo,Pt=!0;break e;case 4:Be=a.stateNode.containerInfo,Pt=!0;break e}a=a.return}if(Be===null)throw Error(D(160));lm(i,l,s),Be=null,Pt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Te(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)am(t,e),t=t.sibling}function am(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rt(t,e),Vt(e),r&4){try{js(3,e,e.return),Fo(3,e)}catch(y){Te(e,e.return,y)}try{js(5,e,e.return)}catch(y){Te(e,e.return,y)}}break;case 1:Rt(t,e),Vt(e),r&512&&n!==null&&br(n,n.return);break;case 5:if(Rt(t,e),Vt(e),r&512&&n!==null&&br(n,n.return),e.flags&32){var s=e.stateNode;try{Ts(s,"")}catch(y){Te(e,e.return,y)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Rf(s,i),na(a,l);var u=na(a,i);for(l=0;l<c.length;l+=2){var p=c[l],d=c[l+1];p==="style"?If(s,d):p==="dangerouslySetInnerHTML"?Mf(s,d):p==="children"?Ts(s,d):ac(s,p,d,u)}switch(a){case"input":Yl(s,i);break;case"textarea":Af(s,i);break;case"select":var v=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var b=i.value;b!=null?Cr(s,!!i.multiple,b,!1):v!==!!i.multiple&&(i.defaultValue!=null?Cr(s,!!i.multiple,i.defaultValue,!0):Cr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ds]=i}catch(y){Te(e,e.return,y)}}break;case 6:if(Rt(t,e),Vt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){Te(e,e.return,y)}}break;case 3:if(Rt(t,e),Vt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ms(t.containerInfo)}catch(y){Te(e,e.return,y)}break;case 4:Rt(t,e),Vt(e);break;case 13:Rt(t,e),Vt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zc=Ae())),r&4&&vd(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(qe=(u=qe)||p,Rt(t,e),qe=u):Rt(t,e),Vt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(W=e,p=e.child;p!==null;){for(d=W=p;W!==null;){switch(v=W,b=v.child,v.tag){case 0:case 11:case 14:case 15:js(4,v,v.return);break;case 1:br(v,v.return);var h=v.stateNode;if(typeof h.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(y){Te(r,n,y)}}break;case 5:br(v,v.return);break;case 22:if(v.memoizedState!==null){Nd(d);continue}}b!==null?(b.return=v,W=b):Nd(d)}p=p.sibling}e:for(p=null,d=e;;){if(d.tag===5){if(p===null){p=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Of("display",l))}catch(y){Te(e,e.return,y)}}}else if(d.tag===6){if(p===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Te(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;p===d&&(p=null),d=d.return}p===d&&(p=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rt(t,e),Vt(e),r&4&&vd(e);break;case 21:break;default:Rt(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(om(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ts(s,""),r.flags&=-33);var i=xd(e);Pa(e,i,s);break;case 3:case 4:var l=r.stateNode.containerInfo,a=xd(e);Aa(e,a,l);break;default:throw Error(D(161))}}catch(c){Te(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function z0(e,t,n){W=e,cm(e)}function cm(e,t,n){for(var r=(e.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var l=s.memoizedState!==null||ji;if(!l){var a=s.alternate,c=a!==null&&a.memoizedState!==null||qe;a=ji;var u=qe;if(ji=l,(qe=c)&&!u)for(W=s;W!==null;)l=W,c=l.child,l.tag===22&&l.memoizedState!==null?jd(s):c!==null?(c.return=l,W=c):jd(s);for(;i!==null;)W=i,cm(i),i=i.sibling;W=s,ji=a,qe=u}wd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):wd(e)}}function wd(e){for(;W!==null;){var t=W;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||Fo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!qe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:At(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&sd(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}sd(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var d=p.dehydrated;d!==null&&Ms(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}qe||t.flags&512&&Ra(t)}catch(v){Te(t,t.return,v)}}if(t===e){W=null;break}if(n=t.sibling,n!==null){n.return=t.return,W=n;break}W=t.return}}function Nd(e){for(;W!==null;){var t=W;if(t===e){W=null;break}var n=t.sibling;if(n!==null){n.return=t.return,W=n;break}W=t.return}}function jd(e){for(;W!==null;){var t=W;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Fo(4,t)}catch(c){Te(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Te(t,s,c)}}var i=t.return;try{Ra(t)}catch(c){Te(t,i,c)}break;case 5:var l=t.return;try{Ra(t)}catch(c){Te(t,l,c)}}}catch(c){Te(t,t.return,c)}if(t===e){W=null;break}var a=t.sibling;if(a!==null){a.return=t.return,W=a;break}W=t.return}}var B0=Math.ceil,ho=gn.ReactCurrentDispatcher,Fc=gn.ReactCurrentOwner,bt=gn.ReactCurrentBatchConfig,he=0,ze=null,Me=null,He=0,pt=0,Er=Bn(0),Ue=0,Vs=null,ir=0,$o=0,$c=0,Ss=null,st=null,zc=0,zr=1/0,on=null,go=!1,Ma=null,On=null,Si=!1,Cn=null,yo=0,ks=0,Oa=null,Di=-1,Fi=0;function et(){return he&6?Ae():Di!==-1?Di:Di=Ae()}function In(e){return e.mode&1?he&2&&He!==0?He&-He:b0.transition!==null?(Fi===0&&(Fi=qf()),Fi):(e=ye,e!==0||(e=window.event,e=e===void 0?16:ep(e.type)),e):1}function Ut(e,t,n,r){if(50<ks)throw ks=0,Oa=null,Error(D(185));Ks(e,n,r),(!(he&2)||e!==ze)&&(e===ze&&(!(he&2)&&($o|=n),Ue===4&&kn(e,He)),ct(e,r),n===1&&he===0&&!(t.mode&1)&&(zr=Ae()+500,Lo&&Hn()))}function ct(e,t){var n=e.callbackNode;bg(e,t);var r=Zi(e,e===ze?He:0);if(r===0)n!==null&&Au(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Au(n),t===1)e.tag===0?k0(Sd.bind(null,e)):vp(Sd.bind(null,e)),w0(function(){!(he&6)&&Hn()}),n=null;else{switch(Kf(r)){case 1:n=pc;break;case 4:n=Gf;break;case 16:n=Xi;break;case 536870912:n=Wf;break;default:n=Xi}n=ym(n,um.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function um(e,t){if(Di=-1,Fi=0,he&6)throw Error(D(327));var n=e.callbackNode;if(Pr()&&e.callbackNode!==n)return null;var r=Zi(e,e===ze?He:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xo(e,r);else{t=r;var s=he;he|=2;var i=fm();(ze!==e||He!==t)&&(on=null,zr=Ae()+500,Zn(e,t));do try{G0();break}catch(a){dm(e,a)}while(1);Ec(),ho.current=i,he=s,Me!==null?t=0:(ze=null,He=0,t=Ue)}if(t!==0){if(t===2&&(s=la(e),s!==0&&(r=s,t=Ia(e,s))),t===1)throw n=Vs,Zn(e,0),kn(e,r),ct(e,Ae()),n;if(t===6)kn(e,r);else{if(s=e.current.alternate,!(r&30)&&!H0(s)&&(t=xo(e,r),t===2&&(i=la(e),i!==0&&(r=i,t=Ia(e,i))),t===1))throw n=Vs,Zn(e,0),kn(e,r),ct(e,Ae()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Kn(e,st,on);break;case 3:if(kn(e,r),(r&130023424)===r&&(t=zc+500-Ae(),10<t)){if(Zi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){et(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ha(Kn.bind(null,e,st,on),t);break}Kn(e,st,on);break;case 4:if(kn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var l=31-Lt(r);i=1<<l,l=t[l],l>s&&(s=l),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*B0(r/1960))-r,10<r){e.timeoutHandle=ha(Kn.bind(null,e,st,on),r);break}Kn(e,st,on);break;case 5:Kn(e,st,on);break;default:throw Error(D(329))}}}return ct(e,Ae()),e.callbackNode===n?um.bind(null,e):null}function Ia(e,t){var n=Ss;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=xo(e,t),e!==2&&(t=st,st=n,t!==null&&La(t)),e}function La(e){st===null?st=e:st.push.apply(st,e)}function H0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$t(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~$c,t&=~$o,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lt(t),r=1<<n;e[n]=-1,t&=~r}}function Sd(e){if(he&6)throw Error(D(327));Pr();var t=Zi(e,0);if(!(t&1))return ct(e,Ae()),null;var n=xo(e,t);if(e.tag!==0&&n===2){var r=la(e);r!==0&&(t=r,n=Ia(e,r))}if(n===1)throw n=Vs,Zn(e,0),kn(e,t),ct(e,Ae()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,st,on),ct(e,Ae()),null}function Bc(e,t){var n=he;he|=1;try{return e(t)}finally{he=n,he===0&&(zr=Ae()+500,Lo&&Hn())}}function or(e){Cn!==null&&Cn.tag===0&&!(he&6)&&Pr();var t=he;he|=1;var n=bt.transition,r=ye;try{if(bt.transition=null,ye=1,e)return e()}finally{ye=r,bt.transition=n,he=t,!(he&6)&&Hn()}}function Hc(){pt=Er.current,je(Er)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,v0(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Sc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&so();break;case 3:Fr(),je(lt),je(Qe),Pc();break;case 5:Ac(r);break;case 4:Fr();break;case 13:je(be);break;case 19:je(be);break;case 10:Cc(r.type._context);break;case 22:case 23:Hc()}n=n.return}if(ze=e,Me=e=Ln(e.current,null),He=pt=t,Ue=0,Vs=null,$c=$o=ir=0,st=Ss=null,Jn!==null){for(t=0;t<Jn.length;t++)if(n=Jn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=s,r.next=l}n.pending=r}Jn=null}return e}function dm(e,t){do{var n=Me;try{if(Ec(),Ii.current=mo,po){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}po=!1}if(sr=0,$e=Le=Ee=null,Ns=!1,zs=0,Fc.current=null,n===null||n.return===null){Ue=1,Vs=t,Me=null;break}e:{var i=e,l=n.return,a=n,c=t;if(t=He,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,p=a,d=p.tag;if(!(p.mode&1)&&(d===0||d===11||d===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var b=ud(l);if(b!==null){b.flags&=-257,dd(b,l,a,i,t),b.mode&1&&cd(i,u,t),t=b,c=u;var h=t.updateQueue;if(h===null){var y=new Set;y.add(c),t.updateQueue=y}else h.add(c);break e}else{if(!(t&1)){cd(i,u,t),Vc();break e}c=Error(D(426))}}else if(ke&&a.mode&1){var S=ud(l);if(S!==null){!(S.flags&65536)&&(S.flags|=256),dd(S,l,a,i,t),kc($r(c,a));break e}}i=c=$r(c,a),Ue!==4&&(Ue=2),Ss===null?Ss=[i]:Ss.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=Kp(i,c,t);rd(i,x);break e;case 1:a=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(On===null||!On.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=Qp(i,a,t);rd(i,C);break e}}i=i.return}while(i!==null)}mm(n)}catch(O){t=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function fm(){var e=ho.current;return ho.current=mo,e===null?mo:e}function Vc(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),ze===null||!(ir&268435455)&&!($o&268435455)||kn(ze,He)}function xo(e,t){var n=he;he|=2;var r=fm();(ze!==e||He!==t)&&(on=null,Zn(e,t));do try{V0();break}catch(s){dm(e,s)}while(1);if(Ec(),he=n,ho.current=r,Me!==null)throw Error(D(261));return ze=null,He=0,Ue}function V0(){for(;Me!==null;)pm(Me)}function G0(){for(;Me!==null&&!gg();)pm(Me)}function pm(e){var t=gm(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?mm(e):Me=t,Fc.current=null}function mm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=D0(n,t),n!==null){n.flags&=32767,Me=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,Me=null;return}}else if(n=U0(n,t,pt),n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);Ue===0&&(Ue=5)}function Kn(e,t,n){var r=ye,s=bt.transition;try{bt.transition=null,ye=1,W0(e,t,n,r)}finally{bt.transition=s,ye=r}return null}function W0(e,t,n,r){do Pr();while(Cn!==null);if(he&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Eg(e,i),e===ze&&(Me=ze=null,He=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Si||(Si=!0,ym(Xi,function(){return Pr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=bt.transition,bt.transition=null;var l=ye;ye=1;var a=he;he|=4,Fc.current=null,$0(e,n),am(n,e),f0(pa),eo=!!fa,pa=fa=null,e.current=n,z0(n),yg(),he=a,ye=l,bt.transition=i}else e.current=n;if(Si&&(Si=!1,Cn=e,yo=s),i=e.pendingLanes,i===0&&(On=null),wg(n.stateNode),ct(e,Ae()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(go)throw go=!1,e=Ma,Ma=null,e;return yo&1&&e.tag!==0&&Pr(),i=e.pendingLanes,i&1?e===Oa?ks++:(ks=0,Oa=e):ks=0,Hn(),null}function Pr(){if(Cn!==null){var e=Kf(yo),t=bt.transition,n=ye;try{if(bt.transition=null,ye=16>e?16:e,Cn===null)var r=!1;else{if(e=Cn,Cn=null,yo=0,he&6)throw Error(D(331));var s=he;for(he|=4,W=e.current;W!==null;){var i=W,l=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(W=u;W!==null;){var p=W;switch(p.tag){case 0:case 11:case 15:js(8,p,i)}var d=p.child;if(d!==null)d.return=p,W=d;else for(;W!==null;){p=W;var v=p.sibling,b=p.return;if(im(p),p===u){W=null;break}if(v!==null){v.return=b,W=v;break}W=b}}}var h=i.alternate;if(h!==null){var y=h.child;if(y!==null){h.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}W=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,W=l;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:js(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,W=x;break e}W=i.return}}var m=e.current;for(W=m;W!==null;){l=W;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,W=g;else e:for(l=m;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Fo(9,a)}}catch(O){Te(a,a.return,O)}if(a===l){W=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,W=C;break e}W=a.return}}if(he=s,Hn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Ao,e)}catch{}r=!0}return r}finally{ye=n,bt.transition=t}}return!1}function kd(e,t,n){t=$r(n,t),t=Kp(e,t,1),e=Mn(e,t,1),t=et(),e!==null&&(Ks(e,1,t),ct(e,t))}function Te(e,t,n){if(e.tag===3)kd(e,e,n);else for(;t!==null;){if(t.tag===3){kd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){e=$r(n,e),e=Qp(t,e,1),t=Mn(t,e,1),e=et(),t!==null&&(Ks(t,1,e),ct(t,e));break}}t=t.return}}function q0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=et(),e.pingedLanes|=e.suspendedLanes&n,ze===e&&(He&n)===n&&(Ue===4||Ue===3&&(He&130023424)===He&&500>Ae()-zc?Zn(e,0):$c|=n),ct(e,t)}function hm(e,t){t===0&&(e.mode&1?(t=pi,pi<<=1,!(pi&130023424)&&(pi=4194304)):t=1);var n=et();e=pn(e,t),e!==null&&(Ks(e,t,n),ct(e,n))}function K0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hm(e,n)}function Q0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),hm(e,n)}var gm;gm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||lt.current)ot=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ot=!1,L0(e,t,n);ot=!!(e.flags&131072)}else ot=!1,ke&&t.flags&1048576&&wp(t,lo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ui(e,t),e=t.pendingProps;var s=Lr(t,Qe.current);Ar(t,n),s=Oc(null,t,r,e,s,n);var i=Ic();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,at(r)?(i=!0,io(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tc(t),s.updater=Do,t.stateNode=s,s._reactInternals=t,ja(t,r,e,n),t=ba(null,t,r,!0,i,n)):(t.tag=0,ke&&i&&jc(t),Ze(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ui(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Y0(r),e=At(r,e),s){case 0:t=ka(null,t,r,e,n);break e;case 1:t=md(null,t,r,e,n);break e;case 11:t=fd(null,t,r,e,n);break e;case 14:t=pd(null,t,r,At(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:At(r,s),ka(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:At(r,s),md(e,t,r,s,n);case 3:e:{if(Zp(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Ep(e,t),uo(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=$r(Error(D(423)),t),t=hd(e,t,r,n,s);break e}else if(r!==s){s=$r(Error(D(424)),t),t=hd(e,t,r,n,s);break e}else for(mt=Pn(t.stateNode.containerInfo.firstChild),ht=t,ke=!0,Ot=null,n=kp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ur(),r===s){t=mn(e,t,n);break e}Ze(e,t,r,n)}t=t.child}return t;case 5:return Cp(t),e===null&&va(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,l=s.children,ma(r,s)?l=null:i!==null&&ma(r,i)&&(t.flags|=32),Xp(e,t),Ze(e,t,l,n),t.child;case 6:return e===null&&va(t),null;case 13:return em(e,t,n);case 4:return Rc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Dr(t,null,r,n):Ze(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:At(r,s),fd(e,t,r,s,n);case 7:return Ze(e,t,t.pendingProps,n),t.child;case 8:return Ze(e,t,t.pendingProps.children,n),t.child;case 12:return Ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,l=s.value,we(ao,r._currentValue),r._currentValue=l,i!==null)if($t(i.value,l)){if(i.children===s.children&&!lt.current){t=mn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){l=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=un(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),wa(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(D(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),wa(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}Ze(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ar(t,n),s=Ct(s),r=r(s),t.flags|=1,Ze(e,t,r,n),t.child;case 14:return r=t.type,s=At(r,t.pendingProps),s=At(r.type,s),pd(e,t,r,s,n);case 15:return Jp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:At(r,s),Ui(e,t),t.tag=1,at(r)?(e=!0,io(t)):e=!1,Ar(t,n),qp(t,r,s),ja(t,r,s,n),ba(null,t,r,!0,e,n);case 19:return tm(e,t,n);case 22:return Yp(e,t,n)}throw Error(D(156,t.tag))};function ym(e,t){return Vf(e,t)}function J0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kt(e,t,n,r){return new J0(e,t,n,r)}function Gc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Y0(e){if(typeof e=="function")return Gc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===uc)return 11;if(e===dc)return 14}return 2}function Ln(e,t){var n=e.alternate;return n===null?(n=kt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $i(e,t,n,r,s,i){var l=2;if(r=e,typeof e=="function")Gc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case gr:return er(n.children,s,i,t);case cc:l=8,s|=8;break;case Wl:return e=kt(12,n,t,s|2),e.elementType=Wl,e.lanes=i,e;case ql:return e=kt(13,n,t,s),e.elementType=ql,e.lanes=i,e;case Kl:return e=kt(19,n,t,s),e.elementType=Kl,e.lanes=i,e;case Cf:return zo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bf:l=10;break e;case Ef:l=9;break e;case uc:l=11;break e;case dc:l=14;break e;case Nn:l=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=kt(l,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function er(e,t,n,r){return e=kt(7,e,r,t),e.lanes=n,e}function zo(e,t,n,r){return e=kt(22,e,r,t),e.elementType=Cf,e.lanes=n,e.stateNode={isHidden:!1},e}function Ol(e,t,n){return e=kt(6,e,null,t),e.lanes=n,e}function Il(e,t,n){return t=kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function X0(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hl(0),this.expirationTimes=hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hl(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,r,s,i,l,a,c){return e=new X0(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=kt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tc(i),e}function Z0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function xm(e){if(!e)return $n;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(at(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(at(n))return xp(e,n,t)}return t}function vm(e,t,n,r,s,i,l,a,c){return e=Wc(n,r,!0,e,s,i,l,a,c),e.context=xm(null),n=e.current,r=et(),s=In(n),i=un(r,s),i.callback=t??null,Mn(n,i,s),e.current.lanes=s,Ks(e,s,r),ct(e,r),e}function Bo(e,t,n,r){var s=t.current,i=et(),l=In(s);return n=xm(n),t.context===null?t.context=n:t.pendingContext=n,t=un(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Mn(s,t,l),e!==null&&(Ut(e,s,l,i),Oi(e,s,l)),l}function vo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function bd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function qc(e,t){bd(e,t),(e=e.alternate)&&bd(e,t)}function ey(){return null}var wm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}Ho.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Bo(e,t,null,null)};Ho.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;or(function(){Bo(null,e,null,null)}),t[fn]=null}};function Ho(e){this._internalRoot=e}Ho.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Sn.length&&t!==0&&t<Sn[n].priority;n++);Sn.splice(n,0,e),n===0&&Zf(e)}};function Qc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ed(){}function ty(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=vo(l);i.call(u)}}var l=vm(t,r,e,0,null,!1,!1,"",Ed);return e._reactRootContainer=l,e[fn]=l.current,Ls(e.nodeType===8?e.parentNode:e),or(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=vo(c);a.call(u)}}var c=Wc(e,0,!1,null,null,!1,!1,"",Ed);return e._reactRootContainer=c,e[fn]=c.current,Ls(e.nodeType===8?e.parentNode:e),or(function(){Bo(t,c,n,r)}),c}function Go(e,t,n,r,s){var i=n._reactRootContainer;if(i){var l=i;if(typeof s=="function"){var a=s;s=function(){var c=vo(l);a.call(c)}}Bo(t,l,e,s)}else l=ty(n,t,e,s,r);return vo(l)}Qf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ps(t.pendingLanes);n!==0&&(mc(t,n|1),ct(t,Ae()),!(he&6)&&(zr=Ae()+500,Hn()))}break;case 13:or(function(){var r=pn(e,1);if(r!==null){var s=et();Ut(r,e,1,s)}}),qc(e,1)}};hc=function(e){if(e.tag===13){var t=pn(e,134217728);if(t!==null){var n=et();Ut(t,e,134217728,n)}qc(e,134217728)}};Jf=function(e){if(e.tag===13){var t=In(e),n=pn(e,t);if(n!==null){var r=et();Ut(n,e,t,r)}qc(e,t)}};Yf=function(){return ye};Xf=function(e,t){var n=ye;try{return ye=e,t()}finally{ye=n}};sa=function(e,t,n){switch(t){case"input":if(Yl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Io(r);if(!s)throw Error(D(90));Tf(r),Yl(r,s)}}}break;case"textarea":Af(e,n);break;case"select":t=n.value,t!=null&&Cr(e,!!n.multiple,t,!1)}};Df=Bc;Ff=or;var ny={usingClientEntryPoint:!1,Events:[Js,wr,Io,Lf,Uf,Bc]},as={findFiberByHostInstance:Qn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ry={bundleType:as.bundleType,version:as.version,rendererPackageName:as.rendererPackageName,rendererConfig:as.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bf(e),e===null?null:e.stateNode},findFiberByHostInstance:as.findFiberByHostInstance||ey,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ki=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ki.isDisabled&&ki.supportsFiber)try{Ao=ki.inject(ry),Qt=ki}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ny;yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qc(t))throw Error(D(200));return Z0(e,t,null,n)};yt.createRoot=function(e,t){if(!Qc(e))throw Error(D(299));var n=!1,r="",s=wm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Wc(e,1,!1,null,null,n,!1,r,s),e[fn]=t.current,Ls(e.nodeType===8?e.parentNode:e),new Kc(t)};yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Bf(t),e=e===null?null:e.stateNode,e};yt.flushSync=function(e){return or(e)};yt.hydrate=function(e,t,n){if(!Vo(t))throw Error(D(200));return Go(null,e,t,!0,n)};yt.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",l=wm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=vm(t,null,e,1,n??null,s,!1,i,l),e[fn]=t.current,Ls(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ho(t)};yt.render=function(e,t,n){if(!Vo(t))throw Error(D(200));return Go(null,e,t,!1,n)};yt.unmountComponentAtNode=function(e){if(!Vo(e))throw Error(D(40));return e._reactRootContainer?(or(function(){Go(null,null,e,!1,function(){e._reactRootContainer=null,e[fn]=null})}),!0):!1};yt.unstable_batchedUpdates=Bc;yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Vo(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Go(e,t,n,!1,r)};yt.version="18.3.1-next-f1338f8080-20240426";function Nm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nm)}catch(e){console.error(e)}}Nm(),Nf.exports=yt;var sy=Nf.exports,Cd=sy;Vl.createRoot=Cd.createRoot,Vl.hydrateRoot=Cd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gs(){return Gs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gs.apply(this,arguments)}var _n;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_n||(_n={}));const _d="popstate";function iy(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:l,hash:a}=r.location;return Ua("",{pathname:i,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:wo(s)}return ly(t,n,null,e)}function Pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jm(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oy(){return Math.random().toString(36).substr(2,8)}function Td(e,t){return{usr:e.state,key:e.key,idx:t}}function Ua(e,t,n,r){return n===void 0&&(n=null),Gs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Wr(t):t,{state:n,key:t&&t.key||r||oy()})}function wo(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Wr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function ly(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,l=s.history,a=_n.Pop,c=null,u=p();u==null&&(u=0,l.replaceState(Gs({},l.state,{idx:u}),""));function p(){return(l.state||{idx:null}).idx}function d(){a=_n.Pop;let S=p(),x=S==null?null:S-u;u=S,c&&c({action:a,location:y.location,delta:x})}function v(S,x){a=_n.Push;let m=Ua(y.location,S,x);n&&n(m,S),u=p()+1;let g=Td(m,u),C=y.createHref(m);try{l.pushState(g,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(C)}i&&c&&c({action:a,location:y.location,delta:1})}function b(S,x){a=_n.Replace;let m=Ua(y.location,S,x);n&&n(m,S),u=p();let g=Td(m,u),C=y.createHref(m);l.replaceState(g,"",C),i&&c&&c({action:a,location:y.location,delta:0})}function h(S){let x=s.location.origin!=="null"?s.location.origin:s.location.href,m=typeof S=="string"?S:wo(S);return m=m.replace(/ $/,"%20"),Pe(x,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,x)}let y={get action(){return a},get location(){return e(s,l)},listen(S){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(_d,d),c=S,()=>{s.removeEventListener(_d,d),c=null}},createHref(S){return t(s,S)},createURL:h,encodeLocation(S){let x=h(S);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:v,replace:b,go(S){return l.go(S)}};return y}var Rd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Rd||(Rd={}));function ay(e,t,n){return n===void 0&&(n="/"),cy(e,t,n,!1)}function cy(e,t,n,r){let s=typeof t=="string"?Wr(t):t,i=Jc(s.pathname||"/",n);if(i==null)return null;let l=Sm(e);uy(l);let a=null;for(let c=0;a==null&&c<l.length;++c){let u=Ny(i);a=vy(l[c],u,r)}return a}function Sm(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,l,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:l,route:i};c.relativePath.startsWith("/")&&(Pe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Un([r,c.relativePath]),p=n.concat(c);i.children&&i.children.length>0&&(Pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Sm(i.children,t,p,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:yy(u,i.index),routesMeta:p})};return e.forEach((i,l)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,l);else for(let c of km(i.path))s(i,l,c)}),t}function km(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let l=km(r.join("/")),a=[];return a.push(...l.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...l),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function uy(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:xy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dy=/^:[\w-]+$/,fy=3,py=2,my=1,hy=10,gy=-2,Ad=e=>e==="*";function yy(e,t){let n=e.split("/"),r=n.length;return n.some(Ad)&&(r+=gy),t&&(r+=py),n.filter(s=>!Ad(s)).reduce((s,i)=>s+(dy.test(i)?fy:i===""?my:hy),r)}function xy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function vy(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},i="/",l=[];for(let a=0;a<r.length;++a){let c=r[a],u=a===r.length-1,p=i==="/"?t:t.slice(i.length)||"/",d=Pd({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},p),v=c.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=Pd({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!d)return null;Object.assign(s,d.params),l.push({params:s,pathname:Un([i,d.pathname]),pathnameBase:by(Un([i,d.pathnameBase])),route:v}),d.pathnameBase!=="/"&&(i=Un([i,d.pathnameBase]))}return l}function Pd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=wy(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,p,d)=>{let{paramName:v,isOptional:b}=p;if(v==="*"){let y=a[d]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const h=a[d];return b&&!h?u[v]=void 0:u[v]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:l,pattern:e}}function wy(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),jm(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function Ny(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jm(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Jc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function jy(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Wr(e):e;return{pathname:n?n.startsWith("/")?n:Sy(n,t):t,search:Ey(r),hash:Cy(s)}}function Sy(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Ll(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ky(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Yc(e,t){let n=ky(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Xc(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=Wr(e):(s=Gs({},e),Pe(!s.pathname||!s.pathname.includes("?"),Ll("?","pathname","search",s)),Pe(!s.pathname||!s.pathname.includes("#"),Ll("#","pathname","hash",s)),Pe(!s.search||!s.search.includes("#"),Ll("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,a;if(l==null)a=n;else{let d=t.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),d-=1;s.pathname=v.join("/")}a=d>=0?t[d]:"/"}let c=jy(s,a),u=l&&l!=="/"&&l.endsWith("/"),p=(i||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||p)&&(c.pathname+="/"),c}const Un=e=>e.join("/").replace(/\/\/+/g,"/"),by=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ey=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Cy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _y(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const bm=["post","put","patch","delete"];new Set(bm);const Ty=["get",...bm];new Set(Ty);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ws.apply(this,arguments)}const Zc=N.createContext(null),Ry=N.createContext(null),Vn=N.createContext(null),Wo=N.createContext(null),yn=N.createContext({outlet:null,matches:[],isDataRoute:!1}),Em=N.createContext(null);function Ay(e,t){let{relative:n}=t===void 0?{}:t;qr()||Pe(!1);let{basename:r,navigator:s}=N.useContext(Vn),{hash:i,pathname:l,search:a}=_m(e,{relative:n}),c=l;return r!=="/"&&(c=l==="/"?r:Un([r,l])),s.createHref({pathname:c,search:a,hash:i})}function qr(){return N.useContext(Wo)!=null}function Xs(){return qr()||Pe(!1),N.useContext(Wo).location}function Cm(e){N.useContext(Vn).static||N.useLayoutEffect(e)}function qo(){let{isDataRoute:e}=N.useContext(yn);return e?Gy():Py()}function Py(){qr()||Pe(!1);let e=N.useContext(Zc),{basename:t,future:n,navigator:r}=N.useContext(Vn),{matches:s}=N.useContext(yn),{pathname:i}=Xs(),l=JSON.stringify(Yc(s,n.v7_relativeSplatPath)),a=N.useRef(!1);return Cm(()=>{a.current=!0}),N.useCallback(function(u,p){if(p===void 0&&(p={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=Xc(u,JSON.parse(l),i,p.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Un([t,d.pathname])),(p.replace?r.replace:r.push)(d,p.state,p)},[t,r,l,i,e])}function My(){let{matches:e}=N.useContext(yn),t=e[e.length-1];return t?t.params:{}}function _m(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(Vn),{matches:s}=N.useContext(yn),{pathname:i}=Xs(),l=JSON.stringify(Yc(s,r.v7_relativeSplatPath));return N.useMemo(()=>Xc(e,JSON.parse(l),i,n==="path"),[e,l,i,n])}function Oy(e,t){return Iy(e,t)}function Iy(e,t,n,r){qr()||Pe(!1);let{navigator:s}=N.useContext(Vn),{matches:i}=N.useContext(yn),l=i[i.length-1],a=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let u=Xs(),p;if(t){var d;let S=typeof t=="string"?Wr(t):t;c==="/"||(d=S.pathname)!=null&&d.startsWith(c)||Pe(!1),p=S}else p=u;let v=p.pathname||"/",b=v;if(c!=="/"){let S=c.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let h=ay(e,{pathname:b}),y=$y(h&&h.map(S=>Object.assign({},S,{params:Object.assign({},a,S.params),pathname:Un([c,s.encodeLocation?s.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Un([c,s.encodeLocation?s.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),i,n,r);return t&&y?N.createElement(Wo.Provider,{value:{location:Ws({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:_n.Pop}},y):y}function Ly(){let e=Vy(),t=_y(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:s},n):null,i)}const Uy=N.createElement(Ly,null);class Dy extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(yn.Provider,{value:this.props.routeContext},N.createElement(Em.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fy(e){let{routeContext:t,match:n,children:r}=e,s=N.useContext(Zc);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(yn.Provider,{value:t},r)}function $y(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let l=e,a=(s=n)==null?void 0:s.errors;if(a!=null){let p=l.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);p>=0||Pe(!1),l=l.slice(0,Math.min(l.length,p+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<l.length;p++){let d=l[p];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=p),d.route.id){let{loaderData:v,errors:b}=n,h=d.route.loader&&v[d.route.id]===void 0&&(!b||b[d.route.id]===void 0);if(d.route.lazy||h){c=!0,u>=0?l=l.slice(0,u+1):l=[l[0]];break}}}return l.reduceRight((p,d,v)=>{let b,h=!1,y=null,S=null;n&&(b=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||Uy,c&&(u<0&&v===0?(Wy("route-fallback",!1),h=!0,S=null):u===v&&(h=!0,S=d.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,v+1)),m=()=>{let g;return b?g=y:h?g=S:d.route.Component?g=N.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=p,N.createElement(Fy,{match:d,routeContext:{outlet:p,matches:x,isDataRoute:n!=null},children:g})};return n&&(d.route.ErrorBoundary||d.route.errorElement||v===0)?N.createElement(Dy,{location:n.location,revalidation:n.revalidation,component:y,error:b,children:m(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):m()},null)}var Tm=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Tm||{}),No=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(No||{});function zy(e){let t=N.useContext(Zc);return t||Pe(!1),t}function By(e){let t=N.useContext(Ry);return t||Pe(!1),t}function Hy(e){let t=N.useContext(yn);return t||Pe(!1),t}function Rm(e){let t=Hy(),n=t.matches[t.matches.length-1];return n.route.id||Pe(!1),n.route.id}function Vy(){var e;let t=N.useContext(Em),n=By(No.UseRouteError),r=Rm(No.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Gy(){let{router:e}=zy(Tm.UseNavigateStable),t=Rm(No.UseNavigateStable),n=N.useRef(!1);return Cm(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ws({fromRouteId:t},i)))},[e,t])}const Md={};function Wy(e,t,n){!t&&!Md[e]&&(Md[e]=!0)}function qy(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function bs(e){let{to:t,replace:n,state:r,relative:s}=e;qr()||Pe(!1);let{future:i,static:l}=N.useContext(Vn),{matches:a}=N.useContext(yn),{pathname:c}=Xs(),u=qo(),p=Xc(t,Yc(a,i.v7_relativeSplatPath),c,s==="path"),d=JSON.stringify(p);return N.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:s}),[u,d,s,n,r]),null}function ft(e){Pe(!1)}function Ky(e){let{basename:t="/",children:n=null,location:r,navigationType:s=_n.Pop,navigator:i,static:l=!1,future:a}=e;qr()&&Pe(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:i,static:l,future:Ws({v7_relativeSplatPath:!1},a)}),[c,a,i,l]);typeof r=="string"&&(r=Wr(r));let{pathname:p="/",search:d="",hash:v="",state:b=null,key:h="default"}=r,y=N.useMemo(()=>{let S=Jc(p,c);return S==null?null:{location:{pathname:S,search:d,hash:v,state:b,key:h},navigationType:s}},[c,p,d,v,b,h,s]);return y==null?null:N.createElement(Vn.Provider,{value:u},N.createElement(Wo.Provider,{children:n,value:y}))}function Od(e){let{children:t,location:n}=e;return Oy(Da(t),n)}new Promise(()=>{});function Da(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,s)=>{if(!N.isValidElement(r))return;let i=[...t,s];if(r.type===N.Fragment){n.push.apply(n,Da(r.props.children,i));return}r.type!==ft&&Pe(!1),!r.props.index||!r.props.children||Pe(!1);let l={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Da(r.props.children,i)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fa.apply(this,arguments)}function Qy(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Jy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Yy(e,t){return e.button===0&&(!t||t==="_self")&&!Jy(e)}const Xy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zy="6";try{window.__reactRouterVersion=Zy}catch{}const ex="startTransition",Id=qh[ex];function tx(e){let{basename:t,children:n,future:r,window:s}=e,i=N.useRef();i.current==null&&(i.current=iy({window:s,v5Compat:!0}));let l=i.current,[a,c]=N.useState({action:l.action,location:l.location}),{v7_startTransition:u}=r||{},p=N.useCallback(d=>{u&&Id?Id(()=>c(d)):c(d)},[c,u]);return N.useLayoutEffect(()=>l.listen(p),[l,p]),N.useEffect(()=>qy(r),[r]),N.createElement(Ky,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:l,future:r})}const nx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jo=N.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:l,state:a,target:c,to:u,preventScrollReset:p,viewTransition:d}=t,v=Qy(t,Xy),{basename:b}=N.useContext(Vn),h,y=!1;if(typeof u=="string"&&rx.test(u)&&(h=u,nx))try{let g=new URL(window.location.href),C=u.startsWith("//")?new URL(g.protocol+u):new URL(u),O=Jc(C.pathname,b);C.origin===g.origin&&O!=null?u=O+C.search+C.hash:y=!0}catch{}let S=Ay(u,{relative:s}),x=sx(u,{replace:l,state:a,target:c,preventScrollReset:p,relative:s,viewTransition:d});function m(g){r&&r(g),g.defaultPrevented||x(g)}return N.createElement("a",Fa({},v,{href:h||S,onClick:y||i?r:m,ref:n,target:c}))});var Ld;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ld||(Ld={}));var Ud;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ud||(Ud={}));function sx(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:l,viewTransition:a}=t===void 0?{}:t,c=qo(),u=Xs(),p=_m(e,{relative:l});return N.useCallback(d=>{if(Yy(d,n)){d.preventDefault();let v=r!==void 0?r:wo(u)===wo(p);c(e,{replace:v,state:s,preventScrollReset:i,relative:l,viewTransition:a})}},[u,c,p,r,s,n,e,i,l,a])}let ix={data:""},ox=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||ix,lx=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ax=/\/\*[^]*?\*\/|  +/g,Dd=/\n+/g,bn=(e,t)=>{let n="",r="",s="";for(let i in e){let l=e[i];i[0]=="@"?i[1]=="i"?n=i+" "+l+";":r+=i[1]=="f"?bn(l,i):i+"{"+bn(l,i[1]=="k"?"":t)+"}":typeof l=="object"?r+=bn(l,t?t.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=bn.p?bn.p(i,l):i+":"+l+";")}return n+(t&&s?t+"{"+s+"}":s)+r},sn={},Am=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Am(e[n]);return t}return e},cx=(e,t,n,r,s)=>{let i=Am(e),l=sn[i]||(sn[i]=(c=>{let u=0,p=11;for(;u<c.length;)p=101*p+c.charCodeAt(u++)>>>0;return"go"+p})(i));if(!sn[l]){let c=i!==e?e:(u=>{let p,d,v=[{}];for(;p=lx.exec(u.replace(ax,""));)p[4]?v.shift():p[3]?(d=p[3].replace(Dd," ").trim(),v.unshift(v[0][d]=v[0][d]||{})):v[0][p[1]]=p[2].replace(Dd," ").trim();return v[0]})(e);sn[l]=bn(s?{["@keyframes "+l]:c}:c,n?"":"."+l)}let a=n&&sn.g?sn.g:null;return n&&(sn.g=sn[l]),((c,u,p,d)=>{d?u.data=u.data.replace(d,c):u.data.indexOf(c)===-1&&(u.data=p?c+u.data:u.data+c)})(sn[l],t,r,a),l},ux=(e,t,n)=>e.reduce((r,s,i)=>{let l=t[i];if(l&&l.call){let a=l(n),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;l=c?"."+c:a&&typeof a=="object"?a.props?"":bn(a,""):a===!1?"":a}return r+s+(l??"")},"");function Ko(e){let t=this||{},n=e.call?e(t.p):e;return cx(n.unshift?n.raw?ux(n,[].slice.call(arguments,1),t.p):n.reduce((r,s)=>Object.assign(r,s&&s.call?s(t.p):s),{}):n,ox(t.target),t.g,t.o,t.k)}let Pm,$a,za;Ko.bind({g:1});let hn=Ko.bind({k:1});function dx(e,t,n,r){bn.p=t,Pm=e,$a=n,za=r}function Gn(e,t){let n=this||{};return function(){let r=arguments;function s(i,l){let a=Object.assign({},i),c=a.className||s.className;n.p=Object.assign({theme:$a&&$a()},a),n.o=/ *go\d+/.test(c),a.className=Ko.apply(n,r)+(c?" "+c:""),t&&(a.ref=l);let u=e;return e[0]&&(u=a.as||e,delete a.as),za&&u[0]&&za(a),Pm(u,a)}return t?t(s):s}}var fx=e=>typeof e=="function",So=(e,t)=>fx(e)?e(t):e,px=(()=>{let e=0;return()=>(++e).toString()})(),Mm=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),mx=20,eu="default",Om=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:r}=t;return Om(e,{type:e.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(l=>l.id===s||s===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},zi=[],Im={toasts:[],pausedAt:void 0,settings:{toastLimit:mx}},Kt={},Lm=(e,t=eu)=>{Kt[t]=Om(Kt[t]||Im,e),zi.forEach(([n,r])=>{n===t&&r(Kt[t])})},Um=e=>Object.keys(Kt).forEach(t=>Lm(e,t)),hx=e=>Object.keys(Kt).find(t=>Kt[t].toasts.some(n=>n.id===e)),Qo=(e=eu)=>t=>{Lm(t,e)},gx={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yx=(e={},t=eu)=>{let[n,r]=N.useState(Kt[t]||Im),s=N.useRef(Kt[t]);N.useEffect(()=>(s.current!==Kt[t]&&r(Kt[t]),zi.push([t,r]),()=>{let l=zi.findIndex(([a])=>a===t);l>-1&&zi.splice(l,1)}),[t]);let i=n.toasts.map(l=>{var a,c,u;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((a=e[l.type])==null?void 0:a.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((c=e[l.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||gx[l.type],style:{...e.style,...(u=e[l.type])==null?void 0:u.style,...l.style}}});return{...n,toasts:i}},xx=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||px()}),Zs=e=>(t,n)=>{let r=xx(t,e,n);return Qo(r.toasterId||hx(r.id))({type:2,toast:r}),r.id},G=(e,t)=>Zs("blank")(e,t);G.error=Zs("error");G.success=Zs("success");G.loading=Zs("loading");G.custom=Zs("custom");G.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Qo(t)(n):Um(n)};G.dismissAll=e=>G.dismiss(void 0,e);G.remove=(e,t)=>{let n={type:4,toastId:e};t?Qo(t)(n):Um(n)};G.removeAll=e=>G.remove(void 0,e);G.promise=(e,t,n)=>{let r=G.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(s=>{let i=t.success?So(t.success,s):void 0;return i?G.success(i,{id:r,...n,...n==null?void 0:n.success}):G.dismiss(r),s}).catch(s=>{let i=t.error?So(t.error,s):void 0;i?G.error(i,{id:r,...n,...n==null?void 0:n.error}):G.dismiss(r)}),e};var vx=1e3,wx=(e,t="default")=>{let{toasts:n,pausedAt:r}=yx(e,t),s=N.useRef(new Map).current,i=N.useCallback((d,v=vx)=>{if(s.has(d))return;let b=setTimeout(()=>{s.delete(d),l({type:4,toastId:d})},v);s.set(d,b)},[]);N.useEffect(()=>{if(r)return;let d=Date.now(),v=n.map(b=>{if(b.duration===1/0)return;let h=(b.duration||0)+b.pauseDuration-(d-b.createdAt);if(h<0){b.visible&&G.dismiss(b.id);return}return setTimeout(()=>G.dismiss(b.id,t),h)});return()=>{v.forEach(b=>b&&clearTimeout(b))}},[n,r,t]);let l=N.useCallback(Qo(t),[t]),a=N.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=N.useCallback((d,v)=>{l({type:1,toast:{id:d,height:v}})},[l]),u=N.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),p=N.useCallback((d,v)=>{let{reverseOrder:b=!1,gutter:h=8,defaultPosition:y}=v||{},S=n.filter(g=>(g.position||y)===(d.position||y)&&g.height),x=S.findIndex(g=>g.id===d.id),m=S.filter((g,C)=>C<x&&g.visible).length;return S.filter(g=>g.visible).slice(...b?[m+1]:[0,m]).reduce((g,C)=>g+(C.height||0)+h,0)},[n]);return N.useEffect(()=>{n.forEach(d=>{if(d.dismissed)i(d.id,d.removeDelay);else{let v=s.get(d.id);v&&(clearTimeout(v),s.delete(d.id))}})},[n,i]),{toasts:n,handlers:{updateHeight:c,startPause:a,endPause:u,calculateOffset:p}}},Nx=hn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,jx=hn`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Sx=hn`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,kx=Gn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Nx} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${jx} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Sx} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,bx=hn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ex=Gn("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${bx} 1s linear infinite;
`,Cx=hn`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,_x=hn`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Tx=Gn("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Cx} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${_x} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Rx=Gn("div")`
  position: absolute;
`,Ax=Gn("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Px=hn`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Mx=Gn("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Px} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Ox=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?N.createElement(Mx,null,t):t:n==="blank"?null:N.createElement(Ax,null,N.createElement(Ex,{...r}),n!=="loading"&&N.createElement(Rx,null,n==="error"?N.createElement(kx,{...r}):N.createElement(Tx,{...r})))},Ix=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Lx=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Ux="0%{opacity:0;} 100%{opacity:1;}",Dx="0%{opacity:1;} 100%{opacity:0;}",Fx=Gn("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,$x=Gn("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,zx=(e,t)=>{let n=e.includes("top")?1:-1,[r,s]=Mm()?[Ux,Dx]:[Ix(n),Lx(n)];return{animation:t?`${hn(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${hn(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Bx=N.memo(({toast:e,position:t,style:n,children:r})=>{let s=e.height?zx(e.position||t||"top-center",e.visible):{opacity:0},i=N.createElement(Ox,{toast:e}),l=N.createElement($x,{...e.ariaProps},So(e.message,e));return N.createElement(Fx,{className:e.className,style:{...s,...n,...e.style}},typeof r=="function"?r({icon:i,message:l}):N.createElement(N.Fragment,null,i,l))});dx(N.createElement);var Hx=({id:e,className:t,style:n,onHeightUpdate:r,children:s})=>{let i=N.useCallback(l=>{if(l){let a=()=>{let c=l.getBoundingClientRect().height;r(e,c)};a(),new MutationObserver(a).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return N.createElement("div",{ref:i,className:t,style:n},s)},Vx=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Mm()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...s}},Gx=Ko`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bi=16,Wx=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:s,toasterId:i,containerStyle:l,containerClassName:a})=>{let{toasts:c,handlers:u}=wx(n,i);return N.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:bi,left:bi,right:bi,bottom:bi,pointerEvents:"none",...l},className:a,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(p=>{let d=p.position||t,v=u.calculateOffset(p,{reverseOrder:e,gutter:r,defaultPosition:t}),b=Vx(d,v);return N.createElement(Hx,{id:p.id,key:p.id,onHeightUpdate:u.updateHeight,className:p.visible?Gx:"",style:b},p.type==="custom"?So(p.message,p):s?s(p):N.createElement(Bx,{toast:p,position:d}))}))};function Dm(e,t){return function(){return e.apply(t,arguments)}}const{toString:qx}=Object.prototype,{getPrototypeOf:tu}=Object,{iterator:Jo,toStringTag:Fm}=Symbol,Yo=(e=>t=>{const n=qx.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),zt=e=>(e=e.toLowerCase(),t=>Yo(t)===e),Xo=e=>t=>typeof t===e,{isArray:Kr}=Array,Br=Xo("undefined");function ei(e){return e!==null&&!Br(e)&&e.constructor!==null&&!Br(e.constructor)&&ut(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const $m=zt("ArrayBuffer");function Kx(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&$m(e.buffer),t}const Qx=Xo("string"),ut=Xo("function"),zm=Xo("number"),ti=e=>e!==null&&typeof e=="object",Jx=e=>e===!0||e===!1,Bi=e=>{if(Yo(e)!=="object")return!1;const t=tu(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Fm in e)&&!(Jo in e)},Yx=e=>{if(!ti(e)||ei(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Xx=zt("Date"),Zx=zt("File"),ev=zt("Blob"),tv=zt("FileList"),nv=e=>ti(e)&&ut(e.pipe),rv=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ut(e.append)&&((t=Yo(e))==="formdata"||t==="object"&&ut(e.toString)&&e.toString()==="[object FormData]"))},sv=zt("URLSearchParams"),[iv,ov,lv,av]=["ReadableStream","Request","Response","Headers"].map(zt),cv=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ni(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),Kr(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(ei(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),l=i.length;let a;for(r=0;r<l;r++)a=i[r],t.call(null,e[a],a,e)}}function Bm(e,t){if(ei(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const Xn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Hm=e=>!Br(e)&&e!==Xn;function Ba(){const{caseless:e,skipUndefined:t}=Hm(this)&&this||{},n={},r=(s,i)=>{const l=e&&Bm(n,i)||i;Bi(n[l])&&Bi(s)?n[l]=Ba(n[l],s):Bi(s)?n[l]=Ba({},s):Kr(s)?n[l]=s.slice():(!t||!Br(s))&&(n[l]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&ni(arguments[s],r);return n}const uv=(e,t,n,{allOwnKeys:r}={})=>(ni(t,(s,i)=>{n&&ut(s)?e[i]=Dm(s,n):e[i]=s},{allOwnKeys:r}),e),dv=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),fv=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},pv=(e,t,n,r)=>{let s,i,l;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)l=s[i],(!r||r(l,e,t))&&!a[l]&&(t[l]=e[l],a[l]=!0);e=n!==!1&&tu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},mv=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},hv=e=>{if(!e)return null;if(Kr(e))return e;let t=e.length;if(!zm(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},gv=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&tu(Uint8Array)),yv=(e,t)=>{const r=(e&&e[Jo]).call(e);let s;for(;(s=r.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},xv=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},vv=zt("HTMLFormElement"),wv=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Fd=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Nv=zt("RegExp"),Vm=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};ni(n,(s,i)=>{let l;(l=t(s,i,e))!==!1&&(r[i]=l||s)}),Object.defineProperties(e,r)},jv=e=>{Vm(e,(t,n)=>{if(ut(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(ut(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Sv=(e,t)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Kr(e)?r(e):r(String(e).split(t)),n},kv=()=>{},bv=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Ev(e){return!!(e&&ut(e.append)&&e[Fm]==="FormData"&&e[Jo])}const Cv=e=>{const t=new Array(10),n=(r,s)=>{if(ti(r)){if(t.indexOf(r)>=0)return;if(ei(r))return r;if(!("toJSON"in r)){t[s]=r;const i=Kr(r)?[]:{};return ni(r,(l,a)=>{const c=n(l,s+1);!Br(c)&&(i[a]=c)}),t[s]=void 0,i}}return r};return n(e,0)},_v=zt("AsyncFunction"),Tv=e=>e&&(ti(e)||ut(e))&&ut(e.then)&&ut(e.catch),Gm=((e,t)=>e?setImmediate:t?((n,r)=>(Xn.addEventListener("message",({source:s,data:i})=>{s===Xn&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),Xn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ut(Xn.postMessage)),Rv=typeof queueMicrotask<"u"?queueMicrotask.bind(Xn):typeof process<"u"&&process.nextTick||Gm,Av=e=>e!=null&&ut(e[Jo]),A={isArray:Kr,isArrayBuffer:$m,isBuffer:ei,isFormData:rv,isArrayBufferView:Kx,isString:Qx,isNumber:zm,isBoolean:Jx,isObject:ti,isPlainObject:Bi,isEmptyObject:Yx,isReadableStream:iv,isRequest:ov,isResponse:lv,isHeaders:av,isUndefined:Br,isDate:Xx,isFile:Zx,isBlob:ev,isRegExp:Nv,isFunction:ut,isStream:nv,isURLSearchParams:sv,isTypedArray:gv,isFileList:tv,forEach:ni,merge:Ba,extend:uv,trim:cv,stripBOM:dv,inherits:fv,toFlatObject:pv,kindOf:Yo,kindOfTest:zt,endsWith:mv,toArray:hv,forEachEntry:yv,matchAll:xv,isHTMLForm:vv,hasOwnProperty:Fd,hasOwnProp:Fd,reduceDescriptors:Vm,freezeMethods:jv,toObjectSet:Sv,toCamelCase:wv,noop:kv,toFiniteNumber:bv,findKey:Bm,global:Xn,isContextDefined:Hm,isSpecCompliantForm:Ev,toJSONObject:Cv,isAsyncFn:_v,isThenable:Tv,setImmediate:Gm,asap:Rv,isIterable:Av};function re(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}A.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const Wm=re.prototype,qm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{qm[e]={value:e}});Object.defineProperties(re,qm);Object.defineProperty(Wm,"isAxiosError",{value:!0});re.from=(e,t,n,r,s,i)=>{const l=Object.create(Wm);A.toFlatObject(e,l,function(p){return p!==Error.prototype},u=>u!=="isAxiosError");const a=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return re.call(l,a,c,n,r,s),e&&l.cause==null&&Object.defineProperty(l,"cause",{value:e,configurable:!0}),l.name=e&&e.name||"Error",i&&Object.assign(l,i),l};const Pv=null;function Ha(e){return A.isPlainObject(e)||A.isArray(e)}function Km(e){return A.endsWith(e,"[]")?e.slice(0,-2):e}function $d(e,t,n){return e?e.concat(t).map(function(s,i){return s=Km(s),!n&&i?"["+s+"]":s}).join(n?".":""):t}function Mv(e){return A.isArray(e)&&!e.some(Ha)}const Ov=A.toFlatObject(A,{},null,function(t){return/^is[A-Z]/.test(t)});function Zo(e,t,n){if(!A.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,S){return!A.isUndefined(S[y])});const r=n.metaTokens,s=n.visitor||p,i=n.dots,l=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(t);if(!A.isFunction(s))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(A.isDate(h))return h.toISOString();if(A.isBoolean(h))return h.toString();if(!c&&A.isBlob(h))throw new re("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(h)||A.isTypedArray(h)?c&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function p(h,y,S){let x=h;if(h&&!S&&typeof h=="object"){if(A.endsWith(y,"{}"))y=r?y:y.slice(0,-2),h=JSON.stringify(h);else if(A.isArray(h)&&Mv(h)||(A.isFileList(h)||A.endsWith(y,"[]"))&&(x=A.toArray(h)))return y=Km(y),x.forEach(function(g,C){!(A.isUndefined(g)||g===null)&&t.append(l===!0?$d([y],C,i):l===null?y:y+"[]",u(g))}),!1}return Ha(h)?!0:(t.append($d(S,y,i),u(h)),!1)}const d=[],v=Object.assign(Ov,{defaultVisitor:p,convertValue:u,isVisitable:Ha});function b(h,y){if(!A.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(h),A.forEach(h,function(x,m){(!(A.isUndefined(x)||x===null)&&s.call(t,x,A.isString(m)?m.trim():m,y,v))===!0&&b(x,y?y.concat(m):[m])}),d.pop()}}if(!A.isObject(e))throw new TypeError("data must be an object");return b(e),t}function zd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function nu(e,t){this._pairs=[],e&&Zo(e,this,t)}const Qm=nu.prototype;Qm.append=function(t,n){this._pairs.push([t,n])};Qm.toString=function(t){const n=t?function(r){return t.call(this,r,zd)}:zd;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Iv(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Jm(e,t,n){if(!t)return e;const r=n&&n.encode||Iv;A.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(s?i=s(t,n):i=A.isURLSearchParams(t)?t.toString():new nu(t,n).toString(r),i){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Lv{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){A.forEach(this.handlers,function(r){r!==null&&t(r)})}}const Bd=Lv,Ym={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Uv=typeof URLSearchParams<"u"?URLSearchParams:nu,Dv=typeof FormData<"u"?FormData:null,Fv=typeof Blob<"u"?Blob:null,$v={isBrowser:!0,classes:{URLSearchParams:Uv,FormData:Dv,Blob:Fv},protocols:["http","https","file","blob","url","data"]},ru=typeof window<"u"&&typeof document<"u",Va=typeof navigator=="object"&&navigator||void 0,zv=ru&&(!Va||["ReactNative","NativeScript","NS"].indexOf(Va.product)<0),Bv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Hv=ru&&window.location.href||"http://localhost",Vv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ru,hasStandardBrowserEnv:zv,hasStandardBrowserWebWorkerEnv:Bv,navigator:Va,origin:Hv},Symbol.toStringTag,{value:"Module"})),Ke={...Vv,...$v};function Gv(e,t){return Zo(e,new Ke.classes.URLSearchParams,{visitor:function(n,r,s,i){return Ke.isNode&&A.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Wv(e){return A.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function qv(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}function Xm(e){function t(n,r,s,i){let l=n[i++];if(l==="__proto__")return!0;const a=Number.isFinite(+l),c=i>=n.length;return l=!l&&A.isArray(s)?s.length:l,c?(A.hasOwnProp(s,l)?s[l]=[s[l],r]:s[l]=r,!a):((!s[l]||!A.isObject(s[l]))&&(s[l]=[]),t(n,r,s[l],i)&&A.isArray(s[l])&&(s[l]=qv(s[l])),!a)}if(A.isFormData(e)&&A.isFunction(e.entries)){const n={};return A.forEachEntry(e,(r,s)=>{t(Wv(r),s,n,0)}),n}return null}function Kv(e,t,n){if(A.isString(e))try{return(t||JSON.parse)(e),A.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const su={transitional:Ym,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=A.isObject(t);if(i&&A.isHTMLForm(t)&&(t=new FormData(t)),A.isFormData(t))return s?JSON.stringify(Xm(t)):t;if(A.isArrayBuffer(t)||A.isBuffer(t)||A.isStream(t)||A.isFile(t)||A.isBlob(t)||A.isReadableStream(t))return t;if(A.isArrayBufferView(t))return t.buffer;if(A.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Gv(t,this.formSerializer).toString();if((a=A.isFileList(t))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Zo(a?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),Kv(t)):t}],transformResponse:[function(t){const n=this.transitional||su.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(A.isResponse(t)||A.isReadableStream(t))return t;if(t&&A.isString(t)&&(r&&!this.responseType||s)){const l=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(l)throw a.name==="SyntaxError"?re.from(a,re.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ke.classes.FormData,Blob:Ke.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],e=>{su.headers[e]={}});const iu=su,Qv=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jv=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),n=l.substring(0,s).trim().toLowerCase(),r=l.substring(s+1).trim(),!(!n||t[n]&&Qv[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Hd=Symbol("internals");function cs(e){return e&&String(e).trim().toLowerCase()}function Hi(e){return e===!1||e==null?e:A.isArray(e)?e.map(Hi):String(e)}function Yv(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const Xv=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ul(e,t,n,r,s){if(A.isFunction(r))return r.call(this,t,n);if(s&&(t=n),!!A.isString(t)){if(A.isString(r))return t.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(t)}}function Zv(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function e1(e,t){const n=A.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,i,l){return this[r].call(this,t,s,i,l)},configurable:!0})})}class el{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function i(a,c,u){const p=cs(c);if(!p)throw new Error("header name must be a non-empty string");const d=A.findKey(s,p);(!d||s[d]===void 0||u===!0||u===void 0&&s[d]!==!1)&&(s[d||c]=Hi(a))}const l=(a,c)=>A.forEach(a,(u,p)=>i(u,p,c));if(A.isPlainObject(t)||t instanceof this.constructor)l(t,n);else if(A.isString(t)&&(t=t.trim())&&!Xv(t))l(Jv(t),n);else if(A.isObject(t)&&A.isIterable(t)){let a={},c,u;for(const p of t){if(!A.isArray(p))throw TypeError("Object iterator must return a key-value pair");a[u=p[0]]=(c=a[u])?A.isArray(c)?[...c,p[1]]:[c,p[1]]:p[1]}l(a,n)}else t!=null&&i(n,t,r);return this}get(t,n){if(t=cs(t),t){const r=A.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return Yv(s);if(A.isFunction(n))return n.call(this,s,r);if(A.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=cs(t),t){const r=A.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Ul(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function i(l){if(l=cs(l),l){const a=A.findKey(r,l);a&&(!n||Ul(r,r[a],a,n))&&(delete r[a],s=!0)}}return A.isArray(t)?t.forEach(i):i(t),s}clear(t){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!t||Ul(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const n=this,r={};return A.forEach(this,(s,i)=>{const l=A.findKey(r,i);if(l){n[l]=Hi(s),delete n[i];return}const a=t?Zv(i):String(i).trim();a!==i&&delete n[i],n[a]=Hi(s),r[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return A.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&A.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const r=(this[Hd]=this[Hd]={accessors:{}}).accessors,s=this.prototype;function i(l){const a=cs(l);r[a]||(e1(s,l),r[a]=!0)}return A.isArray(t)?t.forEach(i):i(t),this}}el.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(el.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});A.freezeMethods(el);const Dt=el;function Dl(e,t){const n=this||iu,r=t||n,s=Dt.from(r.headers);let i=r.data;return A.forEach(e,function(a){i=a.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Zm(e){return!!(e&&e.__CANCEL__)}function Qr(e,t,n){re.call(this,e??"canceled",re.ERR_CANCELED,t,n),this.name="CanceledError"}A.inherits(Qr,re,{__CANCEL__:!0});function eh(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new re("Request failed with status code "+n.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function t1(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function n1(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,i=0,l;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),p=r[i];l||(l=u),n[s]=c,r[s]=u;let d=i,v=0;for(;d!==s;)v+=n[d++],d=d%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-l<t)return;const b=p&&u-p;return b?Math.round(v*1e3/b):void 0}}function r1(e,t){let n=0,r=1e3/t,s,i;const l=(u,p=Date.now())=>{n=p,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const p=Date.now(),d=p-n;d>=r?l(u,p):(s=u,i||(i=setTimeout(()=>{i=null,l(s)},r-d)))},()=>s&&l(s)]}const ko=(e,t,n=3)=>{let r=0;const s=n1(50,250);return r1(i=>{const l=i.loaded,a=i.lengthComputable?i.total:void 0,c=l-r,u=s(c),p=l<=a;r=l;const d={loaded:l,total:a,progress:a?l/a:void 0,bytes:c,rate:u||void 0,estimated:u&&a&&p?(a-l)/u:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},n)},Vd=(e,t)=>{const n=e!=null;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Gd=e=>(...t)=>A.asap(()=>e(...t)),s1=Ke.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Ke.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Ke.origin),Ke.navigator&&/(msie|trident)/i.test(Ke.navigator.userAgent)):()=>!0,i1=Ke.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const l=[e+"="+encodeURIComponent(t)];A.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),A.isString(r)&&l.push("path="+r),A.isString(s)&&l.push("domain="+s),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function o1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function l1(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function th(e,t,n){let r=!o1(t);return e&&(r||n==!1)?l1(e,t):t}const Wd=e=>e instanceof Dt?{...e}:e;function lr(e,t){t=t||{};const n={};function r(u,p,d,v){return A.isPlainObject(u)&&A.isPlainObject(p)?A.merge.call({caseless:v},u,p):A.isPlainObject(p)?A.merge({},p):A.isArray(p)?p.slice():p}function s(u,p,d,v){if(A.isUndefined(p)){if(!A.isUndefined(u))return r(void 0,u,d,v)}else return r(u,p,d,v)}function i(u,p){if(!A.isUndefined(p))return r(void 0,p)}function l(u,p){if(A.isUndefined(p)){if(!A.isUndefined(u))return r(void 0,u)}else return r(void 0,p)}function a(u,p,d){if(d in t)return r(u,p);if(d in e)return r(void 0,u)}const c={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:a,headers:(u,p,d)=>s(Wd(u),Wd(p),d,!0)};return A.forEach(Object.keys({...e,...t}),function(p){const d=c[p]||s,v=d(e[p],t[p],p);A.isUndefined(v)&&d!==a||(n[p]=v)}),n}const nh=e=>{const t=lr({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:l,auth:a}=t;if(t.headers=l=Dt.from(l),t.url=Jm(th(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&l.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),A.isFormData(n)){if(Ke.hasStandardBrowserEnv||Ke.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(A.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([p,d])=>{u.includes(p.toLowerCase())&&l.set(p,d)})}}if(Ke.hasStandardBrowserEnv&&(r&&A.isFunction(r)&&(r=r(t)),r||r!==!1&&s1(t.url))){const c=s&&i&&i1.read(i);c&&l.set(s,c)}return t},a1=typeof XMLHttpRequest<"u",c1=a1&&function(e){return new Promise(function(n,r){const s=nh(e);let i=s.data;const l=Dt.from(s.headers).normalize();let{responseType:a,onUploadProgress:c,onDownloadProgress:u}=s,p,d,v,b,h;function y(){b&&b(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(p),s.signal&&s.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(s.method.toUpperCase(),s.url,!0),S.timeout=s.timeout;function x(){if(!S)return;const g=Dt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:g,config:e,request:S};eh(function(z){n(z),y()},function(z){r(z),y()},O),S=null}"onloadend"in S?S.onloadend=x:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(x)},S.onabort=function(){S&&(r(new re("Request aborted",re.ECONNABORTED,e,S)),S=null)},S.onerror=function(C){const O=C&&C.message?C.message:"Network Error",F=new re(O,re.ERR_NETWORK,e,S);F.event=C||null,r(F),S=null},S.ontimeout=function(){let C=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||Ym;s.timeoutErrorMessage&&(C=s.timeoutErrorMessage),r(new re(C,O.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,e,S)),S=null},i===void 0&&l.setContentType(null),"setRequestHeader"in S&&A.forEach(l.toJSON(),function(C,O){S.setRequestHeader(O,C)}),A.isUndefined(s.withCredentials)||(S.withCredentials=!!s.withCredentials),a&&a!=="json"&&(S.responseType=s.responseType),u&&([v,h]=ko(u,!0),S.addEventListener("progress",v)),c&&S.upload&&([d,b]=ko(c),S.upload.addEventListener("progress",d),S.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(p=g=>{S&&(r(!g||g.type?new Qr(null,e,S):g),S.abort(),S=null)},s.cancelToken&&s.cancelToken.subscribe(p),s.signal&&(s.signal.aborted?p():s.signal.addEventListener("abort",p)));const m=t1(s.url);if(m&&Ke.protocols.indexOf(m)===-1){r(new re("Unsupported protocol "+m+":",re.ERR_BAD_REQUEST,e));return}S.send(i||null)})},u1=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let r=new AbortController,s;const i=function(u){if(!s){s=!0,a();const p=u instanceof Error?u:this.reason;r.abort(p instanceof re?p:new Qr(p instanceof Error?p.message:p))}};let l=t&&setTimeout(()=>{l=null,i(new re(`timeout ${t} of ms exceeded`,re.ETIMEDOUT))},t);const a=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>A.asap(a),c}},d1=u1,f1=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,s;for(;r<n;)s=r+t,yield e.slice(r,s),r=s},p1=async function*(e,t){for await(const n of m1(e))yield*f1(n,t)},m1=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:r}=await t.read();if(n)break;yield r}}finally{await t.cancel()}},qd=(e,t,n,r)=>{const s=p1(e,t);let i=0,l,a=c=>{l||(l=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:u,value:p}=await s.next();if(u){a(),c.close();return}let d=p.byteLength;if(n){let v=i+=d;n(v)}c.enqueue(new Uint8Array(p))}catch(u){throw a(u),u}},cancel(c){return a(c),s.return()}},{highWaterMark:2})},Kd=64*1024,{isFunction:Ei}=A,h1=(({Request:e,Response:t})=>({Request:e,Response:t}))(A.global),{ReadableStream:Qd,TextEncoder:Jd}=A.global,Yd=(e,...t)=>{try{return!!e(...t)}catch{return!1}},g1=e=>{e=A.merge.call({skipUndefined:!0},h1,e);const{fetch:t,Request:n,Response:r}=e,s=t?Ei(t):typeof fetch=="function",i=Ei(n),l=Ei(r);if(!s)return!1;const a=s&&Ei(Qd),c=s&&(typeof Jd=="function"?(h=>y=>h.encode(y))(new Jd):async h=>new Uint8Array(await new n(h).arrayBuffer())),u=i&&a&&Yd(()=>{let h=!1;const y=new n(Ke.origin,{body:new Qd,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!y}),p=l&&a&&Yd(()=>A.isReadableStream(new r("").body)),d={stream:p&&(h=>h.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!d[h]&&(d[h]=(y,S)=>{let x=y&&y[h];if(x)return x.call(y);throw new re(`Response type '${h}' is not supported`,re.ERR_NOT_SUPPORT,S)})});const v=async h=>{if(h==null)return 0;if(A.isBlob(h))return h.size;if(A.isSpecCompliantForm(h))return(await new n(Ke.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(A.isArrayBufferView(h)||A.isArrayBuffer(h))return h.byteLength;if(A.isURLSearchParams(h)&&(h=h+""),A.isString(h))return(await c(h)).byteLength},b=async(h,y)=>{const S=A.toFiniteNumber(h.getContentLength());return S??v(y)};return async h=>{let{url:y,method:S,data:x,signal:m,cancelToken:g,timeout:C,onDownloadProgress:O,onUploadProgress:F,responseType:z,headers:B,withCredentials:X="same-origin",fetchOptions:q}=nh(h),H=t||fetch;z=z?(z+"").toLowerCase():"text";let K=d1([m,g&&g.toAbortSignal()],C),L=null;const J=K&&K.unsubscribe&&(()=>{K.unsubscribe()});let se;try{if(F&&u&&S!=="get"&&S!=="head"&&(se=await b(B,x))!==0){let P=new n(y,{method:"POST",body:x,duplex:"half"}),V;if(A.isFormData(x)&&(V=P.headers.get("content-type"))&&B.setContentType(V),P.body){const[ie,xe]=Vd(se,ko(Gd(F)));x=qd(P.body,Kd,ie,xe)}}A.isString(X)||(X=X?"include":"omit");const ee=i&&"credentials"in n.prototype,ae={...q,signal:K,method:S.toUpperCase(),headers:B.normalize().toJSON(),body:x,duplex:"half",credentials:ee?X:void 0};L=i&&new n(y,ae);let U=await(i?H(L,q):H(y,ae));const k=p&&(z==="stream"||z==="response");if(p&&(O||k&&J)){const P={};["status","statusText","headers"].forEach(ge=>{P[ge]=U[ge]});const V=A.toFiniteNumber(U.headers.get("content-length")),[ie,xe]=O&&Vd(V,ko(Gd(O),!0))||[];U=new r(qd(U.body,Kd,ie,()=>{xe&&xe(),J&&J()}),P)}z=z||"text";let R=await d[A.findKey(d,z)||"text"](U,h);return!k&&J&&J(),await new Promise((P,V)=>{eh(P,V,{data:R,headers:Dt.from(U.headers),status:U.status,statusText:U.statusText,config:h,request:L})})}catch(ee){throw J&&J(),ee&&ee.name==="TypeError"&&/Load failed|fetch/i.test(ee.message)?Object.assign(new re("Network Error",re.ERR_NETWORK,h,L),{cause:ee.cause||ee}):re.from(ee,ee&&ee.code,h,L)}}},y1=new Map,rh=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let l=i.length,a=l,c,u,p=y1;for(;a--;)c=i[a],u=p.get(c),u===void 0&&p.set(c,u=a?new Map:g1(t)),p=u;return u};rh();const Ga={http:Pv,xhr:c1,fetch:{get:rh}};A.forEach(Ga,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Xd=e=>`- ${e}`,x1=e=>A.isFunction(e)||e===null||e===!1,sh={getAdapter:(e,t)=>{e=A.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let l=0;l<n;l++){r=e[l];let a;if(s=r,!x1(r)&&(s=Ga[(a=String(r)).toLowerCase()],s===void 0))throw new re(`Unknown adapter '${a}'`);if(s&&(A.isFunction(s)||(s=s.get(t))))break;i[a||"#"+l]=s}if(!s){const l=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=n?l.length>1?`since :
`+l.map(Xd).join(`
`):" "+Xd(l[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:Ga};function Fl(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Qr(null,e)}function Zd(e){return Fl(e),e.headers=Dt.from(e.headers),e.data=Dl.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sh.getAdapter(e.adapter||iu.adapter,e)(e).then(function(r){return Fl(e),r.data=Dl.call(e,e.transformResponse,r),r.headers=Dt.from(r.headers),r},function(r){return Zm(r)||(Fl(e),r&&r.response&&(r.response.data=Dl.call(e,e.transformResponse,r.response),r.response.headers=Dt.from(r.response.headers))),Promise.reject(r)})}const ih="1.12.2",tl={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{tl[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const ef={};tl.transitional=function(t,n,r){function s(i,l){return"[Axios v"+ih+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,a)=>{if(t===!1)throw new re(s(l," has been removed"+(n?" in "+n:"")),re.ERR_DEPRECATED);return n&&!ef[l]&&(ef[l]=!0,console.warn(s(l," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,l,a):!0}};tl.spelling=function(t){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function v1(e,t,n){if(typeof e!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],l=t[i];if(l){const a=e[i],c=a===void 0||l(a,i,e);if(c!==!0)throw new re("option "+i+" must be "+c,re.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new re("Unknown option "+i,re.ERR_BAD_OPTION)}}const Vi={assertOptions:v1,validators:tl},Gt=Vi.validators;class bo{constructor(t){this.defaults=t||{},this.interceptors={request:new Bd,response:new Bd}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=lr(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&Vi.assertOptions(r,{silentJSONParsing:Gt.transitional(Gt.boolean),forcedJSONParsing:Gt.transitional(Gt.boolean),clarifyTimeoutError:Gt.transitional(Gt.boolean)},!1),s!=null&&(A.isFunction(s)?n.paramsSerializer={serialize:s}:Vi.assertOptions(s,{encode:Gt.function,serialize:Gt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Vi.assertOptions(n,{baseUrl:Gt.spelling("baseURL"),withXsrfToken:Gt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=i&&A.merge(i.common,i[n.method]);i&&A.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=Dt.concat(l,i);const a=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let p,d=0,v;if(!c){const h=[Zd.bind(this),void 0];for(h.unshift(...a),h.push(...u),v=h.length,p=Promise.resolve(n);d<v;)p=p.then(h[d++],h[d++]);return p}v=a.length;let b=n;for(;d<v;){const h=a[d++],y=a[d++];try{b=h(b)}catch(S){y.call(this,S);break}}try{p=Zd.call(this,b)}catch(h){return Promise.reject(h)}for(d=0,v=u.length;d<v;)p=p.then(u[d++],u[d++]);return p}getUri(t){t=lr(this.defaults,t);const n=th(t.baseURL,t.url,t.allowAbsoluteUrls);return Jm(n,t.params,t.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(t){bo.prototype[t]=function(n,r){return this.request(lr(r||{},{method:t,url:n,data:(r||{}).data}))}});A.forEach(["post","put","patch"],function(t){function n(r){return function(i,l,a){return this.request(lr(a||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}bo.prototype[t]=n(),bo.prototype[t+"Form"]=n(!0)});const Gi=bo;class ou{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const l=new Promise(a=>{r.subscribe(a),i=a}).then(s);return l.cancel=function(){r.unsubscribe(i)},l},t(function(i,l,a){r.reason||(r.reason=new Qr(i,l,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=r=>{t.abort(r)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new ou(function(s){t=s}),cancel:t}}}const w1=ou;function N1(e){return function(n){return e.apply(null,n)}}function j1(e){return A.isObject(e)&&e.isAxiosError===!0}const Wa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wa).forEach(([e,t])=>{Wa[t]=e});const S1=Wa;function oh(e){const t=new Gi(e),n=Dm(Gi.prototype.request,t);return A.extend(n,Gi.prototype,t,{allOwnKeys:!0}),A.extend(n,t,null,{allOwnKeys:!0}),n.create=function(s){return oh(lr(e,s))},n}const Ie=oh(iu);Ie.Axios=Gi;Ie.CanceledError=Qr;Ie.CancelToken=w1;Ie.isCancel=Zm;Ie.VERSION=ih;Ie.toFormData=Zo;Ie.AxiosError=re;Ie.Cancel=Ie.CanceledError;Ie.all=function(t){return Promise.all(t)};Ie.spread=N1;Ie.isAxiosError=j1;Ie.mergeConfig=lr;Ie.AxiosHeaders=Dt;Ie.formToJSON=e=>Xm(A.isHTMLForm(e)?new FormData(e):e);Ie.getAdapter=sh.getAdapter;Ie.HttpStatusCode=S1;Ie.default=Ie;const k1=Ie,lh="http://13.233.120.169:5002/api",ve=lh.replace(/\/?api\/?$/,""),me=k1.create({baseURL:lh,headers:{"Content-Type":"application/json"}});me.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));me.interceptors.response.use(e=>e,e=>{var t;return((t=e.response)==null?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)});const Es={login:(e,t)=>me.post("/auth/login",{email:e,password:t}),registerSuperAdmin:(e,t,n)=>me.post("/auth/register-superadmin",{name:e,email:t,password:n}),getCurrentUser:()=>me.get("/auth/me"),checkSuperAdmin:()=>me.get("/auth/check-superadmin")},it={getUsers:()=>me.get("/users"),getActiveUsers:()=>me.get("/users/active"),createUser:e=>me.post("/users",e),updateUser:(e,t)=>me.put(`/users/${e}`,t),deleteUser:e=>me.delete(`/users/${e}`),toggleUserStatus:e=>me.put(`/users/${e}/toggle-status`),updateProfile:e=>{const t=e instanceof FormData?e:(()=>{const n=new FormData;return Object.entries(e||{}).forEach(([r,s])=>{s!=null&&n.append(r,s)}),n})();return me.put("/users/profile",t,{headers:{"Content-Type":"multipart/form-data"}})}},It={getGroups:()=>me.get("/groups"),getMyGroups:()=>me.get("/groups/my-groups"),createGroup:e=>me.post("/groups",e),addMembers:(e,t)=>me.post(`/groups/${e}/members`,{members:t}),removeMember:(e,t)=>me.delete(`/groups/${e}/members/${t}`),updateGroup:(e,t)=>me.put(`/groups/${e}`,t),deleteGroup:e=>me.delete(`/groups/${e}`),uploadGroupAvatar:(e,t)=>me.post(`/groups/${e}/avatar`,t,{headers:{"Content-Type":"multipart/form-data"}})},_e={getPersonalMessages:e=>me.get(`/messages/personal/${e}`),getGroupMessages:e=>me.get(`/messages/group/${e}`),sendPersonalMessage:e=>e instanceof FormData?me.post("/messages/personal",e,{headers:{"Content-Type":"multipart/form-data"}}):me.post("/messages/personal",e),sendGroupMessage:e=>e instanceof FormData?me.post("/messages/group",e,{headers:{"Content-Type":"multipart/form-data"}}):me.post("/messages/group",e),markAsRead:e=>me.put(`/messages/${e}/read`),getUnreadCount:()=>me.get("/messages/unread/count"),getChatState:()=>me.get("/messages/chat-state"),updateChatState:e=>me.post("/messages/chat-state",e),forwardMessage:e=>me.post("/messages/forward",e),editMessage:(e,t)=>me.put(`/messages/${e}`,{message:t})},b1=Object.freeze(Object.defineProperty({__proto__:null,API_ORIGIN:ve,authAPI:Es,default:me,groupsAPI:It,messagesAPI:_e,usersAPI:it},Symbol.toStringTag,{value:"Module"})),ah=N.createContext(),Zt=()=>{const e=N.useContext(ah);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},E1=({children:e})=>{const[t,n]=N.useState(null),[r,s]=N.useState(!0);N.useEffect(()=>{localStorage.getItem("token")?Es.getCurrentUser().then(p=>{n(p.data.user)}).catch(p=>{console.error("Auth check failed:",p),localStorage.removeItem("token")}).finally(()=>{s(!1)}):s(!1)},[]);const c={user:t,setUser:n,login:async(u,p)=>{var d,v,b,h;try{const y=await Es.login(u,p),{token:S,user:x}=y.data;return localStorage.setItem("token",S),n(x),{success:!0,data:y.data}}catch(y){return(v=(d=y.response)==null?void 0:d.data)!=null&&v.disabled?{success:!1,error:"Your account has been disabled by administrator",disabled:!0}:{success:!1,error:((h=(b=y.response)==null?void 0:b.data)==null?void 0:h.message)||"Login failed"}}},registerSuperAdmin:async(u,p,d)=>{var v,b;try{const h=await Es.registerSuperAdmin(u,p,d),{token:y,user:S}=h.data;return localStorage.setItem("token",y),n(S),{success:!0,data:h.data}}catch(h){return{success:!1,error:((b=(v=h.response)==null?void 0:v.data)==null?void 0:b.message)||"Registration failed"}}},logout:()=>{localStorage.removeItem("token"),n(null)},loading:r};return o.jsx(ah.Provider,{value:c,children:e})},C1="modulepreload",_1=function(e){return"/"+e},tf={},T1=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=_1(i),i in tf)return;tf[i]=!0;const l=i.endsWith(".css"),a=l?'[rel="stylesheet"]':"";if(!!r)for(let p=s.length-1;p>=0;p--){const d=s[p];if(d.href===i&&(!l||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":C1,l||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),l)return new Promise((p,d)=>{u.addEventListener("load",p),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i})},Xt=Object.create(null);Xt.open="0";Xt.close="1";Xt.ping="2";Xt.pong="3";Xt.message="4";Xt.upgrade="5";Xt.noop="6";const Wi=Object.create(null);Object.keys(Xt).forEach(e=>{Wi[Xt[e]]=e});const qa={type:"error",data:"parser error"},ch=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",uh=typeof ArrayBuffer=="function",dh=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,lu=({type:e,data:t},n,r)=>ch&&t instanceof Blob?n?r(t):nf(t,r):uh&&(t instanceof ArrayBuffer||dh(t))?n?r(t):nf(new Blob([t]),r):r(Xt[e]+(t||"")),nf=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function rf(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let $l;function R1(e,t){if(ch&&e.data instanceof Blob)return e.data.arrayBuffer().then(rf).then(t);if(uh&&(e.data instanceof ArrayBuffer||dh(e.data)))return t(rf(e.data));lu(e,!1,n=>{$l||($l=new TextEncoder),t($l.encode(n))})}const sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<sf.length;e++)hs[sf.charCodeAt(e)]=e;const A1=e=>{let t=e.length*.75,n=e.length,r,s=0,i,l,a,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),p=new Uint8Array(u);for(r=0;r<n;r+=4)i=hs[e.charCodeAt(r)],l=hs[e.charCodeAt(r+1)],a=hs[e.charCodeAt(r+2)],c=hs[e.charCodeAt(r+3)],p[s++]=i<<2|l>>4,p[s++]=(l&15)<<4|a>>2,p[s++]=(a&3)<<6|c&63;return u},P1=typeof ArrayBuffer=="function",au=(e,t)=>{if(typeof e!="string")return{type:"message",data:fh(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:M1(e.substring(1),t)}:Wi[n]?e.length>1?{type:Wi[n],data:e.substring(1)}:{type:Wi[n]}:qa},M1=(e,t)=>{if(P1){const n=A1(e);return fh(n,t)}else return{base64:!0,data:e}},fh=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},ph=String.fromCharCode(30),O1=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((i,l)=>{lu(i,!1,a=>{r[l]=a,++s===n&&t(r.join(ph))})})},I1=(e,t)=>{const n=e.split(ph),r=[];for(let s=0;s<n.length;s++){const i=au(n[s],t);if(r.push(i),i.type==="error")break}return r};function L1(){return new TransformStream({transform(e,t){R1(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let zl;function Ci(e){return e.reduce((t,n)=>t+n.length,0)}function _i(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function U1(e,t){zl||(zl=new TextDecoder);const n=[];let r=0,s=-1,i=!1;return new TransformStream({transform(l,a){for(n.push(l);;){if(r===0){if(Ci(n)<1)break;const c=_i(n,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Ci(n)<2)break;const c=_i(n,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ci(n)<8)break;const c=_i(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),p=u.getUint32(0);if(p>Math.pow(2,53-32)-1){a.enqueue(qa);break}s=p*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ci(n)<s)break;const c=_i(n,s);a.enqueue(au(i?c:zl.decode(c),t)),r=0}if(s===0||s>e){a.enqueue(qa);break}}}})}const mh=4;function Oe(e){if(e)return D1(e)}function D1(e){for(var t in Oe.prototype)e[t]=Oe.prototype[t];return e}Oe.prototype.on=Oe.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Oe.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Oe.prototype.off=Oe.prototype.removeListener=Oe.prototype.removeAllListeners=Oe.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Oe.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};Oe.prototype.emitReserved=Oe.prototype.emit;Oe.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Oe.prototype.hasListeners=function(e){return!!this.listeners(e).length};const nl=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0))(),St=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),F1="arraybuffer";function hh(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const $1=St.setTimeout,z1=St.clearTimeout;function rl(e,t){t.useNativeTimers?(e.setTimeoutFn=$1.bind(St),e.clearTimeoutFn=z1.bind(St)):(e.setTimeoutFn=St.setTimeout.bind(St),e.clearTimeoutFn=St.clearTimeout.bind(St))}const B1=1.33;function H1(e){return typeof e=="string"?V1(e):Math.ceil((e.byteLength||e.size)*B1)}function V1(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function gh(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function G1(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function W1(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let i=n[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class q1 extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class cu extends Oe{constructor(t){super(),this.writable=!1,rl(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new q1(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=au(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=G1(t);return n.length?"?"+n:""}}class K1 extends cu{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};I1(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,O1(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=gh()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let yh=!1;try{yh=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Q1=yh;function J1(){}class Y1 extends K1{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}class Yt extends Oe{constructor(t,n,r){super(),this.createRequest=t,rl(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=hh(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Yt.requestsCount++,Yt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=J1,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Yt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Yt.requestsCount=0;Yt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",of);else if(typeof addEventListener=="function"){const e="onpagehide"in St?"pagehide":"unload";addEventListener(e,of,!1)}}function of(){for(let e in Yt.requests)Yt.requests.hasOwnProperty(e)&&Yt.requests[e].abort()}const X1=function(){const e=xh({xdomain:!1});return e&&e.responseType!==null}();class Z1 extends Y1{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=X1&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Yt(xh,this.uri(),t)}}function xh(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Q1))return new XMLHttpRequest}catch{}if(!t)try{return new St[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const vh=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class ew extends cu{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=vh?{}:hh(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;lu(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&nl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=gh()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Bl=St.WebSocket||St.MozWebSocket;class tw extends ew{createSocket(t,n,r){return vh?new Bl(t,n,r):n?new Bl(t,n):new Bl(t)}doWrite(t,n){this.ws.send(n)}}class nw extends cu{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=U1(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=L1();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:a,value:c})=>{a||(this.onPacket(c),i())}).catch(a=>{})};i();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&nl(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const rw={websocket:tw,webtransport:nw,polling:Z1},sw=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,iw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ka(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=sw.exec(e||""),i={},l=14;for(;l--;)i[iw[l]]=s[l]||"";return n!=-1&&r!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=ow(i,i.path),i.queryKey=lw(i,i.query),i}function ow(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function lw(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(n[s]=i)}),n}const Qa=typeof addEventListener=="function"&&typeof removeEventListener=="function",qi=[];Qa&&addEventListener("offline",()=>{qi.forEach(e=>e())},!1);class Dn extends Oe{constructor(t,n){if(super(),this.binaryType=F1,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=Ka(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=Ka(n.host).host);rl(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=W1(this.opts.query)),Qa&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},qi.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=mh,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Dn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Dn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=H1(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,nl(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:t,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Dn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Qa&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=qi.indexOf(this._offlineEventListener);r!==-1&&qi.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Dn.protocol=mh;class aw extends Dn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Dn.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Dn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const v=new Error("probe error");v.transport=n.name,this.emitReserved("upgradeError",v)}}))};function i(){r||(r=!0,p(),n.close(),n=null)}const l=d=>{const v=new Error("probe error: "+d);v.transport=n.name,i(),this.emitReserved("upgradeError",v)};function a(){l("transport closed")}function c(){l("socket closed")}function u(d){n&&d.name!==n.name&&i()}const p=()=>{n.removeListener("open",s),n.removeListener("error",l),n.removeListener("close",a),this.off("close",c),this.off("upgrading",u)};n.once("open",s),n.once("error",l),n.once("close",a),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let cw=class extends aw{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>rw[s]).filter(s=>!!s)),super(t,r)}};function uw(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=Ka(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const dw=typeof ArrayBuffer=="function",fw=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,wh=Object.prototype.toString,pw=typeof Blob=="function"||typeof Blob<"u"&&wh.call(Blob)==="[object BlobConstructor]",mw=typeof File=="function"||typeof File<"u"&&wh.call(File)==="[object FileConstructor]";function uu(e){return dw&&(e instanceof ArrayBuffer||fw(e))||pw&&e instanceof Blob||mw&&e instanceof File}function Ki(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(Ki(e[n]))return!0;return!1}if(uu(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Ki(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ki(e[n]))return!0;return!1}function hw(e){const t=[],n=e.data,r=e;return r.data=Ja(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ja(e,t){if(!e)return e;if(uu(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Ja(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Ja(e[r],t));return n}return e}function gw(e,t){return e.data=Ya(e.data,t),delete e.attachments,e}function Ya(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Ya(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Ya(e[n],t));return e}const yw=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],xw=5;var pe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(pe||(pe={}));class vw{constructor(t){this.replacer=t}encode(t){return(t.type===pe.EVENT||t.type===pe.ACK)&&Ki(t)?this.encodeAsBinary({type:t.type===pe.EVENT?pe.BINARY_EVENT:pe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===pe.BINARY_EVENT||t.type===pe.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=hw(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function lf(e){return Object.prototype.toString.call(e)==="[object Object]"}class du extends Oe{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===pe.BINARY_EVENT;r||n.type===pe.BINARY_ACK?(n.type=r?pe.EVENT:pe.ACK,this.reconstructor=new ww(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(uu(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(pe[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===pe.BINARY_EVENT||r.type===pe.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const l=t.substring(i,n);if(l!=Number(l)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(l)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(i,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const i=n+1;for(;++n;){const l=t.charAt(n);if(l==null||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(du.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case pe.CONNECT:return lf(n);case pe.DISCONNECT:return n===void 0;case pe.CONNECT_ERROR:return typeof n=="string"||lf(n);case pe.EVENT:case pe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&yw.indexOf(n[0])===-1);case pe.ACK:case pe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ww{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=gw(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Nw=Object.freeze(Object.defineProperty({__proto__:null,Decoder:du,Encoder:vw,get PacketType(){return pe},protocol:xw},Symbol.toStringTag,{value:"Module"}));function Mt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const jw=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Nh extends Oe{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Mt(t,"open",this.onopen.bind(this)),Mt(t,"packet",this.onpacket.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,i;if(jw.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const l={type:pe.EVENT,data:n};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const p=this.ids++,d=n.pop();this._registerAckCallback(p,d),l.id=p}const a=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);n.call(this,new Error("operation has timed out"))},s),l=(...a)=>{this.io.clearTimeoutFn(i),n.apply(this,a)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...n){return new Promise((r,s)=>{const i=(l,a)=>l?s(l):r(a);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:pe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case pe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pe.EVENT:case pe.BINARY_EVENT:this.onevent(t);break;case pe.ACK:case pe.BINARY_ACK:this.onack(t);break;case pe.DISCONNECT:this.ondisconnect();break;case pe.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:pe.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function Jr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Jr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Jr.prototype.reset=function(){this.attempts=0};Jr.prototype.setMin=function(e){this.ms=e};Jr.prototype.setMax=function(e){this.max=e};Jr.prototype.setJitter=function(e){this.jitter=e};class Xa extends Oe{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,rl(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Jr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||Nw;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new cw(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=Mt(n,"open",function(){r.onopen(),t&&t()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},l=Mt(n,"error",i);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),n.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Mt(t,"ping",this.onping.bind(this)),Mt(t,"data",this.ondata.bind(this)),Mt(t,"error",this.onerror.bind(this)),Mt(t,"close",this.onclose.bind(this)),Mt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){nl(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Nh(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const us={};function Cs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=uw(e,t.path||"/socket.io"),r=n.source,s=n.id,i=n.path,l=us[s]&&i in us[s].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return a?c=new Xa(r,t):(us[s]||(us[s]=new Xa(r,t)),c=us[s]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Cs,{Manager:Xa,Socket:Nh,io:Cs,connect:Cs});const jh=N.createContext(),fu=()=>{const e=N.useContext(jh);if(!e)throw new Error("useSocket must be used within a SocketProvider");return e},Sw=({children:e,user:t})=>{const[n,r]=N.useState(null),[s,i]=N.useState(!1),[l,a]=N.useState([]),[c,u]=N.useState(0),[p,d]=N.useState(Date.now()),[v,b]=N.useState([]),h=R=>{if(t&&(t.role==="admin"||t.role==="superadmin")){const V=`🚨 DISABLED USER LOGIN ATTEMPT

${R.userName} (${R.userEmail}) is trying to access the system`;G.error(V,{duration:8e3,position:"top-center",style:{background:"#fef2f2",color:"#dc2626",border:"2px solid #ef4444",fontSize:"14px",fontWeight:"bold",padding:"16px",borderRadius:"8px",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",whiteSpace:"pre-line"},icon:"🚨",className:"toast-admin-alert"});const ie=Date.now()+Math.random();b(xe=>[...xe,{...R,id:ie}])}},y=async R=>{try{const{usersAPI:P}=await T1(()=>Promise.resolve().then(()=>b1),void 0);await P.toggleUserStatus(R);const V=v.find(ie=>ie.userId===R);b(ie=>ie.filter(xe=>xe.userId!==R)),V&&G.success(`✅ User ${V.userName} has been activated successfully!`,{duration:4e3,position:"top-right"})}catch(P){console.error("Error activating user:",P),G.error("Failed to activate user. Please try again.")}},S=R=>{b(P=>P.filter(V=>V.id!==R))},x={autoConnect:!0,transports:["websocket","polling"],upgrade:!0,rememberUpgrade:!0,timeout:2e4,forceNew:!0,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:1e4,maxReconnectionAttempts:1/0};N.useEffect(()=>{if(t&&t.id){console.log("🔌 Initializing socket connection for user:",t.name),console.log("🔗 Socket URL:","http://13.233.120.169:5002"),n&&(console.log("🧹 Closing existing socket connection"),n.close(),r(null));const R=Cs("http://13.233.120.169:5002",x);return R.on("connect",()=>{u(0),d(Date.now()),i(!0),console.log("✅ Socket connected - ID:",R.id),console.log("👤 Connected as user:",t.name),console.log("🔗 Connection URL:",R.io.uri),R.emit("join",t.id),console.log(`🏠 User ${t.id} joined personal room`),O(R),z(R)}),R.on("disconnect",P=>{i(!1),console.log("❌ Socket disconnected - Reason:",P),console.log("👤 Disconnected user:",t.name),F(),B(),m(R)}),R.on("connect_error",P=>{console.error("❌ Socket connection error:",P),i(!1),P.message&&P.message.includes("WebSocket")&&(console.log("🔄 WebSocket connection failed, trying polling transport"),R.io.opts.transports=["polling"],setTimeout(()=>R.connect(),1e3)),m(R)}),R.on("reconnect",P=>{u(0),console.log("🔄 Socket reconnected after",P,"attempts"),console.log("🔌 New Socket ID:",R.id),i(!0),R.emit("join",t.id)}),R.on("reconnect_error",P=>{console.error("❌ Socket reconnection error:",P)}),R.on("reconnect_failed",()=>{console.error("❌ Socket reconnection failed"),i(!1)}),R.on("ping",P=>{d(Date.now()),console.log(" Ping received - Connection alive, timestamp:",new Date(Date.now()).toLocaleTimeString())}),R.on("pong",P=>{d(Date.now()),console.log("💗 Pong received - Connection confirmed, timestamp:",new Date(Date.now()).toLocaleTimeString())}),R.on("connect_timeout",()=>{console.log("⏰ Socket connection timed out")}),R.on("reconnect_error",P=>{console.error("🔄 Reconnection error:",P.message)}),R.on("reconnect_failed",()=>{console.error("💥 Reconnection failed permanently - forcing reconnect"),u(1/0)}),R.on("force-logout",P=>{console.log("🚪 Force logout received:",P),localStorage.removeItem("token"),window.location.href="/login"}),R.on("admin_notification",P=>{h(P)}),R.on("user-online",P=>{var V;console.log("🟢 User came online:",(V=P.user)==null?void 0:V.name),a(ie=>ie.find(ge=>ge.userId===P.userId)?ie.map(ge=>ge.userId===P.userId?{...ge,isOnline:!0,lastSeen:new Date}:ge):[...ie,{...P,isOnline:!0,lastSeen:new Date}])}),R.on("user-offline",P=>{var V;console.log("🔴 User went offline:",(V=P.user)==null?void 0:V.name),a(ie=>ie.find(ge=>ge.userId===P.userId)?ie.map(ge=>ge.userId===P.userId?{...ge,isOnline:!1,lastSeen:new Date}:ge):ie)}),R.on("online-users",P=>{console.log("👥 Initial online users:",P.map(V=>{var ie;return((ie=V.user)==null?void 0:ie.name)||V.name})),a(P.map(V=>({...V,isOnline:!0,lastSeen:new Date})))}),r(R),()=>{console.log("🧹 Cleaning up socket connection"),F(),B(),R.close(),r(null),i(!1),a([])}}else n&&(console.log("🔌 Disconnecting socket - no user"),n.close(),r(null),i(!1),a([]))},[t==null?void 0:t.id]);const m=R=>{if(console.log("🔄 Starting reconnection logic"),c<5){const P=1e3*Math.pow(2,c);console.log(`🔄 Reconnecting in ${P}ms...`),setTimeout(()=>{u(V=>V+1),R.connect()},P)}else console.log("💥 Max reconnections reached, manual reconnection forced"),R.connect()};let g,C;const O=R=>{g&&clearInterval(g),g=setInterval(()=>{const P=Date.now()-p;console.log(`Time since last ping: ${P}ms`),R&&s&&P>45e3&&(console.log("➡️ Proactive ping sent to prevent timeout"),R.emit("ping",{timestamp:Date.now()}),d(Date.now())),P>18e4?(console.log("⚠️ Extended timeout reached - checking connection"),R&&R.connected&&s?(console.log("🔧 Connection verified, resetting last ping"),d(Date.now())):(console.log("🔄 Disconnection confirmed, reconnecting..."),R.connect())):console.log(`✅ Socket maintained: ${P}ms since last ping`)},25e3)},F=()=>{g&&(clearInterval(g),g=null)},z=R=>{C&&clearInterval(C),C=setInterval(()=>{R&&R.connected&&R.emit("client-heartbeat",{t:Date.now()})},2e3)},B=()=>{C&&(clearInterval(C),C=null)},k={socket:n,isConnected:s,onlineUsers:l,notifications:v,sendMessage:(R,P,V="text",ie=!1,xe=null)=>{if(console.log("📤 sendMessage called with:",{receiverId:R,content:P,messageType:V,isGroupChat:ie,attachment:xe,socketStatus:{socket:!!n,isConnected:s,socketId:n==null?void 0:n.id}}),n&&s){console.log("📤 Emitting send-message event...");let ge;return ie?(ge={sender:t.id,groupId:R,message:P,messageType:V,timestamp:new Date().toISOString()},n.emit("send-group-message",ge)):(ge={sender:t.id,receiver:R,message:P,messageType:V,timestamp:new Date().toISOString()},n.emit("send-message",ge)),console.log("✅ Message sent successfully:",ge),!0}else throw console.error("❌ Cannot send message: Socket not connected"),new Error("Socket not connected. Please check your connection.")},markMessageRead:(R,P)=>{n&&s&&(n.emit("mark-message-read",{messageId:R,senderId:P}),console.log("📥 Message read marked for:",{messageId:R,senderId:P}))},startTyping:R=>{n&&s&&n.emit("typing",{sender:t.id,receiver:R,isTyping:!0})},stopTyping:R=>{n&&s&&n.emit("typing",{sender:t.id,receiver:R,isTyping:!1})},isUserOnline:R=>{const P=l.find(V=>V.userId===R);return P?P.isOnline:!1},joinGroup:R=>{n&&s&&(n.emit("join-group",R),console.log("🏠 Joined group room:",R))},leaveGroup:R=>{n&&s&&(n.emit("leave-group",R),console.log("🚪 Left group room:",R))},onReceiveMessage:R=>{n&&(n.off("receive-message"),n.on("receive-message",P=>{console.log("🔔 Received message:",P),R(P)}))},onReceiveGroupMessage:R=>{n&&(n.off("receive-group-message"),n.on("receive-group-message",P=>{console.log("🔔 Received group message:",P),R(P)}))},onMessageSent:R=>{n&&(n.off("message-sent"),n.on("message-sent",P=>{console.log("🔔 Message sent confirmation:",P),R(P)}))},handleActivateUser:y,handleCloseNotification:S,getConnectionStatus:()=>({isConnected:s,reconnectAttempts:c,lastPing:new Date(p).toLocaleString(),socketId:n==null?void 0:n.id})};return o.jsx(jh.Provider,{value:k,children:e})};var kw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const bw=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oe=(e,t)=>{const n=N.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:l,children:a,...c},u)=>N.createElement("svg",{ref:u,...kw,width:s,height:s,stroke:r,strokeWidth:l?Number(i)*24/Number(s):i,className:`lucide lucide-${bw(e)}`,...c},[...t.map(([p,d])=>N.createElement(p,d)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${e}`,n},sl=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Hl=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Ew=oe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Cw=oe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),_w=oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Za=oe("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Tw=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Eo=oe("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Mr=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Rw=oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Aw=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Or=oe("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),pu=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Pw=oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Mw=oe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Sh=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),kh=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),tr=oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),ec=oe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),bh=oe("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Co=oe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Ow=oe("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),mu=oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Eh=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Iw=oe("Power",[["path",{d:"M18.36 6.64a9 9 0 1 1-12.73 0",key:"phirl6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"12",key:"aemgbe"}]]),Lw=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),il=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Ch=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),hu=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ol=oe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Uw=oe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),Dw=oe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),tc=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Fw=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),gu=oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ft=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Et=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),_o=oe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),$w=oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),To=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zw=()=>{const[e,t]=N.useState({name:"",email:"",password:"",confirmPassword:""}),[n,r]=N.useState("user"),[s,i]=N.useState(!1),[l,a]=N.useState(!1),[c,u]=N.useState(!1),[p,d]=N.useState(!0),{login:v,registerSuperAdmin:b}=Zt();N.useEffect(()=>{(async()=>{try{const g=await Es.checkSuperAdmin();u(g.data.exists)}catch(g){console.error("Error checking super admin:",g)}finally{d(!1)}})()},[]);const h=[{value:"user",label:"User",icon:Ft,description:"Chat with other users"},{value:"admin",label:"Admin",icon:ol,description:"Manage users and groups"},{value:"superadmin",label:"Super Admin",icon:Eo,description:"Full system access"}],y=m=>{t({...e,[m.target.name]:m.target.value})},S=async m=>{m.preventDefault(),a(!0);try{if(s&&n==="superadmin"){if(e.password!==e.confirmPassword){G.error("Passwords do not match");return}const g=await b(e.name,e.email,e.password);g.success?G.success("Super Admin registered successfully!"):G.error(g.error)}else{const g=await v(e.email,e.password);g.success?G.success("Login successful!"):g.disabled?G.error("Your account has been disabled by administrator"):G.error(g.error)}}catch{G.error("An error occurred. Please try again.")}finally{a(!1)}},x=()=>{if(!s&&c){G.error("Super admin already exists. Please login instead.");return}i(!s),t({name:"",email:"",password:"",confirmPassword:""})};return p?o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:o.jsx("div",{className:"max-w-md w-full space-y-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Internal Chat App"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Checking system status..."}),o.jsx("div",{className:"flex justify-center mt-4",children:o.jsx("div",{className:"w-6 h-6 border-2 border-primary-500 border-t-transparent rounded-full animate-spin"})})]})})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-primary-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Internal Chat App"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:s?"Register as Super Admin":"Sign in to your account"})]}),o.jsxs("div",{className:"card p-8",children:[!s&&o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Role"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:h.map(m=>{const g=m.icon;return o.jsx("button",{type:"button",onClick:()=>r(m.value),className:`p-3 rounded-lg border-2 transition-all ${n===m.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(g,{className:"w-5 h-5 text-gray-600"}),o.jsxs("div",{className:"text-left",children:[o.jsx("div",{className:"font-medium text-gray-900",children:m.label}),o.jsx("div",{className:"text-sm text-gray-500",children:m.description})]})]})},m.value)})})]}),o.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),o.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:e.name,onChange:y,className:"input-field mt-1",placeholder:"Enter your full name"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e.email,onChange:y,className:"input-field mt-1",placeholder:"Enter your email"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:e.password,onChange:y,className:"input-field mt-1",placeholder:"Enter your password"})]}),s&&o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:e.confirmPassword,onChange:y,className:"input-field mt-1",placeholder:"Confirm your password"})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:l,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),s?"Registering...":"Signing in..."]}):s?"Register Super Admin":"Sign In"})}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:x,disabled:p,className:"text-sm text-primary-600 hover:text-primary-500 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Checking system status...":s?"Already have an account? Sign in":c?"Super admin already exists. Please login instead.":"Need to register Super Admin? Click here"})})]})]})]})})},Bw=()=>{const{user:e,logout:t}=Zt(),{notifications:n,handleActivateUser:r,handleCloseNotification:s}=fu(),[i,l]=N.useState({totalUsers:0,totalGroups:0,activeUsers:0,disabledUsers:0}),[a,c]=N.useState(!0),[u,p]=N.useState(!1),[d,v]=N.useState(!1);N.useEffect(()=>{b()},[]),N.useEffect(()=>{const S=x=>{if(u){const m=document.querySelector(".notification-panel");m&&!m.contains(x.target)&&p(!1)}};return u&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[u]),N.useEffect(()=>{const S=x=>{if(d){const m=document.querySelector(".account-menu-container");m&&!m.contains(x.target)&&v(!1)}};return d&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[d]);const b=async()=>{try{c(!0);const[S,x]=await Promise.all([e.role==="user"?it.getActiveUsers():it.getUsers(),It.getMyGroups()]),m=Array.isArray(S.data)?S.data:[],g=m.filter(O=>(O.isActive??!0)===!0).length,C=m.filter(O=>(O.isActive??!0)===!1).length;l({totalUsers:m.length,totalGroups:x.data.length,activeUsers:g,disabledUsers:C})}catch{G.error("Failed to load dashboard data")}finally{c(!1)}},h=S=>{switch(S){case"superadmin":return o.jsx(Eo,{className:"w-5 h-5 text-yellow-600"});case"admin":return o.jsx(ol,{className:"w-5 h-5 text-blue-600"});default:return o.jsx(Ft,{className:"w-5 h-5 text-gray-600"})}},y=S=>{switch(S){case"superadmin":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return a?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsx("div",{className:"flex items-center space-x-4",children:o.jsxs(jo,{to:"/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?o.jsx("img",{src:`${ve}${e.profileImage}`,alt:"Profile",className:"w-12 h-12 rounded-full object-cover"}):o.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-primary-600 font-medium text-lg",children:e.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),o.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",e.name,"!"]})]})]})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[(e.role==="admin"||e.role==="superadmin")&&o.jsx("div",{className:"relative",children:o.jsxs("button",{onClick:()=>p(!u),className:"relative p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-full transition-colors",children:[o.jsx(Hl,{className:"w-6 h-6"}),n.length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n.length})]})}),o.jsxs("div",{className:"relative account-menu-container",children:[o.jsx("button",{onClick:()=>v(S=>!S),className:`px-3 py-1 rounded-full text-sm font-medium hover:opacity-90 transition ${y(e.role)}`,children:o.jsxs("div",{className:"flex items-center space-x-1",children:[h(e.role),o.jsx("span",{className:"capitalize",children:e.role})]})}),d&&o.jsx("div",{className:"absolute right-0 mt-2 w-44 bg-white border border-gray-200 rounded-md shadow-lg z-20",children:o.jsxs("button",{onClick:()=>{v(!1),t(),G.success("Logged out successfully")},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[o.jsx(Sh,{className:"w-4 h-4"}),o.jsx("span",{children:"Logout"})]})})]})]})]})})}),u&&(e.role==="admin"||e.role==="superadmin")&&o.jsx("div",{className:"notification-panel bg-white border-b shadow-sm",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hl,{className:"w-5 h-5 text-primary-600"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),n.length>0&&o.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n.length})]}),o.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:o.jsx(To,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"space-y-3",children:n.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(Hl,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),o.jsx("p",{children:"No notifications yet"})]}):n.map(S=>o.jsx("div",{className:"border border-orange-200 bg-orange-50 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:o.jsx(Ft,{className:"w-4 h-4 text-orange-600"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"text-sm font-bold text-orange-700 flex items-center gap-2",children:[o.jsx("span",{children:"⚠️"}),"Disabled User Login Attempt"]}),o.jsxs("div",{className:"mt-1 text-sm",children:[o.jsx("div",{className:"font-semibold text-gray-900",children:S.userName}),o.jsx("div",{className:"text-gray-600",children:S.userEmail}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Time: ",new Date(S.timestamp).toLocaleTimeString()]})]})]}),o.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[o.jsxs("button",{onClick:()=>r(S.userId),className:"flex items-center space-x-1 bg-green-600 text-white px-3 py-1.5 rounded-md text-xs font-medium hover:bg-green-700 transition-colors",children:[o.jsx(Za,{className:"w-3 h-3"}),o.jsx("span",{children:"Activate"})]}),o.jsxs("button",{onClick:()=>s(S.id),className:"flex items-center space-x-1 bg-gray-100 text-gray-700 px-3 py-1.5 rounded-md text-xs font-medium hover:bg-gray-200 transition-colors",children:[o.jsx(To,{className:"w-3 h-3"}),o.jsx("span",{children:"Close"})]})]})]})},S.id))})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:o.jsx(Et,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalUsers})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-green-100",children:o.jsx(tr,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Groups"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalGroups})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-green-100",children:o.jsx(Et,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activeUsers})]})]})}),o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-red-100",children:o.jsx(Et,{className:"w-6 h-6 text-red-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Disabled Users"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.disabledUsers})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Chat"}),o.jsx(tr,{className:"w-5 h-5 text-gray-400"})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Start chatting with other users or join group conversations."}),o.jsxs("a",{href:"/chat",className:"btn-primary inline-flex items-center",children:[o.jsx(tr,{className:"w-4 h-4 mr-2"}),"Open Chat"]})]}),e.role!=="user"&&o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Management"}),o.jsx(hu,{className:"w-5 h-5 text-gray-400"})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:e.role==="superadmin"?"Manage admins and view all users in the system.":"Manage users and create groups for team communication."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("a",{href:"/users",className:"btn-secondary w-full inline-flex items-center justify-center",children:[o.jsx(gu,{className:"w-4 h-4 mr-2"}),e.role==="superadmin"?"Manage Admins":"Manage Users"]}),e.role==="admin"&&o.jsxs("a",{href:"/groups",className:"btn-primary w-full inline-flex items-center justify-center",children:[o.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Manage Groups"]})]})]}),o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Account Info"}),o.jsx(Ft,{className:"w-5 h-5 text-gray-400"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Name:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:e.name})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Email:"}),o.jsx("span",{className:"ml-2 text-gray-900",children:e.email})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Role:"}),o.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs font-medium ${y(e.role)}`,children:e.role})]})]})]}),e.role==="superadmin"&&o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"System Overview"}),o.jsx(Eo,{className:"w-5 h-5 text-yellow-600"})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:"You have full access to manage the entire system including admins and all users."}),o.jsxs("div",{className:"text-sm text-gray-500",children:[o.jsx("p",{children:"• Create and manage admin accounts"}),o.jsx("p",{children:"• View all system users"}),o.jsx("p",{children:"• Monitor system activity"})]})]})]})]})]})};class Hw{constructor(){this.socket=null,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.reconnectDelay=1e3,this.pingInterval=null,this.lastPingTime=Date.now(),this.currentUserId=null,this.listeners=new Map,this.isConnecting=!1}connect(){return this.isConnecting?this.socket:this.socket&&this.socket.connected?this.socket:(console.log("🔌 Creating new socket connection..."),this.isConnecting=!0,this.socket&&(this.socket.disconnect(),this.socket=null),this.socket=Cs("http://13.233.120.169:5002",{autoConnect:!0,reconnection:!0,reconnectionDelay:this.reconnectDelay,reconnectionAttempts:this.maxReconnectAttempts,maxReconnectionAttempts:this.maxReconnectAttempts,timeout:2e4,forceNew:!0,multiplex:!1,transports:["websocket","polling"]}),this.setupEventHandlers(),this.isConnecting=!1,this.socket)}setupEventHandlers(){this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.lastPingTime=Date.now(),console.log("🎉 ===== SOCKET CONNECTED ===== 🎉"),console.log("🔌 Socket ID:",this.socket.id),console.log("🌐 Connection URL:",this.socket.io.uri),console.log("📡 Transport:",this.socket.io.engine.transport.name),console.log("👤 Current User ID:",this.currentUserId),console.log("🔗 Active listeners:",this.listeners.size),console.log("========================================"),this.currentUserId&&this.joinUserRoom(this.currentUserId),this.startPingMonitoring(),this.setupMessageListeners(),this.socket.emit("ping",{timestamp:Date.now()}),console.log("🔧 Enhanced connection alive detection initiated")}),this.socket.on("disconnect",t=>{this.isConnected=!1,console.log("⚠️ ===== SOCKET DISCONNECTED ===== ⚠️"),console.log("❌ Reason:",t),console.log("🔄 Attempting reconnection..."),console.log("========================================"),this.stopPingMonitoring(),this.attemptReconnection()}),this.socket.on("connect_error",t=>{console.error("🚨 ===== CONNECTION ERROR ===== 🚨"),console.error("❌ Error:",t.message),console.error("🌐 URL:",t.type),console.error("🔢 Status:",t.description),console.error("========================================="),this.attemptReconnection()}),this.socket.on("reconnect",t=>{console.log("✅ ===== RECONNECTION SUCCESSFUL ===== ✅"),console.log("🔄 Attempts tried:",t),console.log("🔌 New Socket ID:",this.socket.id),console.log("==============================================")}),this.socket.on("ping",t=>{this.lastPingTime=Date.now(),console.log(" Ping received - Connection alive, timestamp:",new Date(this.lastPingTime).toLocaleTimeString())}),this.socket.on("pong",t=>{this.lastPingTime=Date.now(),console.log("💗 Pong received - Connection confirmed, timestamp:",new Date(this.lastPingTime).toLocaleTimeString())}),this.socket.on("connect_timeout",()=>{console.log("⏰ ===== CONNECTION TIMEOUT ===== ⏰"),console.log("🔌 Socket connection timed out"),console.log("======================================")}),this.socket.on("reconnect_error",t=>{console.error("🔄❌ ===== RECONNECTION ERROR ===== ❌🔄"),console.error("Error:",t.message),console.error("========================================")}),this.socket.on("reconnect_failed",()=>{console.error("💥 ===== FAILED RECONNECTION ===== 💥"),console.error("🔌 Socket reconnection permanently failed"),console.error("🔄 Attempting force reconnect..."),console.error("===========================================")})}setupMessageListeners(){console.log("🔧 ===== SETTING UP MESSAGE LISTENERS ===== 🔧"),console.log("📝 Total listeners to register:",this.listeners.size);for(const[t,n]of this.listeners)this.socket&&(this.socket.removeAllListeners(t),this.socket.on(t,n),console.log(`✅ Re-registered listener: ${t}`));console.log("🔗 ===== ALL LISTENERS ACTIVE ===== "),console.log("📡 Socket ready for real-time messaging"),console.log("========================================")}maintainConnection(){console.log("🔧 ===== MAINTAINING PERSISTENT CONNECTION ===== 🔧"),!this.isConnected||!this.socket?(console.log("⚠️ Socket disconnected, reconnecting..."),this.connect()):(console.log("✅ Socket is connected, maintaining listeners"),this.setupMessageListeners(),this.socket&&this.isConnected&&(this.socket.emit("ping",{timestamp:Date.now()}),this.lastPingTime=Date.now(),console.log("Keep-alive ping sent - Connection maintained"),setTimeout(()=>{this.socket&&this.isConnected&&this.socket.emit("pong",{timestamp:Date.now()})},100))),console.log("==============================================")}forceChatroomReception(){console.log("🔔 FORCING CHATROOM MESSAGE RECEPTION"),this.socket&&this.isConnected?(this.setupMessageListeners(),console.log("✅ Chatroom reception listeners reinforced")):(console.log("⚠️ Socket not available for chatroom reinforcement"),this.connect()),console.log("=====")}startPingMonitoring(){this.pingInterval&&clearInterval(this.pingInterval),this.pingInterval=setInterval(()=>{const t=Date.now()-this.lastPingTime;if(console.log(` Health check: Time since last ping: ${t}ms`),this.socket&&this.isConnected&&t>45e3&&(console.log("➡️ Proactive ping sent to prevent timeout"),this.socket.emit("ping",{timestamp:Date.now()}),this.lastPingTime=Date.now()),t>18e4){if(console.log("⚠️ Extended timeout reached - checking real disconnection"),this.socket&&this.socket.connected&&this.isConnected){console.log("🔧 Socket connection verified alive, resetting timer"),this.lastPingTime=Date.now();return}console.log("🔄 Real disconnection confirmed, force reconnecting..."),this.forceReconnect()}else console.log(`✅ Socket health maintained: ${t}ms response time`)},25e3)}stopPingMonitoring(){this.pingInterval&&(clearInterval(this.pingInterval),this.pingInterval=null)}attemptReconnection(){this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log("🔄 ===== ATTEMPTING RECONNECTION ===== 🔄"),console.log(`📊 Attempt: ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),console.log(`⏰ Delay: ${this.reconnectDelay*this.reconnectAttempts}ms`),console.log("===================="),setTimeout(()=>{console.log("🚀 Executing reconnection..."),this.connect()},this.reconnectDelay*this.reconnectAttempts)):(console.log("💥 ===== MAX ATTEMPTS REACHED ===== 💥"),console.log("🔥 Forcing socket reset..."),setTimeout(()=>{this.forceReconnect()},this.reconnectDelay*5),console.log("====================================="))}forceReconnect(){console.log("🔄 Force reconnecting socket..."),this.stopPingMonitoring(),this.reconnectAttempts=0,this.socket&&(this.socket.disconnect(),this.socket=null),setTimeout(()=>{this.connect()},2e3)}disconnect(){this.stopPingMonitoring(),this.listeners.clear(),this.socket&&(this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.currentUserId=null}joinUserRoom(t){this.currentUserId=t,this.socket&&this.isConnected?(this.socket.emit("join",t),console.log("🏠 Joined user room:",t)):console.log("🔄 Waiting to join user room after connection...")}joinGroupRoom(t){this.socket&&this.socket.emit("join-group",t)}leaveGroupRoom(t){this.socket&&this.socket.emit("leave-group",t)}sendPersonalMessage(t){var n;if(console.log("📤 ===== SENDING PERSONAL MESSAGE ===== 📤"),console.log("📊 Data:",t),console.log("🔌 Socket available:",!!this.socket),console.log("📡 Socket connected:",this.isConnected),console.log("🆔 Socket ID:",(n=this.socket)==null?void 0:n.id),!this.socket||!this.isConnected){console.log("⚠️ Socket not connected, connecting first..."),this.connect(),setTimeout(()=>{this.socket&&this.isConnected?(console.log("🔄 Retrying message send after connection"),this.socket.emit("send-message",t),console.log("✅ Personal message retry sent successfully")):console.error("❌ Still not connected after retry")},2e3);return}this.ensureConnected(),this.socket&&this.isConnected?(this.socket.emit("send-message",t),console.log("✅ Personal message sent successfully"),setTimeout(()=>{this.socket&&this.isConnected&&this.socket.emit("ping",{timestamp:Date.now()})},100)):console.error("❌ Socket lost connection before sending message"),console.log("=============================================")}sendGroupMessage(t){var n;if(console.log("📤 ===== SENDING GROUP MESSAGE ===== 📤"),console.log("📊 Data:",t),console.log("🔌 Socket available:",!!this.socket),console.log("📡 Socket connected:",this.isConnected),console.log("🆔 Socket ID:",(n=this.socket)==null?void 0:n.id),!this.socket||!this.isConnected){console.log("⚠️ Socket not connected, connecting first..."),this.connect(),setTimeout(()=>{this.socket&&this.isConnected?(console.log("🔄 Retrying group message send after connection"),this.socket.emit("send-group-message",t),console.log("✅ Group message retry sent successfully")):console.error("❌ Still not connected after retry")},2e3);return}this.socket.emit("send-group-message",t),console.log("✅ Group message sent successfully"),console.log("============================================")}onReceiveMessage(t){console.log("🔔 Registering onReceiveMessage listener"),this.registerListener("receive-message",n=>{console.log("🔔 Received message:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)}),setTimeout(()=>{this.socket&&this.isConnected&&(this.socket.off("receive-message"),this.socket.on("receive-message",n=>{console.log("🔄 Maintained receive-message listener:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)}),console.log("✅ Listener re-registered for chatroom persistence"))},1e3)}onReceiveGroupMessage(t){console.log("🔔 Registering onReceiveGroupMessage listener"),this.registerListener("receive-group-message",n=>{console.log("🔔 Received group message:",n);const r={...n,_isExternalMessage:!0,_timestamp:new Date().toISOString()};t(r)})}onMessageSent(t){console.log("🔔 Registering onMessageSent listener"),this.registerListener("message-sent",n=>{console.log("🔔 Message sent confirmation:",n);const r={...n,_isOurMessage:!0,_isConfirmation:!0,_timestamp:new Date().toISOString()};t(r)})}registerListener(t,n){this.listeners.set(t,n),console.log(`📝 Stored listener for event: ${t}`),this.socket&&this.isConnected?(this.socket.off(t),this.socket.on(t,n),console.log(`✅ Listener immediately registered for event: ${t}`)):console.log(`🔄 Listener queued for event: ${t} (waiting for connection)`)}onGroupMessageSent(t){this.registerListener("group-message-sent",t)}onTyping(t){this.registerListener("user-typing",t)}sendTyping(t){this.socket&&this.isConnected&&this.socket.emit("typing",t)}onError(t){this.registerListener("error",t)}onAvatarUpdate(t){this.registerListener("avatar-updated",t)}onUserProfileUpdate(t){this.registerListener("user-profile-updated",t)}removeAllListeners(){this.listeners.clear(),this.socket&&(this.socket.removeAllListeners(),this.socket.on("connect",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.lastPingTime=Date.now(),this.currentUserId&&this.joinUserRoom(this.currentUserId),this.startPingMonitoring(),this.setupMessageListeners()}))}ensureConnected(){return!this.socket||!this.isConnected?(console.log("🔄 Ensuring socket connection..."),this.connect()):!0}getConnectionStatus(){var t;return{isConnected:this.isConnected,socketId:(t=this.socket)==null?void 0:t.id,lastPing:new Date(this.lastPingTime).toLocaleString(),listenersCount:this.listeners.size}}logConnectionStatus(){var t,n,r,s,i,l,a;console.log("🔍 ===== SOCKET STATUS REPORT ===== 🔍"),console.log("📡 Is Connected:",this.isConnected?"✅ YES":"❌ NO"),console.log("🆔 Socket ID:",((t=this.socket)==null?void 0:t.id)||"N/A"),console.log("🌐 Connection URL:",((r=(n=this.socket)==null?void 0:n.io)==null?void 0:r.uri)||"N/A"),console.log("📊 Transport:",((a=(l=(i=(s=this.socket)==null?void 0:s.io)==null?void 0:i.engine)==null?void 0:l.transport)==null?void 0:a.name)||"N/A"),console.log("👤 Current User ID:",this.currentUserId||"Not set"),console.log("🔗 Active Listeners:",this.listeners.size),console.log("📡 Reconnect Attempts:",this.reconnectAttempts),console.log(" Last Ping:",new Date(this.lastPingTime).toLocaleTimeString()),console.log("🔄 Listeners registered:",Array.from(this.listeners.keys()).join(", ")||"None"),console.log("========================================")}testConnection(){console.log("🧪 ===== TESTING SOCKET CONNECTION ===== 🧪"),this.logConnectionStatus(),this.socket&&(console.log("🔄 Emitting test ping..."),this.socket.emit("ping")),console.log("============================================")}forceConnectionTest(){console.log("🛠️ ===== MANUAL CONNECTION FORCE TEST ===== 🛠️"),this.connect(),setTimeout(()=>{this.testConnection()},3e3),console.log("=============================================")}reset(){console.log("🔄 Resetting socket service..."),this.disconnect(),this.currentUserId=null,this.listeners.clear(),this.reconnectAttempts=0,this.isConnecting=!1,clearTimeout(this.reconnectTimeout)}}const Fe=new Hw,af=()=>{const{user:e,logout:t}=Zt(),{socket:n,isConnected:r,sendMessage:s,joinGroup:i,leaveGroup:l,onReceiveMessage:a,onReceiveGroupMessage:c,onMessageSent:u,getConnectionStatus:p}=fu(),[d,v]=N.useState([]),[b,h]=N.useState([]),[y,S]=N.useState(null),[x,m]=N.useState([]),[g,C]=N.useState(""),[O,F]=N.useState(""),[z,B]=N.useState(!0),[X,q]=N.useState({}),[H,K]=N.useState({}),[L,J]=N.useState(null),[se,ee]=N.useState(null),[ae,U]=N.useState(!1),[k,R]=N.useState({}),[P,V]=N.useState(()=>{try{const f=sessionStorage.getItem("downloadedMessages");return f?JSON.parse(f):{}}catch{return{}}}),ie=f=>f&&(/^https?:\/\//i.test(f)?f:`${ve}${f}`),[xe,ge]=N.useState(null),[De,Y]=N.useState(!1),[ce,en]=N.useState(null),[Bt,xn]=N.useState(null),[tn,Tt]=N.useState(""),Je=f=>((f==null?void 0:f.id)||(f==null?void 0:f._id)||(f==null?void 0:f.messageId)||"").toString(),Re=f=>{xe&&clearTimeout(xe);const j=setTimeout(()=>{en(f),Y(!0)},700);ge(j)},rt=()=>{xe&&(clearTimeout(xe),ge(null))},ll=async()=>{try{const f=(ce==null?void 0:ce.messageType)==="text"?(ce==null?void 0:ce.message)||"":ie(ce==null?void 0:ce.fileUrl)||(ce==null?void 0:ce.fileName)||"";f&&await navigator.clipboard.writeText(f)}catch{}Y(!1)},al=()=>{if(ce){try{sessionStorage.setItem("forwardMessage",JSON.stringify({id:ce.id||ce._id,message:ce.message,messageType:ce.messageType,fileUrl:ce.fileUrl,fileName:ce.fileName,fileSize:ce.fileSize,fileType:ce.fileType}))}catch{}window.location.href="/forward"}Y(!1)},ri=()=>{var f,j,T,E;if(ce&&ce.messageType==="text"){const M=((f=ce.sender)==null?void 0:f.id)||((j=ce.sender)==null?void 0:j._id)||ce.sender;M===e.id||M===e._id||M===((T=e.id)==null?void 0:T.toString())||M===((E=e._id)==null?void 0:E.toString())?(xn(ce),Tt(ce.message||"")):G.error("You can only edit your own messages")}Y(!1)},Yr=async()=>{if(!(!Bt||!tn.trim()))try{m(f=>f.map(j=>Je(j)===Je(Bt)?{...j,message:tn.trim(),isEdited:!0,editedAt:new Date().toISOString()}:j)),await _e.editMessage(Bt.id||Bt._id,tn.trim()),xn(null),Tt("")}catch(f){console.error("Failed to edit message:",f),G.error("Failed to edit message")}},Xr=()=>{xn(null),Tt("")},Wn=N.useRef(null);N.useEffect(()=>((async()=>{try{console.log("🔄 Loading chat state from database for UserDashboard...");const j=await _e.getChatState(),{personalChats:T,groupChats:E}=j.data,M={},I={};T.forEach($=>{var te,Z,fe;$.unreadCount>0&&(M[$.chatId]=$.unreadCount),$.lastMessage&&$.lastMessage.message&&(I[$.chatId]={id:$.lastMessage._id||$.lastMessage.id,message:$.lastMessage.message,senderName:$.lastMessage.senderName||((te=$.lastMessage.sender)==null?void 0:te.name)||"User",senderId:$.lastMessage.senderId||((Z=$.lastMessage.sender)==null?void 0:Z._id)||((fe=$.lastMessage.sender)==null?void 0:fe.id),timestamp:$.lastMessage.createdAt||$.lastMessage.timestamp})}),E.forEach($=>{var te,Z,fe;$.unreadCount>0&&(M[$.chatId]=$.unreadCount),$.lastMessage&&$.lastMessage.message&&(I[$.chatId]={id:$.lastMessage._id||$.lastMessage.id,message:$.lastMessage.message,senderName:$.lastMessage.senderName||((te=$.lastMessage.sender)==null?void 0:te.name)||"User",senderId:$.lastMessage.senderId||((Z=$.lastMessage.sender)==null?void 0:Z._id)||((fe=$.lastMessage.sender)==null?void 0:fe.id),timestamp:$.lastMessage.createdAt||$.lastMessage.timestamp})}),q(M),K(I),console.log("✅ UserDashboard chat state loaded from database:",{unreadCounts:M,lastMessages:Object.keys(I).length})}catch(j){console.error("Error loading chat state from database:",j)}})(),si(),ii(),()=>{}),[]),N.useEffect(()=>(y&&(Zr(),ii(),y.type==="group"&&(i(y.id),console.log("🏠 UserDashboard joined group room for:",y.name))),()=>{Fe.removeAllListeners(),y&&y.type==="group"&&(l(y.id),console.log("🚪 UserDashboard left group room for:",y.name)),Fe.healthCheckInterval&&(clearInterval(Fe.healthCheckInterval),delete Fe.healthCheckInterval)}),[y]),N.useEffect(()=>{yu()},[x]);const ur=async()=>{try{console.log("🔄 Refreshing UserDashboard chat state from database...");const f=await _e.getChatState(),{personalChats:j,groupChats:T}=f.data,E={},M={};j.forEach(I=>{var $,te,Z;I.unreadCount>0&&(E[I.chatId]=I.unreadCount),I.lastMessage&&I.lastMessage.message&&(M[I.chatId]={id:I.lastMessage._id||I.lastMessage.id,message:I.lastMessage.message,senderName:I.lastMessage.senderName||(($=I.lastMessage.sender)==null?void 0:$.name)||"User",senderId:I.lastMessage.senderId||((te=I.lastMessage.sender)==null?void 0:te._id)||((Z=I.lastMessage.sender)==null?void 0:Z.id),timestamp:I.lastMessage.createdAt||I.lastMessage.timestamp})}),T.forEach(I=>{var $,te,Z;I.unreadCount>0&&(E[I.chatId]=I.unreadCount),I.lastMessage&&I.lastMessage.message&&(M[I.chatId]={id:I.lastMessage._id||I.lastMessage.id,message:I.lastMessage.message,senderName:I.lastMessage.senderName||(($=I.lastMessage.sender)==null?void 0:$.name)||"User",senderId:I.lastMessage.senderId||((te=I.lastMessage.sender)==null?void 0:te._id)||((Z=I.lastMessage.sender)==null?void 0:Z.id),timestamp:I.lastMessage.createdAt||I.lastMessage.timestamp})}),q(E),K(M),console.log("✅ UserDashboard chat state refreshed from database")}catch(f){console.error("Error refreshing UserDashboard chat state:",f)}};N.useEffect(()=>{window.testSocketDashboard=()=>{Fe.testConnection()},window.checkSocketDashboard=()=>{Fe.logConnectionStatus()},window.forceSocketConnectDashboard=()=>{Fe.forceConnectionTest()},console.log("🔧 UserDashboard Socket debugging methods available:"),console.log(" - testSocketDashboard() - Test socket connection status"),console.log(" - checkSocketDashboard() - Show current socket status"),console.log(" - forceSocketConnectDashboard() - Force reconnection")},[]);const si=async()=>{try{B(!0);const[f,j]=await Promise.all([it.getActiveUsers(),It.getMyGroups()]);console.log("📊 UserDashboard Data Loaded:"),console.log("👥 Users:",f.data.length),console.log("🏠 Groups:",j.data.length),console.log("📋 Group Details:",j.data.map(T=>{var E;return{id:T.id,name:T.name,members:((E=T.members)==null?void 0:E.length)||0,avatar:T.avatar?"Has Avatar":"No Avatar"}})),v(f.data.filter(T=>T.id!==e.id)),h(j.data)}catch(f){console.error("Error fetching dashboard data:",f),G.error("Failed to load dashboard data")}finally{B(!1)}},ii=()=>{console.log("🔧 Setting up enhanced UserDashboard socket listeners with Context API...");const f=p();console.log("🔗 Current socket status:",f),a(j=>{var Z,fe;console.log("🔔 USERDASHBOARD CONTEXT - received message:",j);const T=typeof j.sender=="object"?j.sender.id||j.sender._id:j.sender,E=typeof j.receiver=="object"?j.receiver.id||j.receiver._id:j.receiver,M=j.id||j._id||j.messageId,I=j.message||j.content,$=T===e.id||T===e._id||T===((Z=e.id)==null?void 0:Z.toString())||T===((fe=e._id)==null?void 0:fe.toString());if(j._isConfirmation||j.isConfirmMessage||j.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const te=oi(j,y,e);if(console.log("📨 ENHANCED USERDASHBOARD MESSAGE FILTERING:",{senderId:T,receiverId:E,messageId:M,messageText:I,selectedChatId:y==null?void 0:y.id,selectedChatType:y==null?void 0:y.type,currentUserId:e.id,isCurrentUserSender:$,isForCurrentChat:te,messageData:j}),te&&y)console.log("📨 Processing message for current active dashboard chat"),$?console.log("📨 Message from current user - handled by optimistic updates"):(console.log("📨 Adding external message to current dashboard chat immediately"),m(Q=>{if(Q.some(le=>{var wt,Ht;const dt=le.id||le._id||le.messageId,Se=le.message||le.content,vt=((wt=le.sender)==null?void 0:wt.id)||((Ht=le.sender)==null?void 0:Ht._id)||le.sender,Ye=le.createdAt||le.timestamp,Xe=j.createdAt||j.timestamp;return!!(dt===M&&M||Se===I&&String(vt)===String(T)&&Xe&&Ye&&Math.abs(new Date(Xe)-new Date(Ye))<5e3||le.isOptimistic&&Se===I&&String(vt)===String(T)&&Xe&&Ye&&Math.abs(new Date(Xe)-new Date(Ye))<1e4)}))return console.log("🔄 UserDashboard enhanced detection: Message already exists - confirmed duplicate",{messageId:M,messageText:I==null?void 0:I.substring(0,20),senderId:T,isDuplicate:!0}),Q;console.log("✅ REAL-TIME USERDASHBOARD: NEW message confirmed - Adding to active chat",{messageId:M,messageText:I==null?void 0:I.substring(0,20),senderId:T,isDuplicate:!1});const ne=nn(j,T);return rn(y.id,j,T),setTimeout(()=>{ur()},100),[...Q,ne]}));else if(I&&!$){const Q=T||j.sender;Q&&Q!==e.id&&(console.log("📬 Incrementing unread count for dashboard chat:",Q),q(ue=>({...ue,[Q]:(ue[Q]||0)+1})),rn(Q,j,T),setTimeout(()=>{ur()},100))}}),u(j=>{console.log("🔄 Dashboard message sent confirmation received:",j),j&&j.id&&m(T=>{const E=T.filter(I=>!I.isOptimistic),M={id:j.id,message:j.message,messageType:j.messageType||"text",fileUrl:j.fileUrl,fileName:j.fileName,fileSize:j.fileSize,fileType:j.fileType,sender:j.sender,createdAt:j.createdAt||j.timestamp,timestamp:j.timestamp,isOptimistic:!1};return[...E,M]})}),c(j=>{var Z,fe,Q,ue;console.log("🔔 USERDASHBOARD GROUP MESSAGE CONTEXT - received message:",j);const T=typeof j.sender=="object"?j.sender.id||j.sender._id:j.sender,E=j.groupId||((Z=j.group)==null?void 0:Z.id)||((fe=j.group)==null?void 0:fe._id),M=j.id||j._id||j.messageId,I=j.message||j.content,$=T===e.id||T===e._id||T===((Q=e.id)==null?void 0:Q.toString())||T===((ue=e._id)==null?void 0:ue.toString());if(j._isConfirmation||j.isConfirmMessage||j.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const te=y&&y.type==="group"&&(E===y.id||String(E)===String(y.id));if(console.log("📨 USERDASHBOARD GROUP MESSAGE FILTERING:",{senderId:T,groupId:E,messageId:M,messageText:I,selectedChatId:y==null?void 0:y.id,selectedChatType:y==null?void 0:y.type,currentUserId:e.id,isCurrentUserSender:$,isForCurrentGroup:te,messageData:j}),te&&y)console.log("📨 Processing group message for current UserDashboard group"),$?console.log("📨 Group message from current user - handled by optimistic updates"):(console.log("📨 Adding external group message to current dashboard chat immediately"),m(ne=>{if(ne.some(Se=>{var pr,xu;const vt=Se.id||Se._id||Se.messageId,Ye=Se.message||Se.content,Xe=((pr=Se.sender)==null?void 0:pr.id)||((xu=Se.sender)==null?void 0:xu._id)||Se.sender,wt=Se.createdAt||Se.timestamp,Ht=j.createdAt||j.timestamp;return!!(vt===M&&M||Ye===I&&String(Xe)===String(T)&&Ht&&wt&&Math.abs(new Date(Ht)-new Date(wt))<5e3||Se.isOptimistic&&Ye===I&&String(Xe)===String(T)&&Ht&&wt&&Math.abs(new Date(Ht)-new Date(wt))<1e4)}))return console.log("🔄 USERDASHBOARD GROUP duplicate detection: Message already exists",{messageId:M,messageText:I==null?void 0:I.substring(0,20),senderId:T==null?void 0:T.toString(),isDuplicate:!0}),ne;console.log("✅ USERDASHBOARD GROUP REAL-TIME: NEW message confirmed - Adding to active group",{messageId:M,messageText:I==null?void 0:I.substring(0,20),senderId:T,groupId:E});const dt=nn(j,T);return rn(y.id,j,T),setTimeout(()=>{ur()},100),[...ne,dt]}));else if(I&&!$){const ne=E||j.groupId;ne&&(!y||y.type!=="group"||String(ne)!==String(y.id))&&(console.log("📬 UserDashboard incrementing unread count for group:",ne),q(dt=>({...dt,[ne]:(dt[ne]||0)+1})),rn(ne,j,T),setTimeout(()=>{ur()},100))}})},oi=(f,j,T)=>{var $,te,Z,fe;if(!j)return!1;const E=(($=f.sender)==null?void 0:$.id)||((te=f.sender)==null?void 0:te._id)||f.sender,M=((Z=f.receiver)==null?void 0:Z.id)||((fe=f.receiver)==null?void 0:fe._id)||f.receiver,I=f.chatId||f.chatRoom;return j.type==="personal"&&j.id&&(E===j.id&&M===T.id||E===T.id&&M===j.id||String(E)===String(j.id)||String(M)===String(j.id))?!0:j.type==="group"?I===j.id||f.groupId===j.id:!1},nn=(f,j)=>{var T,E;return{id:f.id||f._id||f.messageId,message:f.message||f.content,messageType:f.messageType||"text",fileUrl:f.fileUrl,fileName:f.fileName,fileSize:f.fileSize,fileType:f.fileType,sender:typeof f.sender=="object"?f.sender:{id:j,name:f.senderName||((T=f.sender)==null?void 0:T.name)||"User",profileImage:f.senderProfileImage||((E=f.sender)==null?void 0:E.profileImage)},createdAt:f.createdAt||f.timestamp||new Date().toISOString(),timestamp:f.timestamp||f.createdAt,isFromOtherUser:!(j===e.id||j===e._id)}},rn=(f,j,T)=>{const E=T===e.id||T===e._id;K(M=>{var I;return{...M,[f]:{id:j.id||j._id||j.messageId,message:j.message||j.content,senderName:E?"You":j.senderName||((I=j.sender)==null?void 0:I.name)||"User",senderId:T,timestamp:j.createdAt||j.timestamp||new Date().toISOString()}}})},Zr=async()=>{var f;try{let j;if(y.type==="personal"){if(!y.id){console.error("User ID is undefined for personal chat");return}j=await _e.getPersonalMessages(y.id)}else{if(!y.id){console.error("Group ID is undefined for group chat");return}j=await _e.getGroupMessages(y.id)}const T=j.data;if(m(T),T.length>0){const E=T[T.length-1];rn(y.id,E,((f=E.sender)==null?void 0:f.id)||E.sender)}}catch(j){console.error("Error fetching messages:",j),G.error("Failed to load messages")}},dr=f=>{const j=document.createElement("input");j.type="file",j.style.display="none",f==="image"?j.accept="image/*":f==="video"?j.accept="video/*":f==="document"&&(j.accept=".pdf,.doc,.docx,.txt,.csv,.xls,.xlsx"),j.onchange=T=>{const E=T.target.files[0];if(E){if(J(E),E.type.startsWith("image/")){const M=new FileReader;M.onload=I=>ee(I.target.result),M.readAsDataURL(E)}else ee(null);U(!1)}},document.body.appendChild(j),j.click(),document.body.removeChild(j)},fr=()=>{J(null),ee(null)},es=async(f,j,T)=>{try{R(ne=>({...ne,[T]:{progress:0,downloading:!0}}));const E=await fetch(ie(f)),M=E.headers.get("content-length"),I=parseInt(M,10);if(!E.ok)throw new Error("Download failed");const $=E.body.getReader(),te=[];let Z=0;for(;;){const{done:ne,value:le}=await $.read();if(ne)break;te.push(le),Z+=le.length;const dt=I?Math.round(Z/I*100):0;R(Se=>({...Se,[T]:{progress:dt,downloading:!0}}))}const fe=new Blob(te),Q=window.URL.createObjectURL(fe),ue=document.createElement("a");ue.href=Q,ue.download=j,document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),window.URL.revokeObjectURL(Q),R(ne=>({...ne,[T]:{progress:100,downloading:!1}})),V(ne=>{const le={...ne,[T]:!0};try{sessionStorage.setItem("downloadedMessages",JSON.stringify(le))}catch{}return le}),setTimeout(()=>{R(ne=>{const le={...ne};return delete le[T],le})},2e3)}catch(E){console.error("Download failed:",E),R(M=>({...M,[T]:{progress:0,downloading:!1,error:!0}}))}};N.useEffect(()=>{const f=j=>{ae&&!j.target.closest(".file-options-container")&&U(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[ae]);const cl=async f=>{if(f.preventDefault(),!g.trim()&&!L||!y)return;if(y.type==="personal"&&y.isActive===!1){G.error("Cannot send messages to disabled users");return}const j=g.trim();C("");try{let T={sender:e.id,message:j,messageType:"text"};if(y.type==="personal"?T.receiver=y.id:T.group=y.id,L){const E=new FormData;y.type==="personal"?E.append("receiver",y.id):E.append("group",y.id),E.append("message",j),E.append("file",L);let M="file";L.type.startsWith("image/")?M="image":L.type.startsWith("video/")&&(M="video");const I={id:Date.now(),message:j||L.name,messageType:M,fileUrl:URL.createObjectURL(L),fileName:L.name,fileSize:L.size,fileType:L.type,sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};m($=>[...$,I]),rn(y.id,{id:I.id,message:I.message,createdAt:I.createdAt},e.id),y.type==="personal"?await _e.sendPersonalMessage(E):await _e.sendGroupMessage(E),fr()}else{const E={id:Date.now(),message:j,messageType:"text",sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};if(m(M=>[...M,E]),rn(y.id,{id:E.id,message:E.message,createdAt:E.createdAt},e.id),y.type==="personal")try{await s(y.id,j,"text",!1),console.log("✅ Dashboard message sent via context socket")}catch(M){console.warn("Context socket failed, trying API:",M),await _e.sendPersonalMessage(T)}else try{await s(y.id,j,"text",!0),console.log("✅ Dashboard group message sent via context socket")}catch(M){console.warn("Context socket failed, trying API:",M),await _e.sendGroupMessage({sender:e.id,group:y.id,message:j,timestamp:new Date().toISOString()})}}console.log("✅ Dashboard message sent successfully")}catch(T){console.error("❌ Failed to send dashboard message:",T),G.error("Failed to send message"),m(E=>E.filter(M=>!M.isOptimistic))}},yu=()=>{var f;(f=Wn.current)==null||f.scrollIntoView({behavior:"smooth"})},li=()=>{t(),G.success("Logged out successfully")},_=[...d.map(f=>({id:f.id,name:f.name,email:f.email,type:"personal",avatar:f.name.charAt(0).toUpperCase(),profileImage:f.profileImage,lastMessage:H[f.id]||null,isActive:f.isActive})),...b.map(f=>{var j;return{id:f.id,name:f.name,email:`${((j=f.members)==null?void 0:j.length)||0} members`,type:"group",avatar:f.avatar?`${ve}${f.avatar}`:"G",profileImage:f.avatar,lastMessage:H[f.id]||null}})].filter(f=>f.name.toLowerCase().includes(O.toLowerCase())||f.email.toLowerCase().includes(O.toLowerCase()));return z?o.jsx("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsx("div",{className:"h-screen bg-gray-50 flex",children:o.jsxs("div",{className:"w-full h-screen flex bg-white shadow-lg",children:[o.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"WhatsApp Chat"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(jo,{to:"/profile",className:"text-gray-500 hover:text-gray-700",children:o.jsx(hu,{className:"w-5 h-5"})}),o.jsx("button",{onClick:li,className:"p-1 text-gray-500 hover:text-gray-700",title:"Logout",children:o.jsx(Sh,{className:"w-5 h-5"})})]})]}),o.jsx("div",{className:"flex items-center space-x-3 mb-3",children:o.jsxs(jo,{to:"/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?o.jsx("img",{src:`${ve}${e.profileImage}`,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium",children:e.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),o.jsx("p",{className:"text-xs text-green-600",children:"Online"})]})]})}),o.jsxs("div",{className:"relative",children:[o.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search or start new chat",value:O,onChange:f=>F(f.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[_.map(f=>o.jsx("div",{onClick:()=>{console.log("Selecting chat:",f),S({type:f.type,id:f.id,name:f.name,profileImage:f.profileImage,isActive:f.isActive!==!1}),X[f.id]&&(q(j=>{const T={...j};return delete T[f.id],T}),_e.updateChatState({chatId:f.id,chatType:f.type,action:"clear_unread"}).catch(j=>{console.error("Error clearing unread count:",j)}))},className:`p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 ${(y==null?void 0:y.id)===f.id&&(y==null?void 0:y.type)===f.type?"bg-green-50":""} ${f.type==="personal"&&f.isActive===!1?"opacity-60 bg-red-50 border-l-4 border-red-300":""}`,title:f.type==="personal"&&f.isActive===!1?"Disabled User":"",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:`w-12 h-12 rounded-full overflow-hidden ${f.type==="personal"&&f.isActive===!1?"bg-gray-300":"bg-gray-200"}`,children:f.type==="personal"?f.profileImage?o.jsx("img",{src:`${ve}${f.profileImage}`,alt:f.name,className:`w-full h-full object-cover ${f.isActive===!1?"grayscale opacity-70":""}`}):o.jsx("div",{className:`w-full h-full ${f.isActive===!1?"bg-gray-400":"bg-green-500"} flex items-center justify-center`,children:o.jsx("span",{className:"text-white font-semibold text-lg",children:f.avatar})}):f.profileImage?o.jsx("img",{src:f.avatar,alt:f.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Et,{className:"w-6 h-6 text-white"})})}),f.type==="personal"&&f.isActive!==!1&&o.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"}),f.type==="personal"&&f.isActive===!1&&o.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-red-500 rounded-full border-2 border-white flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"×"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("h3",{className:`truncate ${f.type==="personal"&&f.isActive===!1?"font-medium text-red-700 line-through":"font-medium text-gray-900"}`,children:[f.name,f.type==="personal"&&f.isActive===!1&&o.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Disabled)"})]}),f.type==="group"&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Group"}),De&&ce&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/30",onClick:()=>Y(!1),children:o.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-xl w-full sm:w-80 p-4 shadow-xl",onClick:j=>j.stopPropagation(),children:[o.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{className:"w-full btn-secondary",onClick:ll,children:"Copy"}),ce.messageType==="text"&&(()=>{var E,M,I,$;const j=((E=ce.sender)==null?void 0:E.id)||((M=ce.sender)==null?void 0:M._id)||ce.sender;return j===e.id||j===e._id||j===((I=e.id)==null?void 0:I.toString())||j===(($=e._id)==null?void 0:$.toString())?o.jsx("button",{className:"w-full btn-primary",onClick:ri,children:"Edit"}):null})(),o.jsx("button",{className:"w-full btn-primary",onClick:al,children:"Forward"}),o.jsx("button",{className:"w-full btn-secondary",onClick:()=>Y(!1),children:"Cancel"})]})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"12:30"}),X[f.id]&&X[f.id]>0&&o.jsx("div",{className:"bg-green-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:X[f.id]>99?"99+":X[f.id]})]})]}),o.jsx("p",{className:`text-sm truncate ${f.type==="personal"&&f.isActive===!1?"text-red-400":"text-gray-500"}`,children:f.type==="personal"&&f.isActive===!1?"User is disabled - cannot send new messages":f.lastMessage&&f.lastMessage.message?`${f.lastMessage.senderName||"You"}: ${f.lastMessage.message}`:"No messages yet"})]})]})},`${f.type}-${f.id}`)),_.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(tr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 text-sm",children:O?"No chats found.":"No chats available."})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col",children:y?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:y.type==="personal"?y.profileImage?o.jsx("img",{src:`${ve}${y.profileImage}`,alt:y.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold",children:y.name.charAt(0).toUpperCase()})}):y.profileImage?o.jsx("img",{src:`${ve}${y.profileImage}`,alt:y.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Et,{className:"w-5 h-5 text-white"})})}),o.jsxs("div",{className:`${y.type==="group"?"cursor-pointer hover:bg-gray-50 p-2 rounded-lg transition-colors":""}`,onClick:()=>{y.type==="group"&&(window.location.href=`/group/${y.id}`)},title:y.type==="group"?"Click to view group info":"",children:[o.jsxs("h3",{className:`font-semibold ${y.type==="personal"&&y.isActive===!1?"text-red-700":"text-gray-900"}`,children:[y.name,y.type==="personal"&&y.isActive===!1&&o.jsx("span",{className:"ml-2 text-xs text-red-500",children:"(Disabled)"})]}),o.jsx("p",{className:`text-xs ${y.type==="personal"&&y.isActive===!1?"text-red-400":"text-gray-500"}`,children:y.type==="personal"?y.isActive===!1?"User is disabled - viewing mode only":"last seen today at 10:30 AM":`${y.email}`})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Ow,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"}),o.jsx(_o,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"}),o.jsx(ec,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 relative",children:o.jsxs("div",{className:"max-w-8xl mx-auto",children:[x.map((f,j)=>{var I,$,te,Z,fe,Q,ue;let T=!1;if(typeof f.sender=="object"&&f.sender!==null){const ne=f.sender._id||f.sender.id;T=ne===e.id||ne===e._id||ne===((I=e.id)==null?void 0:I.toString())||ne===(($=e._id)==null?void 0:$.toString())}else T=f.sender===e.id||f.sender===e._id||f.sender===((te=e.id)==null?void 0:te.toString())||f.sender===((Z=e._id)==null?void 0:Z.toString());const E=typeof f.sender=="object"?(fe=f.sender)==null?void 0:fe.name:"User",M=typeof f.sender=="object"?(Q=f.sender)==null?void 0:Q.profileImage:null;return o.jsx("div",{className:`flex ${T?"justify-end":"justify-start"} mb-4`,children:o.jsxs("div",{className:`flex items-start gap-2 max-w-sm lg:max-w-md ${T?"flex-row-reverse":"flex-row"}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-300 flex-shrink-0",children:T?e.profileImage?o.jsx("img",{src:`${ve}${e.profileImage}`,alt:e.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:e.name.charAt(0).toUpperCase()})}):M?o.jsx("img",{src:`${ve}${M}`,alt:E,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-400 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:String(E).charAt(0).toUpperCase()})})}),o.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg ${T?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"} ${De&&ce&&Je(ce)===Je(f)?"ring-2 ring-blue-400":""}`,onMouseDown:()=>Re(f),onMouseUp:rt,onMouseLeave:rt,onTouchStart:()=>Re(f),onTouchEnd:rt,onContextMenu:ne=>{ne.preventDefault(),en(f),Y(!0)},children:[f.fileUrl&&o.jsx("div",{className:"mb-2",children:f.messageType==="image"?o.jsxs("div",{className:"relative",onMouseDown:()=>Re(f),onMouseUp:rt,onMouseLeave:rt,onTouchStart:()=>Re(f),onTouchEnd:rt,children:[o.jsx("img",{src:ie(f.fileUrl),alt:f.fileName,className:`max-w-xs rounded-lg ${!T&&!P[f.id||f._id]?"blur-sm cursor-pointer":"cursor-default"} hover:opacity-90`,onClick:()=>{T||es(f.fileUrl,f.fileName,f.id||f._id)}}),!T&&!P[f.id||f._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Mr,{className:"w-3 h-3"}),((f.fileSize||0)/1024/1024).toFixed(1)," MB"]}),k[f.id||f._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[k[f.id||f._id].progress,"%"]})]})})]}):f.messageType==="video"?o.jsxs("div",{className:"relative",onMouseDown:()=>Re(f),onMouseUp:rt,onMouseLeave:rt,onTouchStart:()=>Re(f),onTouchEnd:rt,children:[o.jsx("video",{src:ie(f.fileUrl),controls:!0,className:`max-w-xs rounded-lg ${!T&&!P[f.id||f._id]?"blur-sm":""}`,onClick:()=>{T||es(f.fileUrl,f.fileName,f.id||f._id)}}),!T&&!P[f.id||f._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Mr,{className:"w-3 h-3"}),((f.fileSize||0)/1024/1024).toFixed(1)," MB"]}),k[f.id||f._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[k[f.id||f._id].progress,"%"]})]})})]}):o.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-20 rounded-lg relative",onMouseDown:()=>Re(f),onMouseUp:rt,onMouseLeave:rt,onTouchStart:()=>Re(f),onTouchEnd:rt,children:[o.jsx(Or,{className:"w-5 h-5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:f.fileName}),o.jsxs("p",{className:"text-xs opacity-75",children:[(f.fileSize/1024/1024).toFixed(2)," MB"]})]}),!T&&o.jsx("button",{onClick:()=>es(f.fileUrl,f.fileName,f.id||f._id),className:"p-1 hover:bg-white hover:bg-opacity-20 rounded",disabled:(ue=k[f.id||f._id])==null?void 0:ue.downloading,children:o.jsx(Mr,{className:"w-4 h-4"})}),k[f.id||f._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-white rounded-lg p-2 text-center",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin mx-auto mb-1"}),o.jsxs("p",{className:"text-xs text-white",children:[k[f.id||f._id].progress,"%"]})]})})]})}),f.message&&(Bt&&Je(Bt)===Je(f)?o.jsxs("div",{className:"mb-2",children:[o.jsx("input",{type:"text",value:tn,onChange:ne=>Tt(ne.target.value),className:"w-full px-2 py-1 text-sm bg-white bg-opacity-20 rounded border-none focus:outline-none focus:ring-1 focus:ring-white",autoFocus:!0,onKeyDown:ne=>{ne.key==="Enter"&&Yr(),ne.key==="Escape"&&Xr()}}),o.jsxs("div",{className:"flex gap-1 mt-1",children:[o.jsx("button",{onClick:Yr,className:"text-xs px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),o.jsx("button",{onClick:Xr,className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]}):o.jsxs("p",{className:"text-sm mb-1 break-words",children:[f.message,(f.isEdited||f.editedAt)&&o.jsx("span",{className:"text-xs opacity-75 ml-1",children:"(edited)"})]})),o.jsx("p",{className:`text-xs self-end ${T?"text-green-100":"text-gray-500"}`,children:new Date(f.createdAt||f.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},f.id||f._id||j)}),o.jsx("div",{ref:Wn})]})}),o.jsx("div",{className:"bg-white border-t border-gray-200 p-4",children:y.type==="personal"&&y.isActive===!1?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg px-4 py-3 w-full text-center",children:o.jsx("p",{className:"text-red-600 text-sm font-medium",children:"This user is disabled. You can view previous messages but cannot send new ones."})})}):o.jsxs("div",{className:"relative",children:[ae&&o.jsx("div",{className:"file-options-container absolute bottom-16 left-4 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-50",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:()=>dr("image"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(pu,{className:"w-8 h-8 text-green-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Image"})]}),o.jsxs("button",{onClick:()=>dr("video"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(_o,{className:"w-8 h-8 text-blue-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Video"})]}),o.jsxs("button",{onClick:()=>dr("document"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(Or,{className:"w-8 h-8 text-purple-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Document"})]})]})}),L&&o.jsx("div",{className:"mb-3 p-3 bg-gray-100 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[se?o.jsx("img",{src:se,alt:"Preview",className:"w-12 h-12 object-cover rounded"}):o.jsx(Or,{className:"w-8 h-8 text-gray-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:L.name}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(L.size/1024/1024).toFixed(2)," MB"]})]})]}),o.jsx("button",{onClick:fr,className:"text-gray-500 hover:text-gray-700",children:"×"})]})}),o.jsxs("form",{onSubmit:cl,className:"flex items-center space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>U(!ae),className:"p-2 text-gray-500 hover:text-gray-700",title:"Attach file",children:o.jsx(bh,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex-1 relative",children:o.jsx("input",{type:"text",value:g,onChange:f=>C(f.target.value),placeholder:"Type a message",className:"w-full py-2 px-4 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})}),o.jsx("button",{type:"submit",disabled:!g.trim()&&!L,className:"bg-green-500 text-white p-2 rounded-full hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.jsx(Ch,{className:"w-5 h-5"})})]})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(tr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Welcome to WhatsApp Chat"}),o.jsx("p",{className:"text-gray-500 max-w-md",children:"Select a conversation from the sidebar to start messaging. Your conversations will appear on the left side."})]})})})]})})},Vw=()=>{const{user:e}=Zt(),{socket:t,isConnected:n,sendMessage:r,joinGroup:s,leaveGroup:i,onReceiveMessage:l,onReceiveGroupMessage:a,onMessageSent:c,getConnectionStatus:u}=fu(),[p,d]=N.useState([]),[v,b]=N.useState([]),[h,y]=N.useState(null),[S,x]=N.useState([]),[m,g]=N.useState(""),[C,O]=N.useState(""),[F,z]=N.useState(!0),[B,X]=N.useState({}),[q,H]=N.useState({}),[K,L]=N.useState(null),[J,se]=N.useState(null),[ee,ae]=N.useState(!1),[U,k]=N.useState({}),[R,P]=N.useState(()=>{try{const w=sessionStorage.getItem("downloadedMessages");return w?JSON.parse(w):{}}catch{return{}}}),V=w=>w&&(/^https?:\/\//i.test(w)?w:`${ve}${w}`),[ie,xe]=N.useState(null),[ge,De]=N.useState(!1),[Y,ce]=N.useState(null),[en,Bt]=N.useState(null),[xn,tn]=N.useState(""),Tt=w=>((w==null?void 0:w.id)||(w==null?void 0:w._id)||(w==null?void 0:w.messageId)||"").toString(),Je=w=>{ie&&clearTimeout(ie);const _=setTimeout(()=>{ce(w),De(!0)},700);xe(_)},Re=()=>{ie&&(clearTimeout(ie),xe(null))},rt=async()=>{try{const w=(Y==null?void 0:Y.messageType)==="text"?(Y==null?void 0:Y.message)||"":V(Y==null?void 0:Y.fileUrl)||(Y==null?void 0:Y.fileName)||"";w&&await navigator.clipboard.writeText(w)}catch{}De(!1)},ll=()=>{if(Y){try{sessionStorage.setItem("forwardMessage",JSON.stringify({id:Y.id||Y._id,message:Y.message,messageType:Y.messageType,fileUrl:Y.fileUrl,fileName:Y.fileName,fileSize:Y.fileSize,fileType:Y.fileType}))}catch{}window.location.href="/forward"}De(!1)},al=()=>{var w,_,f,j;if(Y&&Y.messageType==="text"){const T=((w=Y.sender)==null?void 0:w.id)||((_=Y.sender)==null?void 0:_._id)||Y.sender;T===e.id||T===e._id||T===((f=e.id)==null?void 0:f.toString())||T===((j=e._id)==null?void 0:j.toString())?(Bt(Y),tn(Y.message||"")):G.error("You can only edit your own messages")}De(!1)},ri=async()=>{if(!(!en||!xn.trim()))try{x(w=>w.map(_=>Tt(_)===Tt(en)?{..._,message:xn.trim(),isEdited:!0,editedAt:new Date().toISOString()}:_)),await _e.editMessage(en.id||en._id,xn.trim()),Bt(null),tn("")}catch(w){console.error("Failed to edit message:",w),G.error("Failed to edit message")}},Yr=()=>{Bt(null),tn("")},Xr=N.useRef(null);N.useEffect(()=>((async()=>{try{console.log("🔄 Loading chat state from database...");const _=await _e.getChatState(),{personalChats:f,groupChats:j}=_.data,T={},E={};f.forEach(M=>{var I,$,te;M.unreadCount>0?T[M.chatId]=M.unreadCount:delete T[M.chatId],M.lastMessage&&M.lastMessage.message&&(E[M.chatId]={id:M.lastMessage._id||M.lastMessage.id,message:M.lastMessage.message,senderName:M.lastMessage.senderName||((I=M.lastMessage.sender)==null?void 0:I.name)||"User",senderId:M.lastMessage.senderId||(($=M.lastMessage.sender)==null?void 0:$._id)||((te=M.lastMessage.sender)==null?void 0:te.id),timestamp:M.lastMessage.createdAt||M.lastMessage.timestamp})}),j.forEach(M=>{var I,$,te;M.unreadCount>0?T[M.chatId]=M.unreadCount:delete T[M.chatId],M.lastMessage&&M.lastMessage.message&&(E[M.chatId]={id:M.lastMessage._id||M.lastMessage.id,message:M.lastMessage.message,senderName:M.lastMessage.senderName||((I=M.lastMessage.sender)==null?void 0:I.name)||"User",senderId:M.lastMessage.senderId||(($=M.lastMessage.sender)==null?void 0:$._id)||((te=M.lastMessage.sender)==null?void 0:te.id),timestamp:M.lastMessage.createdAt||M.lastMessage.timestamp})}),X(T),H(E),console.log("✅ Chat state loaded from database:",{unreadCounts:T,lastMessages:Object.keys(E).length})}catch(_){console.error("Error loading chat state from database:",_)}})(),ur(),()=>{Fe.removeAllListeners(),Fe.healthCheckInterval&&(clearInterval(Fe.healthCheckInterval),delete Fe.healthCheckInterval)}),[]),N.useEffect(()=>(h&&(rn(),si(),h.type==="group"&&(s(h.id),console.log("🏠 Joined group room for:",h.name))),()=>{Fe.removeAllListeners(),h&&h.type==="group"&&(i(h.id),console.log("🚪 Left group room for:",h.name)),Fe.healthCheckInterval&&(clearInterval(Fe.healthCheckInterval),delete Fe.healthCheckInterval)}),[h]),N.useEffect(()=>{cl()},[S]);const Wn=async()=>{try{console.log("🔄 Refreshing chat state from database...");const w=await _e.getChatState(),{personalChats:_,groupChats:f}=w.data,j={},T={};_.forEach(E=>{var M,I,$;E.unreadCount>0&&(j[E.chatId]=E.unreadCount),E.lastMessage&&E.lastMessage.message&&(T[E.chatId]={id:E.lastMessage._id||E.lastMessage.id,message:E.lastMessage.message,senderName:E.lastMessage.senderName||((M=E.lastMessage.sender)==null?void 0:M.name)||"User",senderId:E.lastMessage.senderId||((I=E.lastMessage.sender)==null?void 0:I._id)||(($=E.lastMessage.sender)==null?void 0:$.id),timestamp:E.lastMessage.createdAt||E.lastMessage.timestamp})}),f.forEach(E=>{var M,I,$;E.unreadCount>0&&(j[E.chatId]=E.unreadCount),E.lastMessage&&E.lastMessage.message&&(T[E.chatId]={id:E.lastMessage._id||E.lastMessage.id,message:E.lastMessage.message,senderName:E.lastMessage.senderName||((M=E.lastMessage.sender)==null?void 0:M.name)||"User",senderId:E.lastMessage.senderId||((I=E.lastMessage.sender)==null?void 0:I._id)||(($=E.lastMessage.sender)==null?void 0:$.id),timestamp:E.lastMessage.createdAt||E.lastMessage.timestamp})}),X(j),H(T),console.log("✅ Chat state refreshed from database")}catch(w){console.error("Error refreshing chat state:",w)}};N.useEffect(()=>{window.testSocket=()=>{Fe.testConnection()},window.checkSocket=()=>{Fe.logConnectionStatus()},window.forceSocketConnect=()=>{Fe.forceConnectionTest()},console.log("🔧 Socket debugging methods available:"),console.log(" - testSocket() - Test socket connection status"),console.log(" - checkSocket() - Show current socket status"),console.log(" - forceSocketConnect() - Force reconnection")},[]);const ur=async()=>{try{z(!0);const[w,_]=await Promise.all([it.getActiveUsers(),It.getMyGroups()]);console.log("📊 Chat Data Loaded:"),console.log("👥 Users:",w.data.length),console.log("🏠 Groups:",_.data.length),console.log("📋 Group Details:",_.data.map(f=>{var j;return{id:f.id,name:f.name,members:((j=f.members)==null?void 0:j.length)||0,avatar:f.avatar?"Has Avatar":"No Avatar"}})),d(w.data.filter(f=>f.id!==e.id)),b(_.data),si()}catch(w){console.error("Error fetching initial data:",w),G.error("Failed to load chat data")}finally{z(!1)}},si=()=>{console.log("🔧 Setting up enhanced socket listeners with Context API...");const w=u();console.log("🔗 Current socket status:",w),l(_=>{var $,te;console.log("🔔 CHATROOM CONTEXT - received message:",_);const f=typeof _.sender=="object"?_.sender.id||_.sender._id:_.sender,j=typeof _.receiver=="object"?_.receiver.id||_.receiver._id:_.receiver,T=_.id||_._id||_.messageId,E=_.message||_.content,M=f===e.id||f===e._id||f===(($=e.id)==null?void 0:$.toString())||f===((te=e._id)==null?void 0:te.toString());if(_._isConfirmation||_.isConfirmMessage||_.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const I=ii(_,h,e);if(console.log("📨 ENHANCED MESSAGE FILTERING:",{senderId:f,receiverId:j,messageId:T,messageText:E,selectedChatId:h==null?void 0:h.id,selectedChatType:h==null?void 0:h.type,currentUserId:e.id,isCurrentUserSender:M,isForCurrentChat:I,messageData:_}),I&&h)console.log("📨 Processing message for current active chat"),M?console.log("📨 Message from current user - handled by optimistic updates"):(console.log("📨 Adding external message to current chat immediately"),x(Z=>{if(Z.some(ue=>{var Ye,Xe;const ne=ue.id||ue._id||ue.messageId,le=ue.message||ue.content,dt=((Ye=ue.sender)==null?void 0:Ye.id)||((Xe=ue.sender)==null?void 0:Xe._id)||ue.sender,Se=ue.createdAt||ue.timestamp,vt=_.createdAt||_.timestamp;return!!(ne===T&&T||le===E&&String(dt)===String(f)&&vt&&Se&&Math.abs(new Date(vt)-new Date(Se))<5e3||ue.isOptimistic&&le===E&&String(dt)===String(f)&&vt&&Se&&Math.abs(new Date(vt)-new Date(Se))<1e4)}))return console.log("🔄 Enhanced detection: Message already exists - confirmed duplicate",{messageId:T,messageText:E==null?void 0:E.substring(0,20),senderId:f,isDuplicate:!0}),Z;console.log("✅ REAL-TIME: NEW message confirmed - Adding to active chat",{messageId:T,messageText:E==null?void 0:E.substring(0,20),senderId:f,isDuplicate:!1});const Q=oi(_,f);return nn(h.id,_,f),setTimeout(()=>{Wn()},100),[...Z,Q]}));else if(E&&!M){const Z=f||_.sender;Z&&Z!==e.id&&(console.log("📬 Incrementing unread count for chat:",Z),X(fe=>({...fe,[Z]:(fe[Z]||0)+1})),nn(Z,_,f),setTimeout(()=>{Wn()},100))}}),c(_=>{console.log("🔄 Message sent confirmation received:",_),_&&_.id&&x(f=>{const j=f.filter(E=>!E.isOptimistic),T={id:_.id,message:_.message,messageType:_.messageType||"text",fileUrl:_.fileUrl,fileName:_.fileName,fileSize:_.fileSize,fileType:_.fileType,sender:_.sender,createdAt:_.createdAt||_.timestamp,timestamp:_.timestamp,isOptimistic:!1};return[...j,T]})}),a(_=>{var $,te,Z,fe;console.log("🔔 GROUP MESSAGE CONTEXT - received message:",_);const f=typeof _.sender=="object"?_.sender.id||_.sender._id:_.sender,j=_.groupId||(($=_.group)==null?void 0:$.id)||((te=_.group)==null?void 0:te._id),T=_.id||_._id||_.messageId,E=_.message||_.content,M=f===e.id||f===e._id||f===((Z=e.id)==null?void 0:Z.toString())||f===((fe=e._id)==null?void 0:fe.toString());if(_._isConfirmation||_.isConfirmMessage||_.isMessageSentConfirmation){console.log("🔄 Skipping confirmation message");return}const I=h&&h.type==="group"&&(j===h.id||String(j)===String(h.id));if(console.log("📨 GROUP MESSAGE FILTERING:",{senderId:f,groupId:j,messageId:T,messageText:E,selectedChatId:h==null?void 0:h.id,selectedChatType:h==null?void 0:h.type,currentUserId:e.id,isCurrentUserSender:M,isForCurrentGroup:I,messageData:_}),I&&h)console.log("📨 Processing group message for current group"),M?console.log("📨 Group message from current user - handled by optimistic updates"):(console.log("📨 Adding external group message to current chat immediately"),x(Q=>{if(Q.some(le=>{var wt,Ht;const dt=le.id||le._id||le.messageId,Se=le.message||le.content,vt=((wt=le.sender)==null?void 0:wt.id)||((Ht=le.sender)==null?void 0:Ht._id)||le.sender,Ye=le.createdAt||le.timestamp,Xe=_.createdAt||_.timestamp;return!!(dt===T&&T||Se===E&&String(vt)===String(f)&&Xe&&Ye&&Math.abs(new Date(Xe)-new Date(Ye))<5e3||le.isOptimistic&&Se===E&&String(vt)===String(f)&&Xe&&Ye&&Math.abs(new Date(Xe)-new Date(Ye))<1e4)}))return console.log("🔄 GROUP duplicate detection: Message already exists",{messageId:T,messageText:E==null?void 0:E.substring(0,20),senderId:f==null?void 0:f.toString(),isDuplicate:!0}),Q;console.log("✅ GROUP REAL-TIME: NEW message confirmed - Adding to active group",{messageId:T,messageText:E==null?void 0:E.substring(0,20),senderId:f,groupId:j});const ne=oi(_,f);return nn(h.id,_,f),setTimeout(()=>{Wn()},100),[...Q,ne]}));else if(E&&!M){const Q=j||_.groupId;Q&&(!h||h.type!=="group"||String(Q)!==String(h.id))&&(console.log("📬 Incrementing unread count for group:",Q),X(ne=>({...ne,[Q]:(ne[Q]||0)+1})),nn(Q,_,f),setTimeout(()=>{Wn()},100))}})},ii=(w,_,f)=>{var M,I,$,te;if(!_)return!1;const j=((M=w.sender)==null?void 0:M.id)||((I=w.sender)==null?void 0:I._id)||w.sender,T=(($=w.receiver)==null?void 0:$.id)||((te=w.receiver)==null?void 0:te._id)||w.receiver,E=w.chatId||w.chatRoom;return _.type==="personal"&&_.id&&(j===_.id&&T===f.id||j===f.id&&T===_.id||String(j)===String(_.id)||String(T)===String(_.id))?!0:_.type==="group"?E===_.id||w.groupId===_.id:!1},oi=(w,_)=>{var f,j;return{id:w.id||w._id||w.messageId,message:w.message||w.content,messageType:w.messageType||"text",fileUrl:w.fileUrl,fileName:w.fileName,fileSize:w.fileSize,fileType:w.fileType,sender:typeof w.sender=="object"?w.sender:{id:_,name:w.senderName||((f=w.sender)==null?void 0:f.name)||"User",profileImage:w.senderProfileImage||((j=w.sender)==null?void 0:j.profileImage)},createdAt:w.createdAt||w.timestamp||new Date().toISOString(),timestamp:w.timestamp||w.createdAt,isFromOtherUser:!(_===e.id||_===e._id)}},nn=(w,_,f)=>{var E;const j=f===e.id||f===e._id,T={id:_.id||_._id||_.messageId,message:_.message||_.content,senderName:j?"You":_.senderName||((E=_.sender)==null?void 0:E.name)||"User",senderId:f,timestamp:_.createdAt||_.timestamp||new Date().toISOString()};H(M=>({...M,[w]:T}))},rn=async()=>{var w;try{let _;if(h.type==="personal"){if(!h.id){console.error("User ID is undefined for personal chat");return}_=await _e.getPersonalMessages(h.id)}else{if(!h.id){console.error("Group ID is undefined for group chat");return}_=await _e.getGroupMessages(h.id)}const f=_.data;if(x(f),f.length>0){const j=f[f.length-1];nn(h.id,j,((w=j.sender)==null?void 0:w.id)||j.sender)}}catch(_){console.error("Error fetching messages:",_),G.error("Failed to load messages")}},Zr=w=>{const _=document.createElement("input");_.type="file",_.style.display="none",w==="image"?_.accept="image/*":w==="video"?_.accept="video/*":w==="document"&&(_.accept=".pdf,.doc,.docx,.txt,.csv,.xls,.xlsx"),_.onchange=f=>{const j=f.target.files[0];if(j){if(L(j),j.type.startsWith("image/")){const T=new FileReader;T.onload=E=>se(E.target.result),T.readAsDataURL(j)}else se(null);ae(!1)}},document.body.appendChild(_),_.click(),document.body.removeChild(_)},dr=()=>{L(null),se(null)},fr=async(w,_,f)=>{try{k(Q=>({...Q,[f]:{progress:0,downloading:!0}}));const j=await fetch(V(w)),T=j.headers.get("content-length"),E=parseInt(T,10);if(!j.ok)throw new Error("Download failed");const M=j.body.getReader(),I=[];let $=0;for(;;){const{done:Q,value:ue}=await M.read();if(Q)break;I.push(ue),$+=ue.length;const ne=E?Math.round($/E*100):0;k(le=>({...le,[f]:{progress:ne,downloading:!0}}))}const te=new Blob(I),Z=window.URL.createObjectURL(te),fe=document.createElement("a");fe.href=Z,fe.download=_,document.body.appendChild(fe),fe.click(),document.body.removeChild(fe),window.URL.revokeObjectURL(Z),k(Q=>({...Q,[f]:{progress:100,downloading:!1}})),P(Q=>{const ue={...Q,[f]:!0};try{sessionStorage.setItem("downloadedMessages",JSON.stringify(ue))}catch{}return ue}),setTimeout(()=>{k(Q=>{const ue={...Q};return delete ue[f],ue})},2e3)}catch(j){console.error("Download failed:",j),k(T=>({...T,[f]:{progress:0,downloading:!1,error:!0}}))}};N.useEffect(()=>{const w=_=>{ee&&!_.target.closest(".file-options-container")&&ae(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[ee]);const es=async w=>{if(w.preventDefault(),!m.trim()&&!K||!h)return;const _=m.trim();g("");try{let f,j="text";K&&(K.type.startsWith("image/")?j="image":K.type.startsWith("video/")?j="video":j="file");const T={id:Date.now(),message:_||(K?K.name:""),messageType:j,fileUrl:K?URL.createObjectURL(K):null,fileName:K?K.name:null,fileSize:K?K.size:null,fileType:K?K.type:null,sender:{id:e.id,name:e.name,profileImage:e.profileImage},createdAt:new Date().toISOString(),timestamp:new Date().toISOString(),isOptimistic:!0};if(x(E=>[...E,T]),nn(h.id,{id:T.id,message:T.message,createdAt:T.createdAt},e.id),K){const E=new FormData;E.append("file",K),E.append("message",_),h.type==="personal"?(E.append("receiver",h.id),f=await _e.sendPersonalMessage(E)):(E.append("group",h.id),f=await _e.sendGroupMessage(E)),dr()}else if(h.type==="personal")try{await r(h.id,_,"text",!1),console.log("✅ Message sent via context socket")}catch(E){console.warn("Context socket failed, trying API:",E),await _e.sendPersonalMessage({sender:e.id,receiver:h.id,message:_,timestamp:new Date().toISOString()})}else try{await r(h.id,_,"text",!0),console.log("✅ Group message sent via context socket")}catch(E){console.warn("Context group socket failed, trying API:",E),await _e.sendGroupMessage({sender:e.id,group:h.id,message:_,timestamp:new Date().toISOString()})}console.log("✅ Message sent successfully")}catch(f){console.error("❌ Failed to send message:",f),G.error("Failed to send message"),x(j=>j.filter(T=>!T.isOptimistic))}},cl=()=>{var w;(w=Xr.current)==null||w.scrollIntoView({behavior:"smooth"})},li=[...p.map(w=>({id:w.id,name:w.name,email:w.email,type:"personal",avatar:w.name.charAt(0).toUpperCase(),profileImage:w.profileImage,lastMessage:q[w.id]||null})),...v.map(w=>{var _;return{id:w.id,name:w.name,email:`${((_=w.members)==null?void 0:_.length)||0} members`,type:"group",avatar:w.avatar?`${ve}${w.avatar}`:"G",profileImage:w.avatar,lastMessage:q[w.id]||null}})].filter(w=>w.name.toLowerCase().includes(C.toLowerCase())||w.email.toLowerCase().includes(C.toLowerCase()));return F?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):o.jsx("div",{className:"h-screen bg-gray-50 flex",children:o.jsxs("div",{className:"w-full h-screen flex bg-white shadow-lg",children:[o.jsxs("div",{className:"w-1/3 min-w-[300px] max-w-[400px] bg-white border-r border-gray-200 flex flex-col",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"WhatsApp Chat"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>window.location.href="/profile",className:"text-gray-500 hover:text-gray-700",title:"Profile",children:o.jsx(Ft,{className:"w-5 h-5"})}),o.jsx(ec,{className:"w-5 h-5 text-gray-500 cursor-pointer hover:text-gray-700"})]})]}),o.jsx("div",{className:"flex items-center space-x-3 mb-3",children:o.jsxs("button",{onClick:()=>window.location.href="/profile",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[e.profileImage?o.jsx("img",{src:`${ve}${e.profileImage}`,alt:"Profile",className:"w-10 h-10 rounded-full object-cover"}):o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium",children:e.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:e.name}),o.jsx("p",{className:"text-xs text-green-600",children:"Online"})]})]})})]}),o.jsx("div",{className:"p-3 bg-white border-b border-gray-200",children:o.jsxs("div",{className:"relative",children:[o.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search or start new chat",value:C,onChange:w=>O(w.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})]})}),o.jsxs("div",{className:"flex-1 overflow-y-auto",children:[li.map(w=>o.jsx("div",{onClick:()=>{console.log("Selecting chat:",w),y({type:w.type,id:w.id,name:w.name,profileImage:w.profileImage}),B[w.id]&&(X(_=>{const f={..._};return delete f[w.id],f}),_e.updateChatState({chatId:w.id,chatType:w.type,action:"clear_unread"}).catch(_=>{console.error("Error clearing unread count:",_)}))},className:`p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 ${(h==null?void 0:h.id)===w.id&&(h==null?void 0:h.type)===w.type?"bg-green-50":""}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"relative",children:o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200",children:w.type==="personal"?w.profileImage?o.jsx("img",{src:`${ve}${w.profileImage}`,alt:w.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold text-lg",children:w.avatar})}):w.profileImage?o.jsx("img",{src:w.avatar,alt:w.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Et,{className:"w-6 h-6 text-white"})})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h3",{className:"font-medium text-gray-900 truncate",children:w.name}),w.type==="group"&&o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Group"}),ge&&Y&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/30",onClick:()=>De(!1),children:o.jsxs("div",{className:"bg-white rounded-t-2xl sm:rounded-xl w-full sm:w-80 p-4 shadow-xl",onClick:_=>_.stopPropagation(),children:[o.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"Actions"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("button",{className:"w-full btn-secondary",onClick:rt,children:"Copy"}),Y.messageType==="text"&&(()=>{var j,T,E,M;const _=((j=Y.sender)==null?void 0:j.id)||((T=Y.sender)==null?void 0:T._id)||Y.sender;return _===e.id||_===e._id||_===((E=e.id)==null?void 0:E.toString())||_===((M=e._id)==null?void 0:M.toString())?o.jsx("button",{className:"w-full btn-primary",onClick:al,children:"Edit"}):null})(),o.jsx("button",{className:"w-full btn-primary",onClick:ll,children:"Forward"}),o.jsx("button",{className:"w-full btn-secondary",onClick:()=>De(!1),children:"Cancel"})]})]})})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"12:30"}),B[w.id]&&B[w.id]>0&&o.jsx("div",{className:"bg-green-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:B[w.id]>99?"99+":B[w.id]})]})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:w.lastMessage&&w.lastMessage.message?`${w.lastMessage.senderName||"You"}: ${w.lastMessage.message}`:"No messages yet"})]})]})},`${w.type}-${w.id}`)),li.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(tr,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 text-sm",children:C?"No chats found.":"No chats available."})]})]})]}),o.jsx("div",{className:"flex-1 flex flex-col",children:h?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:h.type==="personal"?h.profileImage?o.jsx("img",{src:`${ve}${h.profileImage}`,alt:h.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold",children:h.name.charAt(0).toUpperCase()})}):h.profileImage?o.jsx("img",{src:`${ve}${h.profileImage}`,alt:h.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Et,{className:"w-5 h-5 text-white"})})}),o.jsxs("div",{className:`cursor-pointer ${h.type==="group"?"hover:bg-gray-50 p-2 rounded-lg transition-colors":""}`,onClick:()=>{h.type==="group"&&(window.location.href=`/group/${h.id}`)},title:h.type==="group"?"Click to view group info":"",children:[o.jsx("h3",{className:"font-semibold text-gray-900",children:h.name}),o.jsx("p",{className:"text-xs text-gray-500",children:h.type==="personal"?"last seen today at 10:30 AM":`${h.email}`})]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(mu,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"}),o.jsx(_o,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"}),o.jsx(ec,{className:"w-5 h-5 text-gray-600 cursor-pointer hover:text-gray-800"})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-50 relative",children:o.jsxs("div",{className:"max-w-8xl mx-auto",children:[S.map((w,_)=>{var E,M,I,$,te,Z,fe;let f=!1;if(typeof w.sender=="object"&&w.sender!==null){const Q=w.sender._id||w.sender.id;f=Q===e.id||Q===e._id||Q===((E=e.id)==null?void 0:E.toString())||Q===((M=e._id)==null?void 0:M.toString())}else f=w.sender===e.id||w.sender===e._id||w.sender===((I=e.id)==null?void 0:I.toString())||w.sender===(($=e._id)==null?void 0:$.toString());const j=typeof w.sender=="object"?(te=w.sender)==null?void 0:te.name:"User",T=typeof w.sender=="object"?(Z=w.sender)==null?void 0:Z.profileImage:null;return o.jsx("div",{className:`flex ${f?"justify-end":"justify-start"} mb-4`,children:o.jsxs("div",{className:`flex items-start gap-2 max-w-sm lg:max-w-md ${f?"flex-row-reverse":"flex-row"}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gray-300 flex-shrink-0",children:f?e.profileImage?o.jsx("img",{src:`${ve}${e.profileImage}`,alt:e.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:e.name.charAt(0).toUpperCase()})}):T?o.jsx("img",{src:`${ve}${T}`,alt:j,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-gray-400 flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-medium",children:String(j).charAt(0).toUpperCase()})})}),o.jsxs("div",{className:`flex flex-col px-3 py-2 rounded-lg ${f?"bg-green-500 text-white rounded-br-none":"bg-gray-200 text-gray-900 rounded-bl-none"} ${ge&&Y&&Tt(Y)===Tt(w)?"ring-2 ring-blue-400":""}`,onMouseDown:()=>Je(w),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Je(w),onTouchEnd:Re,onContextMenu:Q=>{Q.preventDefault(),ce(w),De(!0)},children:[w.fileUrl&&o.jsx("div",{className:"mb-2",children:w.messageType==="image"?o.jsxs("div",{className:"relative",onMouseDown:()=>Je(w),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Je(w),onTouchEnd:Re,children:[o.jsx("img",{src:V(w.fileUrl),alt:w.fileName,className:`max-w-xs rounded-lg ${!f&&!R[w.id||w._id]?"blur-sm cursor-pointer":"cursor-default"} hover:opacity-90`,onClick:()=>{f||fr(w.fileUrl,w.fileName,w.id||w._id)}}),!f&&!R[w.id||w._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Mr,{className:"w-3 h-3"}),((w.fileSize||0)/1024/1024).toFixed(1)," MB"]}),U[w.id||w._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[U[w.id||w._id].progress,"%"]})]})})]}):w.messageType==="video"?o.jsxs("div",{className:"relative",onMouseDown:()=>Je(w),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Je(w),onTouchEnd:Re,children:[o.jsx("video",{src:V(w.fileUrl),controls:!0,className:`max-w-xs rounded-lg ${!f&&!R[w.id||w._id]?"blur-sm":""}`,onClick:()=>{f||fr(w.fileUrl,w.fileName,w.id||w._id)}}),!f&&!R[w.id||w._id]&&o.jsxs("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 bg-black/60 text-white text-xs px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(Mr,{className:"w-3 h-3"}),((w.fileSize||0)/1024/1024).toFixed(1)," MB"]}),U[w.id||w._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-3 py-2 text-center",children:[o.jsx("div",{className:"w-8 h-8 border-4 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-2"}),o.jsxs("p",{className:"text-sm text-white",children:[U[w.id||w._id].progress,"%"]})]})})]}):o.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white bg-opacity-20 rounded-lg relative",onMouseDown:()=>Je(w),onMouseUp:Re,onMouseLeave:Re,onTouchStart:()=>Je(w),onTouchEnd:Re,children:[o.jsx(Or,{className:"w-5 h-5"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:w.fileName}),o.jsxs("p",{className:"text-xs opacity-75",children:[(w.fileSize/1024/1024).toFixed(2)," MB"]})]}),!f&&o.jsx("button",{onClick:()=>fr(w.fileUrl,w.fileName,w.id||w._id),className:"p-1 hover:bg-white hover:bg-opacity-20 rounded",disabled:(fe=U[w.id||w._id])==null?void 0:fe.downloading,children:o.jsx(Mr,{className:"w-4 h-4"})}),U[w.id||w._id]&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"bg-black/60 rounded-lg px-2 py-1 text-center",children:[o.jsx("div",{className:"w-6 h-6 border-2 border-white/40 border-t-white rounded-full animate-spin mx-auto mb-1"}),o.jsxs("p",{className:"text-xs text-white",children:[U[w.id||w._id].progress,"%"]})]})})]})}),w.message&&(en&&Tt(en)===Tt(w)?o.jsxs("div",{className:"mb-2",children:[o.jsx("input",{type:"text",value:xn,onChange:Q=>tn(Q.target.value),className:"w-full px-2 py-1 text-sm bg-white bg-opacity-20 rounded border-none focus:outline-none focus:ring-1 focus:ring-white",autoFocus:!0,onKeyDown:Q=>{Q.key==="Enter"&&ri(),Q.key==="Escape"&&Yr()}}),o.jsxs("div",{className:"flex gap-1 mt-1",children:[o.jsx("button",{onClick:ri,className:"text-xs px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700",children:"Save"}),o.jsx("button",{onClick:Yr,className:"text-xs px-2 py-1 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancel"})]})]}):o.jsxs("p",{className:"text-sm mb-1 break-words",children:[w.message,(w.isEdited||w.editedAt)&&o.jsx("span",{className:"text-xs opacity-75 ml-1",children:"(edited)"})]})),o.jsx("p",{className:`text-xs self-end ${f?"text-green-100":"text-gray-500"}`,children:new Date(w.createdAt||w.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},w.id||w._id||_)}),o.jsx("div",{ref:Xr})]})}),K&&o.jsx("div",{className:"bg-gray-50 border-t border-gray-200 p-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[J?o.jsx("img",{src:J,alt:"Preview",className:"w-12 h-12 rounded-lg object-cover"}):o.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:o.jsx(Or,{className:"w-6 h-6 text-gray-500"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:K.name}),o.jsxs("p",{className:"text-xs text-gray-500",children:[(K.size/1024/1024).toFixed(2)," MB"]})]})]}),o.jsx("button",{onClick:dr,className:"text-gray-500 hover:text-gray-700",children:o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})}),ee&&o.jsx("div",{className:"file-options-container absolute bottom-16 left-4 bg-white rounded-lg shadow-lg border border-gray-200 p-2 z-50",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:()=>Zr("image"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(pu,{className:"w-8 h-8 text-green-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Image"})]}),o.jsxs("button",{onClick:()=>Zr("video"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(_o,{className:"w-8 h-8 text-blue-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Video"})]}),o.jsxs("button",{onClick:()=>Zr("document"),className:"flex flex-col items-center p-3 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(Or,{className:"w-8 h-8 text-purple-600 mb-1"}),o.jsx("span",{className:"text-xs text-gray-700",children:"Document"})]})]})}),o.jsx("div",{className:"bg-white border-t border-gray-200 p-4 relative",children:o.jsxs("form",{onSubmit:es,className:"flex items-center space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>ae(!ee),className:"p-2 text-gray-500 hover:text-gray-700",title:"Attach file",children:o.jsx(bh,{className:"w-6 h-6"})}),o.jsx("div",{className:"flex-1 relative",children:o.jsx("input",{type:"text",value:m,onChange:w=>g(w.target.value),placeholder:"Type a message",className:"w-full py-2 px-4 bg-gray-100 rounded-full text-sm focus:outline-none focus:ring-2 focus:ring-green-400"})}),o.jsx("button",{type:"submit",disabled:!m.trim()&&!K,className:"bg-green-500 text-white p-2 rounded-full hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.jsx(Ch,{className:"w-5 h-5"})})]})})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(tr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold text-gray-600 mb-2",children:"Welcome to WhatsApp"}),o.jsx("p",{className:"text-gray-500 max-w-md",children:"Select a conversation from the sidebar to start messaging. Your conversations will appear on the left side."})]})})})]})})},Gw=()=>{const{user:e}=Zt(),[t,n]=N.useState([]),[r,s]=N.useState(!0),[i,l]=N.useState(""),[a,c]=N.useState(!1),[u,p]=N.useState(null),[d,v]=N.useState({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),[b,h]=N.useState(""),[y,S]=N.useState(!1),[x,m]=N.useState("list"),[g,C]=N.useState(new Set),O=k=>g.has(k),F=k=>{C(R=>{const P=new Set(R);return P.has(k)?P.delete(k):P.add(k),P})},z=()=>C(new Set),B=()=>C(new Set(U.map(k=>k.id))),X=async k=>{if(g.size===0)return;const R=k?"enable":"disable";if(window.confirm(`Are you sure you want to ${R} ${g.size} selected user(s)?`))try{const P=new Map(t.map(V=>[V.id,V]));for(const V of g){const ie=P.get(V);ie&&(ie.isActive??!0)!==k&&await it.toggleUserStatus(V)}G.success(`Selected users ${R}d`),z(),q()}catch(P){console.error("Bulk toggle error",P),G.error("Failed bulk update")}};N.useEffect(()=>{q()},[]);const q=async()=>{try{s(!0);const k=await it.getUsers();let R=k.data;e.role==="admin"&&(R=k.data.filter(P=>P.role!=="superadmin")),n(R)}catch(k){console.error("Error fetching users:",k),G.error("Failed to load users")}finally{s(!1)}},H=async k=>{var R,P;if(k.preventDefault(),!d.name.trim()){G.error("Name is required");return}if(!d.email.trim()){G.error("Email is required");return}if(!u&&!d.password.trim()){G.error("Password is required");return}try{const V={name:d.name.trim(),email:d.email.trim(),role:d.role,phone:d.phone.trim(),designation:d.designation.trim(),bio:d.bio.trim(),isActive:d.isActive};u?(d.password.trim()&&(V.password=d.password),await it.updateUser(u.id,V),G.success("User updated successfully")):(V.password=d.password,await it.createUser(V),G.success("User created successfully")),c(!1),p(null),v({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),q()}catch(V){console.error("User operation error:",V),G.error(((P=(R=V.response)==null?void 0:R.data)==null?void 0:P.message)||"Operation failed")}},K=async k=>{if(window.confirm("Are you sure you want to delete this user?"))try{await it.deleteUser(k),G.success("User deleted successfully"),q()}catch{G.error("Failed to delete user")}},L=async(k,R)=>{const P=R?"disable":"enable";if(window.confirm(`Are you sure you want to ${P} this user?`))try{await it.toggleUserStatus(k),G.success(`User ${P}d successfully`),q()}catch{G.error(`Failed to ${P} user`)}},J=k=>{p(k),v({name:k.name||"",email:k.email||"",password:"",role:k.role||"user",phone:k.phone||"",designation:k.designation||"",bio:k.bio||"",isActive:k.isActive!==!1}),h(k.password||""),S(!1),c(!0)},se=()=>{p(null),v({name:"",email:"",password:"",role:"user",phone:"",designation:"",bio:"",isActive:!0}),h(""),c(!0)},ee=k=>{switch(k){case"superadmin":return o.jsx(Eo,{className:"w-4 h-4 text-yellow-600"});case"admin":return o.jsx(ol,{className:"w-4 h-4 text-blue-600"});default:return o.jsx(Ft,{className:"w-4 h-4 text-gray-600"})}},ae=k=>{switch(k){case"superadmin":return"bg-yellow-100 text-yellow-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},U=t.filter(k=>{var R,P;return k.name.toLowerCase().includes(i.toLowerCase())||k.email.toLowerCase().includes(i.toLowerCase())||((R=k.designation)==null?void 0:R.toLowerCase().includes(i.toLowerCase()))||((P=k.phone)==null?void 0:P.includes(i))});return r?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",title:"Go back",children:o.jsx(sl,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),o.jsx("p",{className:"text-gray-600",children:e.role==="superadmin"?"Manage admins and users in the system":"Manage users in your organization"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex items-center rounded-md border border-gray-300 overflow-hidden",children:[o.jsx("button",{className:`px-3 py-2 text-sm ${x==="grid"?"bg-gray-200 text-gray-900":"bg-white text-gray-600"}`,onClick:()=>m("grid"),title:"Grid view",children:o.jsx(Pw,{className:"w-4 h-4"})}),o.jsx("button",{className:`px-3 py-2 text-sm ${x==="list"?"bg-gray-200 text-gray-900":"bg-white text-gray-600"}`,onClick:()=>m("list"),title:"List view",children:o.jsx(Mw,{className:"w-4 h-4"})})]}),o.jsxs("button",{onClick:se,className:"btn-primary inline-flex items-center",children:[o.jsx(gu,{className:"w-4 h-4 mr-2"}),"Add New User"]})]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"card p-6 mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search users by name, email, designation, or phone...",value:i,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),g.size>0&&o.jsxs("div",{className:"card p-4 mb-4 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-700",children:["Selected ",g.size," user(s)"]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:B,className:"btn-secondary",children:"Select all"}),o.jsx("button",{onClick:z,className:"btn-secondary",children:"Clear"}),o.jsx("button",{onClick:()=>X(!0),className:"btn-primary",children:"Enable selected"}),o.jsx("button",{onClick:()=>X(!1),className:"btn-secondary text-red-700",children:"Disable selected"})]})]}),x==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(k=>o.jsxs("div",{className:`relative card p-6 transition-all ${k.isActive?"hover:shadow-lg":"bg-gray-50 border-gray-300 opacity-75"}`,children:[o.jsx("label",{className:"absolute top-3 left-3 inline-flex items-center gap-2 bg-white/80 px-2 py-1 rounded shadow",children:o.jsx("input",{type:"checkbox",checked:O(k.id),onChange:()=>F(k.id)})}),o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`w-12 h-12 ${k.isActive?"bg-primary-100":"bg-gray-100"} rounded-lg flex items-center justify-center overflow-hidden`,children:k.profileImage?o.jsx("img",{src:`${ve}${k.profileImage}`,alt:"Profile",className:`w-12 h-12 rounded-lg object-cover ${k.isActive?"":"grayscale"}`}):o.jsx(Ft,{className:`w-6 h-6 ${k.isActive?"text-primary-600":"text-gray-400"}`})}),o.jsxs("div",{children:[o.jsx("h3",{className:`font-medium ${k.isActive?"text-gray-900":"text-gray-600"}`,children:k.name}),o.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[ee(k.role),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ae(k.role)}`,children:k.role})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[k.id!==(e==null?void 0:e.id)&&(k.role!=="superadmin"||(e==null?void 0:e.role)==="superadmin")&&o.jsxs("div",{className:"relative inline-flex bg-gray-200 rounded-full p-1 cursor-pointer",onClick:()=>L(k.id,k.isActive),children:[o.jsx("div",{className:"absolute top-1 bg-white rounded-full shadow-sm transition-transform duration-300",style:{width:"50%",height:"calc(100% - 8px)",left:k.isActive?"4px":"calc(50% + 2px)",transform:"none"}}),o.jsxs("div",{className:`relative z-10 px-4 py-2 text-xs font-medium rounded-full flex items-center space-x-1 transition-colors duration-200 ${k.isActive?"text-primary-600":"text-gray-500"}`,children:[o.jsx(Za,{className:"w-3 h-3"}),o.jsx("span",{children:"Active"})]}),o.jsxs("div",{className:`relative z-10 px-4 py-2 text-xs font-medium rounded-full flex items-center space-x-1 transition-colors duration-200 ${k.isActive?"text-gray-500":"text-primary-600"}`,children:[o.jsx(Iw,{className:"w-3 h-3"}),o.jsx("span",{children:"Disabled"})]})]}),o.jsx("button",{onClick:()=>J(k),className:"text-primary-600 hover:text-primary-900",title:"Edit user",children:o.jsx(Co,{className:"w-4 h-4"})}),k.role!=="superadmin"&&k.id!==(e==null?void 0:e.id)&&o.jsx("button",{onClick:()=>K(k.id),className:"text-red-600 hover:text-red-900",title:"Delete user",children:o.jsx(tc,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(kh,{className:"w-4 h-4 mr-2"}),o.jsx("span",{className:"truncate",children:k.email})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(mu,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:k.phone||"Not provided"})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(hu,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:k.designation||"Not provided"})]})]}),o.jsx("div",{className:"mb-4",children:o.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.bio||"No bio provided"})}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[k.isActive?o.jsx(Za,{className:"w-4 h-4 text-green-600"}):o.jsx($w,{className:"w-4 h-4 text-red-600"}),o.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${k.isActive?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:k.isActive?"Active":"Disabled"})]}),k.lastSeen&&o.jsxs("span",{className:"text-xs text-gray-500",children:["Last seen: ",new Date(k.lastSeen).toLocaleDateString()]})]})]},k.id))}):o.jsx("div",{className:"card p-0 overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:o.jsx("input",{type:"checkbox",onChange:k=>k.target.checked?B():z(),checked:g.size>0&&g.size===U.length})}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),o.jsx("th",{className:"px-4 py-3"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.map(k=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsx("input",{type:"checkbox",checked:O(k.id),onChange:()=>F(k.id)})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded bg-gray-100 overflow-hidden flex items-center justify-center",children:k.profileImage?o.jsx("img",{src:`${ve}${k.profileImage}`,alt:"Profile",className:"w-10 h-10 object-cover"}):o.jsx(Ft,{className:"w-5 h-5 text-gray-400"})}),o.jsxs("div",{children:[o.jsx("div",{className:`font-medium ${k.isActive?"text-gray-900":"text-gray-600"}`,children:k.name}),o.jsx("div",{className:"text-xs text-gray-500",children:k.designation||"—"})]})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ae(k.role)}`,children:k.role})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:k.email}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:k.phone||"—"}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${k.isActive?"text-green-700 bg-green-100":"text-red-700 bg-red-100"}`,children:k.isActive?"Active":"Disabled"})}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[k.id!==(e==null?void 0:e.id)&&(k.role!=="superadmin"||(e==null?void 0:e.role)==="superadmin")&&o.jsx("button",{className:"text-gray-600 hover:text-gray-900",title:"Toggle status",onClick:()=>L(k.id,k.isActive),children:k.isActive?o.jsx(Dw,{className:"w-5 h-5 text-green-600"}):o.jsx(Uw,{className:"w-5 h-5 text-gray-400"})}),o.jsx("button",{className:"text-primary-600 hover:text-primary-900",title:"Edit",onClick:()=>J(k),children:o.jsx(Co,{className:"w-4 h-4"})}),k.role!=="superadmin"&&k.id!==(e==null?void 0:e.id)&&o.jsx("button",{className:"text-red-600 hover:text-red-900",title:"Delete",onClick:()=>K(k.id),children:o.jsx(tc,{className:"w-4 h-4"})})]})})]},k.id))})]})})}),U.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Et,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),o.jsx("p",{className:"text-gray-500",children:i?"Try adjusting your search terms.":"No users have been created yet."})]})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:u?"Edit User":"Create New User"}),o.jsxs("form",{onSubmit:H,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),o.jsx("input",{type:"text",required:!0,value:d.name,onChange:k=>v({...d,name:k.target.value}),className:"input-field",placeholder:"Enter full name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),o.jsx("input",{type:"email",required:!0,value:d.email,onChange:k=>v({...d,email:k.target.value}),className:"input-field",placeholder:"Enter email address"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[u?"New Password":"Password",u&&o.jsx("span",{className:"text-gray-500 text-xs ml-1",children:"(leave blank to keep current)"})]}),o.jsx("input",{type:"password",required:!u,value:d.password,onChange:k=>v({...d,password:k.target.value}),className:"input-field",placeholder:u?"Enter new password (optional)":"Enter password"}),u&&o.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded border",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("label",{className:"block text-xs font-medium text-gray-600",children:"Current Password"}),o.jsxs("button",{type:"button",className:"text-xs text-primary-600 hover:text-primary-800 inline-flex items-center gap-1",onClick:()=>S(k=>!k),children:[y?o.jsx(Rw,{className:"w-3 h-3"}):o.jsx(Aw,{className:"w-3 h-3"}),y?"Hide":"Show"]})]}),o.jsx("input",{type:y?"text":"password",readOnly:!0,value:b||"[Password not available - please set new password]",className:"w-full input-field font-mono"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),o.jsxs("select",{value:d.role,onChange:k=>v({...d,role:k.target.value}),className:"input-field",children:[o.jsx("option",{value:"user",children:"User"}),e.role==="superadmin"&&o.jsx("option",{value:"admin",children:"Admin"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),o.jsx("input",{type:"tel",value:d.phone,onChange:k=>v({...d,phone:k.target.value}),className:"input-field",placeholder:"Enter phone number"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Designation"}),o.jsx("input",{type:"text",value:d.designation,onChange:k=>v({...d,designation:k.target.value}),className:"input-field",placeholder:"Enter designation"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),o.jsx("textarea",{value:d.bio,onChange:k=>v({...d,bio:k.target.value}),className:"input-field",rows:"3",placeholder:"Enter bio (optional)"})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"isActive",checked:d.isActive,onChange:k=>v({...d,isActive:k.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"User is active"})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary",children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn-primary",children:u?"Update User":"Create User"})]})]})]})})]})},Ww=()=>{const{user:e}=Zt(),[t,n]=N.useState([]),[r,s]=N.useState([]),[i,l]=N.useState(!0),[a,c]=N.useState(""),[u,p]=N.useState(!1),[d,v]=N.useState(null),[b,h]=N.useState({name:"",description:"",members:[]}),[y,S]=N.useState(null),[x,m]=N.useState(null);N.useEffect(()=>{g()},[]);const g=async()=>{var L,J;try{l(!0);const[se,ee]=await Promise.all([It.getGroups(),it.getActiveUsers()]);console.log("Groups response:",se.data),console.log("First group:",se.data[0]),console.log("First group ID:",(L=se.data[0])==null?void 0:L.id),console.log("First group _ID:",(J=se.data[0])==null?void 0:J._id);const ae=se.data.map(U=>({...U,id:U.id||U._id}));console.log("Transformed groups:",ae),n(ae),s(ee.data.filter(U=>U.id!==e.id))}catch(se){console.error("Error fetching data:",se),G.error("Failed to load data")}finally{l(!1)}},C=async L=>{var J,se;if(L.preventDefault(),!b.name.trim()){G.error("Group name is required");return}if(b.members.length===0){G.error("Please add at least one member to the group");return}try{console.log("Submitting group data:",b),console.log("Editing group:",d),console.log("Editing group ID:",d==null?void 0:d.id);let ee;if(d){if(!d.id){console.error("No group ID found for editing:",d),G.error("Invalid group ID for editing");return}await It.updateGroup(d.id,b),ee=d.id,G.success("Group updated successfully")}else{const ae=await It.createGroup(b);console.log("Group creation result:",ae.data),ee=ae.data.group._id||ae.data.group.id,G.success("Group created successfully")}if(y&&ee)try{const ae=new FormData;ae.append("avatar",y),await It.uploadGroupAvatar(ee,ae),G.success("Group avatar uploaded successfully")}catch(ae){console.error("Avatar upload error:",ae),G.error("Group created but avatar upload failed")}p(!1),v(null),h({name:"",description:"",members:[]}),S(null),m(null),g()}catch(ee){console.error("Group operation error:",ee),G.error(((se=(J=ee.response)==null?void 0:J.data)==null?void 0:se.message)||"Operation failed")}},O=async L=>{if(window.confirm("Are you sure you want to delete this group?"))try{await It.deleteGroup(L),G.success("Group deleted successfully"),g()}catch{G.error("Failed to delete group")}},F=L=>{var ee;console.log("Editing group:",L),console.log("Group ID:",L.id),console.log("Group _id:",L._id);const J=L.id||L._id;if(!J){console.error("No valid group ID found:",L),G.error("Invalid group selected");return}const se={...L,id:J};console.log("Group with ID:",se),v(se),h({name:L.name,description:L.description||"",members:((ee=L.members)==null?void 0:ee.map(ae=>({user:ae.user.id||ae.user,role:ae.role})))||[]}),S(null),m(null),p(!0)},z=()=>{v(null),h({name:"",description:"",members:[]}),S(null),m(null),p(!0)},B=L=>{const J=L.target.files[0];if(J){S(J);const se=new FileReader;se.onload=ee=>m(ee.target.result),se.readAsDataURL(J)}},X=L=>{if(console.log("Adding member:",L),console.log("Current members:",b.members),b.members.find(J=>J.user===L))console.log("Member already exists");else{const J={user:L,role:"member"},se=[...b.members,J];console.log("Updated members:",se),h({...b,members:se})}},q=L=>{h({...b,members:b.members.filter(J=>J.user!==L)})},H=t.filter(L=>{var J;return L.name.toLowerCase().includes(a.toLowerCase())||((J=L.description)==null?void 0:J.toLowerCase().includes(a.toLowerCase()))}),K=r.filter(L=>!b.members.find(J=>J.user===L.id));return i?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>window.history.back(),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",title:"Go back",children:o.jsx(sl,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Group Management"}),o.jsx("p",{className:"text-gray-600",children:"Create and manage groups for team communication"})]})]}),o.jsxs("button",{onClick:z,className:"btn-primary inline-flex items-center",children:[o.jsx(Eh,{className:"w-4 h-4 mr-2"}),"Create Group"]})]})})}),o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"card p-6 mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(il,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Search groups...",value:a,onChange:L=>c(L.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(L=>{var J,se,ee;return o.jsxs("div",{className:"card p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center overflow-hidden",children:L.avatar?o.jsx("img",{src:`${ve}${L.avatar}`,alt:"Group avatar",className:"w-12 h-12 rounded-lg object-cover"}):o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(Et,{className:"w-6 h-6 text-green-600"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-900",children:L.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[((J=L.members)==null?void 0:J.length)||0," members"]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>F(L),className:"text-primary-600 hover:text-primary-900",children:o.jsx(Co,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>O(L.id),className:"text-red-600 hover:text-red-900",children:o.jsx(tc,{className:"w-4 h-4"})})]})]}),L.description&&o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:L.description}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Members:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[(se=L.members)==null?void 0:se.slice(0,3).map((ae,U)=>{var k,R,P;return o.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 rounded-full px-2 py-1",children:[o.jsx("div",{className:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-primary-600",children:((R=(k=ae.user)==null?void 0:k.name)==null?void 0:R.charAt(0))||"U"})}),o.jsx("span",{className:"text-xs text-gray-700",children:((P=ae.user)==null?void 0:P.name)||"Unknown"})]},U)}),((ee=L.members)==null?void 0:ee.length)>3&&o.jsxs("span",{className:"text-xs text-gray-500",children:["+",L.members.length-3," more"]})]})]})]},L.id)})}),H.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Et,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No groups found"}),o.jsx("p",{className:"text-gray-500",children:a?"Try adjusting your search terms.":"Get started by creating your first group."})]})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:d?"Edit Group":"Create Group"}),o.jsxs("form",{onSubmit:C,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Group Name"}),o.jsx("input",{type:"text",required:!0,value:b.name,onChange:L=>h({...b,name:L.target.value}),className:"input-field",placeholder:"Enter group name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{value:b.description,onChange:L=>h({...b,description:L.target.value}),className:"input-field",rows:"3",placeholder:"Enter group description (optional)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Avatar"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex-shrink-0",children:x?o.jsx("img",{src:x,alt:"Avatar preview",className:"w-16 h-16 rounded-lg object-cover border-2 border-gray-200"}):o.jsx("div",{className:"w-16 h-16 rounded-lg bg-gray-100 border-2 border-gray-200 flex items-center justify-center",children:o.jsx(pu,{className:"w-6 h-6 text-gray-400"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:B,className:"hidden",id:"avatar-upload"}),o.jsxs("label",{htmlFor:"avatar-upload",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer transition-colors",children:[o.jsx(Fw,{className:"w-4 h-4 mr-2"}),y?"Change Avatar":"Upload Avatar"]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, GIF up to 5MB"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),b.members.length>0&&o.jsx("div",{className:"mb-3",children:o.jsx("div",{className:"flex flex-wrap gap-2",children:b.members.map((L,J)=>{const se=r.find(ee=>ee.id===L.user);return o.jsxs("div",{className:"flex items-center space-x-1 bg-primary-100 rounded-full px-3 py-1",children:[o.jsx("span",{className:"text-sm text-primary-700",children:se==null?void 0:se.name}),o.jsx("button",{type:"button",onClick:()=>q(L.user),className:"text-primary-600 hover:text-primary-800",children:o.jsx(To,{className:"w-3 h-3"})})]},J)})})}),o.jsxs("div",{className:"border border-gray-300 rounded-lg p-3",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Add Members:"}),o.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:K.map(L=>o.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-medium text-primary-600",children:L.name.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:L.name}),o.jsx("p",{className:"text-xs text-gray-500",children:L.email})]})]}),o.jsx("button",{type:"button",onClick:()=>X(L.id),className:"text-primary-600 hover:text-primary-800",children:o.jsx(gu,{className:"w-4 h-4"})})]},L.id))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn-secondary",children:"Cancel"}),o.jsx("button",{type:"submit",className:"btn-primary",children:d?"Update":"Create"})]})]})]})})]})},qw=()=>{var v,b,h,y,S,x;const{groupId:e}=My(),t=qo();Zt();const[n,r]=N.useState(null),[s,i]=N.useState(!0),[l,a]=N.useState(!1);N.useEffect(()=>{c()},[e]);const c=async()=>{try{i(!0);const g=(await It.getGroups()).data.find(C=>C.id===e);if(!g){G.error("Group not found"),t("/chat");return}r(g)}catch(m){console.error("Error fetching group details:",m),G.error("Failed to load group details"),t("/chat")}finally{i(!1)}},u=m=>{switch(m){case"admin":return o.jsx(ol,{className:"w-4 h-4 text-blue-600"});default:return o.jsx(Ft,{className:"w-4 h-4 text-gray-600"})}},p=m=>{switch(m){case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},d=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return s?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center py-4",children:[o.jsx("button",{onClick:()=>t("/chat"),className:"mr-4 p-2 text-gray-600 hover:text-gray-900 transition-colors",title:"Back to chat",children:o.jsx(sl,{className:"w-5 h-5"})}),o.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Group Info"})]})})}),o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"card p-8 text-center mb-6",children:[o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-4 border-white shadow-lg",children:n.avatar?o.jsx("img",{src:`${ve}${n.avatar}`,alt:"Group avatar",className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-green-500 flex items-center justify-center",children:o.jsx(Et,{className:"w-16 h-16 text-white"})})})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n.name}),n.description&&o.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:n.description}),o.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Et,{className:"w-4 h-4"}),o.jsxs("span",{children:[((v=n.members)==null?void 0:v.length)||0," members"]})]}),o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Cw,{className:"w-4 h-4"}),o.jsxs("span",{children:["Created ",d(n.createdAt)]})]})]})]}),o.jsxs("div",{className:"card p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Members"}),o.jsxs("button",{onClick:()=>a(!l),className:"text-primary-600 hover:text-primary-800 transition-colors",children:[l?"Hide":"Show"," (",((b=n.members)==null?void 0:b.length)||0,")"]})]}),l&&o.jsx("div",{className:"space-y-3",children:(h=n.members)==null?void 0:h.map((m,g)=>o.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[o.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200",children:m.user.profileImage?o.jsx("img",{src:`${ve}${m.user.profileImage}`,alt:m.user.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full bg-primary-500 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-semibold text-sm",children:m.user.name.charAt(0).toUpperCase()})})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("h4",{className:"font-medium text-gray-900",children:m.user.name}),o.jsxs("div",{className:"flex items-center space-x-1",children:[u(m.role),o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${p(m.role)}`,children:m.role})]})]}),o.jsx("p",{className:"text-sm text-gray-500",children:m.user.email})]}),o.jsx("div",{className:"text-xs text-gray-400",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx(Tw,{className:"w-3 h-3"}),o.jsxs("span",{children:["Joined ",d(m.joinedAt)]})]})})]},g))})]}),o.jsxs("div",{className:"card p-6 mt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Group Statistics"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-primary-600",children:((y=n.members)==null?void 0:y.length)||0}),o.jsx("div",{className:"text-sm text-gray-500",children:"Total Members"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-green-600",children:((S=n.members)==null?void 0:S.filter(m=>m.role==="admin").length)||0}),o.jsx("div",{className:"text-sm text-gray-500",children:"Admins"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.ceil((((x=n.members)==null?void 0:x.length)||0)/2)}),o.jsx("div",{className:"text-sm text-gray-500",children:"Active Conversations"})]})]})]})]})]}):o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Group not found"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"The group you're looking for doesn't exist."}),o.jsx("button",{onClick:()=>t("/chat"),className:"btn-primary",children:"Back to Chat"})]})})},Kw=()=>{const{user:e,setUser:t}=Zt(),[n,r]=N.useState({name:"",email:"",phone:"",designation:"",profileImage:"",bio:""}),[s,i]=N.useState(!1),[l,a]=N.useState(!1),[c,u]=N.useState(null),[p,d]=N.useState(null);N.useEffect(()=>{e&&(r({name:e.name||"",email:e.email||"",phone:e.phone||"",designation:e.designation||"",profileImage:e.profileImage||"",bio:e.bio||""}),u(e.profileImage||null))},[e]);const v=x=>{const{name:m,value:g}=x.target;r(C=>({...C,[m]:g}))},b=x=>{const m=x.target.files[0];if(m){d(m);const g=new FileReader;g.onload=C=>{u(C.target.result)},g.readAsDataURL(m)}},h=()=>{d(null),u(null),r(x=>({...x,profileImage:""}))},y=async x=>{var m;x.preventDefault(),a(!0);try{const g=new FormData;g.append("name",n.name),g.append("phone",n.phone),g.append("designation",n.designation),g.append("bio",n.bio),p&&g.append("profileImage",p);const O=((m=(await it.updateProfile(g)).data)==null?void 0:m.user)||{};r(F=>({...F,name:O.name??F.name,phone:O.phone??F.phone,designation:O.designation??F.designation,bio:O.bio??F.bio,profileImage:O.profileImage??F.profileImage})),O.profileImage&&u(O.profileImage),t(F=>F?{...F,...O}:O),G.success("Profile updated successfully"),i(!1)}catch(g){console.error("Profile update error:",g),G.error("Failed to update profile")}finally{a(!1)}},S=()=>{i(!1),r({name:e.name||"",email:e.email||"",phone:e.phone||"",designation:e.designation||"",profileImage:e.profileImage||"",bio:e.bio||""}),u(e.profileImage||null),d(null)};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx("div",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex items-center justify-between py-6",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(jo,{to:"/dashboard",className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(sl,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profile"}),o.jsx("p",{className:"text-gray-600",children:"Manage your profile information"})]})]}),!s&&o.jsxs("button",{onClick:()=>i(!0),className:"btn-primary inline-flex items-center",children:[o.jsx(Co,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx("div",{className:"card p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:"relative inline-block",children:[c?o.jsx("img",{src:c.startsWith("http")?c:`${ve}${c}`,alt:"Profile",className:"w-32 h-32 rounded-full object-cover mx-auto"}):o.jsx("div",{className:"w-32 h-32 bg-primary-100 rounded-full flex items-center justify-center mx-auto",children:o.jsx(Ft,{className:"w-16 h-16 text-primary-600"})}),s&&o.jsx("div",{className:"absolute bottom-0 right-0",children:o.jsxs("label",{className:"bg-primary-600 text-white p-2 rounded-full cursor-pointer hover:bg-primary-700 transition-colors",children:[o.jsx(_w,{className:"w-4 h-4"}),o.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})})]}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mt-4",children:n.name}),o.jsx("p",{className:"text-gray-600",children:n.designation||"No designation"}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:n.email}),s&&c&&o.jsxs("button",{onClick:h,className:"mt-2 text-red-600 hover:text-red-700 text-sm inline-flex items-center",children:[o.jsx(To,{className:"w-4 h-4 mr-1"}),"Remove Image"]})]})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"card p-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:s?"Edit Profile Information":"Profile Information"}),s?o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),o.jsx("input",{type:"text",name:"name",value:n.name,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),o.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"+1 (555) 123-4567"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Designation"}),o.jsx("input",{type:"text",name:"designation",value:n.designation,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Software Developer"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:n.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Email cannot be changed"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio"}),o.jsx("textarea",{name:"bio",value:n.bio,onChange:v,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Tell us about yourself..."})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx("button",{type:"button",onClick:S,className:"btn-secondary",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:l,className:"btn-primary inline-flex items-center",children:l?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Lw,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ft,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Name"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.name||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(mu,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Phone"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.phone||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Ew,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Designation"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.designation||"Not provided"})]})]}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(kh,{className:"w-5 h-5 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Email"}),o.jsx("p",{className:"text-sm text-gray-600",children:n.email})]})]})]}),n.bio&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:"Bio"}),o.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-4 rounded-lg",children:n.bio})]})]})]})})]})})]})};function Qw(){const e=qo(),[t,n]=N.useState(!0),[r,s]=N.useState([]),[i,l]=N.useState([]),[a,c]=N.useState(new Set),[u,p]=N.useState(new Set),[d,v]=N.useState(null),[b,h]=N.useState(!1),[y,S]=N.useState("users"),[x,m]=N.useState(""),g=H=>H&&(/^https?:\/\//i.test(H)?H:`${ve}${H}`),C=H=>{if(!H&&H!==0)return"";const K=H/1024/1024;return`${K.toFixed(K<.1?2:1)} MB`};N.useEffect(()=>{try{const H=sessionStorage.getItem("forwardMessage");H&&v(JSON.parse(H))}catch{}},[]),N.useEffect(()=>{(async()=>{try{n(!0);const[K,L]=await Promise.all([it.getActiveUsers(),It.getGroups()]);s(K.data||[]),l((L.data||[]).filter(J=>J.isActive!==!1))}catch{}finally{n(!1)}})()},[]);const O=H=>{c(K=>{const L=new Set(K);return L.has(H)?L.delete(H):L.add(H),L})},F=H=>{p(K=>{const L=new Set(K);return L.has(H)?L.delete(H):L.add(H),L})},z=async()=>{if(!(!(d!=null&&d.id)&&!(d!=null&&d._id))&&!(a.size===0&&u.size===0))try{h(!0),await _e.forwardMessage({messageId:d.id||d._id,targets:{users:Array.from(a),groups:Array.from(u)}}),sessionStorage.removeItem("forwardMessage"),e(-1)}catch{h(!1)}};if(t)return o.jsx("div",{className:"p-6",children:"Loading..."});const B=r.filter(H=>H.name.toLowerCase().includes(x.toLowerCase())||(H.email||"").toLowerCase().includes(x.toLowerCase())),X=i.filter(H=>H.name.toLowerCase().includes(x.toLowerCase())),q=a.size+u.size;return o.jsxs("div",{className:"h-screen bg-white",children:[o.jsxs("div",{className:"sticky top-0 z-10 bg-gray-100 text-white",children:[o.jsx("div",{className:"max-w-3xl mx-auto px-4 pt-3",children:o.jsx("input",{value:x,onChange:H=>m(H.target.value),placeholder:"Search name or group",className:"w-full bg-white text-gray-800 rounded-full px-4 py-2 text-sm focus:outline-none",type:"text"})}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-2 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"inline-flex bg-white rounded-full p-1",children:[o.jsx("button",{className:`px-4 py-1 text-sm rounded-full ${y==="users"?"bg-gray-200 text-gray-800":"text-gray-800"}`,onClick:()=>S("users"),children:"Chats"}),o.jsx("button",{className:`px-4 py-1 text-sm rounded-full ${y==="groups"?"bg-gray-200 text-gray-800":"text-gray-800"}`,onClick:()=>S("groups"),children:"Groups"})]}),o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsx("div",{className:"font-semibold -ml-4 whitespace-nowrap text-gray-800",children:"Forward"})}),o.jsxs("div",{className:"text-sm opacity-90 whitespace-nowrap text-gray-800",children:[q," selected"]})]})]}),o.jsxs("div",{className:"max-w-3xl mx-auto px-4 pt-3 pb-24",children:[d&&o.jsx("div",{className:"mb-3",children:o.jsxs("div",{className:"bg-gray-100 rounded-2xl p-3 inline-block max-w-full",children:[o.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.jsx("div",{className:"text-xs font-medium text-gray-600",children:"Preview"})}),d.messageType==="image"?o.jsxs("div",{className:"max-w-[200px]",children:[o.jsx("img",{src:g(d.fileUrl),alt:d.fileName||"image",className:"rounded-lg w-full h-auto max-h-[150px] object-cover"}),d.message&&o.jsx("div",{className:"mt-2 text-sm text-gray-800 break-words",children:d.message}),o.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):d.messageType==="video"?o.jsxs("div",{className:"max-w-[200px]",children:[o.jsx("video",{src:g(d.fileUrl),controls:!0,className:"rounded-lg w-full h-auto max-h-[150px] object-cover"}),d.message&&o.jsx("div",{className:"mt-2 text-sm text-gray-800 break-words",children:d.message}),o.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):d.messageType&&d.messageType!=="text"?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white rounded-lg shadow-sm",children:[o.jsx("svg",{className:"w-6 h-6 text-gray-600",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zM8 18h8v2H8v-2zm0-4h8v2H8v-2zm6-7.5V9h3.5L14 6.5z"})}),o.jsxs("div",{className:"min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:d.fileName||"Attachment"}),o.jsx("div",{className:"text-xs text-gray-500",children:C(d.fileSize)}),d.message&&o.jsx("div",{className:"text-sm text-gray-800 break-words mt-1",children:d.message})]})]}),o.jsxs("div",{className:"mt-2",children:[a.size>0&&u.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-blue-100 text-blue-700",children:"Personal"}),u.size>0&&a.size===0&&o.jsx("span",{className:"inline-block text-[10px] px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:"Group"})]})]}):o.jsx("div",{className:"text-sm text-gray-800 break-words max-w-[200px]",children:d.message})]})}),y==="users"?o.jsxs("div",{className:"divide-y border rounded-xl overflow-hidden",children:[B.map(H=>{var K,L;return o.jsxs("button",{onClick:()=>O(H.id),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50",children:[o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-green-500 text-white flex items-center justify-center",children:H.profileImage?o.jsx("img",{src:`${ve}${H.profileImage}`,alt:H.name,className:"w-full h-full object-cover"}):o.jsx("span",{className:"font-semibold",children:(L=(K=H.name)==null?void 0:K[0])==null?void 0:L.toUpperCase()})}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:H.name}),o.jsx("div",{className:"text-xs text-gray-500 truncate",children:H.email})]}),o.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${a.has(H.id)?"bg-green-500 border-green-500":"border-gray-300"}`,children:a.has(H.id)&&o.jsx("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},H.id)}),B.length===0&&o.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"No chats found"})]}):o.jsxs("div",{className:"divide-y border rounded-xl overflow-hidden",children:[X.map(H=>{var L;const K=H.id||H._id;return o.jsxs("button",{onClick:()=>F(K),className:"w-full flex items-center gap-3 p-3 hover:bg-gray-50",children:[o.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-green-500 text-white flex items-center justify-center",children:H.avatar?o.jsx("img",{src:`${ve}${H.avatar}`,alt:H.name,className:"w-full h-full object-cover"}):o.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V20h6v-3.5c0-2.33-4.67-3.5-7-3.5z"})})}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:H.name}),o.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[((L=H.members)==null?void 0:L.length)||0," members"]})]}),o.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center ${u.has(K)?"bg-green-500 border-green-500":"border-gray-300"}`,children:u.has(K)&&o.jsx("svg",{className:"w-3 h-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-7.25 7.25a1 1 0 01-1.414 0l-3-3a1 1 0 111.414-1.414l2.293 2.293 6.543-6.543a1 1 0 011.414 0z",clipRule:"evenodd"})})})]},K)}),X.length===0&&o.jsx("div",{className:"p-6 text-center text-sm text-gray-500",children:"No groups found"})]})]}),o.jsx("div",{className:"fixed bottom-0 inset-x-0 bg-white border-t",children:o.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-3 flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:[q," selected"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{className:"btn-secondary",onClick:()=>e(-1),children:"Cancel"}),o.jsx("button",{className:"btn-primary",disabled:b||q===0,onClick:z,children:"Send"})]})]})})]})}const _h=({size:e="md"})=>{const t={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"};return o.jsx("div",{className:"flex items-center justify-center",children:o.jsx("div",{className:`${t[e]} animate-spin rounded-full border-4 border-gray-200 border-t-primary-600`})})};function wn({children:e,allowedRoles:t}){const{user:n,loading:r}=Zt();return r?o.jsx(_h,{}):n?t&&!t.includes(n.role)?o.jsx(bs,{to:"/dashboard",replace:!0}):e:o.jsx(bs,{to:"/login",replace:!0})}function Jw(){return o.jsx(E1,{children:o.jsx(tx,{children:o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(Wx,{position:"top-right"}),o.jsx(Yw,{})]})})})}function Yw(){const{user:e,loading:t}=Zt();return t?o.jsx(_h,{}):o.jsx(o.Fragment,{children:e?o.jsx(Sw,{user:e,children:o.jsxs(Od,{children:[o.jsx(ft,{path:"/login",element:o.jsx(bs,{to:"/dashboard",replace:!0})}),o.jsx(ft,{path:"/dashboard",element:o.jsx(wn,{children:e&&e.role==="user"?o.jsx(af,{}):o.jsx(Bw,{})})}),o.jsx(ft,{path:"/user-dashboard",element:o.jsx(wn,{allowedRoles:["user"],children:o.jsx(af,{})})}),o.jsx(ft,{path:"/chat",element:o.jsx(wn,{children:o.jsx(Vw,{})})}),o.jsx(ft,{path:"/users",element:o.jsx(wn,{allowedRoles:["superadmin","admin"],children:o.jsx(Gw,{})})}),o.jsx(ft,{path:"/groups",element:o.jsx(wn,{allowedRoles:["admin"],children:o.jsx(Ww,{})})}),o.jsx(ft,{path:"/group/:groupId",element:o.jsx(wn,{children:o.jsx(qw,{})})}),o.jsx(ft,{path:"/profile",element:o.jsx(wn,{children:o.jsx(Kw,{})})}),o.jsx(ft,{path:"/forward",element:o.jsx(wn,{children:o.jsx(Qw,{})})}),o.jsx(ft,{path:"/",element:o.jsx(bs,{to:"/dashboard",replace:!0})})]})}):o.jsxs(Od,{children:[o.jsx(ft,{path:"/login",element:o.jsx(zw,{})}),o.jsx(ft,{path:"*",element:o.jsx(bs,{to:"/login",replace:!0})})]})})}Vl.createRoot(document.getElementById("root")).render(o.jsx(vf.StrictMode,{children:o.jsx(Jw,{})}));
